"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginIView = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function isEmptyValue(cellValue) {
  return cellValue === null || cellValue === undefined || cellValue === '';
}

function getModelProp(renderOpts) {
  return 'value';
}

function getModelEvent(renderOpts) {
  return 'input';
}

function getChangeEvent(renderOpts) {
  return 'on-change';
}

function getFormatDate(value, props, defaultFormat) {
  return _xeUtils["default"].toDateString(value, props.format || defaultFormat);
}

function getFormatDates(values, props, separator, defaultFormat) {
  return _xeUtils["default"].map(values, function (date) {
    return getFormatDate(date, props, defaultFormat);
  }).join(separator);
}

function equalDaterange(cellValue, data, props, defaultFormat) {
  cellValue = getFormatDate(cellValue, props, defaultFormat);
  return cellValue >= getFormatDate(data[0], props, defaultFormat) && cellValue <= getFormatDate(data[1], props, defaultFormat);
}

function getCellEditFilterProps(renderOpts, params, value, defaultProps) {
  var vSize = params.$table.vSize;
  return _xeUtils["default"].assign(vSize ? {
    size: vSize
  } : {}, defaultProps, renderOpts.props, _defineProperty({}, getModelProp(renderOpts), value));
}

function getItemProps(renderOpts, params, value, defaultProps) {
  var vSize = params.$form.vSize;
  return _xeUtils["default"].assign(vSize ? {
    size: vSize
  } : {}, defaultProps, renderOpts.props, _defineProperty({}, getModelProp(renderOpts), value));
}

function formatText(cellValue) {
  return '' + (isEmptyValue(cellValue) ? '' : cellValue);
}

function getCellLabelVNs(h, renderOpts, params, cellLabel) {
  var placeholder = renderOpts.placeholder;
  return [h('span', {
    "class": 'vxe-cell--label'
  }, placeholder && isEmptyValue(cellLabel) ? [h('span', {
    "class": 'vxe-cell--placeholder'
  }, formatText(placeholder))] : formatText(cellLabel))];
}

function getNativeOns(renderOpts, params) {
  var nativeEvents = renderOpts.nativeEvents;
  var nativeOns = {};

  _xeUtils["default"].objectEach(nativeEvents, function (func, key) {
    nativeOns[key] = function () {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      func.apply(void 0, [params].concat(args));
    };
  });

  return nativeOns;
}

function getOns(renderOpts, params, inputFunc, changeFunc) {
  var events = renderOpts.events;
  var modelEvent = getModelEvent(renderOpts);
  var changeEvent = getChangeEvent(renderOpts);
  var isSameEvent = changeEvent === modelEvent;
  var ons = {};

  _xeUtils["default"].objectEach(events, function (func, key) {
    ons[key] = function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      func.apply(void 0, [params].concat(args));
    };
  });

  if (inputFunc) {
    ons[modelEvent] = function (targetEvnt) {
      inputFunc(targetEvnt);

      if (events && events[modelEvent]) {
        events[modelEvent](params, targetEvnt);
      }

      if (isSameEvent && changeFunc) {
        changeFunc(targetEvnt);
      }
    };
  }

  if (!isSameEvent && changeFunc) {
    ons[changeEvent] = function () {
      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }

      changeFunc.apply(void 0, args);

      if (events && events[changeEvent]) {
        events[changeEvent].apply(events, [params].concat(args));
      }
    };
  }

  return ons;
}

function getEditOns(renderOpts, params) {
  var $table = params.$table,
      row = params.row,
      column = params.column;
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    _xeUtils["default"].set(row, column.property, value);
  }, function () {
    // 处理 change 事件相关逻辑
    $table.updateStatus(params);
  });
}

function getFilterOns(renderOpts, params, option, changeFunc) {
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    option.data = value;
  }, changeFunc);
}

function getItemOns(renderOpts, params) {
  var $form = params.$form,
      data = params.data,
      property = params.property;
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    _xeUtils["default"].set(data, property, value);
  }, function () {
    // 处理 change 事件相关逻辑
    $form.updateStatus(params);
  });
}

function matchCascaderData(index, list, values, labels) {
  var val = values[index];

  if (list && values.length > index) {
    _xeUtils["default"].each(list, function (item) {
      if (item.value === val) {
        labels.push(item.label);
        matchCascaderData(++index, item.children, values, labels);
      }
    });
  }
}

function getSelectCellValue(renderOpts, params) {
  var _renderOpts$options = renderOpts.options,
      options = _renderOpts$options === void 0 ? [] : _renderOpts$options,
      optionGroups = renderOpts.optionGroups,
      _renderOpts$props = renderOpts.props,
      props = _renderOpts$props === void 0 ? {} : _renderOpts$props,
      _renderOpts$optionPro = renderOpts.optionProps,
      optionProps = _renderOpts$optionPro === void 0 ? {} : _renderOpts$optionPro,
      _renderOpts$optionGro = renderOpts.optionGroupProps,
      optionGroupProps = _renderOpts$optionGro === void 0 ? {} : _renderOpts$optionGro;
  var row = params.row,
      column = params.column;
  var $table = params.$table;
  var labelProp = optionProps.label || 'label';
  var valueProp = optionProps.value || 'value';
  var groupOptions = optionGroupProps.options || 'options';

  var cellValue = _xeUtils["default"].get(row, column.property);

  var colid = column.id;
  var rest;
  var cellData;

  if (props.filterable) {
    var fullAllDataRowMap = $table.fullAllDataRowMap;
    var cacheCell = fullAllDataRowMap.has(row);

    if (cacheCell) {
      rest = fullAllDataRowMap.get(row);
      cellData = rest.cellData;

      if (!cellData) {
        cellData = fullAllDataRowMap.get(row).cellData = {};
      }
    }

    if (rest && cellData[colid] && cellData[colid].value === cellValue) {
      return cellData[colid].label;
    }
  }

  if (!isEmptyValue(cellValue)) {
    return _xeUtils["default"].map(props.multiple ? cellValue : [cellValue], optionGroups ? function (value) {
      var selectItem;

      for (var index = 0; index < optionGroups.length; index++) {
        selectItem = _xeUtils["default"].find(optionGroups[index][groupOptions], function (item) {
          return item[valueProp] === value;
        });

        if (selectItem) {
          break;
        }
      }

      var cellLabel = selectItem ? selectItem[labelProp] : value;

      if (cellData && options && options.length) {
        cellData[colid] = {
          value: cellValue,
          label: cellLabel
        };
      }

      return cellLabel;
    } : function (value) {
      var selectItem = _xeUtils["default"].find(options, function (item) {
        return item[valueProp] === value;
      });

      var cellLabel = selectItem ? selectItem[labelProp] : value;

      if (cellData && options && options.length) {
        cellData[colid] = {
          value: cellValue,
          label: cellLabel
        };
      }

      return cellLabel;
    }).join(', ');
  }

  return '';
}

function getCascaderCellValue(renderOpts, params) {
  var _renderOpts$props2 = renderOpts.props,
      props = _renderOpts$props2 === void 0 ? {} : _renderOpts$props2;
  var row = params.row,
      column = params.column;

  var cellValue = _xeUtils["default"].get(row, column.property);

  var values = cellValue || [];
  var labels = [];
  matchCascaderData(0, props.data, values, labels);
  return labels.join(" ".concat(props.separator || '/', " "));
}

function getDatePickerCellValue(renderOpts, params) {
  var _renderOpts$props3 = renderOpts.props,
      props = _renderOpts$props3 === void 0 ? {} : _renderOpts$props3;
  var row = params.row,
      column = params.column;
  var separator = props.separator;

  var cellValue = _xeUtils["default"].get(row, column.property);

  switch (props.type) {
    case 'week':
      cellValue = getFormatDate(cellValue, props, 'yyyywWW');
      break;

    case 'month':
      cellValue = getFormatDate(cellValue, props, 'yyyy-MM');
      break;

    case 'year':
      cellValue = getFormatDate(cellValue, props, 'yyyy');
      break;

    case 'dates':
      cellValue = getFormatDates(cellValue, props, ', ', 'yyyy-MM-dd');
      break;

    case 'daterange':
      cellValue = getFormatDates(cellValue, props, " ".concat(separator || '-', " "), 'yyyy-MM-dd');
      break;

    case 'datetimerange':
      cellValue = getFormatDates(cellValue, props, " ".concat(separator || '-', " "), 'yyyy-MM-dd HH:ss:mm');
      break;

    default:
      cellValue = getFormatDate(cellValue, props, 'yyyy-MM-dd');
      break;
  }

  return cellValue;
}

function createEditRender(defaultProps) {
  return function (h, renderOpts, params) {
    var row = params.row,
        column = params.column;
    var attrs = renderOpts.attrs;

    var cellValue = _xeUtils["default"].get(row, column.property);

    return [h(renderOpts.name, {
      attrs: attrs,
      props: getCellEditFilterProps(renderOpts, params, cellValue, defaultProps),
      on: getEditOns(renderOpts, params),
      nativeOn: getNativeOns(renderOpts, params)
    })];
  };
}

function defaultButtonEditRender(h, renderOpts, params) {
  var attrs = renderOpts.attrs;
  return [h('Button', {
    attrs: attrs,
    props: getCellEditFilterProps(renderOpts, params, null),
    on: getOns(renderOpts, params),
    nativeOn: getNativeOns(renderOpts, params)
  }, cellText(h, renderOpts.content))];
}

function defaultButtonsEditRender(h, renderOpts, params) {
  return renderOpts.children.map(function (childRenderOpts) {
    return defaultButtonEditRender(h, childRenderOpts, params)[0];
  });
}

function createFilterRender(defaultProps) {
  return function (h, renderOpts, params) {
    var column = params.column;
    var name = renderOpts.name,
        attrs = renderOpts.attrs;
    var nativeOn = getNativeOns(renderOpts, params);
    return [h('div', {
      "class": 'vxe-table--filter-iview-wrapper'
    }, column.filters.map(function (option, oIndex) {
      var optionValue = option.data;
      return h(name, {
        key: oIndex,
        attrs: attrs,
        props: getCellEditFilterProps(renderOpts, params, optionValue, defaultProps),
        on: getFilterOns(renderOpts, params, option, function () {
          // 处理 change 事件相关逻辑
          handleConfirmFilter(params, !!option.data, option);
        }),
        nativeOn: nativeOn
      });
    }))];
  };
}

function handleConfirmFilter(params, checked, option) {
  var $panel = params.$panel;
  $panel.changeOption({}, checked, option);
}

function defaultFilterMethod(params) {
  var option = params.option,
      row = params.row,
      column = params.column;
  var data = option.data;

  var cellValue = _xeUtils["default"].get(row, column.property);
  /* eslint-disable eqeqeq */


  return cellValue === data;
}

function renderOptions(h, options, optionProps) {
  var labelProp = optionProps.label || 'label';
  var valueProp = optionProps.value || 'value';
  return _xeUtils["default"].map(options, function (item, oIndex) {
    return h('Option', {
      key: oIndex,
      props: {
        value: item[valueProp],
        label: item[labelProp],
        disabled: item.disabled
      }
    });
  });
}

function cellText(h, cellValue) {
  return [formatText(cellValue)];
}

function createFormItemRender(defaultProps) {
  return function (h, renderOpts, params) {
    var data = params.data,
        property = params.property;
    var name = renderOpts.name;
    var attrs = renderOpts.attrs;

    var itemValue = _xeUtils["default"].get(data, property);

    return [h(name, {
      attrs: attrs,
      props: getItemProps(renderOpts, params, itemValue, defaultProps),
      on: getItemOns(renderOpts, params),
      nativeOn: getNativeOns(renderOpts, params)
    })];
  };
}

function defaultButtonItemRender(h, renderOpts, params) {
  var attrs = renderOpts.attrs;
  var props = getItemProps(renderOpts, params, null);
  return [h('Button', {
    attrs: attrs,
    props: props,
    on: getOns(renderOpts, params),
    nativeOn: getNativeOns(renderOpts, params)
  }, cellText(h, renderOpts.content || props.content))];
}

function defaultButtonsItemRender(h, renderOpts, params) {
  return renderOpts.children.map(function (childRenderOpts) {
    return defaultButtonItemRender(h, childRenderOpts, params)[0];
  });
}

function createExportMethod(getExportCellValue) {
  return function (params) {
    var row = params.row,
        column = params.column,
        options = params.options;
    return options && options.original ? _xeUtils["default"].get(row, column.property) : getExportCellValue(column.editRender || column.cellRender, params);
  };
}

function createFormItemRadioAndCheckboxRender() {
  return function (h, renderOpts, params) {
    var name = renderOpts.name,
        _renderOpts$options2 = renderOpts.options,
        options = _renderOpts$options2 === void 0 ? [] : _renderOpts$options2,
        _renderOpts$optionPro2 = renderOpts.optionProps,
        optionProps = _renderOpts$optionPro2 === void 0 ? {} : _renderOpts$optionPro2;
    var data = params.data,
        property = params.property;
    var attrs = renderOpts.attrs;
    var labelProp = optionProps.label || 'label';
    var valueProp = optionProps.value || 'value';

    var itemValue = _xeUtils["default"].get(data, property);

    return [h("".concat(name, "Group"), {
      attrs: attrs,
      props: getItemProps(renderOpts, params, itemValue),
      on: getItemOns(renderOpts, params),
      nativeOn: getNativeOns(renderOpts, params)
    }, options.map(function (option) {
      return h(name, {
        props: {
          label: option[valueProp],
          disabled: option.disabled
        }
      }, option[labelProp]);
    }))];
  };
}
/**
 * 检查触发源是否属于目标节点
 */


function getEventTargetNode(evnt, container, className) {
  var targetElem;
  var target = evnt.target;

  while (target && target.nodeType && target !== document) {
    if (className && target.className && target.className.split && target.className.split(' ').indexOf(className) > -1) {
      targetElem = target;
    } else if (target === container) {
      return {
        flag: className ? !!targetElem : true,
        container: container,
        targetElem: targetElem
      };
    }

    target = target.parentNode;
  }

  return {
    flag: false
  };
}
/**
 * 事件兼容性处理
 */


function handleClearEvent(params, e) {
  var bodyElem = document.body;
  var evnt = params.$event || e;

  if ( // 下拉框、日期
  getEventTargetNode(evnt, bodyElem, 'ivu-select-dropdown').flag) {
    return false;
  }
}
/**
 * 基于 vxe-table 表格的适配插件，用于兼容 iview 组件库
 */


var VXETablePluginIView = {
  install: function install(_ref) {
    var interceptor = _ref.interceptor,
        renderer = _ref.renderer;
    renderer.mixin({
      Input: {
        autofocus: 'input.ivu-input',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        filterMethod: defaultFilterMethod,
        renderItem: createFormItemRender(),
        renderItemContent: createFormItemRender()
      },
      AutoComplete: {
        autofocus: 'input.ivu-input',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        filterMethod: defaultFilterMethod,
        renderItem: createFormItemRender(),
        renderItemContent: createFormItemRender()
      },
      InputNumber: {
        autofocus: 'input.ivu-input-number-input',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        filterMethod: defaultFilterMethod,
        renderItem: createFormItemRender(),
        renderItemContent: createFormItemRender()
      },
      Select: {
        renderEdit: function renderEdit(h, renderOpts, params) {
          var _renderOpts$options3 = renderOpts.options,
              options = _renderOpts$options3 === void 0 ? [] : _renderOpts$options3,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro3 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro3 === void 0 ? {} : _renderOpts$optionPro3,
              _renderOpts$optionGro2 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro2 === void 0 ? {} : _renderOpts$optionGro2;
          var row = params.row,
              column = params.column;
          var attrs = renderOpts.attrs;

          var cellValue = _xeUtils["default"].get(row, column.property);

          var props = getCellEditFilterProps(renderOpts, params, cellValue);
          var on = getEditOns(renderOpts, params);
          var nativeOn = getNativeOns(renderOpts, params);

          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [h('Select', {
              attrs: attrs,
              props: props,
              on: on,
              nativeOn: nativeOn
            }, _xeUtils["default"].map(optionGroups, function (group, gIndex) {
              return h('OptionGroup', {
                props: {
                  label: group[groupLabel]
                },
                key: gIndex
              }, renderOptions(h, group[groupOptions], optionProps));
            }))];
          }

          return [h('Select', {
            attrs: attrs,
            props: props,
            on: on,
            nativeOn: nativeOn
          }, renderOptions(h, options, optionProps))];
        },
        renderCell: function renderCell(h, renderOpts, params) {
          return getCellLabelVNs(h, renderOpts, params, getSelectCellValue(renderOpts, params));
        },
        renderFilter: function renderFilter(h, renderOpts, params) {
          var _renderOpts$options4 = renderOpts.options,
              options = _renderOpts$options4 === void 0 ? [] : _renderOpts$options4,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro4 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro4 === void 0 ? {} : _renderOpts$optionPro4,
              _renderOpts$optionGro3 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro3 === void 0 ? {} : _renderOpts$optionGro3;
          var groupOptions = optionGroupProps.options || 'options';
          var groupLabel = optionGroupProps.label || 'label';
          var column = params.column;
          var attrs = renderOpts.attrs;
          var nativeOn = getNativeOns(renderOpts, params);
          return [h('div', {
            "class": 'vxe-table--filter-iview-wrapper'
          }, optionGroups ? column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            var props = getCellEditFilterProps(renderOpts, params, optionValue);
            return h('Select', {
              key: oIndex,
              attrs: attrs,
              props: props,
              on: getFilterOns(renderOpts, params, option, function () {
                // 处理 change 事件相关逻辑
                handleConfirmFilter(params, props.multiple ? option.data && option.data.length > 0 : !_xeUtils["default"].eqNull(option.data), option);
              }),
              nativeOn: nativeOn
            }, _xeUtils["default"].map(optionGroups, function (group, gIndex) {
              return h('OptionGroup', {
                key: gIndex,
                props: {
                  label: group[groupLabel]
                }
              }, renderOptions(h, group[groupOptions], optionProps));
            }));
          }) : column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            var props = getCellEditFilterProps(renderOpts, params, optionValue);
            return h('Select', {
              key: oIndex,
              attrs: attrs,
              props: props,
              on: getFilterOns(renderOpts, params, option, function () {
                // 处理 change 事件相关逻辑
                handleConfirmFilter(params, props.multiple ? option.data && option.data.length > 0 : !_xeUtils["default"].eqNull(option.data), option);
              }),
              nativeOn: nativeOn
            }, renderOptions(h, options, optionProps));
          }))];
        },
        filterMethod: function filterMethod(params) {
          var option = params.option,
              row = params.row,
              column = params.column;
          var data = option.data;
          var property = column.property,
              renderOpts = column.filterRender;
          var _renderOpts$props4 = renderOpts.props,
              props = _renderOpts$props4 === void 0 ? {} : _renderOpts$props4;

          var cellValue = _xeUtils["default"].get(row, property);

          if (props.multiple) {
            if (_xeUtils["default"].isArray(cellValue)) {
              return _xeUtils["default"].includeArrays(cellValue, data);
            }

            return data.indexOf(cellValue) > -1;
          }
          /* eslint-disable eqeqeq */


          return cellValue == data;
        },
        renderItem: function renderItem(h, renderOpts, params) {
          var _renderOpts$options5 = renderOpts.options,
              options = _renderOpts$options5 === void 0 ? [] : _renderOpts$options5,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro5 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro5 === void 0 ? {} : _renderOpts$optionPro5,
              _renderOpts$optionGro4 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro4 === void 0 ? {} : _renderOpts$optionGro4;
          var data = params.data,
              property = params.property;
          var attrs = renderOpts.attrs;

          var itemValue = _xeUtils["default"].get(data, property);

          var props = getItemProps(renderOpts, params, itemValue);
          var on = getItemOns(renderOpts, params);
          var nativeOn = getNativeOns(renderOpts, params);

          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [h('Select', {
              props: props,
              attrs: attrs,
              on: on,
              nativeOn: nativeOn
            }, _xeUtils["default"].map(optionGroups, function (group, gIndex) {
              return h('OptionGroup', {
                key: gIndex,
                props: {
                  label: group[groupLabel]
                }
              }, renderOptions(h, group[groupOptions], optionProps));
            }))];
          }

          return [h('Select', {
            props: props,
            attrs: attrs,
            on: on,
            nativeOn: nativeOn
          }, renderOptions(h, options, optionProps))];
        },
        renderItemContent: function renderItemContent(h, renderOpts, params) {
          var _renderOpts$options6 = renderOpts.options,
              options = _renderOpts$options6 === void 0 ? [] : _renderOpts$options6,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro6 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro6 === void 0 ? {} : _renderOpts$optionPro6,
              _renderOpts$optionGro5 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro5 === void 0 ? {} : _renderOpts$optionGro5;
          var data = params.data,
              property = params.property;
          var attrs = renderOpts.attrs;

          var itemValue = _xeUtils["default"].get(data, property);

          var props = getItemProps(renderOpts, params, itemValue);
          var on = getItemOns(renderOpts, params);
          var nativeOn = getNativeOns(renderOpts, params);

          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [h('Select', {
              props: props,
              attrs: attrs,
              on: on,
              nativeOn: nativeOn
            }, _xeUtils["default"].map(optionGroups, function (group, gIndex) {
              return h('OptionGroup', {
                key: gIndex,
                props: {
                  label: group[groupLabel]
                }
              }, renderOptions(h, group[groupOptions], optionProps));
            }))];
          }

          return [h('Select', {
            props: props,
            attrs: attrs,
            on: on,
            nativeOn: nativeOn
          }, renderOptions(h, options, optionProps))];
        },
        cellExportMethod: createExportMethod(getSelectCellValue),
        exportMethod: createExportMethod(getSelectCellValue)
      },
      Cascader: {
        renderEdit: createEditRender({
          transfer: true
        }),
        renderCell: function renderCell(h, renderOpts, params) {
          return getCellLabelVNs(h, renderOpts, params, getCascaderCellValue(renderOpts, params));
        },
        renderItem: createFormItemRender(),
        renderItemContent: createFormItemRender(),
        cellExportMethod: createExportMethod(getCascaderCellValue),
        exportMethod: createExportMethod(getCascaderCellValue)
      },
      DatePicker: {
        renderEdit: createEditRender({
          transfer: true
        }),
        renderCell: function renderCell(h, renderOpts, params) {
          return getCellLabelVNs(h, renderOpts, params, getDatePickerCellValue(renderOpts, params));
        },
        renderFilter: function renderFilter(h, renderOpts, params) {
          var column = params.column;
          var attrs = renderOpts.attrs;
          var nativeOn = getNativeOns(renderOpts, params);
          return [h('div', {
            "class": 'vxe-table--filter-iview-wrapper'
          }, column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            return h(renderOpts.name, {
              key: oIndex,
              attrs: attrs,
              props: getCellEditFilterProps(renderOpts, params, optionValue),
              on: getFilterOns(renderOpts, params, option, function () {
                // 处理 change 事件相关逻辑
                handleConfirmFilter(params, !!option.data, option);
              }),
              nativeOn: nativeOn
            });
          }))];
        },
        filterMethod: function filterMethod(params) {
          var option = params.option,
              row = params.row,
              column = params.column;
          var data = option.data;
          var renderOpts = column.filterRender;
          var _renderOpts$props5 = renderOpts.props,
              props = _renderOpts$props5 === void 0 ? {} : _renderOpts$props5;

          var cellValue = _xeUtils["default"].get(row, column.property);

          if (data) {
            switch (props.type) {
              case 'daterange':
                return equalDaterange(cellValue, data, props, 'yyyy-MM-dd');

              case 'datetimerange':
                return equalDaterange(cellValue, data, props, 'yyyy-MM-dd HH:ss:mm');

              default:
                return cellValue === data;
            }
          }

          return false;
        },
        renderItem: createFormItemRender(),
        renderItemContent: createFormItemRender(),
        cellExportMethod: createExportMethod(getDatePickerCellValue),
        exportMethod: createExportMethod(getDatePickerCellValue)
      },
      TimePicker: {
        renderEdit: createEditRender({
          transfer: true
        }),
        renderItem: createFormItemRender(),
        renderItemContent: createFormItemRender()
      },
      Rate: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        filterMethod: defaultFilterMethod,
        renderItem: createFormItemRender(),
        renderItemContent: createFormItemRender()
      },
      iSwitch: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: function renderFilter(h, renderOpts, params) {
          var column = params.column;
          var name = renderOpts.name,
              attrs = renderOpts.attrs;
          var nativeOn = getNativeOns(renderOpts, params);
          return [h('div', {
            "class": 'vxe-table--filter-iview-wrapper'
          }, column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            return h(name, {
              key: oIndex,
              attrs: attrs,
              props: getCellEditFilterProps(renderOpts, params, optionValue),
              on: getFilterOns(renderOpts, params, option, function () {
                // 处理 change 事件相关逻辑
                handleConfirmFilter(params, _xeUtils["default"].isBoolean(option.data), option);
              }),
              nativeOn: nativeOn
            });
          }))];
        },
        filterMethod: defaultFilterMethod,
        renderItem: createFormItemRender(),
        renderItemContent: createFormItemRender()
      },
      Radio: {
        renderItem: createFormItemRadioAndCheckboxRender(),
        renderItemContent: createFormItemRadioAndCheckboxRender()
      },
      Checkbox: {
        renderItem: createFormItemRadioAndCheckboxRender(),
        renderItemContent: createFormItemRadioAndCheckboxRender()
      },
      Button: {
        renderEdit: defaultButtonEditRender,
        renderDefault: defaultButtonEditRender,
        renderItem: defaultButtonItemRender,
        renderItemContent: defaultButtonItemRender
      },
      Buttons: {
        renderEdit: defaultButtonsEditRender,
        renderDefault: defaultButtonsEditRender,
        renderItem: defaultButtonsItemRender,
        renderItemContent: defaultButtonsItemRender
      }
    });
    interceptor.add('event.clearFilter', handleClearEvent);
    interceptor.add('event.clearActived', handleClearEvent);
    interceptor.add('event.clearAreas', handleClearEvent);
  }
};
exports.VXETablePluginIView = VXETablePluginIView;

if (typeof window !== 'undefined' && window.VXETable && window.VXETable.use) {
  window.VXETable.use(VXETablePluginIView);
}

var _default = VXETablePluginIView;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIiwiaW5kZXguanMiXSwibmFtZXMiOlsiaXNFbXB0eVZhbHVlIiwiY2VsbFZhbHVlIiwidW5kZWZpbmVkIiwiZ2V0TW9kZWxQcm9wIiwicmVuZGVyT3B0cyIsImdldE1vZGVsRXZlbnQiLCJnZXRDaGFuZ2VFdmVudCIsImdldEZvcm1hdERhdGUiLCJ2YWx1ZSIsInByb3BzIiwiZGVmYXVsdEZvcm1hdCIsIlhFVXRpbHMiLCJ0b0RhdGVTdHJpbmciLCJmb3JtYXQiLCJnZXRGb3JtYXREYXRlcyIsInZhbHVlcyIsInNlcGFyYXRvciIsIm1hcCIsImRhdGUiLCJqb2luIiwiZXF1YWxEYXRlcmFuZ2UiLCJkYXRhIiwiZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyIsInBhcmFtcyIsImRlZmF1bHRQcm9wcyIsInZTaXplIiwiJHRhYmxlIiwiYXNzaWduIiwic2l6ZSIsImdldEl0ZW1Qcm9wcyIsIiRmb3JtIiwiZm9ybWF0VGV4dCIsImdldENlbGxMYWJlbFZOcyIsImgiLCJjZWxsTGFiZWwiLCJwbGFjZWhvbGRlciIsImdldE5hdGl2ZU9ucyIsIm5hdGl2ZUV2ZW50cyIsIm5hdGl2ZU9ucyIsIm9iamVjdEVhY2giLCJmdW5jIiwia2V5IiwiYXJncyIsImdldE9ucyIsImlucHV0RnVuYyIsImNoYW5nZUZ1bmMiLCJldmVudHMiLCJtb2RlbEV2ZW50IiwiY2hhbmdlRXZlbnQiLCJpc1NhbWVFdmVudCIsIm9ucyIsInRhcmdldEV2bnQiLCJnZXRFZGl0T25zIiwicm93IiwiY29sdW1uIiwic2V0IiwicHJvcGVydHkiLCJ1cGRhdGVTdGF0dXMiLCJnZXRGaWx0ZXJPbnMiLCJvcHRpb24iLCJnZXRJdGVtT25zIiwibWF0Y2hDYXNjYWRlckRhdGEiLCJpbmRleCIsImxpc3QiLCJsYWJlbHMiLCJ2YWwiLCJsZW5ndGgiLCJlYWNoIiwiaXRlbSIsInB1c2giLCJsYWJlbCIsImNoaWxkcmVuIiwiZ2V0U2VsZWN0Q2VsbFZhbHVlIiwib3B0aW9ucyIsIm9wdGlvbkdyb3VwcyIsIm9wdGlvblByb3BzIiwib3B0aW9uR3JvdXBQcm9wcyIsImxhYmVsUHJvcCIsInZhbHVlUHJvcCIsImdyb3VwT3B0aW9ucyIsImdldCIsImNvbGlkIiwiaWQiLCJyZXN0IiwiY2VsbERhdGEiLCJmaWx0ZXJhYmxlIiwiZnVsbEFsbERhdGFSb3dNYXAiLCJjYWNoZUNlbGwiLCJoYXMiLCJtdWx0aXBsZSIsInNlbGVjdEl0ZW0iLCJmaW5kIiwiZ2V0Q2FzY2FkZXJDZWxsVmFsdWUiLCJnZXREYXRlUGlja2VyQ2VsbFZhbHVlIiwidHlwZSIsImNyZWF0ZUVkaXRSZW5kZXIiLCJhdHRycyIsIm5hbWUiLCJvbiIsIm5hdGl2ZU9uIiwiZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIiLCJjZWxsVGV4dCIsImNvbnRlbnQiLCJkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIiLCJjaGlsZFJlbmRlck9wdHMiLCJjcmVhdGVGaWx0ZXJSZW5kZXIiLCJmaWx0ZXJzIiwib0luZGV4Iiwib3B0aW9uVmFsdWUiLCJoYW5kbGVDb25maXJtRmlsdGVyIiwiY2hlY2tlZCIsIiRwYW5lbCIsImNoYW5nZU9wdGlvbiIsImRlZmF1bHRGaWx0ZXJNZXRob2QiLCJyZW5kZXJPcHRpb25zIiwiZGlzYWJsZWQiLCJjcmVhdGVGb3JtSXRlbVJlbmRlciIsIml0ZW1WYWx1ZSIsImRlZmF1bHRCdXR0b25JdGVtUmVuZGVyIiwiZGVmYXVsdEJ1dHRvbnNJdGVtUmVuZGVyIiwiY3JlYXRlRXhwb3J0TWV0aG9kIiwiZ2V0RXhwb3J0Q2VsbFZhbHVlIiwib3JpZ2luYWwiLCJlZGl0UmVuZGVyIiwiY2VsbFJlbmRlciIsImNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlciIsImdldEV2ZW50VGFyZ2V0Tm9kZSIsImV2bnQiLCJjb250YWluZXIiLCJjbGFzc05hbWUiLCJ0YXJnZXRFbGVtIiwidGFyZ2V0Iiwibm9kZVR5cGUiLCJkb2N1bWVudCIsInNwbGl0IiwiaW5kZXhPZiIsImZsYWciLCJwYXJlbnROb2RlIiwiaGFuZGxlQ2xlYXJFdmVudCIsImUiLCJib2R5RWxlbSIsImJvZHkiLCIkZXZlbnQiLCJWWEVUYWJsZVBsdWdpbklWaWV3IiwiaW5zdGFsbCIsImludGVyY2VwdG9yIiwicmVuZGVyZXIiLCJtaXhpbiIsIklucHV0IiwiYXV0b2ZvY3VzIiwicmVuZGVyRGVmYXVsdCIsInJlbmRlckVkaXQiLCJyZW5kZXJGaWx0ZXIiLCJmaWx0ZXJNZXRob2QiLCJyZW5kZXJJdGVtIiwicmVuZGVySXRlbUNvbnRlbnQiLCJBdXRvQ29tcGxldGUiLCJJbnB1dE51bWJlciIsIlNlbGVjdCIsImdyb3VwTGFiZWwiLCJncm91cCIsImdJbmRleCIsInJlbmRlckNlbGwiLCJlcU51bGwiLCJmaWx0ZXJSZW5kZXIiLCJpc0FycmF5IiwiaW5jbHVkZUFycmF5cyIsImNlbGxFeHBvcnRNZXRob2QiLCJleHBvcnRNZXRob2QiLCJDYXNjYWRlciIsInRyYW5zZmVyIiwiRGF0ZVBpY2tlciIsIlRpbWVQaWNrZXIiLCJSYXRlIiwiaVN3aXRjaCIsImlzQm9vbGVhbiIsIlJhZGlvIiwiQ2hlY2tib3giLCJCdXR0b24iLCJCdXR0b25zIiwiYWRkIiwid2luZG93IiwiVlhFVGFibGUiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7Ozs7O0FBcUJBLFNBQVNBLFlBQVQsQ0FBdUJDLFNBQXZCLEVBQXFDO0FBQ25DLFNBQU9BLFNBQVMsS0FBSyxJQUFkLElBQXNCQSxTQUFTLEtBQUtDLFNBQXBDLElBQWlERCxTQUFTLEtBQUssRUFBdEU7QUFDRDs7QUFFRCxTQUFTRSxZQUFULENBQXVCQyxVQUF2QixFQUFnRDtBQUM5QyxTQUFPLE9BQVA7QUFDRDs7QUFFRCxTQUFTQyxhQUFULENBQXdCRCxVQUF4QixFQUFpRDtBQUMvQyxTQUFPLE9BQVA7QUFDRDs7QUFFRCxTQUFTRSxjQUFULENBQXlCRixVQUF6QixFQUFrRDtBQUNoRCxTQUFPLFdBQVA7QUFDRDs7QUFFRCxTQUFTRyxhQUFULENBQXdCQyxLQUF4QixFQUFvQ0MsS0FBcEMsRUFBbUVDLGFB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QSxXQUFXLENBQUNtQyxHQUFaLENBQWdCLG1CQUFoQixFQUFxQzFDLGdCQUFyQztBQUNBTyxJQUFBQSxXQUFXLENBQUNtQyxHQUFaLENBQWdCLG9CQUFoQixFQUFzQzFDLGdCQUF0QztBQUNBTyxJQUFBQSxXQUFXLENBQUNtQyxHQUFaLENBQWdCLGtCQUFoQixFQUFvQzFDLGdCQUFwQztBQUNEO0FBaFZnQyxDQUE1Qjs7O0FBbVZQLElBQUksT0FBTzJDLE1BQVAsS0FBa0IsV0FBbEIsSUFBaUNBLE1BQU0sQ0FBQ0MsUUFBeEMsSUFBb0RELE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsR0FBeEUsRUFBNkU7QUFDM0VGLEVBQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsR0FBaEIsQ0FBb0J4QyxtQkFBcEI7QUFDRDs7ZUFFY0EsbUIiLCJmaWxlIjoiaW5kZXguY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ3JlYXRlRWxlbWVudCB9IGZyb20gJ3Z1ZSdcclxuaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMnXHJcbmltcG9ydCB7XHJcbiAgVlhFVGFibGUsXHJcbiAgUmVuZGVyUGFyYW1zLFxyXG4gIE9wdGlvblByb3BzLFxyXG4gIEludGVyY2VwdG9yUGFyYW1zLFxyXG4gIFRhYmxlUmVuZGVyUGFyYW1zLFxyXG4gIFJlbmRlck9wdGlvbnMsXHJcbiAgQ29sdW1uRmlsdGVyUGFyYW1zLFxyXG4gIENvbHVtbkZpbHRlclJlbmRlck9wdGlvbnMsXHJcbiAgQ29sdW1uQ2VsbFJlbmRlck9wdGlvbnMsXHJcbiAgQ29sdW1uRWRpdFJlbmRlck9wdGlvbnMsXHJcbiAgQ29sdW1uQ2VsbFJlbmRlclBhcmFtcyxcclxuICBDb2x1bW5FZGl0UmVuZGVyUGFyYW1zLFxyXG4gIENvbHVtbkZpbHRlclJlbmRlclBhcmFtcyxcclxuICBDb2x1bW5GaWx0ZXJNZXRob2RQYXJhbXMsXHJcbiAgRm9ybUl0ZW1SZW5kZXJQYXJhbXMsXHJcbiAgRm9ybUl0ZW1SZW5kZXJPcHRpb25zLFxyXG4gIENvbHVtbkV4cG9ydENlbGxSZW5kZXJQYXJhbXNcclxufSBmcm9tICd2eGUtdGFibGUnXHJcblxyXG5mdW5jdGlvbiBpc0VtcHR5VmFsdWUgKGNlbGxWYWx1ZTogYW55KSB7XHJcbiAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gbnVsbCB8fCBjZWxsVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBjZWxsVmFsdWUgPT09ICcnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1vZGVsUHJvcCAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucykge1xyXG4gIHJldHVybiAndmFsdWUnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1vZGVsRXZlbnQgKHJlbmRlck9wdHM6IFJlbmRlck9wdGlvbnMpIHtcclxuICByZXR1cm4gJ2lucHV0J1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDaGFuZ2VFdmVudCAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucykge1xyXG4gIHJldHVybiAnb24tY2hhbmdlJ1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGb3JtYXREYXRlICh2YWx1ZTogYW55LCBwcm9wczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgZGVmYXVsdEZvcm1hdDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIFhFVXRpbHMudG9EYXRlU3RyaW5nKHZhbHVlLCBwcm9wcy5mb3JtYXQgfHwgZGVmYXVsdEZvcm1hdClcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Rm9ybWF0RGF0ZXMgKHZhbHVlczogYW55LCBwcm9wczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgc2VwYXJhdG9yOiBzdHJpbmcsIGRlZmF1bHRGb3JtYXQ6IHN0cmluZykge1xyXG4gIHJldHVybiBYRVV0aWxzLm1hcCh2YWx1ZXMsIChkYXRlOiBhbnkpID0+IGdldEZvcm1hdERhdGUoZGF0ZSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpKS5qb2luKHNlcGFyYXRvcilcclxufVxyXG5cclxuZnVuY3Rpb24gZXF1YWxEYXRlcmFuZ2UgKGNlbGxWYWx1ZTogYW55LCBkYXRhOiBhbnksIHByb3BzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBkZWZhdWx0Rm9ybWF0OiBzdHJpbmcpIHtcclxuICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpXHJcbiAgcmV0dXJuIGNlbGxWYWx1ZSA+PSBnZXRGb3JtYXREYXRlKGRhdGFbMF0sIHByb3BzLCBkZWZhdWx0Rm9ybWF0KSAmJiBjZWxsVmFsdWUgPD0gZ2V0Rm9ybWF0RGF0ZShkYXRhWzFdLCBwcm9wcywgZGVmYXVsdEZvcm1hdClcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBUYWJsZVJlbmRlclBhcmFtcywgdmFsdWU6IGFueSwgZGVmYXVsdFByb3BzPzogeyBbcHJvcDogc3RyaW5nXTogYW55IH0pIHtcclxuICBjb25zdCB7IHZTaXplIH0gPSBwYXJhbXMuJHRhYmxlXHJcbiAgcmV0dXJuIFhFVXRpbHMuYXNzaWduKHZTaXplID8geyBzaXplOiB2U2l6ZSB9IDoge30sIGRlZmF1bHRQcm9wcywgcmVuZGVyT3B0cy5wcm9wcywgeyBbZ2V0TW9kZWxQcm9wKHJlbmRlck9wdHMpXTogdmFsdWUgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0SXRlbVByb3BzIChyZW5kZXJPcHRzOiBSZW5kZXJPcHRpb25zLCBwYXJhbXM6IEZvcm1JdGVtUmVuZGVyUGFyYW1zLCB2YWx1ZTogYW55LCBkZWZhdWx0UHJvcHM/OiB7IFtwcm9wOiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIGNvbnN0IHsgdlNpemUgfSA9IHBhcmFtcy4kZm9ybVxyXG4gIHJldHVybiBYRVV0aWxzLmFzc2lnbih2U2l6ZSA/IHsgc2l6ZTogdlNpemUgfSA6IHt9LCBkZWZhdWx0UHJvcHMsIHJlbmRlck9wdHMucHJvcHMsIHsgW2dldE1vZGVsUHJvcChyZW5kZXJPcHRzKV06IHZhbHVlIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFRleHQgKGNlbGxWYWx1ZTogYW55KSB7XHJcbiAgcmV0dXJuICcnICsgKGlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpID8gJycgOiBjZWxsVmFsdWUpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENlbGxMYWJlbFZOcyAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogQ29sdW1uRWRpdFJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uRWRpdFJlbmRlclBhcmFtcywgY2VsbExhYmVsOiBhbnkpIHtcclxuICBjb25zdCB7IHBsYWNlaG9sZGVyIH0gPSByZW5kZXJPcHRzXHJcbiAgcmV0dXJuIFtcclxuICAgIGgoJ3NwYW4nLCB7XHJcbiAgICAgIGNsYXNzOiAndnhlLWNlbGwtLWxhYmVsJ1xyXG4gICAgfSwgcGxhY2Vob2xkZXIgJiYgaXNFbXB0eVZhbHVlKGNlbGxMYWJlbCkgPyBbXHJcbiAgICAgIGgoJ3NwYW4nLCB7XHJcbiAgICAgICAgY2xhc3M6ICd2eGUtY2VsbC0tcGxhY2Vob2xkZXInXHJcbiAgICAgIH0sIGZvcm1hdFRleHQocGxhY2Vob2xkZXIpKVxyXG4gICAgXSA6IGZvcm1hdFRleHQoY2VsbExhYmVsKSlcclxuICBdXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE5hdGl2ZU9ucyAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBSZW5kZXJQYXJhbXMpIHtcclxuICBjb25zdCB7IG5hdGl2ZUV2ZW50cyB9ID0gcmVuZGVyT3B0c1xyXG4gIGNvbnN0IG5hdGl2ZU9uczogeyBbdHlwZTogc3RyaW5nXTogRnVuY3Rpb24gfSA9IHt9XHJcbiAgWEVVdGlscy5vYmplY3RFYWNoKG5hdGl2ZUV2ZW50cywgKGZ1bmM6IEZ1bmN0aW9uLCBrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgbmF0aXZlT25zW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgZnVuYyhwYXJhbXMsIC4uLmFyZ3MpXHJcbiAgICB9XHJcbiAgfSlcclxuICByZXR1cm4gbmF0aXZlT25zXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE9ucyAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBSZW5kZXJQYXJhbXMsIGlucHV0RnVuYz86IEZ1bmN0aW9uLCBjaGFuZ2VGdW5jPzogRnVuY3Rpb24pIHtcclxuICBjb25zdCB7IGV2ZW50cyB9ID0gcmVuZGVyT3B0c1xyXG4gIGNvbnN0IG1vZGVsRXZlbnQgPSBnZXRNb2RlbEV2ZW50KHJlbmRlck9wdHMpXHJcbiAgY29uc3QgY2hhbmdlRXZlbnQgPSBnZXRDaGFuZ2VFdmVudChyZW5kZXJPcHRzKVxyXG4gIGNvbnN0IGlzU2FtZUV2ZW50ID0gY2hhbmdlRXZlbnQgPT09IG1vZGVsRXZlbnRcclxuICBjb25zdCBvbnM6IHsgW3R5cGU6IHN0cmluZ106IEZ1bmN0aW9uIH0gPSB7fVxyXG4gIFhFVXRpbHMub2JqZWN0RWFjaChldmVudHMsIChmdW5jOiBGdW5jdGlvbiwga2V5OiBzdHJpbmcpID0+IHtcclxuICAgIG9uc1trZXldID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgIGZ1bmMocGFyYW1zLCAuLi5hcmdzKVxyXG4gICAgfVxyXG4gIH0pXHJcbiAgaWYgKGlucHV0RnVuYykge1xyXG4gICAgb25zW21vZGVsRXZlbnRdID0gZnVuY3Rpb24gKHRhcmdldEV2bnQ6IGFueSkge1xyXG4gICAgICBpbnB1dEZ1bmModGFyZ2V0RXZudClcclxuICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHNbbW9kZWxFdmVudF0pIHtcclxuICAgICAgICBldmVudHNbbW9kZWxFdmVudF0ocGFyYW1zLCB0YXJnZXRFdm50KVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc1NhbWVFdmVudCAmJiBjaGFuZ2VGdW5jKSB7XHJcbiAgICAgICAgY2hhbmdlRnVuYyh0YXJnZXRFdm50KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmICghaXNTYW1lRXZlbnQgJiYgY2hhbmdlRnVuYykge1xyXG4gICAgb25zW2NoYW5nZUV2ZW50XSA9IGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICBjaGFuZ2VGdW5jKC4uLmFyZ3MpXHJcbiAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzW2NoYW5nZUV2ZW50XSkge1xyXG4gICAgICAgIGV2ZW50c1tjaGFuZ2VFdmVudF0ocGFyYW1zLCAuLi5hcmdzKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBvbnNcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RWRpdE9ucyAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBDb2x1bW5FZGl0UmVuZGVyUGFyYW1zKSB7XHJcbiAgY29uc3QgeyAkdGFibGUsIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICByZXR1cm4gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgKHZhbHVlOiBhbnkpID0+IHtcclxuICAgIC8vIOWkhOeQhiBtb2RlbCDlgLzlj4zlkJHnu5HlrppcclxuICAgIFhFVXRpbHMuc2V0KHJvdywgY29sdW1uLnByb3BlcnR5LCB2YWx1ZSlcclxuICB9LCAoKSA9PiB7XHJcbiAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgJHRhYmxlLnVwZGF0ZVN0YXR1cyhwYXJhbXMpXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RmlsdGVyT25zIChyZW5kZXJPcHRzOiBSZW5kZXJPcHRpb25zLCBwYXJhbXM6IENvbHVtbkZpbHRlclJlbmRlclBhcmFtcywgb3B0aW9uOiBDb2x1bW5GaWx0ZXJQYXJhbXMsIGNoYW5nZUZ1bmM6IEZ1bmN0aW9uKSB7XHJcbiAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXHJcbiAgICBvcHRpb24uZGF0YSA9IHZhbHVlXHJcbiAgfSwgY2hhbmdlRnVuYylcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0SXRlbU9ucyAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBGb3JtSXRlbVJlbmRlclBhcmFtcykge1xyXG4gIGNvbnN0IHsgJGZvcm0sIGRhdGEsIHByb3BlcnR5IH0gPSBwYXJhbXNcclxuICByZXR1cm4gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgKHZhbHVlOiBhbnkpID0+IHtcclxuICAgIC8vIOWkhOeQhiBtb2RlbCDlgLzlj4zlkJHnu5HlrppcclxuICAgIFhFVXRpbHMuc2V0KGRhdGEsIHByb3BlcnR5LCB2YWx1ZSlcclxuICB9LCAoKSA9PiB7XHJcbiAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgJGZvcm0udXBkYXRlU3RhdHVzKHBhcmFtcylcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYXRjaENhc2NhZGVyRGF0YSAoaW5kZXg6IG51bWJlciwgbGlzdDogYW55W10sIHZhbHVlczogYW55W10sIGxhYmVsczogYW55W10pIHtcclxuICBjb25zdCB2YWwgPSB2YWx1ZXNbaW5kZXhdXHJcbiAgaWYgKGxpc3QgJiYgdmFsdWVzLmxlbmd0aCA+IGluZGV4KSB7XHJcbiAgICBYRVV0aWxzLmVhY2gobGlzdCwgKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKGl0ZW0udmFsdWUgPT09IHZhbCkge1xyXG4gICAgICAgIGxhYmVscy5wdXNoKGl0ZW0ubGFiZWwpXHJcbiAgICAgICAgbWF0Y2hDYXNjYWRlckRhdGEoKytpbmRleCwgaXRlbS5jaGlsZHJlbiwgdmFsdWVzLCBsYWJlbHMpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZWxlY3RDZWxsVmFsdWUgKHJlbmRlck9wdHM6IENvbHVtbkNlbGxSZW5kZXJPcHRpb25zLCBwYXJhbXM6IENvbHVtbkNlbGxSZW5kZXJQYXJhbXMpIHtcclxuICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBwcm9wcyA9IHt9LCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICBjb25zdCAkdGFibGU6IGFueSA9IHBhcmFtcy4kdGFibGVcclxuICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnXHJcbiAgY29uc3QgdmFsdWVQcm9wID0gb3B0aW9uUHJvcHMudmFsdWUgfHwgJ3ZhbHVlJ1xyXG4gIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucydcclxuICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSlcclxuICBjb25zdCBjb2xpZCA9IGNvbHVtbi5pZFxyXG4gIGxldCByZXN0OiBhbnlcclxuICBsZXQgY2VsbERhdGE6IGFueVxyXG4gIGlmIChwcm9wcy5maWx0ZXJhYmxlKSB7XHJcbiAgICBjb25zdCBmdWxsQWxsRGF0YVJvd01hcDogTWFwPGFueSwgYW55PiA9ICR0YWJsZS5mdWxsQWxsRGF0YVJvd01hcFxyXG4gICAgY29uc3QgY2FjaGVDZWxsID0gZnVsbEFsbERhdGFSb3dNYXAuaGFzKHJvdylcclxuICAgIGlmIChjYWNoZUNlbGwpIHtcclxuICAgICAgcmVzdCA9IGZ1bGxBbGxEYXRhUm93TWFwLmdldChyb3cpXHJcbiAgICAgIGNlbGxEYXRhID0gcmVzdC5jZWxsRGF0YVxyXG4gICAgICBpZiAoIWNlbGxEYXRhKSB7XHJcbiAgICAgICAgY2VsbERhdGEgPSBmdWxsQWxsRGF0YVJvd01hcC5nZXQocm93KS5jZWxsRGF0YSA9IHt9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChyZXN0ICYmIGNlbGxEYXRhW2NvbGlkXSAmJiBjZWxsRGF0YVtjb2xpZF0udmFsdWUgPT09IGNlbGxWYWx1ZSkge1xyXG4gICAgICByZXR1cm4gY2VsbERhdGFbY29saWRdLmxhYmVsXHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmICghaXNFbXB0eVZhbHVlKGNlbGxWYWx1ZSkpIHtcclxuICAgIHJldHVybiBYRVV0aWxzLm1hcChwcm9wcy5tdWx0aXBsZSA/IGNlbGxWYWx1ZSA6IFtjZWxsVmFsdWVdLCBvcHRpb25Hcm91cHMgPyAodmFsdWUpID0+IHtcclxuICAgICAgbGV0IHNlbGVjdEl0ZW1cclxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbkdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICBzZWxlY3RJdGVtID0gWEVVdGlscy5maW5kKG9wdGlvbkdyb3Vwc1tpbmRleF1bZ3JvdXBPcHRpb25zXSwgKGl0ZW0pID0+IGl0ZW1bdmFsdWVQcm9wXSA9PT0gdmFsdWUpXHJcbiAgICAgICAgaWYgKHNlbGVjdEl0ZW0pIHtcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNlbGxMYWJlbDogYW55ID0gc2VsZWN0SXRlbSA/IHNlbGVjdEl0ZW1bbGFiZWxQcm9wXSA6IHZhbHVlXHJcbiAgICAgIGlmIChjZWxsRGF0YSAmJiBvcHRpb25zICYmIG9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgY2VsbERhdGFbY29saWRdID0geyB2YWx1ZTogY2VsbFZhbHVlLCBsYWJlbDogY2VsbExhYmVsIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY2VsbExhYmVsXHJcbiAgICB9IDogKHZhbHVlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdEl0ZW0gPSBYRVV0aWxzLmZpbmQob3B0aW9ucywgKGl0ZW0pID0+IGl0ZW1bdmFsdWVQcm9wXSA9PT0gdmFsdWUpXHJcbiAgICAgIGNvbnN0IGNlbGxMYWJlbDogYW55ID0gc2VsZWN0SXRlbSA/IHNlbGVjdEl0ZW1bbGFiZWxQcm9wXSA6IHZhbHVlXHJcbiAgICAgIGlmIChjZWxsRGF0YSAmJiBvcHRpb25zICYmIG9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgY2VsbERhdGFbY29saWRdID0geyB2YWx1ZTogY2VsbFZhbHVlLCBsYWJlbDogY2VsbExhYmVsIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY2VsbExhYmVsXHJcbiAgICB9KS5qb2luKCcsICcpXHJcbiAgfVxyXG4gIHJldHVybiAnJ1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDYXNjYWRlckNlbGxWYWx1ZSAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBDb2x1bW5DZWxsUmVuZGVyUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IGNlbGxWYWx1ZSB8fCBbXVxyXG4gIGNvbnN0IGxhYmVsczogYW55W10gPSBbXVxyXG4gIG1hdGNoQ2FzY2FkZXJEYXRhKDAsIHByb3BzLmRhdGEsIHZhbHVlcywgbGFiZWxzKVxyXG4gIHJldHVybiBsYWJlbHMuam9pbihgICR7cHJvcHMuc2VwYXJhdG9yIHx8ICcvJ30gYClcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RGF0ZVBpY2tlckNlbGxWYWx1ZSAocmVuZGVyT3B0czogUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBDb2x1bW5DZWxsUmVuZGVyUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgY29uc3QgeyBzZXBhcmF0b3IgfSA9IHByb3BzXHJcbiAgbGV0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KVxyXG4gIHN3aXRjaCAocHJvcHMudHlwZSkge1xyXG4gICAgY2FzZSAnd2Vlayc6XHJcbiAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGUoY2VsbFZhbHVlLCBwcm9wcywgJ3l5eXl3V1cnKVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnbW9udGgnOlxyXG4gICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsICd5eXl5LU1NJylcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ3llYXInOlxyXG4gICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsICd5eXl5JylcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ2RhdGVzJzpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZXMoY2VsbFZhbHVlLCBwcm9wcywgJywgJywgJ3l5eXktTU0tZGQnKVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnZGF0ZXJhbmdlJzpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZXMoY2VsbFZhbHVlLCBwcm9wcywgYCAke3NlcGFyYXRvciB8fCAnLSd9IGAsICd5eXl5LU1NLWRkJylcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ2RhdGV0aW1lcmFuZ2UnOlxyXG4gICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlcyhjZWxsVmFsdWUsIHByb3BzLCBgICR7c2VwYXJhdG9yIHx8ICctJ30gYCwgJ3l5eXktTU0tZGQgSEg6c3M6bW0nKVxyXG4gICAgICBicmVha1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAneXl5eS1NTS1kZCcpXHJcbiAgICAgIGJyZWFrXHJcbiAgfVxyXG4gIHJldHVybiBjZWxsVmFsdWVcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRWRpdFJlbmRlciAoZGVmYXVsdFByb3BzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogQ29sdW1uRWRpdFJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uRWRpdFJlbmRlclBhcmFtcykge1xyXG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSlcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgocmVuZGVyT3B0cy5uYW1lLCB7XHJcbiAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgcHJvcHM6IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUsIGRlZmF1bHRQcm9wcyksXHJcbiAgICAgICAgb246IGdldEVkaXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKSxcclxuICAgICAgICBuYXRpdmVPbjogZ2V0TmF0aXZlT25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgICAgfSlcclxuICAgIF1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyIChoOiBDcmVhdGVFbGVtZW50LCByZW5kZXJPcHRzOiBDb2x1bW5FZGl0UmVuZGVyT3B0aW9ucywgcGFyYW1zOiBDb2x1bW5FZGl0UmVuZGVyUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gIHJldHVybiBbXHJcbiAgICBoKCdCdXR0b24nLCB7XHJcbiAgICAgIGF0dHJzLFxyXG4gICAgICBwcm9wczogZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG51bGwpLFxyXG4gICAgICBvbjogZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcyksXHJcbiAgICAgIG5hdGl2ZU9uOiBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgfSwgY2VsbFRleHQoaCwgcmVuZGVyT3B0cy5jb250ZW50KSlcclxuICBdXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25zRWRpdFJlbmRlciAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogQ29sdW1uRWRpdFJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uRWRpdFJlbmRlclBhcmFtcykge1xyXG4gIHJldHVybiByZW5kZXJPcHRzLmNoaWxkcmVuLm1hcCgoY2hpbGRSZW5kZXJPcHRzOiBDb2x1bW5FZGl0UmVuZGVyT3B0aW9ucykgPT4gZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIoaCwgY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVGaWx0ZXJSZW5kZXIgKGRlZmF1bHRQcm9wcz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKGg6IENyZWF0ZUVsZW1lbnQsIHJlbmRlck9wdHM6IENvbHVtbkZpbHRlclJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uRmlsdGVyUmVuZGVyUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCBuYXRpdmVPbiA9IGdldE5hdGl2ZU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBoKCdkaXYnLCB7XHJcbiAgICAgICAgY2xhc3M6ICd2eGUtdGFibGUtLWZpbHRlci1pdmlldy13cmFwcGVyJ1xyXG4gICAgICB9LCBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YVxyXG4gICAgICAgIHJldHVybiBoKG5hbWUsIHtcclxuICAgICAgICAgIGtleTogb0luZGV4LFxyXG4gICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICBwcm9wczogZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlLCBkZWZhdWx0UHJvcHMpLFxyXG4gICAgICAgICAgb246IGdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgISFvcHRpb24uZGF0YSwgb3B0aW9uKVxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICBuYXRpdmVPblxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pKVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ29uZmlybUZpbHRlciAocGFyYW1zOiBDb2x1bW5GaWx0ZXJSZW5kZXJQYXJhbXMsIGNoZWNrZWQ6IGJvb2xlYW4sIG9wdGlvbjogQ29sdW1uRmlsdGVyUGFyYW1zKSB7XHJcbiAgY29uc3QgeyAkcGFuZWwgfSA9IHBhcmFtc1xyXG4gICRwYW5lbC5jaGFuZ2VPcHRpb24oe30sIGNoZWNrZWQsIG9wdGlvbilcclxufVxyXG5cclxuZnVuY3Rpb24gZGVmYXVsdEZpbHRlck1ldGhvZCAocGFyYW1zOiBDb2x1bW5GaWx0ZXJNZXRob2RQYXJhbXMpIHtcclxuICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uXHJcbiAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXHJcbiAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gZGF0YVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJPcHRpb25zIChoOiBDcmVhdGVFbGVtZW50LCBvcHRpb25zOiBhbnlbXSwgb3B0aW9uUHJvcHM6IE9wdGlvblByb3BzKSB7XHJcbiAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSdcclxuICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9ucywgKGl0ZW0sIG9JbmRleCkgPT4ge1xyXG4gICAgcmV0dXJuIGgoJ09wdGlvbicsIHtcclxuICAgICAga2V5OiBvSW5kZXgsXHJcbiAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgdmFsdWU6IGl0ZW1bdmFsdWVQcm9wXSxcclxuICAgICAgICBsYWJlbDogaXRlbVtsYWJlbFByb3BdLFxyXG4gICAgICAgIGRpc2FibGVkOiBpdGVtLmRpc2FibGVkXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gY2VsbFRleHQgKGg6IENyZWF0ZUVsZW1lbnQsIGNlbGxWYWx1ZTogYW55KSB7XHJcbiAgcmV0dXJuIFtmb3JtYXRUZXh0KGNlbGxWYWx1ZSldXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUZvcm1JdGVtUmVuZGVyIChkZWZhdWx0UHJvcHM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChoOiBDcmVhdGVFbGVtZW50LCByZW5kZXJPcHRzOiBGb3JtSXRlbVJlbmRlck9wdGlvbnMsIHBhcmFtczogRm9ybUl0ZW1SZW5kZXJQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgZGF0YSwgcHJvcGVydHkgfSA9IHBhcmFtc1xyXG4gICAgY29uc3QgeyBuYW1lIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBwcm9wZXJ0eSlcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgobmFtZSwge1xyXG4gICAgICAgIGF0dHJzLFxyXG4gICAgICAgIHByb3BzOiBnZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBpdGVtVmFsdWUsIGRlZmF1bHRQcm9wcyksXHJcbiAgICAgICAgb246IGdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKSxcclxuICAgICAgICBuYXRpdmVPbjogZ2V0TmF0aXZlT25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgICAgfSlcclxuICAgIF1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyIChoOiBDcmVhdGVFbGVtZW50LCByZW5kZXJPcHRzOiBGb3JtSXRlbVJlbmRlck9wdGlvbnMsIHBhcmFtczogRm9ybUl0ZW1SZW5kZXJQYXJhbXMpIHtcclxuICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgcHJvcHMgPSBnZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBudWxsKVxyXG4gIHJldHVybiBbXHJcbiAgICBoKCdCdXR0b24nLCB7XHJcbiAgICAgIGF0dHJzLFxyXG4gICAgICBwcm9wcyxcclxuICAgICAgb246IGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpLFxyXG4gICAgICBuYXRpdmVPbjogZ2V0TmF0aXZlT25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgIH0sIGNlbGxUZXh0KGgsIHJlbmRlck9wdHMuY29udGVudCB8fCBwcm9wcy5jb250ZW50KSlcclxuICBdXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlciAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zLCBwYXJhbXM6IEZvcm1JdGVtUmVuZGVyUGFyYW1zKSB7XHJcbiAgcmV0dXJuIHJlbmRlck9wdHMuY2hpbGRyZW4ubWFwKChjaGlsZFJlbmRlck9wdHM6IEZvcm1JdGVtUmVuZGVyT3B0aW9ucykgPT4gZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXIoaCwgY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFeHBvcnRNZXRob2QgKGdldEV4cG9ydENlbGxWYWx1ZTogRnVuY3Rpb24pIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHBhcmFtczogQ29sdW1uRXhwb3J0Q2VsbFJlbmRlclBhcmFtcykge1xyXG4gICAgY29uc3QgeyByb3csIGNvbHVtbiwgb3B0aW9ucyB9ID0gcGFyYW1zXHJcbiAgICByZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLm9yaWdpbmFsID8gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpIDogZ2V0RXhwb3J0Q2VsbFZhbHVlKGNvbHVtbi5lZGl0UmVuZGVyIHx8IGNvbHVtbi5jZWxsUmVuZGVyLCBwYXJhbXMpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIgKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zLCBwYXJhbXM6IEZvcm1JdGVtUmVuZGVyUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IG5hbWUsIG9wdGlvbnMgPSBbXSwgb3B0aW9uUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgY29uc3QgeyBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnXHJcbiAgICBjb25zdCB2YWx1ZVByb3AgPSBvcHRpb25Qcm9wcy52YWx1ZSB8fCAndmFsdWUnXHJcbiAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBwcm9wZXJ0eSlcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgoYCR7bmFtZX1Hcm91cGAsIHtcclxuICAgICAgICBhdHRycyxcclxuICAgICAgICBwcm9wczogZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlKSxcclxuICAgICAgICBvbjogZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpLFxyXG4gICAgICAgIG5hdGl2ZU9uOiBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICB9LCBvcHRpb25zLm1hcCgob3B0aW9uKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGgobmFtZSwge1xyXG4gICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgbGFiZWw6IG9wdGlvblt2YWx1ZVByb3BdLFxyXG4gICAgICAgICAgICBkaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgb3B0aW9uW2xhYmVsUHJvcF0pXHJcbiAgICAgIH0pKVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOajgOafpeinpuWPkea6kOaYr+WQpuWxnuS6juebruagh+iKgueCuVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXROb2RlIChldm50OiBhbnksIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKSB7XHJcbiAgbGV0IHRhcmdldEVsZW1cclxuICBsZXQgdGFyZ2V0ID0gZXZudC50YXJnZXRcclxuICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC5ub2RlVHlwZSAmJiB0YXJnZXQgIT09IGRvY3VtZW50KSB7XHJcbiAgICBpZiAoY2xhc3NOYW1lICYmIHRhcmdldC5jbGFzc05hbWUgJiYgdGFyZ2V0LmNsYXNzTmFtZS5zcGxpdCAmJiB0YXJnZXQuY2xhc3NOYW1lLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc05hbWUpID4gLTEpIHtcclxuICAgICAgdGFyZ2V0RWxlbSA9IHRhcmdldFxyXG4gICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IGNvbnRhaW5lcikge1xyXG4gICAgICByZXR1cm4geyBmbGFnOiBjbGFzc05hbWUgPyAhIXRhcmdldEVsZW0gOiB0cnVlLCBjb250YWluZXIsIHRhcmdldEVsZW06IHRhcmdldEVsZW0gfVxyXG4gICAgfVxyXG4gICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGVcclxuICB9XHJcbiAgcmV0dXJuIHsgZmxhZzogZmFsc2UgfVxyXG59XHJcblxyXG4vKipcclxuICog5LqL5Lu25YW85a655oCn5aSE55CGXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVDbGVhckV2ZW50IChwYXJhbXM6IEludGVyY2VwdG9yUGFyYW1zLCBlOiBhbnkpIHtcclxuICBjb25zdCBib2R5RWxlbTogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5ib2R5XHJcbiAgY29uc3QgZXZudCA9IHBhcmFtcy4kZXZlbnQgfHwgZVxyXG4gIGlmIChcclxuICAgIC8vIOS4i+aLieahhuOAgeaXpeacn1xyXG4gICAgZ2V0RXZlbnRUYXJnZXROb2RlKGV2bnQsIGJvZHlFbGVtLCAnaXZ1LXNlbGVjdC1kcm9wZG93bicpLmZsYWdcclxuICApIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWfuuS6jiB2eGUtdGFibGUg6KGo5qC855qE6YCC6YWN5o+S5Lu277yM55So5LqO5YW85a65IGl2aWV3IOe7hOS7tuW6k1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZYRVRhYmxlUGx1Z2luSVZpZXcgPSB7XHJcbiAgaW5zdGFsbCAoeyBpbnRlcmNlcHRvciwgcmVuZGVyZXIgfTogdHlwZW9mIFZYRVRhYmxlKSB7XHJcbiAgICByZW5kZXJlci5taXhpbih7XHJcbiAgICAgIElucHV0OiB7XHJcbiAgICAgICAgYXV0b2ZvY3VzOiAnaW5wdXQuaXZ1LWlucHV0JyxcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXHJcbiAgICAgICAgZmlsdGVyTWV0aG9kOiBkZWZhdWx0RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgQXV0b0NvbXBsZXRlOiB7XHJcbiAgICAgICAgYXV0b2ZvY3VzOiAnaW5wdXQuaXZ1LWlucHV0JyxcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXHJcbiAgICAgICAgZmlsdGVyTWV0aG9kOiBkZWZhdWx0RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgSW5wdXROdW1iZXI6IHtcclxuICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5pdnUtaW5wdXQtbnVtYmVyLWlucHV0JyxcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXHJcbiAgICAgICAgZmlsdGVyTWV0aG9kOiBkZWZhdWx0RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgU2VsZWN0OiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdCAoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUpXHJcbiAgICAgICAgICBjb25zdCBvbiA9IGdldEVkaXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICAgICAgY29uc3QgbmF0aXZlT24gPSBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwcykge1xyXG4gICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCdcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICBoKCdTZWxlY3QnLCB7XHJcbiAgICAgICAgICAgICAgICBhdHRycyxcclxuICAgICAgICAgICAgICAgIHByb3BzLFxyXG4gICAgICAgICAgICAgICAgb24sXHJcbiAgICAgICAgICAgICAgICBuYXRpdmVPblxyXG4gICAgICAgICAgICAgIH0sIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoKCdPcHRpb25Hcm91cCcsIHtcclxuICAgICAgICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZ3JvdXBbZ3JvdXBMYWJlbF1cclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAga2V5OiBnSW5kZXhcclxuICAgICAgICAgICAgICAgIH0sIHJlbmRlck9wdGlvbnMoaCwgZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpKVxyXG4gICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBoKCdTZWxlY3QnLCB7XHJcbiAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgcHJvcHMsXHJcbiAgICAgICAgICAgICAgb24sXHJcbiAgICAgICAgICAgICAgbmF0aXZlT25cclxuICAgICAgICAgICAgfSwgcmVuZGVyT3B0aW9ucyhoLCBvcHRpb25zLCBvcHRpb25Qcm9wcykpXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJDZWxsIChoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBnZXRTZWxlY3RDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckZpbHRlciAoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucydcclxuICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCdcclxuICAgICAgICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IG5hdGl2ZU9uID0gZ2V0TmF0aXZlT25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWl2aWV3LXdyYXBwZXInXHJcbiAgICAgICAgICAgIH0sIG9wdGlvbkdyb3Vwc1xyXG4gICAgICAgICAgICAgID8gY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaCgnU2VsZWN0Jywge1xyXG4gICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgIHByb3BzLFxyXG4gICAgICAgICAgICAgICAgICBvbjogZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgcHJvcHMubXVsdGlwbGUgPyAob3B0aW9uLmRhdGEgJiYgb3B0aW9uLmRhdGEubGVuZ3RoID4gMCkgOiAhWEVVdGlscy5lcU51bGwob3B0aW9uLmRhdGEpLCBvcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICBuYXRpdmVPblxyXG4gICAgICAgICAgICAgICAgfSwgWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gaCgnT3B0aW9uR3JvdXAnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiBnSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBncm91cFtncm91cExhYmVsXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSwgcmVuZGVyT3B0aW9ucyhoLCBncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcykpXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIDogY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaCgnU2VsZWN0Jywge1xyXG4gICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgIHByb3BzLFxyXG4gICAgICAgICAgICAgICAgICBvbjogZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgcHJvcHMubXVsdGlwbGUgPyAob3B0aW9uLmRhdGEgJiYgb3B0aW9uLmRhdGEubGVuZ3RoID4gMCkgOiAhWEVVdGlscy5lcU51bGwob3B0aW9uLmRhdGEpLCBvcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICBuYXRpdmVPblxyXG4gICAgICAgICAgICAgICAgfSwgcmVuZGVyT3B0aW9ucyhoLCBvcHRpb25zLCBvcHRpb25Qcm9wcykpXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmlsdGVyTWV0aG9kIChwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvblxyXG4gICAgICAgICAgY29uc3QgeyBwcm9wZXJ0eSwgZmlsdGVyUmVuZGVyOiByZW5kZXJPcHRzIH0gPSBjb2x1bW5cclxuICAgICAgICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBwcm9wZXJ0eSlcclxuICAgICAgICAgIGlmIChwcm9wcy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgICBpZiAoWEVVdGlscy5pc0FycmF5KGNlbGxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5pbmNsdWRlQXJyYXlzKGNlbGxWYWx1ZSwgZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5pbmRleE9mKGNlbGxWYWx1ZSkgPiAtMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXHJcbiAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlID09IGRhdGFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckl0ZW0gKGg6IENyZWF0ZUVsZW1lbnQsIHJlbmRlck9wdHM6IEZvcm1JdGVtUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBGb3JtSXRlbVJlbmRlclBhcmFtcykge1xyXG4gICAgICAgICAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3Vwcywgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgICAgICAgICBjb25zdCB7IGRhdGEsIHByb3BlcnR5IH0gPSBwYXJhbXNcclxuICAgICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IGl0ZW1WYWx1ZSA9IFhFVXRpbHMuZ2V0KGRhdGEsIHByb3BlcnR5KVxyXG4gICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBpdGVtVmFsdWUpXHJcbiAgICAgICAgICBjb25zdCBvbiA9IGdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICAgICAgY29uc3QgbmF0aXZlT24gPSBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwcykge1xyXG4gICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCdcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICBoKCdTZWxlY3QnLCB7XHJcbiAgICAgICAgICAgICAgICBwcm9wcyxcclxuICAgICAgICAgICAgICAgIGF0dHJzLFxyXG4gICAgICAgICAgICAgICAgb24sXHJcbiAgICAgICAgICAgICAgICBuYXRpdmVPblxyXG4gICAgICAgICAgICAgIH0sIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoKCdPcHRpb25Hcm91cCcsIHtcclxuICAgICAgICAgICAgICAgICAga2V5OiBnSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdyb3VwW2dyb3VwTGFiZWxdXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIHJlbmRlck9wdGlvbnMoaCwgZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpKVxyXG4gICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBoKCdTZWxlY3QnLCB7XHJcbiAgICAgICAgICAgICAgcHJvcHMsXHJcbiAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgb24sXHJcbiAgICAgICAgICAgICAgbmF0aXZlT25cclxuICAgICAgICAgICAgfSwgcmVuZGVyT3B0aW9ucyhoLCBvcHRpb25zLCBvcHRpb25Qcm9wcykpXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudCAoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YSwgcHJvcGVydHkgfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgaXRlbVZhbHVlID0gWEVVdGlscy5nZXQoZGF0YSwgcHJvcGVydHkpXHJcbiAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSlcclxuICAgICAgICAgIGNvbnN0IG9uID0gZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgICAgICBjb25zdCBuYXRpdmVPbiA9IGdldE5hdGl2ZU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgICAgICBpZiAob3B0aW9uR3JvdXBzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucydcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgIGgoJ1NlbGVjdCcsIHtcclxuICAgICAgICAgICAgICAgIHByb3BzLFxyXG4gICAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgICBvbixcclxuICAgICAgICAgICAgICAgIG5hdGl2ZU9uXHJcbiAgICAgICAgICAgICAgfSwgWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgoJ09wdGlvbkdyb3VwJywge1xyXG4gICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleCxcclxuICAgICAgICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZ3JvdXBbZ3JvdXBMYWJlbF1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgcmVuZGVyT3B0aW9ucyhoLCBncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcykpXHJcbiAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGgoJ1NlbGVjdCcsIHtcclxuICAgICAgICAgICAgICBwcm9wcyxcclxuICAgICAgICAgICAgICBhdHRycyxcclxuICAgICAgICAgICAgICBvbixcclxuICAgICAgICAgICAgICBuYXRpdmVPblxyXG4gICAgICAgICAgICB9LCByZW5kZXJPcHRpb25zKGgsIG9wdGlvbnMsIG9wdGlvblByb3BzKSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNlbGxFeHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRTZWxlY3RDZWxsVmFsdWUpLFxyXG4gICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldFNlbGVjdENlbGxWYWx1ZSlcclxuICAgICAgfSxcclxuICAgICAgQ2FzY2FkZXI6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKHsgdHJhbnNmZXI6IHRydWUgfSksXHJcbiAgICAgICAgcmVuZGVyQ2VsbCAoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKGgsIHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0Q2FzY2FkZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgY2VsbEV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldENhc2NhZGVyQ2VsbFZhbHVlKSxcclxuICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRDYXNjYWRlckNlbGxWYWx1ZSlcclxuICAgICAgfSxcclxuICAgICAgRGF0ZVBpY2tlcjoge1xyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoeyB0cmFuc2ZlcjogdHJ1ZSB9KSxcclxuICAgICAgICByZW5kZXJDZWxsIChoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBnZXREYXRlUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJGaWx0ZXIgKGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgbmF0aXZlT24gPSBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItaXZpZXctd3JhcHBlcidcclxuICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICByZXR1cm4gaChyZW5kZXJPcHRzLm5hbWUsIHtcclxuICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxyXG4gICAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgICBwcm9wczogZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKSxcclxuICAgICAgICAgICAgICAgIG9uOiBnZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsICEhb3B0aW9uLmRhdGEsIG9wdGlvbilcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgbmF0aXZlT25cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGZpbHRlck1ldGhvZCAocGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBvcHRpb25cclxuICAgICAgICAgIGNvbnN0IHsgZmlsdGVyUmVuZGVyOiByZW5kZXJPcHRzIH0gPSBjb2x1bW5cclxuICAgICAgICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHByb3BzLnR5cGUpIHtcclxuICAgICAgICAgICAgICBjYXNlICdkYXRlcmFuZ2UnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVxdWFsRGF0ZXJhbmdlKGNlbGxWYWx1ZSwgZGF0YSwgcHJvcHMsICd5eXl5LU1NLWRkJylcclxuICAgICAgICAgICAgICBjYXNlICdkYXRldGltZXJhbmdlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcXVhbERhdGVyYW5nZShjZWxsVmFsdWUsIGRhdGEsIHByb3BzLCAneXl5eS1NTS1kZCBISDpzczptbScpXHJcbiAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgPT09IGRhdGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJJdGVtOiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIGNlbGxFeHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXREYXRlUGlja2VyQ2VsbFZhbHVlKSxcclxuICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXREYXRlUGlja2VyQ2VsbFZhbHVlKVxyXG4gICAgICB9LFxyXG4gICAgICBUaW1lUGlja2VyOiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcih7IHRyYW5zZmVyOiB0cnVlIH0pLFxyXG4gICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgUmF0ZToge1xyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcclxuICAgICAgICBmaWx0ZXJNZXRob2Q6IGRlZmF1bHRGaWx0ZXJNZXRob2QsXHJcbiAgICAgICAgcmVuZGVySXRlbTogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBpU3dpdGNoOiB7XHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJGaWx0ZXIgKGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBuYW1lLCBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgbmF0aXZlT24gPSBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItaXZpZXctd3JhcHBlcidcclxuICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICByZXR1cm4gaChuYW1lLCB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgIGF0dHJzLFxyXG4gICAgICAgICAgICAgICAgcHJvcHM6IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb25WYWx1ZSksXHJcbiAgICAgICAgICAgICAgICBvbjogZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXHJcbiAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBYRVV0aWxzLmlzQm9vbGVhbihvcHRpb24uZGF0YSksIG9wdGlvbilcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgbmF0aXZlT25cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGZpbHRlck1ldGhvZDogZGVmYXVsdEZpbHRlck1ldGhvZCxcclxuICAgICAgICByZW5kZXJJdGVtOiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIFJhZGlvOiB7XHJcbiAgICAgICAgcmVuZGVySXRlbTogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIENoZWNrYm94OiB7XHJcbiAgICAgICAgcmVuZGVySXRlbTogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEJ1dHRvbjoge1xyXG4gICAgICAgIHJlbmRlckVkaXQ6IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyLFxyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyLFxyXG4gICAgICAgIHJlbmRlckl0ZW06IGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBkZWZhdWx0QnV0dG9uSXRlbVJlbmRlclxyXG4gICAgICB9LFxyXG4gICAgICBCdXR0b25zOiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdDogZGVmYXVsdEJ1dHRvbnNFZGl0UmVuZGVyLFxyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGRlZmF1bHRCdXR0b25zRWRpdFJlbmRlcixcclxuICAgICAgICByZW5kZXJJdGVtOiBkZWZhdWx0QnV0dG9uc0l0ZW1SZW5kZXIsXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlclxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJGaWx0ZXInLCBoYW5kbGVDbGVhckV2ZW50KVxyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFjdGl2ZWQnLCBoYW5kbGVDbGVhckV2ZW50KVxyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFyZWFzJywgaGFuZGxlQ2xlYXJFdmVudClcclxuICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUgJiYgd2luZG93LlZYRVRhYmxlLnVzZSkge1xyXG4gIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5JVmlldylcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVlhFVGFibGVQbHVnaW5JVmlld1xyXG4iLCJpbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscyc7XG5mdW5jdGlvbiBpc0VtcHR5VmFsdWUoY2VsbFZhbHVlKSB7XG4gICAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gbnVsbCB8fCBjZWxsVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBjZWxsVmFsdWUgPT09ICcnO1xufVxuZnVuY3Rpb24gZ2V0TW9kZWxQcm9wKHJlbmRlck9wdHMpIHtcbiAgICByZXR1cm4gJ3ZhbHVlJztcbn1cbmZ1bmN0aW9uIGdldE1vZGVsRXZlbnQocmVuZGVyT3B0cykge1xuICAgIHJldHVybiAnaW5wdXQnO1xufVxuZnVuY3Rpb24gZ2V0Q2hhbmdlRXZlbnQocmVuZGVyT3B0cykge1xuICAgIHJldHVybiAnb24tY2hhbmdlJztcbn1cbmZ1bmN0aW9uIGdldEZvcm1hdERhdGUodmFsdWUsIHByb3BzLCBkZWZhdWx0Rm9ybWF0KSB7XG4gICAgcmV0dXJuIFhFVXRpbHMudG9EYXRlU3RyaW5nKHZhbHVlLCBwcm9wcy5mb3JtYXQgfHwgZGVmYXVsdEZvcm1hdCk7XG59XG5mdW5jdGlvbiBnZXRGb3JtYXREYXRlcyh2YWx1ZXMsIHByb3BzLCBzZXBhcmF0b3IsIGRlZmF1bHRGb3JtYXQpIHtcbiAgICByZXR1cm4gWEVVdGlscy5tYXAodmFsdWVzLCAoZGF0ZSkgPT4gZ2V0Rm9ybWF0RGF0ZShkYXRlLCBwcm9wcywgZGVmYXVsdEZvcm1hdCkpLmpvaW4oc2VwYXJhdG9yKTtcbn1cbmZ1bmN0aW9uIGVxdWFsRGF0ZXJhbmdlKGNlbGxWYWx1ZSwgZGF0YSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpIHtcbiAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpO1xuICAgIHJldHVybiBjZWxsVmFsdWUgPj0gZ2V0Rm9ybWF0RGF0ZShkYXRhWzBdLCBwcm9wcywgZGVmYXVsdEZvcm1hdCkgJiYgY2VsbFZhbHVlIDw9IGdldEZvcm1hdERhdGUoZGF0YVsxXSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpO1xufVxuZnVuY3Rpb24gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIHZhbHVlLCBkZWZhdWx0UHJvcHMpIHtcbiAgICBjb25zdCB7IHZTaXplIH0gPSBwYXJhbXMuJHRhYmxlO1xuICAgIHJldHVybiBYRVV0aWxzLmFzc2lnbih2U2l6ZSA/IHsgc2l6ZTogdlNpemUgfSA6IHt9LCBkZWZhdWx0UHJvcHMsIHJlbmRlck9wdHMucHJvcHMsIHsgW2dldE1vZGVsUHJvcChyZW5kZXJPcHRzKV06IHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgdmFsdWUsIGRlZmF1bHRQcm9wcykge1xuICAgIGNvbnN0IHsgdlNpemUgfSA9IHBhcmFtcy4kZm9ybTtcbiAgICByZXR1cm4gWEVVdGlscy5hc3NpZ24odlNpemUgPyB7IHNpemU6IHZTaXplIH0gOiB7fSwgZGVmYXVsdFByb3BzLCByZW5kZXJPcHRzLnByb3BzLCB7IFtnZXRNb2RlbFByb3AocmVuZGVyT3B0cyldOiB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFRleHQoY2VsbFZhbHVlKSB7XG4gICAgcmV0dXJuICcnICsgKGlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpID8gJycgOiBjZWxsVmFsdWUpO1xufVxuZnVuY3Rpb24gZ2V0Q2VsbExhYmVsVk5zKGgsIHJlbmRlck9wdHMsIHBhcmFtcywgY2VsbExhYmVsKSB7XG4gICAgY29uc3QgeyBwbGFjZWhvbGRlciB9ID0gcmVuZGVyT3B0cztcbiAgICByZXR1cm4gW1xuICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgY2xhc3M6ICd2eGUtY2VsbC0tbGFiZWwnXG4gICAgICAgIH0sIHBsYWNlaG9sZGVyICYmIGlzRW1wdHlWYWx1ZShjZWxsTGFiZWwpID8gW1xuICAgICAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS1jZWxsLS1wbGFjZWhvbGRlcidcbiAgICAgICAgICAgIH0sIGZvcm1hdFRleHQocGxhY2Vob2xkZXIpKVxuICAgICAgICBdIDogZm9ybWF0VGV4dChjZWxsTGFiZWwpKVxuICAgIF07XG59XG5mdW5jdGlvbiBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBuYXRpdmVFdmVudHMgfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgbmF0aXZlT25zID0ge307XG4gICAgWEVVdGlscy5vYmplY3RFYWNoKG5hdGl2ZUV2ZW50cywgKGZ1bmMsIGtleSkgPT4ge1xuICAgICAgICBuYXRpdmVPbnNba2V5XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICBmdW5jKHBhcmFtcywgLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIG5hdGl2ZU9ucztcbn1cbmZ1bmN0aW9uIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIGlucHV0RnVuYywgY2hhbmdlRnVuYykge1xuICAgIGNvbnN0IHsgZXZlbnRzIH0gPSByZW5kZXJPcHRzO1xuICAgIGNvbnN0IG1vZGVsRXZlbnQgPSBnZXRNb2RlbEV2ZW50KHJlbmRlck9wdHMpO1xuICAgIGNvbnN0IGNoYW5nZUV2ZW50ID0gZ2V0Q2hhbmdlRXZlbnQocmVuZGVyT3B0cyk7XG4gICAgY29uc3QgaXNTYW1lRXZlbnQgPSBjaGFuZ2VFdmVudCA9PT0gbW9kZWxFdmVudDtcbiAgICBjb25zdCBvbnMgPSB7fTtcbiAgICBYRVV0aWxzLm9iamVjdEVhY2goZXZlbnRzLCAoZnVuYywga2V5KSA9PiB7XG4gICAgICAgIG9uc1trZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGZ1bmMocGFyYW1zLCAuLi5hcmdzKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBpZiAoaW5wdXRGdW5jKSB7XG4gICAgICAgIG9uc1ttb2RlbEV2ZW50XSA9IGZ1bmN0aW9uICh0YXJnZXRFdm50KSB7XG4gICAgICAgICAgICBpbnB1dEZ1bmModGFyZ2V0RXZudCk7XG4gICAgICAgICAgICBpZiAoZXZlbnRzICYmIGV2ZW50c1ttb2RlbEV2ZW50XSkge1xuICAgICAgICAgICAgICAgIGV2ZW50c1ttb2RlbEV2ZW50XShwYXJhbXMsIHRhcmdldEV2bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU2FtZUV2ZW50ICYmIGNoYW5nZUZ1bmMpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VGdW5jKHRhcmdldEV2bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIWlzU2FtZUV2ZW50ICYmIGNoYW5nZUZ1bmMpIHtcbiAgICAgICAgb25zW2NoYW5nZUV2ZW50XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICBjaGFuZ2VGdW5jKC4uLmFyZ3MpO1xuICAgICAgICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHNbY2hhbmdlRXZlbnRdKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzW2NoYW5nZUV2ZW50XShwYXJhbXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gb25zO1xufVxuZnVuY3Rpb24gZ2V0RWRpdE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7ICR0YWJsZSwgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICByZXR1cm4gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIOWkhOeQhiBtb2RlbCDlgLzlj4zlkJHnu5HlrppcbiAgICAgICAgWEVVdGlscy5zZXQocm93LCBjb2x1bW4ucHJvcGVydHksIHZhbHVlKTtcbiAgICB9LCAoKSA9PiB7XG4gICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICR0YWJsZS51cGRhdGVTdGF0dXMocGFyYW1zKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgY2hhbmdlRnVuYykge1xuICAgIHJldHVybiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zLCAodmFsdWUpID0+IHtcbiAgICAgICAgLy8g5aSE55CGIG1vZGVsIOWAvOWPjOWQkee7keWumlxuICAgICAgICBvcHRpb24uZGF0YSA9IHZhbHVlO1xuICAgIH0sIGNoYW5nZUZ1bmMpO1xufVxuZnVuY3Rpb24gZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7ICRmb3JtLCBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zO1xuICAgIHJldHVybiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zLCAodmFsdWUpID0+IHtcbiAgICAgICAgLy8g5aSE55CGIG1vZGVsIOWAvOWPjOWQkee7keWumlxuICAgICAgICBYRVV0aWxzLnNldChkYXRhLCBwcm9wZXJ0eSwgdmFsdWUpO1xuICAgIH0sICgpID0+IHtcbiAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgJGZvcm0udXBkYXRlU3RhdHVzKHBhcmFtcyk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBtYXRjaENhc2NhZGVyRGF0YShpbmRleCwgbGlzdCwgdmFsdWVzLCBsYWJlbHMpIHtcbiAgICBjb25zdCB2YWwgPSB2YWx1ZXNbaW5kZXhdO1xuICAgIGlmIChsaXN0ICYmIHZhbHVlcy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICBYRVV0aWxzLmVhY2gobGlzdCwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlID09PSB2YWwpIHtcbiAgICAgICAgICAgICAgICBsYWJlbHMucHVzaChpdGVtLmxhYmVsKTtcbiAgICAgICAgICAgICAgICBtYXRjaENhc2NhZGVyRGF0YSgrK2luZGV4LCBpdGVtLmNoaWxkcmVuLCB2YWx1ZXMsIGxhYmVscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFNlbGVjdENlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBwcm9wcyA9IHt9LCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0ICR0YWJsZSA9IHBhcmFtcy4kdGFibGU7XG4gICAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJztcbiAgICBjb25zdCB2YWx1ZVByb3AgPSBvcHRpb25Qcm9wcy52YWx1ZSB8fCAndmFsdWUnO1xuICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucyc7XG4gICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpO1xuICAgIGNvbnN0IGNvbGlkID0gY29sdW1uLmlkO1xuICAgIGxldCByZXN0O1xuICAgIGxldCBjZWxsRGF0YTtcbiAgICBpZiAocHJvcHMuZmlsdGVyYWJsZSkge1xuICAgICAgICBjb25zdCBmdWxsQWxsRGF0YVJvd01hcCA9ICR0YWJsZS5mdWxsQWxsRGF0YVJvd01hcDtcbiAgICAgICAgY29uc3QgY2FjaGVDZWxsID0gZnVsbEFsbERhdGFSb3dNYXAuaGFzKHJvdyk7XG4gICAgICAgIGlmIChjYWNoZUNlbGwpIHtcbiAgICAgICAgICAgIHJlc3QgPSBmdWxsQWxsRGF0YVJvd01hcC5nZXQocm93KTtcbiAgICAgICAgICAgIGNlbGxEYXRhID0gcmVzdC5jZWxsRGF0YTtcbiAgICAgICAgICAgIGlmICghY2VsbERhdGEpIHtcbiAgICAgICAgICAgICAgICBjZWxsRGF0YSA9IGZ1bGxBbGxEYXRhUm93TWFwLmdldChyb3cpLmNlbGxEYXRhID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3QgJiYgY2VsbERhdGFbY29saWRdICYmIGNlbGxEYXRhW2NvbGlkXS52YWx1ZSA9PT0gY2VsbFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2VsbERhdGFbY29saWRdLmxhYmVsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNFbXB0eVZhbHVlKGNlbGxWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKHByb3BzLm11bHRpcGxlID8gY2VsbFZhbHVlIDogW2NlbGxWYWx1ZV0sIG9wdGlvbkdyb3VwcyA/ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHNlbGVjdEl0ZW07XG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uR3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHNlbGVjdEl0ZW0gPSBYRVV0aWxzLmZpbmQob3B0aW9uR3JvdXBzW2luZGV4XVtncm91cE9wdGlvbnNdLCAoaXRlbSkgPT4gaXRlbVt2YWx1ZVByb3BdID09PSB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2VsbExhYmVsID0gc2VsZWN0SXRlbSA/IHNlbGVjdEl0ZW1bbGFiZWxQcm9wXSA6IHZhbHVlO1xuICAgICAgICAgICAgaWYgKGNlbGxEYXRhICYmIG9wdGlvbnMgJiYgb3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjZWxsRGF0YVtjb2xpZF0gPSB7IHZhbHVlOiBjZWxsVmFsdWUsIGxhYmVsOiBjZWxsTGFiZWwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjZWxsTGFiZWw7XG4gICAgICAgIH0gOiAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEl0ZW0gPSBYRVV0aWxzLmZpbmQob3B0aW9ucywgKGl0ZW0pID0+IGl0ZW1bdmFsdWVQcm9wXSA9PT0gdmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgY2VsbExhYmVsID0gc2VsZWN0SXRlbSA/IHNlbGVjdEl0ZW1bbGFiZWxQcm9wXSA6IHZhbHVlO1xuICAgICAgICAgICAgaWYgKGNlbGxEYXRhICYmIG9wdGlvbnMgJiYgb3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjZWxsRGF0YVtjb2xpZF0gPSB7IHZhbHVlOiBjZWxsVmFsdWUsIGxhYmVsOiBjZWxsTGFiZWwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjZWxsTGFiZWw7XG4gICAgICAgIH0pLmpvaW4oJywgJyk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cbmZ1bmN0aW9uIGdldENhc2NhZGVyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpO1xuICAgIGNvbnN0IHZhbHVlcyA9IGNlbGxWYWx1ZSB8fCBbXTtcbiAgICBjb25zdCBsYWJlbHMgPSBbXTtcbiAgICBtYXRjaENhc2NhZGVyRGF0YSgwLCBwcm9wcy5kYXRhLCB2YWx1ZXMsIGxhYmVscyk7XG4gICAgcmV0dXJuIGxhYmVscy5qb2luKGAgJHtwcm9wcy5zZXBhcmF0b3IgfHwgJy8nfSBgKTtcbn1cbmZ1bmN0aW9uIGdldERhdGVQaWNrZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICBjb25zdCB7IHNlcGFyYXRvciB9ID0gcHJvcHM7XG4gICAgbGV0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KTtcbiAgICBzd2l0Y2ggKHByb3BzLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsICd5eXl5d1dXJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAneXl5eS1NTScpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAneXl5eScpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RhdGVzJzpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsICcsICcsICd5eXl5LU1NLWRkJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZGF0ZXJhbmdlJzpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsIGAgJHtzZXBhcmF0b3IgfHwgJy0nfSBgLCAneXl5eS1NTS1kZCcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RhdGV0aW1lcmFuZ2UnOlxuICAgICAgICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZXMoY2VsbFZhbHVlLCBwcm9wcywgYCAke3NlcGFyYXRvciB8fCAnLSd9IGAsICd5eXl5LU1NLWRkIEhIOnNzOm1tJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGUoY2VsbFZhbHVlLCBwcm9wcywgJ3l5eXktTU0tZGQnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gY2VsbFZhbHVlO1xufVxuZnVuY3Rpb24gY3JlYXRlRWRpdFJlbmRlcihkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGgocmVuZGVyT3B0cy5uYW1lLCB7XG4gICAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgICAgcHJvcHM6IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUsIGRlZmF1bHRQcm9wcyksXG4gICAgICAgICAgICAgICAgb246IGdldEVkaXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKSxcbiAgICAgICAgICAgICAgICBuYXRpdmVPbjogZ2V0TmF0aXZlT25zKHJlbmRlck9wdHMsIHBhcmFtcylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIF07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyKGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgaCgnQnV0dG9uJywge1xuICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICBwcm9wczogZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG51bGwpLFxuICAgICAgICAgICAgb246IGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpLFxuICAgICAgICAgICAgbmF0aXZlT246IGdldE5hdGl2ZU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXG4gICAgICAgIH0sIGNlbGxUZXh0KGgsIHJlbmRlck9wdHMuY29udGVudCkpXG4gICAgXTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25zRWRpdFJlbmRlcihoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gcmVuZGVyT3B0cy5jaGlsZHJlbi5tYXAoKGNoaWxkUmVuZGVyT3B0cykgPT4gZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIoaCwgY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZpbHRlclJlbmRlcihkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICBjb25zdCBuYXRpdmVPbiA9IGdldE5hdGl2ZU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItaXZpZXctd3JhcHBlcidcbiAgICAgICAgICAgIH0sIGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhO1xuICAgICAgICAgICAgICAgIHJldHVybiBoKG5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzLFxuICAgICAgICAgICAgICAgICAgICBwcm9wczogZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlLCBkZWZhdWx0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICBvbjogZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsICEhb3B0aW9uLmRhdGEsIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBuYXRpdmVPblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkpXG4gICAgICAgIF07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBjaGVja2VkLCBvcHRpb24pIHtcbiAgICBjb25zdCB7ICRwYW5lbCB9ID0gcGFyYW1zO1xuICAgICRwYW5lbC5jaGFuZ2VPcHRpb24oe30sIGNoZWNrZWQsIG9wdGlvbik7XG59XG5mdW5jdGlvbiBkZWZhdWx0RmlsdGVyTWV0aG9kKHBhcmFtcykge1xuICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uO1xuICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICByZXR1cm4gY2VsbFZhbHVlID09PSBkYXRhO1xufVxuZnVuY3Rpb24gcmVuZGVyT3B0aW9ucyhoLCBvcHRpb25zLCBvcHRpb25Qcm9wcykge1xuICAgIGNvbnN0IGxhYmVsUHJvcCA9IG9wdGlvblByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgY29uc3QgdmFsdWVQcm9wID0gb3B0aW9uUHJvcHMudmFsdWUgfHwgJ3ZhbHVlJztcbiAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9ucywgKGl0ZW0sIG9JbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4gaCgnT3B0aW9uJywge1xuICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtW3ZhbHVlUHJvcF0sXG4gICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW1bbGFiZWxQcm9wXSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogaXRlbS5kaXNhYmxlZFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGNlbGxUZXh0KGgsIGNlbGxWYWx1ZSkge1xuICAgIHJldHVybiBbZm9ybWF0VGV4dChjZWxsVmFsdWUpXTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZvcm1JdGVtUmVuZGVyKGRlZmF1bHRQcm9wcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgcHJvcGVydHkgfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgeyBuYW1lIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBwcm9wZXJ0eSk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBoKG5hbWUsIHtcbiAgICAgICAgICAgICAgICBhdHRycyxcbiAgICAgICAgICAgICAgICBwcm9wczogZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlLCBkZWZhdWx0UHJvcHMpLFxuICAgICAgICAgICAgICAgIG9uOiBnZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcyksXG4gICAgICAgICAgICAgICAgbmF0aXZlT246IGdldE5hdGl2ZU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICBdO1xuICAgIH07XG59XG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uSXRlbVJlbmRlcihoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgIGNvbnN0IHByb3BzID0gZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgbnVsbCk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgaCgnQnV0dG9uJywge1xuICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAgIG9uOiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKSxcbiAgICAgICAgICAgIG5hdGl2ZU9uOiBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxuICAgICAgICB9LCBjZWxsVGV4dChoLCByZW5kZXJPcHRzLmNvbnRlbnQgfHwgcHJvcHMuY29udGVudCkpXG4gICAgXTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlcihoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gcmVuZGVyT3B0cy5jaGlsZHJlbi5tYXAoKGNoaWxkUmVuZGVyT3B0cykgPT4gZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXIoaCwgY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRFeHBvcnRDZWxsVmFsdWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHJvdywgY29sdW1uLCBvcHRpb25zIH0gPSBwYXJhbXM7XG4gICAgICAgIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luYWwgPyBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSkgOiBnZXRFeHBvcnRDZWxsVmFsdWUoY29sdW1uLmVkaXRSZW5kZXIgfHwgY29sdW1uLmNlbGxSZW5kZXIsIHBhcmFtcyk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlcigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IG5hbWUsIG9wdGlvbnMgPSBbXSwgb3B0aW9uUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgY29uc3QgeyBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnO1xuICAgICAgICBjb25zdCB2YWx1ZVByb3AgPSBvcHRpb25Qcm9wcy52YWx1ZSB8fCAndmFsdWUnO1xuICAgICAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBwcm9wZXJ0eSk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBoKGAke25hbWV9R3JvdXBgLCB7XG4gICAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgICAgcHJvcHM6IGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSksXG4gICAgICAgICAgICAgICAgb246IGdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKSxcbiAgICAgICAgICAgICAgICBuYXRpdmVPbjogZ2V0TmF0aXZlT25zKHJlbmRlck9wdHMsIHBhcmFtcylcbiAgICAgICAgICAgIH0sIG9wdGlvbnMubWFwKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaChuYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogb3B0aW9uW3ZhbHVlUHJvcF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBvcHRpb25bbGFiZWxQcm9wXSk7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgXTtcbiAgICB9O1xufVxuLyoqXG4gKiDmo4Dmn6Xop6blj5HmupDmmK/lkKblsZ7kuo7nm67moIfoioLngrlcbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXROb2RlKGV2bnQsIGNvbnRhaW5lciwgY2xhc3NOYW1lKSB7XG4gICAgbGV0IHRhcmdldEVsZW07XG4gICAgbGV0IHRhcmdldCA9IGV2bnQudGFyZ2V0O1xuICAgIHdoaWxlICh0YXJnZXQgJiYgdGFyZ2V0Lm5vZGVUeXBlICYmIHRhcmdldCAhPT0gZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKGNsYXNzTmFtZSAmJiB0YXJnZXQuY2xhc3NOYW1lICYmIHRhcmdldC5jbGFzc05hbWUuc3BsaXQgJiYgdGFyZ2V0LmNsYXNzTmFtZS5zcGxpdCgnICcpLmluZGV4T2YoY2xhc3NOYW1lKSA+IC0xKSB7XG4gICAgICAgICAgICB0YXJnZXRFbGVtID0gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRhcmdldCA9PT0gY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4geyBmbGFnOiBjbGFzc05hbWUgPyAhIXRhcmdldEVsZW0gOiB0cnVlLCBjb250YWluZXIsIHRhcmdldEVsZW06IHRhcmdldEVsZW0gfTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZmxhZzogZmFsc2UgfTtcbn1cbi8qKlxuICog5LqL5Lu25YW85a655oCn5aSE55CGXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUNsZWFyRXZlbnQocGFyYW1zLCBlKSB7XG4gICAgY29uc3QgYm9keUVsZW0gPSBkb2N1bWVudC5ib2R5O1xuICAgIGNvbnN0IGV2bnQgPSBwYXJhbXMuJGV2ZW50IHx8IGU7XG4gICAgaWYgKFxuICAgIC8vIOS4i+aLieahhuOAgeaXpeacn1xuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZShldm50LCBib2R5RWxlbSwgJ2l2dS1zZWxlY3QtZHJvcGRvd24nKS5mbGFnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIOWfuuS6jiB2eGUtdGFibGUg6KGo5qC855qE6YCC6YWN5o+S5Lu277yM55So5LqO5YW85a65IGl2aWV3IOe7hOS7tuW6k1xuICovXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5JVmlldyA9IHtcbiAgICBpbnN0YWxsKHsgaW50ZXJjZXB0b3IsIHJlbmRlcmVyIH0pIHtcbiAgICAgICAgcmVuZGVyZXIubWl4aW4oe1xuICAgICAgICAgICAgSW5wdXQ6IHtcbiAgICAgICAgICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5pdnUtaW5wdXQnLFxuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBmaWx0ZXJNZXRob2Q6IGRlZmF1bHRGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbTogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEF1dG9Db21wbGV0ZToge1xuICAgICAgICAgICAgICAgIGF1dG9mb2N1czogJ2lucHV0Lml2dS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGZpbHRlck1ldGhvZDogZGVmYXVsdEZpbHRlck1ldGhvZCxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtOiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSW5wdXROdW1iZXI6IHtcbiAgICAgICAgICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5pdnUtaW5wdXQtbnVtYmVyLWlucHV0JyxcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZmlsdGVyTWV0aG9kOiBkZWZhdWx0RmlsdGVyTWV0aG9kLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBTZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0KGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbiA9IGdldEVkaXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmF0aXZlT24gPSBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoJ1NlbGVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlT25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBYRVV0aWxzLm1hcChvcHRpb25Hcm91cHMsIChncm91cCwgZ0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCdPcHRpb25Hcm91cCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdyb3VwW2dyb3VwTGFiZWxdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBnSW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVuZGVyT3B0aW9ucyhoLCBncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaCgnU2VsZWN0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZU9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZW5kZXJPcHRpb25zKGgsIG9wdGlvbnMsIG9wdGlvblByb3BzKSlcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGwoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBnZXRTZWxlY3RDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXIoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmF0aXZlT24gPSBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWl2aWV3LXdyYXBwZXInXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25Hcm91cHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaCgnU2VsZWN0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IGdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsIHByb3BzLm11bHRpcGxlID8gKG9wdGlvbi5kYXRhICYmIG9wdGlvbi5kYXRhLmxlbmd0aCA+IDApIDogIVhFVXRpbHMuZXFOdWxsKG9wdGlvbi5kYXRhKSwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlT25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoJ09wdGlvbkdyb3VwJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZ0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBncm91cFtncm91cExhYmVsXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlbmRlck9wdGlvbnMoaCwgZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoJ1NlbGVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiBnZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBwcm9wcy5tdWx0aXBsZSA/IChvcHRpb24uZGF0YSAmJiBvcHRpb24uZGF0YS5sZW5ndGggPiAwKSA6ICFYRVV0aWxzLmVxTnVsbChvcHRpb24uZGF0YSksIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZU9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlbmRlck9wdGlvbnMoaCwgb3B0aW9ucywgb3B0aW9uUHJvcHMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpbHRlck1ldGhvZChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpb24sIHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BlcnR5LCBmaWx0ZXJSZW5kZXI6IHJlbmRlck9wdHMgfSA9IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWEVVdGlscy5pc0FycmF5KGNlbGxWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5pbmNsdWRlQXJyYXlzKGNlbGxWYWx1ZSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5pbmRleE9mKGNlbGxWYWx1ZSkgPiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSA9PSBkYXRhO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3Vwcywgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIHByb3BlcnR5IH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1WYWx1ZSA9IFhFVXRpbHMuZ2V0KGRhdGEsIHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBpdGVtVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbiA9IGdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmF0aXZlT24gPSBnZXROYXRpdmVPbnMocmVuZGVyT3B0cywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoJ1NlbGVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlT25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBYRVV0aWxzLm1hcChvcHRpb25Hcm91cHMsIChncm91cCwgZ0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCdPcHRpb25Hcm91cCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZ0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZ3JvdXBbZ3JvdXBMYWJlbF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVuZGVyT3B0aW9ucyhoLCBncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaCgnU2VsZWN0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZU9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZW5kZXJPcHRpb25zKGgsIG9wdGlvbnMsIG9wdGlvblByb3BzKSlcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50KGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgcHJvcGVydHkgfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbVZhbHVlID0gWEVVdGlscy5nZXQoZGF0YSwgcHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9uID0gZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVPbiA9IGdldE5hdGl2ZU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uR3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaCgnU2VsZWN0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVPblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoJ09wdGlvbkdyb3VwJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBnSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBncm91cFtncm91cExhYmVsXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByZW5kZXJPcHRpb25zKGgsIGdyb3VwW2dyb3VwT3B0aW9uc10sIG9wdGlvblByb3BzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBoKCdTZWxlY3QnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlT25cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlbmRlck9wdGlvbnMoaCwgb3B0aW9ucywgb3B0aW9uUHJvcHMpKVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2VsbEV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldFNlbGVjdENlbGxWYWx1ZSksXG4gICAgICAgICAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVFeHBvcnRNZXRob2QoZ2V0U2VsZWN0Q2VsbFZhbHVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENhc2NhZGVyOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcih7IHRyYW5zZmVyOiB0cnVlIH0pLFxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGwoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBnZXRDYXNjYWRlckNlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgY2VsbEV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldENhc2NhZGVyQ2VsbFZhbHVlKSxcbiAgICAgICAgICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRDYXNjYWRlckNlbGxWYWx1ZSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBEYXRlUGlja2VyOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcih7IHRyYW5zZmVyOiB0cnVlIH0pLFxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGwoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBnZXREYXRlUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyKGgsIHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVPbiA9IGdldE5hdGl2ZU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItaXZpZXctd3JhcHBlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlbmRlck9wdHMubmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsICEhb3B0aW9uLmRhdGEsIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVPblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmaWx0ZXJNZXRob2QocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBmaWx0ZXJSZW5kZXI6IHJlbmRlck9wdHMgfSA9IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3BzLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXRlcmFuZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXF1YWxEYXRlcmFuZ2UoY2VsbFZhbHVlLCBkYXRhLCBwcm9wcywgJ3l5eXktTU0tZGQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZXJhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVxdWFsRGF0ZXJhbmdlKGNlbGxWYWx1ZSwgZGF0YSwgcHJvcHMsICd5eXl5LU1NLWRkIEhIOnNzOm1tJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtOiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGNlbGxFeHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXREYXRlUGlja2VyQ2VsbFZhbHVlKSxcbiAgICAgICAgICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXREYXRlUGlja2VyQ2VsbFZhbHVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFRpbWVQaWNrZXI6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKHsgdHJhbnNmZXI6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbTogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFJhdGU6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZmlsdGVyTWV0aG9kOiBkZWZhdWx0RmlsdGVyTWV0aG9kLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpU3dpdGNoOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXIoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hdGl2ZU9uID0gZ2V0TmF0aXZlT25zKHJlbmRlck9wdHMsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtdGFibGUtLWZpbHRlci1pdmlldy13cmFwcGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgobmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsIFhFVXRpbHMuaXNCb29sZWFuKG9wdGlvbi5kYXRhKSwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZU9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpbHRlck1ldGhvZDogZGVmYXVsdEZpbHRlck1ldGhvZCxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtOiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgUmFkaW86IHtcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtOiBjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDaGVja2JveDoge1xuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW06IGNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEJ1dHRvbjoge1xuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyLFxuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW06IGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBkZWZhdWx0QnV0dG9uSXRlbVJlbmRlclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogZGVmYXVsdEJ1dHRvbnNFZGl0UmVuZGVyLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW06IGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlcixcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogZGVmYXVsdEJ1dHRvbnNJdGVtUmVuZGVyXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpbnRlcmNlcHRvci5hZGQoJ2V2ZW50LmNsZWFyRmlsdGVyJywgaGFuZGxlQ2xlYXJFdmVudCk7XG4gICAgICAgIGludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJBY3RpdmVkJywgaGFuZGxlQ2xlYXJFdmVudCk7XG4gICAgICAgIGludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJBcmVhcycsIGhhbmRsZUNsZWFyRXZlbnQpO1xuICAgIH1cbn07XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlICYmIHdpbmRvdy5WWEVUYWJsZS51c2UpIHtcbiAgICB3aW5kb3cuVlhFVGFibGUudXNlKFZYRVRhYmxlUGx1Z2luSVZpZXcpO1xufVxuZXhwb3J0IGRlZmF1bHQgVlhFVGFibGVQbHVnaW5JVmlldztcbiJdfQ==
