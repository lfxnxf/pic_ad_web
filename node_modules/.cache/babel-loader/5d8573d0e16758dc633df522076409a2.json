{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js!/Users/zhang/工作/pic_ad/src/libs/axios.js","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/libs/axios.js","mtime":1638355006756},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvemhhbmcvXHU1REU1XHU0RjVDL3BpY19hZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy96aGFuZy9cdTVERTVcdTRGNUMvcGljX2FkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsgLy8gaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwoKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAndmlldy1kZXNpZ24nOwppbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4vdXRpbCc7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnOwppbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHJlbW92ZUNvb2tpZXMgfSBmcm9tICcuL3V0aWwnOwppbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJzsgLy8gY29uc3QgeyBob21lTmFtZSB9ID0gY29uZmlnOwovLyBpbXBvcnQgeyBTcGluIH0gZnJvbSAnaXZpZXcnCi8vIGNvbnN0IGFkZEVycm9yTG9nID0gKGVycm9ySW5mbykgPT4gewovLyAgIGNvbnNvbGUubG9nKCdheGlvcy4uLicpOwovLyAgIGNvbnN0IHsKLy8gICAgIHN0YXR1c1RleHQsCi8vICAgICBzdGF0dXMsCi8vICAgICByZXF1ZXN0OiB7IHJlc3BvbnNlVVJMIH0sCi8vICAgfSA9IGVycm9ySW5mbzsKLy8gICBsZXQgaW5mbyA9IHsKLy8gICAgIHR5cGU6ICdhamF4JywKLy8gICAgIGNvZGU6IHN0YXR1cywKLy8gICAgIG1lczogc3RhdHVzVGV4dCwKLy8gICAgIHVybDogcmVzcG9uc2VVUkwsCi8vICAgfTsKLy8gICBpZiAoIXJlc3BvbnNlVVJMLmluY2x1ZGVzKCdzYXZlX2Vycm9yX2xvZ2dlcicpKSBzdG9yZS5kaXNwYXRjaCgnYWRkRXJyb3JMb2cnLCBpbmZvKTsKLy8gfTsKCnZhciBIdHRwUmVxdWVzdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gSHR0cFJlcXVlc3QoYmFzZVVybCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEh0dHBSZXF1ZXN0KTsKCiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsOwogICAgdGhpcy5xdWV1ZSA9IHt9OwogIH0KCiAgX2NyZWF0ZUNsYXNzKEh0dHBSZXF1ZXN0LCBbewogICAga2V5OiAiZ2V0SW5zaWRlQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnNpZGVDb25maWcoKSB7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgYmFzZVVSTDogdGhpcy5iYXNlVXJsLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgICAgIH0KICAgICAgfTsKICAgICAgcmV0dXJuIGNvbmZpZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXN0cm95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KHVybCkgewogICAgICBkZWxldGUgdGhpcy5xdWV1ZVt1cmxdOwoKICAgICAgaWYgKCFPYmplY3Qua2V5cyh0aGlzLnF1ZXVlKS5sZW5ndGgpIHsvLyBTcGluLmhpZGUoKQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaW50ZXJjZXB0b3JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbnRlcmNlcHRvcnMoaW5zdGFuY2UsIHVybCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8g6K+35rGC5oum5oiqCiAgICAgIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgY29uZmlnLmhlYWRlcnNbJ3gtYWNjZXNzLXRva2VuJ10gPSB1dGlsLmdldFRva2VuKCk7IC8vIOa3u+WKoOWFqOWxgOeahGxvYWRpbmcuLi4KCiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhfdGhpcy5xdWV1ZSkubGVuZ3RoKSB7Ly8gU3Bpbi5zaG93KCkgLy8g5LiN5bu66K6u5byA5ZCv77yM5Zug5Li655WM6Z2i5LiN5Y+L5aW9CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5xdWV1ZVt1cmxdID0gdHJ1ZTsKICAgICAgICByZXR1cm4gY29uZmlnOwogICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICB9KTsgLy8g5re75Yqg5ZON5bqU5oum5oiq5ZmoCgogICAgICBpbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgaXMgPSBfdGhpcy5kZXN0cm95KHVybCk7CgogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CgogICAgICAgIGlmICghaXMpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgey8vIFNwaW4uaGlkZSgpCiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gLTExMjAwNCB8fCBkYXRhLmNvZGUgPT09IC0zMDEwMDMpIHsKICAgICAgICAgIE1lc3NhZ2UuZXJyb3IoJ+acqueZu+W9le+8jOaIlueZu+W9leWkseaViO+8jOivt+eZu+W9lScpOwogICAgICAgICAgcmVtb3ZlQ29va2llcygpOwogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRoLmpvaW4ocHJvY2Vzcy5lbnYuQkFTRV9VUkwsICdsb2dpbicpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yKSk7CiAgICAgICAgaWYgKGVycm9yWydjb2RlJ10gPT09ICdFQ09OTkFCT1JURUQnIHx8ICFlcnJvci5oYXNPd25Qcm9wZXJ0eSgncmVzcG9uc2UnKSkgewogICAgICAgICAgTWVzc2FnZS5lcnJvcign5pyN5Yqh5Zmo6L+e5o6l6ZSZ6K+v77yM6K+35qOA5p+l572R57uc5piv5ZCm5Y+v55SoJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciByZXMgPSBlcnJvclsncmVzcG9uc2UnXTsKCiAgICAgICAgICBpZiAocmVzICYmIHJlcy5oYXNPd25Qcm9wZXJ0eSgnc3RhdHVzJykgJiYgcmVzLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgIHZhciBUT0tFTl9LRVkgPSB1dGlsLmdldFRva2VuKCk7CiAgICAgICAgICAgIENvb2tpZXMucmVtb3ZlKFRPS0VOX0tFWSk7CgogICAgICAgICAgICBpZiAocmVzLmRhdGEubXNnKSB7CiAgICAgICAgICAgICAgTWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcGF0aC5qb2luKHByb2Nlc3MuZW52LkJBU0VfVVJMLCAnbG9naW4nKTsKICAgICAgICAgICAgICBNZXNzYWdlLmVycm9yKCfmnKrnmbvlvZXvvIzmiJbnmbvlvZXlpLHmlYjvvIzor7fnmbvlvZUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgTWVzc2FnZS5lcnJvcihyZXMgJiYgcmVzLmhhc093blByb3BlcnR5KCdkYXRhJykgJiYgcmVzLmRhdGFbJ21zZyddID8gcmVzLmRhdGFbJ21zZyddIDogJ+acjeWKoeWGhemDqOmUmeivrycpOwogICAgICAgICAgfSAvLyDlr7nlk43lupTplJnor6/lgZrngrnku4DkuYgKCgogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyDlk43lupTmi6bmiKoKICAgICAgLy8gaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShyZXMgPT4gewogICAgICAvLyAgIHRoaXMuZGVzdHJveSh1cmwpCiAgICAgIC8vICAgY29uc3QgeyBkYXRhLCBzdGF0dXMgfSA9IHJlcwogICAgICAvLyAgIHJldHVybiB7IGRhdGEsIHN0YXR1cyB9CiAgICAgIC8vIH0sIGVycm9yID0+IHsKICAgICAgLy8gICB0aGlzLmRlc3Ryb3kodXJsKQogICAgICAvLyAgIGNvbnNvbGUubG9nKCdyZXNJbnRlcmNlcHRvcnMuLi4uJykKICAgICAgLy8gICBhZGRFcnJvckxvZyhlcnJvci5yZXNwb25zZSkKICAgICAgLy8gICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpCiAgICAgIC8vIH0pCiAgICB9CiAgfSwgewogICAga2V5OiAicmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdChvcHRpb25zKSB7CiAgICAgIGF4aW9zLmRlZmF1bHRzLndpdGhDcmVkZW50aWFscyA9IHRydWU7CiAgICAgIGF4aW9zLmRlZmF1bHRzLmNyb3NzRG9tYWluID0gdHJ1ZTsKICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOwogICAgICB2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgICAgIHRpbWVvdXQ6IDYwMDAwMAogICAgICB9KTsKICAgICAgdmFyIHNlc3Npb25pZCA9IGdldFRva2VuKCk7CgogICAgICBzd2l0Y2ggKG9wdGlvbnMubWV0aG9kLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICBjYXNlICdQT1NUJzoKICAgICAgICAgIGlmIChzZXNzaW9uaWQpIHsKICAgICAgICAgICAgaWYgKCFfLmhhcyhvcHRpb25zLCAnZGF0YScpIHx8IF8uaXNFbXB0eShvcHRpb25zLmRhdGEpIHx8ICFvcHRpb25zLmRhdGEpIHsKICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB7CiAgICAgICAgICAgICAgICBzZXNzaW9uaWQ6IHNlc3Npb25pZAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnNlc3Npb25pZCA9IHNlc3Npb25pZDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdHRVQnOgogICAgICAgICAgaWYgKHNlc3Npb25pZCkgewogICAgICAgICAgICBpZiAoIV8uaGFzKG9wdGlvbnMsICdwYXJhbXMnKSB8fCBfLmlzRW1wdHkob3B0aW9ucy5wYXJhbXMpIHx8ICFvcHRpb25zLnBhcmFtcykgewogICAgICAgICAgICAgIG9wdGlvbnMucGFyYW1zID0gewogICAgICAgICAgICAgICAgc2Vzc2lvbmlkOiBzZXNzaW9uaWQKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIG9wdGlvbnMucGFyYW1zID0ge307CiAgICAgICAgICAgICAgb3B0aW9ucy5wYXJhbXMuc2Vzc2lvbmlkID0gc2Vzc2lvbmlkOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAvLyBzdGF0ZW1lbnRzX2RlZgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIG9wdGlvbnMuc2Vzc2lvbmlkID0gc2Vzc2lvbmlkOwogICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLmdldEluc2lkZUNvbmZpZygpLCBvcHRpb25zKTsKICAgICAgdGhpcy5pbnRlcmNlcHRvcnMoaW5zdGFuY2UsIG9wdGlvbnMudXJsKTsKICAgICAgcmV0dXJuIGluc3RhbmNlKG9wdGlvbnMpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEh0dHBSZXF1ZXN0Owp9KCk7CgpleHBvcnQgZGVmYXVsdCBIdHRwUmVxdWVzdDs="},{"version":3,"sources":["/Users/zhang/工作/pic_ad/src/libs/axios.js"],"names":["axios","Vue","Message","util","Cookies","path","config","getToken","removeCookies","_","HttpRequest","baseUrl","queue","baseURL","headers","url","Object","keys","length","instance","interceptors","request","use","error","Promise","reject","response","res","is","destroy","data","setTimeout","code","window","location","href","join","process","env","BASE_URL","hasOwnProperty","status","TOKEN_KEY","remove","msg","options","defaults","withCredentials","crossDomain","post","create","timeout","sessionid","method","toUpperCase","has","isEmpty","params","assign","getInsideConfig"],"mappings":"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","sourcesContent":["import axios from 'axios';\n// import store from '@/store';\nimport Vue from 'vue';\nimport { Message } from 'view-design';\nimport * as util from './util';\nimport Cookies from 'js-cookie';\nimport path from 'path';\nimport config from '@/config';\nimport { getToken, removeCookies } from './util';\nimport _ from 'underscore';\n\n// const { homeName } = config;\n// import { Spin } from 'iview'\n// const addErrorLog = (errorInfo) => {\n//   console.log('axios...');\n//   const {\n//     statusText,\n//     status,\n//     request: { responseURL },\n//   } = errorInfo;\n//   let info = {\n//     type: 'ajax',\n//     code: status,\n//     mes: statusText,\n//     url: responseURL,\n//   };\n//   if (!responseURL.includes('save_error_logger')) store.dispatch('addErrorLog', info);\n// };\n\n\nclass HttpRequest {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl;\n    this.queue = {};\n  }\n  getInsideConfig() {\n    const config = {\n      baseURL: this.baseUrl,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n    };\n    return config;\n  }\n  destroy(url) {\n    delete this.queue[url];\n    if (!Object.keys(this.queue).length) {\n      // Spin.hide()\n    }\n  }\n  interceptors(instance, url) {\n    // 请求拦截\n    instance.interceptors.request.use(\n      (config) => {\n        config.headers['x-access-token'] = util.getToken();\n        // 添加全局的loading...\n        if (!Object.keys(this.queue).length) {\n          // Spin.show() // 不建议开启，因为界面不友好\n        }\n        this.queue[url] = true;\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      },\n    );\n\n    // 添加响应拦截器\n    instance.interceptors.response.use(\n      (res) => {\n        const is = this.destroy(url);\n        const { data } = res;\n        if (!is) {\n          setTimeout(() => {\n            // Spin.hide()\n          }, 500);\n        }\n        if (data.code === -112004 || data.code === -301003) {\n          Message.error('未登录，或登录失效，请登录');\n          removeCookies();\n          window.location.href = path.join(process.env.BASE_URL, 'login');\n        }\n        return data;\n      },\n      (error) => {\n        // console.log(JSON.stringify(error));\n        if (error['code'] === 'ECONNABORTED' || !error.hasOwnProperty('response')) {\n          Message.error('服务器连接错误，请检查网络是否可用');\n        } else {\n          let res = error['response'];\n          if (res && res.hasOwnProperty('status') && res.status === 401) {\n            let TOKEN_KEY = util.getToken();\n            Cookies.remove(TOKEN_KEY);\n            if (res.data.msg) {\n              Message.error(res.data.msg);\n            } else {\n              window.location.href = path.join(process.env.BASE_URL, 'login');\n              Message.error('未登录，或登录失效，请登录');\n            }\n          } else {\n            Message.error(\n              res && res.hasOwnProperty('data') && res.data['msg'] ?\n              res.data['msg'] :\n              '服务内部错误',\n            );\n          }\n          // 对响应错误做点什么\n          return Promise.reject(error);\n        }\n      },\n    );\n    // 响应拦截\n    // instance.interceptors.response.use(res => {\n    //   this.destroy(url)\n    //   const { data, status } = res\n    //   return { data, status }\n    // }, error => {\n    //   this.destroy(url)\n    //   console.log('resInterceptors....')\n    //   addErrorLog(error.response)\n    //   return Promise.reject(error)\n    // })\n  }\n  request(options) {\n    axios.defaults.withCredentials=true;\n    axios.defaults.crossDomain=true;\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n    const instance = axios.create({\n      timeout: 600000,\n    });\n    let sessionid = getToken();\n    switch (options.method.toUpperCase()) {\n      case 'POST':\n        if (sessionid) {\n          if (!_.has(options, 'data') || _.isEmpty(options.data) || !options.data) {\n            options.data = {\n              sessionid: sessionid\n            }\n          } else {\n            options.data.sessionid = sessionid;\n          }\n        }\n        break;\n      case 'GET':\n        if (sessionid) {\n          if (!_.has(options, 'params') || _.isEmpty(options.params) || !options.params) {\n            options.params = {\n              sessionid: sessionid\n            }\n          } else {\n            // options.params = {};\n            options.params.sessionid = sessionid;\n          }\n        }\n        break;\n      default:\n        // statements_def\n        break;\n    }\n    options.sessionid = sessionid;\n    options = Object.assign(this.getInsideConfig(), options);\n    this.interceptors(instance, options.url);\n    return instance(options);\n  }\n}\nexport default HttpRequest;\n"]}]}