{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/setting/role-setting/components/edit-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/setting/role-setting/components/edit-modal.vue","mtime":1638355006802},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL2NhbnRlZW5fbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGFuZy9jYW50ZWVuX21hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBidG5Mb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGlzX2VuYWJsZTogMQogICAgICB9LAogICAgICBydWxlRm9ybTogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXkurrlkZjnsbvlnosnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHt9LAogIGNvbXB1dGVkOiB7CiAgICBlZGl0TW9kYWw6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnJvbGUuZWRpdE1vZGFsOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEVkaXRSb2xlTW9kYWwnLCB2YWwpOwogICAgICB9CiAgICB9LAogICAgY3VycmVudERhdGE6IGZ1bmN0aW9uIGN1cnJlbnREYXRhKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucm9sZS5jdXJyZW50RGF0YTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGVkaXRSb2xlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZWRpdFJvbGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5lZGl0TW9kYWwudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gX29iamVjdFNwcmVhZCh7fSwgX3RoaXMuZm9ybSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgncm9sZUVkaXQnLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5yZXR1cm5fY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueS6uuWRmOexu+Wei+aIkOWKn++8gScpOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdyb2xlTGlzdCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlX3NpemU6IF90aGlzLiRwYXJlbnQucGFnZV9zaXplCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RWRpdFJvbGVNb2RhbCcsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRyZWZzLmVkaXRNb2RhbC5yZXNldEZpZWxkcygpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBlZGl0Um9sZSgpIHsKICAgICAgICByZXR1cm4gX2VkaXRSb2xlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBlZGl0Um9sZTsKICAgIH0oKQogIH0sCiAgd2F0Y2g6IHsKICAgIGVkaXRNb2RhbDogZnVuY3Rpb24gZWRpdE1vZGFsKHZhbCkgewogICAgICBpZiAodmFsKSB7CiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy5jdXJyZW50RGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["edit-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,IAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,SAAA,EAAA;AAFA,OAFA;AAMA,MAAA,QAAA,EAAA;AACA,QAAA,IAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AADA;AANA,KAAA;AAYA,GAdA;AAgBA,EAAA,UAAA,EAAA,EAhBA;AAkBA,EAAA,QAAA,EAAA;AACA,IAAA,SAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,GAJA,EAIA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,GAAA;AACA;AANA,KADA;AASA,IAAA,WATA,yBASA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,WAAA;AACA;AAXA,GAlBA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,QAAA;AAAA,8EAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,qBAAA,KAAA,CAAA,SAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,sBAAA,KAAA,EAAA;AACA,oBAAA,KAAA,CAAA,UAAA,GAAA,IAAA;;AACA,wBAAA,MAAA,qBACA,KAAA,CAAA,IADA,CAAA;;AAGA,oBAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,UAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,WAAA,IAAA,CAAA,EAAA;AACA,wBAAA,KAAA,CAAA,UAAA,GAAA,KAAA;;AACA,wBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,WAAA;;AACA,wBAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,UAAA,EAAA;AACA,0BAAA,WAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,aADA;AAEA,0BAAA,SAAA,EAAA,KAAA,CAAA,OAAA,CAAA;AAFA,yBAAA;;AAIA,wBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,KAAA;;AACA,wBAAA,KAAA,CAAA,KAAA,CAAA,SAAA,CAAA,WAAA;AACA;AACA,qBAXA,WAWA,UAAA,GAAA,EAAA;AACA,sBAAA,KAAA,CAAA,UAAA,GAAA,KAAA;AACA,qBAbA;AAcA;AACA,iBArBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AADA,GAjCA;AA2DA,EAAA,KAAA,EAAA;AACA,IAAA,SADA,qBACA,GADA,EACA;AACA,UAAA,GAAA,EAAA;AACA,aAAA,IAAA,GAAA,KAAA,WAAA;AACA,OAFA,MAEA;AACA,aAAA,UAAA,GAAA,KAAA;AACA;AACA;AAPA;AA3DA,CAAA","sourcesContent":["<!--  -->\n<template>\n  <Modal\n    v-model=\"editModal\"\n    title=\"修改人员类型信息\"\n    :footer-hide=\"true\"\n    width=\"420px\">\n    <Form :model=\"form\" :label-width=\"90\" ref=\"editModal\" :rules=\"ruleForm\">\n      <FormItem label=\"名称\" prop=\"name\">\n        <Input v-model=\"form.name\" style=\"width: 200px\" placeholder=\"请输入名称\" />\n      </FormItem>\n      <FormItem label=\"是否有效\">\n        <RadioGroup v-model=\"form.is_enable\">\n          <Radio label=\"1\">有效</Radio>\n          <Radio label=\"0\">无效</Radio>\n        </RadioGroup>\n      </FormItem>\n      <div class=\"text-center margin-bottom-20 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setEditRoleModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"editRole\">确定</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      btnLoading: false,\n      form: {\n        name: '',\n        is_enable: 1,\n      },\n      ruleForm: {\n        name: [\n          { required: true, message: '请输入人员类型', trigger: 'blur' }\n        ],\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    editModal:{\n      get(){\n        return this.$store.state.role.editModal;\n      },\n      set(val){\n        this.$store.commit('setEditRoleModal', val)\n      }\n    },\n    currentData(){\n      return this.$store.state.role.currentData;\n    }\n\n  },\n\n  methods: {\n    editRole: async function(){\n      this.$refs.editModal.validate((valid) => {\n        if (valid) {\n          this.btnLoading = true;\n          let params = {\n            ...this.form\n          }\n          this.$store.dispatch('roleEdit', params).then(res => {\n            if (res.return_code == 0) {\n              this.btnLoading = false;\n              this.$Message.success('修改人员类型成功！')\n              this.$store.dispatch('roleList', {\n                merchant_id: this.$store.state.user.curMerchantId,\n                page_size: this.$parent.page_size\n              });\n              this.$store.commit('setEditRoleModal', false);\n              this.$refs.editModal.resetFields();\n            }\n          }).catch(err=>{\n            this.btnLoading = false;\n          });\n        }\n      });\n    },\n  },\n  watch:{\n    editModal(val){\n      if(val){\n        this.form = this.currentData;\n      }else{\n        this.btnLoading = false;\n      }\n    }\n  }\n}\n\n</script>\n<style lang='less' scoped>\n</style>\n"],"sourceRoot":"src/views/setting/role-setting/components"}]}