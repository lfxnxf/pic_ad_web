{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/staff-management/dining-staff/components/add-otheruser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/staff-management/dining-staff/components/add-otheruser.vue","mtime":1638522076785},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL2NhbnRlZW5fbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGFuZy9jYW50ZWVuX21hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IF8gZnJvbSAidW5kZXJzY29yZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkLW90aGVydXNlci1tb2RhbC52dWUiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBidG5Mb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGlkX25vOiAnJywKICAgICAgICBwaG9uZXM6ICcnLAogICAgICAgIHJvbGVfaWQ6IHVuZGVmaW5lZCwKICAgICAgICBjYXJkX25vOiAnJywKICAgICAgICBlbWFpbHM6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWnk+WQjScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBpZF9ubzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpei6q+S7veivgeWPtycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBwaG9uZXM6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnmiYvmnLrlj7cnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcm9sZV9pZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeS6uuWRmOexu+WeiycsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBjb21wdXRlZDogewogICAgcm9sZUxpc3Q6IGZ1bmN0aW9uIHJvbGVMaXN0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucm9sZS5yb2xlTGlzdC5yZXN1bHQ7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRPdGhlclVzZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9hZGRPdGhlclVzZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtT3RoZXJVc2VyTW9kYWwudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5mb3JtKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgIG1lcmNoYW50X2lkOiBfdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkLAogICAgICAgICAgICAgICAgICAgICAgdXNlcl90eXBlOiAyLAogICAgICAgICAgICAgICAgICAgICAgY191c2VyY29kZTogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIuZW1wVXNlckNvZGUsCiAgICAgICAgICAgICAgICAgICAgICBvcmdfaWQ6IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck9yZ0lkLAogICAgICAgICAgICAgICAgICAgICAgb3JnX25hbWU6IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck9yZ05hbWUsCiAgICAgICAgICAgICAgICAgICAgICBpc19hZG1pbjogMCwKICAgICAgICAgICAgICAgICAgICAgIGlzX3dhbGxldF9hZG1pbjogMAogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zRGF0YSA9IFtdOwogICAgICAgICAgICAgICAgICAgIHBhcmFtc0RhdGEucHVzaChwYXJhbXMpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgQmFzZTY0ID0gcmVxdWlyZSgnanMtYmFzZTY0JykuQmFzZTY0OwoKICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlscyA9IEJhc2U2NC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkocGFyYW1zRGF0YSkpOwogICAgICAgICAgICAgICAgICAgIHZhciByZXFQYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uaWQ6IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnRva2VuLAogICAgICAgICAgICAgICAgICAgICAgdXNlcl9kZXRhaWw6IGRldGFpbHMKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJBZGQnLCByZXFQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5yZXR1cm5fY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOWwsemkkOS6uuWRmOaIkOWKn++8gScpOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHBhcmVudC5xdWVyeSgpOyAvLyB0aGlzLiRzdG9yZS5jb21taXQoJ3NldE90aGVyVXNlck1vZGFsJywgZmFsc2UpOwoKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRyZWZzLmZvcm1PdGhlclVzZXJNb2RhbC5yZXNldEZpZWxkcygpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJE1lc3NhZ2UuZXJyb3IoIumUmeivr+egge+8miIgKyByZXMucmV0dXJuX2NvZGUgKyAiLCDplJnor6/kv6Hmga/vvJoiICsgcmVzLnJldHVybl9tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5idG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYWRkT3RoZXJVc2VyPT09PT09ZXJyb3I+Pj4+IiArIGVycik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYWRkT3RoZXJVc2VyKCkgewogICAgICAgIHJldHVybiBfYWRkT3RoZXJVc2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhZGRPdGhlclVzZXI7CiAgICB9KCkKICB9LAogIHdhdGNoOiB7CiAgICBvdGhlclVzZXJBZGRNb2RhbDogZnVuY3Rpb24gb3RoZXJVc2VyQWRkTW9kYWwodmFsKSB7CiAgICAgIGlmICghdmFsKSB7CiAgICAgICAgdGhpcy5mb3JtID0gewogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICBpZF9ubzogJycsCiAgICAgICAgICBwaG9uZXM6ICcnLAogICAgICAgICAgcm9sZV9pZDogdW5kZWZpbmVkLAogICAgICAgICAgY2FyZF9ubzogJycsCiAgICAgICAgICBlbWFpbHM6ICcnCiAgICAgICAgfTsKICAgICAgICB0aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsvLyB0aGlzLiRyZWZzWydmb3JtT3RoZXJVc2VyTW9kYWwnXS5yZXNldEZpZWxkcygpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["add-otheruser.vue"],"names":[],"mappings":"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","sourcesContent":["\n<!--  -->\n<template>\n  <div>\n    <Form class=\"form-wrapper margin-top-20\" :model=\"form\" :label-width=\"80\" ref=\"formOtherUserModal\" :rules=\"ruleForm\" >\n      <FormItem label=\"姓名\" prop=\"name\">\n        <Input type=\"text\" v-model=\"form.name\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"身份证号\" prop=\"id_no\">\n        <Input type=\"text\" v-model=\"form.id_no\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"手机号\"  prop=\"phones\">\n        <Input type=\"text\" v-model=\"form.phones\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"人员类型\" prop=\"role_id\">\n        <Select class=\"r\" v-model=\"form.role_id\" style=\"width: 80%;\">\n          <Option v-for=\"item of roleList\" :key=\"item.role_id\" :value=\"item.role_id+''\">{{item.name}}</Option>\n        </Select>\n      </FormItem>\n      <FormItem label=\"就餐卡号\">\n        <Input type=\"text\" v-model=\"form.card_no\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"邮箱\">\n        <Input type=\"text\" v-model=\"form.emails\" style=\"width: 80%;\"/>\n      </FormItem>\n      <div class=\"text-center margin-bottom-30 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"form={};\">重置</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"addOtherUser\">确定</Button>\n      </div>\n\n    </Form>\n  </div>\n</template>\n\n<script>\nimport _ from \"underscore\";\n\nexport default {\n  name: \"add-otheruser-modal.vue\",\n  data () {\n    return {\n      btnLoading: false,\n      form: {\n        name: '',\n        id_no: '',\n        phones: '',\n        role_id: undefined,\n        card_no: '',\n        emails: ''\n      },\n      ruleForm: {\n        name: [\n          { required: true, message: '请输入姓名', trigger: 'blur' }\n        ],\n        id_no: [\n          { required: true, message: '请输入身份证号', trigger: 'blur' }\n        ],\n        phones: [\n          { required: true, message: '请填写手机号', trigger: 'blur' }\n        ],\n        role_id: [\n          { required: true, message: '请选择人员类型', trigger: 'change' }\n        ],\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    roleList(){\n      return this.$store.state.role.roleList.result;\n    },\n\n  },\n\n  methods: {\n    addOtherUser: async function(){\n      this.$refs.formOtherUserModal.validate((valid) => {\n        if (valid) {\n          this.btnLoading = true;\n          let params = {\n            ...this.form,\n            merchant_id: this.$store.state.user.curMerchantId,\n            user_type: 2,\n            c_usercode: this.$store.state.user.empUserCode,\n            org_id: this.$store.state.user.curOrgId,\n            org_name: this.$store.state.user.curOrgName,\n            is_admin: 0,\n            is_wallet_admin: 0,\n          };\n\n          let paramsData = [];\n          paramsData.push(params);\n\n          let Base64 = require('js-base64').Base64;\n          let details = Base64.encode(JSON.stringify(paramsData));\n\n          let reqParams = {\n            sessionid: this.$store.state.user.token,\n            user_detail: details,\n          };\n\n          this.$store.dispatch('userAdd', reqParams).then(res=>{\n            if(res.return_code == 0){\n              this.btnLoading = false;\n              this.$Message.success('添加就餐人员成功！');\n              this.$parent.query();\n              // this.$store.commit('setOtherUserModal', false);\n              this.$refs.formOtherUserModal.resetFields();\n            }\n            else{\n              this.$Message.error(\"错误码：\" + res.return_code + \", 错误信息：\" + res.return_message);\n            }\n          }).catch((err) => {\n            this.btnLoading = false;\n            console.log(\"addOtherUser======error>>>>\" + err);\n          });\n        }\n      })\n    },\n  },\n  watch: {\n    otherUserAddModal(val){\n      if(!val){\n        this.form = {\n          name: '',\n          id_no: '',\n          phones: '',\n          role_id: undefined,\n          card_no: '',\n          emails: ''\n        }\n        this.btnLoading = false;\n      }else{\n        // this.$refs['formOtherUserModal'].resetFields();\n      }\n    }\n  }\n}\n\n</script>\n<style lang='less' scoped>\n</style>\n"],"sourceRoot":"src/views/staff-management/dining-staff/components"}]}