{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/common/login/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/common/login/login.vue","mtime":1638355006777},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGFuZy9jYW50ZWVuX21hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGxvZ2luTmF2IGZyb20gJ0AvY29tcG9uZW50cy9sb2dpbi1uYXYnOwppbXBvcnQgRm9ybUNvbXB1dGVyIGZyb20gJy4vY29tcG9uZW50cy9mb3JtLWNvbXB1dGVyJzsKaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7CmltcG9ydCB7IGxvY2FsU2F2ZSwgbG9jYWxSZWFkLCBzZXRDb29raWVzSXRlbSB9IGZyb20gJ0AvbGlicy91dGlsJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNwaW5TaG93OiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGxvZ2luTmF2OiBsb2dpbk5hdiwKICAgIEZvcm1Db21wdXRlcjogRm9ybUNvbXB1dGVyCiAgfSwKICBjb21wdXRlZDoge30sCiAgbWV0aG9kczogewogICAgLy8g5L2/55SoaWNsb3Vk55qEdG9rZW7mjaLlj5bnlKjmiLfkuK3lv4NzZXNzaW9uaWTvvIzov5nkuKrpgLvovpHmnInpl67popjvvIzkuI3og73nlKh0b2tlbuWcqHdlYuerr+eZu+W9le+8jOWFt+S9k+WOn+WboOS4uu+8muiOt+WPlmljbG91ZCB0b2tlbu+8jHdlYuaXoOazleebtOaOpeS7juS6kemXqOaIt+mAmui/h2NvZGXmjaLlj5Z0b2tlbu+8jOS6kemXqOaIt+S4jeWFgeiuuOi3qOWfn++8jOmcgOimgeacjeWKoeerr+eUqGNvZGXmjaLlj5Z0b2tlbgogICAgZmV0Y2hJY3BBY2Nlc3NUb2tlbjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2ZldGNoSWNwQWNjZXNzVG9rZW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoY29kZSkgewogICAgICAgIHZhciBwYXJhbXMsIHVzZXJJbmZvOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgY29kZTogY29kZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhZG1pbkxvZ2luJywgcGFyYW1zKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdXNlckluZm8gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImZldGNoSWNwQWNjZXNzVG9rZW4tLS0tLT4+Pj4+IiArIEpTT04uc3RyaW5naWZ5KHVzZXJJbmZvKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB1c2VySW5mbyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBmZXRjaEljcEFjY2Vzc1Rva2VuKF94KSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaEljcEFjY2Vzc1Rva2VuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZXRjaEljcEFjY2Vzc1Rva2VuOwogICAgfSgpLAogICAgLy8g5Yik5pat5piv5ZCm5Li656ys5LiJ5pa56K6k6K+B5Zue6LCDCiAgICB0aGlyZEF1dGg6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlyZEF1dGggPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGFyZ3MpIHsKICAgICAgICB2YXIgcmVzdWx0LCBzdGF0ZSwgaWNsb3VkUmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXN1bHQgPSB7CiAgICAgICAgICAgICAgICAgIHBvczogMCwKICAgICAgICAgICAgICAgICAgLy8gMC3pnZ7kuInmlrnorqTor4HvvIwxIC0g5LiJ5pa56K6k6K+B5oiQ5Yqf77yMLTEgLSDkuInmlrnorqTor4HlpLHotKXvvIwKICAgICAgICAgICAgICAgICAgbXNnOiAnJywKICAgICAgICAgICAgICAgICAgZGF0YToge30KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCEoIV8uaXNFbXB0eShhcmdzKSAmJiBfLmhhcyhhcmdzLCAnY29kZScpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyDmoKHpqozlj4LmlbDmmK/lkKbkuLrnrKzkuInmlrnorqTor4HvvIzkuJTlj4LmlbDmmK/lkKblkIjms5UKICAgICAgICAgICAgICAgIHJlc3VsdC5wb3MgPSAxOwogICAgICAgICAgICAgICAgc3RhdGUgPSBfLmhhcyhhcmdzLCAnc3RhdGUnKSAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJncy5zdGF0ZSkgPT09ICdbb2JqZWN0IFN0cmluZ10nID8gSlNPTi5wYXJzZShhcmdzLnN0YXRlKSA6IHt9OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gc3RhdGUudHlwZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gX2NvbnRleHQyLnQwID09PSAnaWNsb3VkJyA/IDggOiAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJY3BBY2Nlc3NUb2tlbihhcmdzLmNvZGUpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgaWNsb3VkUmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICByZXN1bHQuZGF0YSA9IGljbG91ZFJlczsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDE0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDE0KTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0MlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHJlc3VsdC5wb3MgPSAtMTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0Mi50MSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcywgW1sxLCAxN11dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdGhpcmRBdXRoKF94MikgewogICAgICAgIHJldHVybiBfdGhpcmRBdXRoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlyZEF1dGg7CiAgICB9KCksCiAgICAvLyDkv53lrZjmnKzlnLDmlbDmja4KICAgIHNhdmVMb2NhbDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NhdmVMb2NhbCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTModWNSZXMpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInNhdmVMb2NhbCA9PT0+ICIsIEpTT04uc3RyaW5naWZ5KHVjUmVzKSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEFkbWluUm9sZScsIHVjUmVzLmFkbWluX3JvbGUpOwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDdXJEZXBhcnRtZW50JywgdWNSZXMuZGVwYXJ0bWVudCk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1ckRlcGFydG1lbnROYW1lJywgdWNSZXMuZGVwYXJ0bWVudF9uYW1lKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyRW1wSWQnLCB1Y1Jlcy5lbXBfaWQpOwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRMYXN0TG9naW5UaW1lJywgdWNSZXMubGFzdF9sb2dpbl90aW1lKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyVXNlck5hbWUnLCB1Y1Jlcy5uYW1lKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyT3JnSWQnLCB1Y1Jlcy5vcmdfaWQpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInVjUmVzLm9yZ19pZCA9PT0+ICIsIHVjUmVzLm9yZ19pZCk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1ck9yZ05hbWUnLCB1Y1Jlcy5vcmdfbmFtZSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidWNSZXMub3JnX25hbWUgPT09PiAiLCB1Y1Jlcy5vcmdfbmFtZSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1clVzZXJDb2RlJywgdWNSZXMudXNlcmNvZGUpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInVjUmVzLnVzZXJjb2RlID09PT4gIiwgdWNSZXMudXNlcmNvZGUpOwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRUb2tlbicsIHVjUmVzLnNlc3Npb25pZCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidWNSZXMuc2Vzc2lvbmlkID09PT4gIiwgdWNSZXMuc2Vzc2lvbmlkKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RW1wVXNlckNvZGUnLCB1Y1Jlcy5jX3VzZXJjb2RlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ1Y1Jlcy5jX3VzZXJjb2RlID09PT4gIiwgdWNSZXMuY191c2VyY29kZSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1ck1lcmNoYW50SWQnLCB1Y1Jlcy5tZXJjaGFudF9pZCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidWNSZXMubWVyY2hhbnRfaWQgPT09PiAiLCB1Y1Jlcy5tZXJjaGFudF9pZCk7CiAgICAgICAgICAgICAgICB1Y1Jlcy5tZXJjaGFudF9uYW1lID0gdWNSZXMubWVyY2hhbnRfaWQgPyB1Y1Jlcy5tZXJjaGFudF9uYW1lIDogJ+euoeeQhuWRmCc7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1ck1lcmNoYW50TmFtZScsIHVjUmVzLm1lcmNoYW50X25hbWUpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInVjUmVzLm1lcmNoYW50X25hbWUgPT09PiAiLCB1Y1Jlcy5tZXJjaGFudF9uYW1lKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyTWVyY2hhbnRVc2VyQ29kZScsIHVjUmVzLm1lcmNoYW50X2NvZGUpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInVjUmVzLm1lcmNoYW50X3VzZXJjb2RlID09PT4gIiwgdWNSZXMubWVyY2hhbnRfY29kZSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzYXZlTG9jYWwoX3gzKSB7CiAgICAgICAgcmV0dXJuIF9zYXZlTG9jYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNhdmVMb2NhbDsKICAgIH0oKQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHZhciBhcmdzLCB0aGlyZEF1dGhSZXMsIHVjUmVzLCBtc2csIGlzQWRtaW47CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMuJHJvdXRlLnF1ZXJ5ID09PT0+ICcsIHRoaXMuJHJvdXRlLnF1ZXJ5KQogICAgICAgICAgICAgIGFyZ3MgPSBfdGhpcy4kcm91dGUucXVlcnk7CgogICAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KGFyZ3MpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDM7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy50aGlyZEF1dGgoYXJncyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgdGhpcmRBdXRoUmVzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgdWNSZXMgPSB7fTsKICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSB0aGlyZEF1dGhSZXMucG9zOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gX2NvbnRleHQ0LnQwID09PSAxID8gMTEgOiBfY29udGV4dDQudDAgPT09IC0xID8gMjEgOiAyNDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX3RoaXMuc3BpblNob3cgPSB0cnVlOwoKICAgICAgICAgICAgICBpZiAodGhpcmRBdXRoUmVzLmRhdGEuZGF0YSA9PT0gInt9IikgewogICAgICAgICAgICAgICAgbXNnID0gJ+iupOivgeW8guW4uCc7CgogICAgICAgICAgICAgICAgX3RoaXMuJE1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICAgICAgICBjb250ZW50OiBtc2csCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMCwKICAgICAgICAgICAgICAgICAgY2xvc2FibGU6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVjUmVzID0gdGhpcmRBdXRoUmVzLmRhdGEuZGF0YTsKCiAgICAgICAgICAgICAgX3RoaXMuc2F2ZUxvY2FsKHVjUmVzKTsKCiAgICAgICAgICAgICAgaXNBZG1pbiA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzLnNwaW5TaG93ID0gZmFsc2U7CgogICAgICAgICAgICAgIGlmICh1Y1Jlcy5hZG1pbl9yb2xlID09PSAic3VwZXJ2aXNvcl9hZG1pbiIpIHsKICAgICAgICAgICAgICAgIGlzQWRtaW4gPSB0cnVlOwoKICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+eZu+W9leaIkOWKnycpOwoKICAgICAgICAgICAgICAgIF90aGlzLnNwaW5TaG93ID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgcGF0aDogJy9idXNpbmVzcy1pbmZvcm1hdGlvbi9iYXNpYy1pbmZvcm1hdGlvbicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHVjUmVzLmFkbWluX3JvbGUgPT09ICJtZXJjaGFudF9hZG1pbiIpIHsKICAgICAgICAgICAgICAgIGlzQWRtaW4gPSB0cnVlOwoKICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+eZu+W9leaIkOWKnycpOwoKICAgICAgICAgICAgICAgIF90aGlzLnNwaW5TaG93ID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgcGF0aDogJy9idXNpbmVzcy1pbmZvcm1hdGlvbi9iYXNpYy1pbmZvcm1hdGlvbicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCFpc0FkbWluKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zcGluU2hvdyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+eZu+W9leWksei0pScpOwoKICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJicmVhayIsIDI3KTsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgX3RoaXMuJE1lc3NhZ2UuZXJyb3IoJ+eZu+W9leWksei0pSEhJyk7CgogICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICBwYXRoOiAnL2xvZ2luJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgiYnJlYWsiLCAyNyk7CgogICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLmVycm9yKCfnmbvlvZXlpLHotKUhJyk7CgogICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICBwYXRoOiAnL2xvZ2luJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgiYnJlYWsiLCAyNyk7CgogICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMjk7CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnQxID0gX2NvbnRleHQ0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0NC50MSk7CgogICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMywgMjldXSk7CiAgICB9KSkoKTsKICB9Cn07"},{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<!--  -->\n<template>\n  <div class=\"login loginV2\">\n    <Spin class=\"login_spin\" size=\"large\" fix v-if=\"spinShow\">\n      <Icon type=\"ios-loading\" size=18 class=\"demo-spin-icon-load\"></Icon>\n      <div class=\"margin-top-10 font-size16\">登录中</div>\n    </Spin>\n    <login-nav></login-nav>\n    <div class=\"content\">\n      <div class=\"mask\"></div>\n      <div class=\"form_wrapper\">\n        <img src=\"@/assets/images/login_bg.jpg\" alt=\"\">\n        <form-computer class=\"form-computer\"></form-computer>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport loginNav from '@/components/login-nav';\nimport FormComputer from './components/form-computer';\nimport _ from 'underscore';\nimport { localSave, localRead, setCookiesItem } from '@/libs/util';\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      spinShow: false\n    };\n  },\n\n  components: {\n    loginNav,\n    FormComputer,\n  },\n\n  computed: {},\n\n  methods: {\n    // 使用icloud的token换取用户中心sessionid，这个逻辑有问题，不能用token在web端登录，具体原因为：获取icloud token，web无法直接从云门户通过code换取token，云门户不允许跨域，需要服务端用code换取token\n    fetchIcpAccessToken: async function(code) {\n      let params = {\n        code: code,\n      };\n      let userInfo = await this.$store.dispatch('adminLogin', params);\n      console.log(\"fetchIcpAccessToken----->>>>>\" + JSON.stringify(userInfo))\n      return userInfo;\n    },\n\n    // 判断是否为第三方认证回调\n    thirdAuth: async function(args) {\n      let result = {\n        pos: 0, // 0-非三方认证，1 - 三方认证成功，-1 - 三方认证失败，\n        msg: '',\n        data: {}\n      };\n      try {\n        if (!_.isEmpty(args) && _.has(args, 'code')) {\n          // 校验参数是否为第三方认证，且参数是否合法\n          result.pos = 1;\n          let state = _.has(args, 'state') && Object.prototype.toString.call(args.state) === '[object String]' ? JSON.parse(args.state) : {};\n          switch (state.type) {\n            case 'icloud':\n              let icloudRes = await this.fetchIcpAccessToken(args.code);\n              result.data = icloudRes;\n              break;\n            default:\n              break;\n          }\n        }\n        return result;\n      } catch (e) {\n        result.pos = -1;\n        console.log(e);\n        return result;\n      }\n    },\n\n    // 保存本地数据\n    saveLocal: async function(ucRes) {\n      console.log(\"saveLocal ===> \", JSON.stringify(ucRes));\n      this.$store.commit('setAdminRole', ucRes.admin_role);\n      this.$store.commit('setCurDepartment', ucRes.department);\n      this.$store.commit('setCurDepartmentName', ucRes.department_name);\n      this.$store.commit('setCurEmpId', ucRes.emp_id);\n      this.$store.commit('setLastLoginTime', ucRes.last_login_time);\n      this.$store.commit('setCurUserName', ucRes.name);\n      this.$store.commit('setCurOrgId', ucRes.org_id);\n      console.log(\"ucRes.org_id ===> \", ucRes.org_id);\n      this.$store.commit('setCurOrgName', ucRes.org_name);\n      console.log(\"ucRes.org_name ===> \", ucRes.org_name);\n      this.$store.commit('setCurUserCode', ucRes.usercode);\n      console.log(\"ucRes.usercode ===> \", ucRes.usercode);\n      this.$store.commit('setToken', ucRes.sessionid);\n      console.log(\"ucRes.sessionid ===> \", ucRes.sessionid);\n      this.$store.commit('setEmpUserCode', ucRes.c_usercode);\n      console.log(\"ucRes.c_usercode ===> \", ucRes.c_usercode);\n      this.$store.commit('setCurMerchantId', ucRes.merchant_id);\n      console.log(\"ucRes.merchant_id ===> \", ucRes.merchant_id);\n      ucRes.merchant_name = ucRes.merchant_id?ucRes.merchant_name:'管理员';\n      this.$store.commit('setCurMerchantName', ucRes.merchant_name);\n      console.log(\"ucRes.merchant_name ===> \", ucRes.merchant_name);\n      this.$store.commit('setCurMerchantUserCode', ucRes.merchant_code);\n      console.log(\"ucRes.merchant_usercode ===> \", ucRes.merchant_code);\n    },\n\n  },\n\n  async mounted() {\n    // console.log('this.$route.query ====> ', this.$route.query)\n    let args = this.$route.query;\n\n    if (_.isEmpty(args))\n      return;\n\n    try {\n      let thirdAuthRes = await this.thirdAuth(args);\n      let ucRes = {};\n      \n      switch (thirdAuthRes.pos) {\n        case 1:\n          this.spinShow = true;\n          if (thirdAuthRes.data.data === \"{}\"){\n            let msg = '认证异常';\n            this.$Message.error({\n              content: msg,\n              duration: 10,\n              closable: true\n            });\n            this.$router.replace({path:'/login'});\n          }\n\n          ucRes = thirdAuthRes.data.data;\n          this.saveLocal(ucRes);\n\n          let isAdmin = false;\n          this.spinShow = false;\n          if (ucRes.admin_role === \"supervisor_admin\") {\n            isAdmin = true;\n            this.$Message.success('登录成功');\n            this.spinShow = false;\n            this.$router.push({path: '/business-information/basic-information'});\n          }\n          if (ucRes.admin_role === \"merchant_admin\") {\n            isAdmin = true;\n            this.$Message.success('登录成功');\n            this.spinShow = false;\n            this.$router.push({path: '/business-information/basic-information'});\n          }\n\n          if (!isAdmin){\n            this.spinShow = false;\n            this.$Message.success('登录失败');\n            this.$router.replace({path: '/login'});\n          }\n          break;\n        case -1:\n          this.$Message.error('登录失败!!');\n          this.$router.replace({path: '/login'});\n          break;\n        default:\n          this.$Message.error('登录失败!');\n          this.$router.replace({path: '/login'});\n          break;\n      }\n\n    } catch (e) {\n      console.log(e);\n    }\n  }\n}\n</script>\n<style lang='less' scoped>\n@import './style';\n</style>\n"],"sourceRoot":"src/views/common/login"}]}