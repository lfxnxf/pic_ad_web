{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/src/libs/util.js","dependencies":[{"path":"/Users/zhang/canteen_manage/src/libs/util.js","mtime":1640065471601},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvemhhbmcvY2FudGVlbl9tYW5hZ2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL2NhbnRlZW5fbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtZmxvYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnOyAvLyBjb29raWXkv53lrZjnmoTlpKnmlbAKCmltcG9ydCBjb25maWcgZnJvbSAnQC9jb25maWcnOwppbXBvcnQgeyBmb3JFYWNoLCBoYXNPbmVPZiwgb2JqRXF1YWwgfSBmcm9tICdAL2xpYnMvdG9vbHMnOwppbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJzsKaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7CmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICJodG1sMmNhbnZhcyI7CmltcG9ydCBKU1BERiBmcm9tICJqc3BkZiI7CmltcG9ydCB7IEpTRW5jcnlwdCB9IGZyb20gJ2pzZW5jcnlwdCc7CmV4cG9ydCB2YXIgZ2V0UmFuZG9tID0gZnVuY3Rpb24gZ2V0UmFuZG9tKCkgewogIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5OTk5OTkpLnRvU3RyaW5nKCk7Cn07CmV4cG9ydCB2YXIgaXNJblByZXJlbmRlck1vZGUgPSB3aW5kb3cuX19JU19JTl9QUkVSRU5ERVJfTU9ERSB8fCBmYWxzZTsKZXhwb3J0IHZhciBkZWxheUFmdGVyUmVuZGVyID0gaXNJblByZXJlbmRlck1vZGUgPyA1MDAgOiAwOwpleHBvcnQgdmFyIFRPS0VOX0tFWSA9ICd0b2tlbic7CmV4cG9ydCB2YXIgU0VTU0lPTl9LRVkgPSAnc2Vzc2lvbmlkJzsKZXhwb3J0IHZhciBJRF9UWVBFX0RDVCA9IHsKICAnMSc6ICfouqvku73or4EnLAogICcyJzogJ+aKpOeFpycsCiAgJzMnOiAn5YW25LuWJwp9OwpleHBvcnQgdmFyIHNldFRva2VuID0gZnVuY3Rpb24gc2V0VG9rZW4odG9rZW4pIHsKICBDb29raWVzLnNldChUT0tFTl9LRVksIHRva2VuLCB7CiAgICBleHBpcmVzOiBjb25maWcuY29va2llRXhwaXJlcyB8fCAxCiAgfSk7Cn07CmV4cG9ydCB2YXIgZ2V0VG9rZW4gPSBmdW5jdGlvbiBnZXRUb2tlbigpIHsKICB2YXIgdG9rZW4gPSBDb29raWVzLmdldChUT0tFTl9LRVkpOwogIGlmICh0b2tlbikgcmV0dXJuIHRva2VuO2Vsc2UgcmV0dXJuIGZhbHNlOwp9OwpleHBvcnQgdmFyIHNldFNlc3Npb24gPSBmdW5jdGlvbiBzZXRTZXNzaW9uKHNlc3Npb24pIHsKICBDb29raWVzLnNldChTRVNTSU9OX0tFWSwgc2Vzc2lvbiwgewogICAgZXhwaXJlczogY29uZmlnLmNvb2tpZUV4cGlyZXMgfHwgMQogIH0pOwp9OwpleHBvcnQgdmFyIGdldFNlc3Npb24gPSBmdW5jdGlvbiBnZXRTZXNzaW9uKCkgewogIHZhciBzZXNzaW9uID0gQ29va2llcy5nZXQoU0VTU0lPTl9LRVkpOwogIGlmIChzZXNzaW9uKSByZXR1cm4gc2Vzc2lvbjtlbHNlIHJldHVybiBmYWxzZTsKfTsKZXhwb3J0IHZhciByZW1vdmVDb29raWVzID0gZnVuY3Rpb24gcmVtb3ZlQ29va2llcygpIHsKICBDb29raWVzLnJlbW92ZSgnYXZhdGFyJyk7CiAgQ29va2llcy5yZW1vdmUoJ3Rva2VuJyk7CiAgQ29va2llcy5yZW1vdmUoJ25pY2tuYW1lJyk7CiAgQ29va2llcy5yZW1vdmUoJ2xhc3RfbG9naW5fdGltZScpOwp9OwpleHBvcnQgdmFyIGhhc0NoaWxkID0gZnVuY3Rpb24gaGFzQ2hpbGQoaXRlbSkgewogIHJldHVybiBpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoICE9PSAwOwp9OwoKdmFyIHNob3dUaGlzTWVudUVsZSA9IGZ1bmN0aW9uIHNob3dUaGlzTWVudUVsZShpdGVtLCBhY2Nlc3MpIHsKICBpZiAoaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS5hY2Nlc3MgJiYgaXRlbS5tZXRhLmFjY2Vzcy5sZW5ndGgpIHsKICAgIGlmIChoYXNPbmVPZihpdGVtLm1ldGEuYWNjZXNzLCBhY2Nlc3MpKSByZXR1cm4gdHJ1ZTtlbHNlIHJldHVybiBmYWxzZTsKICB9IGVsc2UgcmV0dXJuIHRydWU7Cn07Ci8qKgogKiBAcGFyYW0ge0FycmF5fSBsaXN0IOmAmui/h+i3r+eUseWIl+ihqOW+l+WIsOiPnOWNleWIl+ihqAogKiBAcmV0dXJucyB7QXJyYXl9CiAqLwoKCmV4cG9ydCB2YXIgZ2V0TWVudUJ5Um91dGVyID0gZnVuY3Rpb24gZ2V0TWVudUJ5Um91dGVyKGxpc3QsIGFjY2VzcykgewogIC8vIGNvbnNvbGUubG9nKCdsaXN0OiAnICsgSlNPTi5zdHJpbmdpZnkobGlzdCwgbnVsbCwgNCkpOwogIC8vIGNvbnNvbGUubG9nKCJnZXRNZW51QnlSb3V0ZXIgcGVybWlzc2lvbjogIiArIHBlcm1pc3Npb24pCiAgdmFyIHJlcyA9IFtdOwogIGZvckVhY2gobGlzdCwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmICghaXRlbS5tZXRhIHx8IGl0ZW0ubWV0YSAmJiAhaXRlbS5tZXRhLmhpZGVJbk1lbnUpIHsKICAgICAgdmFyIG9iaiA9IHsKICAgICAgICBpY29uOiBpdGVtLm1ldGEgJiYgaXRlbS5tZXRhLmljb24gfHwgJycsCiAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgIG1ldGE6IGl0ZW0ubWV0YQogICAgICB9OwoKICAgICAgaWYgKChoYXNDaGlsZChpdGVtKSB8fCBpdGVtLm1ldGEgJiYgaXRlbS5tZXRhLnNob3dBbHdheXMpICYmIHNob3dUaGlzTWVudUVsZShpdGVtLCBhY2Nlc3MpKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coIml0ZW06ICIgKyBKU09OLnN0cmluZ2lmeShpdGVtKSkKICAgICAgICBvYmouY2hpbGRyZW4gPSBnZXRNZW51QnlSb3V0ZXIoaXRlbS5jaGlsZHJlbiwgYWNjZXNzKTsKICAgICAgfQoKICAgICAgaWYgKGl0ZW0ubWV0YSAmJiBpdGVtLm1ldGEuaHJlZikgb2JqLmhyZWYgPSBpdGVtLm1ldGEuaHJlZjsKICAgICAgaWYgKHNob3dUaGlzTWVudUVsZShpdGVtLCBhY2Nlc3MpKSByZXMucHVzaChvYmopOwogICAgfQogIH0pOwogIHJldHVybiByZXM7Cn07Ci8qKgogKiBAcGFyYW0ge0FycmF5fSByb3V0ZU1ldGNoZWQg5b2T5YmN6Lev55SxbWV0Y2hlZAogKiBAcmV0dXJucyB7QXJyYXl9CiAqLwoKZXhwb3J0IHZhciBnZXRCcmVhZENydW1iTGlzdCA9IGZ1bmN0aW9uIGdldEJyZWFkQ3J1bWJMaXN0KHJvdXRlLCBob21lUm91dGUpIHsKICB2YXIgaG9tZUl0ZW0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGhvbWVSb3V0ZSksIHt9LCB7CiAgICBpY29uOiBob21lUm91dGUubWV0YS5pY29uCiAgfSk7CgogIHZhciByb3V0ZU1ldGNoZWQgPSByb3V0ZS5tYXRjaGVkOwogIGlmIChyb3V0ZU1ldGNoZWQuc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gaG9tZVJvdXRlLm5hbWU7CiAgfSkpIHJldHVybiBbaG9tZUl0ZW1dOwogIHZhciByZXMgPSByb3V0ZU1ldGNoZWQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5tZXRhID09PSB1bmRlZmluZWQgfHwgIWl0ZW0ubWV0YS5oaWRlOwogIH0pLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgdmFyIG1ldGEgPSBfb2JqZWN0U3ByZWFkKHt9LCBpdGVtLm1ldGEpOwoKICAgIGlmIChtZXRhLnRpdGxlICYmIHR5cGVvZiBtZXRhLnRpdGxlID09PSAnZnVuY3Rpb24nKSBtZXRhLnRpdGxlID0gbWV0YS50aXRsZShyb3V0ZSk7CiAgICB2YXIgb2JqID0gewogICAgICBpY29uOiBpdGVtLm1ldGEgJiYgaXRlbS5tZXRhLmljb24gfHwgJycsCiAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgbWV0YTogbWV0YQogICAgfTsKICAgIHJldHVybiBvYmo7CiAgfSk7CiAgcmVzID0gcmVzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuICFpdGVtLm1ldGEuaGlkZUluTWVudTsKICB9KTsKICByZXR1cm4gW19vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaG9tZUl0ZW0pLCB7fSwgewogICAgdG86IGhvbWVSb3V0ZS5wYXRoCiAgfSldLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzKSk7Cn07CmV4cG9ydCB2YXIgZ2V0Um91dGVUaXRsZUhhbmRsZWQgPSBmdW5jdGlvbiBnZXRSb3V0ZVRpdGxlSGFuZGxlZChyb3V0ZSkgewogIHZhciByb3V0ZXIgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3V0ZSk7CgogIHZhciBtZXRhID0gX29iamVjdFNwcmVhZCh7fSwgcm91dGUubWV0YSk7CgogIGlmIChtZXRhLnRpdGxlICYmIHR5cGVvZiBtZXRhLnRpdGxlID09PSAnZnVuY3Rpb24nKSBtZXRhLnRpdGxlID0gbWV0YS50aXRsZShyb3V0ZXIpOwogIHJvdXRlci5tZXRhID0gbWV0YTsKICByZXR1cm4gcm91dGVyOwp9OwpleHBvcnQgdmFyIHNob3dUaXRsZSA9IGZ1bmN0aW9uIHNob3dUaXRsZShpdGVtLCB2bSkgewogIHJldHVybiB2bS4kY29uZmlnLnVzZUkxOG4gPyB2bS4kdChpdGVtLm5hbWUpIDogaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS50aXRsZSB8fCBpdGVtLm5hbWU7Cn07Ci8qKgogKiBAZGVzY3JpcHRpb24g5pys5Zyw5a2Y5YKo5ZKM6I635Y+W5qCH562+5a+86Iiq5YiX6KGoCiAqLwoKZXhwb3J0IHZhciBzZXRUYWdOYXZMaXN0SW5Mb2NhbHN0b3JhZ2UgPSBmdW5jdGlvbiBzZXRUYWdOYXZMaXN0SW5Mb2NhbHN0b3JhZ2UobGlzdCkgewogIGxvY2FsU3RvcmFnZS50YWdOYXZlTGlzdCA9IEpTT04uc3RyaW5naWZ5KGxpc3QpOwp9OwovKioKICogQHJldHVybnMge0FycmF5fSDlhbbkuK3nmoTmr4/kuKrlhYPntKDlj6rljIXlkKvot6/nlLHljp/kv6Hmga/kuK3nmoRuYW1lLCBwYXRoLCBtZXRh5LiJ6aG5CiAqLwoKZXhwb3J0IHZhciBnZXRUYWdOYXZMaXN0RnJvbUxvY2Fsc3RvcmFnZSA9IGZ1bmN0aW9uIGdldFRhZ05hdkxpc3RGcm9tTG9jYWxzdG9yYWdlKCkgewogIHZhciBsaXN0ID0gbG9jYWxTdG9yYWdlLnRhZ05hdmVMaXN0OwogIHJldHVybiBsaXN0ID8gSlNPTi5wYXJzZShsaXN0KSA6IFtdOwp9OwovKioKICogQHBhcmFtIHtBcnJheX0gcm91dGVycyDot6/nlLHliJfooajmlbDnu4QKICogQGRlc2NyaXB0aW9uIOeUqOS6juaJvuWIsOi3r+eUseWIl+ihqOS4rW5hbWXkuLpob21l55qE5a+56LGhCiAqLwoKZXhwb3J0IHZhciBnZXRIb21lUm91dGUgPSBmdW5jdGlvbiBnZXRIb21lUm91dGUocm91dGVycykgewogIHZhciBob21lTmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2hvbWVQYWdlJzsKICB2YXIgaSA9IC0xOwogIHZhciBsZW4gPSByb3V0ZXJzLmxlbmd0aDsKICB2YXIgaG9tZVJvdXRlID0ge307CgogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIHZhciBpdGVtID0gcm91dGVyc1tpXTsKCiAgICBpZiAoaXRlbS5jaGlsZHJlbiAmJiBpdGVtLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICB2YXIgcmVzID0gZ2V0SG9tZVJvdXRlKGl0ZW0uY2hpbGRyZW4pOwogICAgICBpZiAocmVzLm5hbWUpIHJldHVybiByZXM7CiAgICB9IGVsc2UgewogICAgICBpZiAoaXRlbS5uYW1lID09PSBob21lTmFtZSkgaG9tZVJvdXRlID0gaXRlbTsKICAgIH0KICB9CgogIHJldHVybiBob21lUm91dGU7Cn07Ci8qKgogKiBAcGFyYW0geyp9IGxpc3Qg546w5pyJ5qCH562+5a+86Iiq5YiX6KGoCiAqIEBwYXJhbSB7Kn0gbmV3Um91dGUg5paw5re75Yqg55qE6Lev55Sx5Y6f5L+h5oGv5a+56LGhCiAqIEBkZXNjcmlwdGlvbiDlpoLmnpzor6VuZXdSb3V0ZeW3sue7j+WtmOWcqOWImeS4jeWGjea3u+WKoAogKi8KCmV4cG9ydCB2YXIgZ2V0TmV3VGFnTGlzdCA9IGZ1bmN0aW9uIGdldE5ld1RhZ0xpc3QobGlzdCwgbmV3Um91dGUpIHsKICB2YXIgbmFtZSA9IG5ld1JvdXRlLm5hbWUsCiAgICAgIHBhdGggPSBuZXdSb3V0ZS5wYXRoLAogICAgICBtZXRhID0gbmV3Um91dGUubWV0YTsKCiAgdmFyIG5ld0xpc3QgPSBfdG9Db25zdW1hYmxlQXJyYXkobGlzdCk7CgogIGlmIChuZXdMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gbmFtZTsKICB9KSA+PSAwKSByZXR1cm4gbmV3TGlzdDtlbHNlIG5ld0xpc3QucHVzaCh7CiAgICBuYW1lOiBuYW1lLAogICAgcGF0aDogcGF0aCwKICAgIG1ldGE6IG1ldGEKICB9KTsKICByZXR1cm4gbmV3TGlzdDsKfTsKLyoqCiAqIEBwYXJhbSB7Kn0gYWNjZXNzIOeUqOaIt+adg+mZkOaVsOe7hO+8jOWmgiBbJ3N1cGVyX2FkbWluJywgJ2FkbWluJ10KICogQHBhcmFtIHsqfSByb3V0ZSDot6/nlLHliJfooagKICovCgp2YXIgaGFzQWNjZXNzID0gZnVuY3Rpb24gaGFzQWNjZXNzKGFjY2Vzcywgcm91dGUpIHsKICBpZiAocm91dGUubWV0YSAmJiByb3V0ZS5tZXRhLmFjY2VzcykgcmV0dXJuIGhhc09uZU9mKGFjY2Vzcywgcm91dGUubWV0YS5hY2Nlc3MpO2Vsc2UgcmV0dXJuIHRydWU7Cn07Ci8qKgogKiDmnYPpibQKICogQHBhcmFtIHsqfSBuYW1lIOWNs+Wwhui3s+i9rOeahOi3r+eUsW5hbWUKICogQHBhcmFtIHsqfSBhY2Nlc3Mg55So5oi35p2D6ZmQ5pWw57uECiAqIEBwYXJhbSB7Kn0gcm91dGVzIOi3r+eUseWIl+ihqAogKiBAZGVzY3JpcHRpb24g55So5oi35piv5ZCm5Y+v6Lez6L2s5Yiw6K+l6aG1CiAqLwoKCmV4cG9ydCB2YXIgY2FuVHVyblRvID0gZnVuY3Rpb24gY2FuVHVyblRvKG5hbWUsIGFjY2Vzcywgcm91dGVzKSB7CiAgdmFyIHJvdXRlUGVybWlzc2lvbkp1ZGdlID0gZnVuY3Rpb24gcm91dGVQZXJtaXNzaW9uSnVkZ2UobGlzdCkgewogICAgcmV0dXJuIGxpc3Quc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoaXRlbS5jaGlsZHJlbiAmJiBpdGVtLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIHJldHVybiByb3V0ZVBlcm1pc3Npb25KdWRnZShpdGVtLmNoaWxkcmVuKTsKICAgICAgfSBlbHNlIGlmIChpdGVtLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICByZXR1cm4gaGFzQWNjZXNzKGFjY2VzcywgaXRlbSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIHJldHVybiByb3V0ZVBlcm1pc3Npb25KdWRnZShyb3V0ZXMpOwp9OwovKioKICogQHBhcmFtIHtTdHJpbmd9IHVybAogKiBAZGVzY3JpcHRpb24g5LuOVVJM5Lit6Kej5p6Q5Y+C5pWwCiAqLwoKZXhwb3J0IHZhciBnZXRQYXJhbXMgPSBmdW5jdGlvbiBnZXRQYXJhbXModXJsKSB7CiAgdmFyIGtleVZhbHVlQXJyID0gdXJsLnNwbGl0KCc/JylbMV0uc3BsaXQoJyYnKTsKICB2YXIgcGFyYW1PYmogPSB7fTsKICBrZXlWYWx1ZUFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICB2YXIga2V5VmFsdWUgPSBpdGVtLnNwbGl0KCc9Jyk7CiAgICBwYXJhbU9ialtrZXlWYWx1ZVswXV0gPSBrZXlWYWx1ZVsxXTsKICB9KTsKICByZXR1cm4gcGFyYW1PYmo7Cn07Ci8qKgogKiBAcGFyYW0ge0FycmF5fSBsaXN0IOagh+etvuWIl+ihqAogKiBAcGFyYW0ge1N0cmluZ30gbmFtZSDlvZPliY3lhbPpl63nmoTmoIfnrb7nmoRuYW1lCiAqLwoKZXhwb3J0IHZhciBnZXROZXh0Um91dGUgPSBmdW5jdGlvbiBnZXROZXh0Um91dGUobGlzdCwgcm91dGUpIHsKICB2YXIgcmVzID0ge307CgogIGlmIChsaXN0Lmxlbmd0aCA9PT0gMikgewogICAgcmVzID0gZ2V0SG9tZVJvdXRlKGxpc3QpOwogIH0gZWxzZSB7CiAgICB2YXIgaW5kZXggPSBsaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gcm91dGVFcXVhbChpdGVtLCByb3V0ZSk7CiAgICB9KTsKICAgIGlmIChpbmRleCA9PT0gbGlzdC5sZW5ndGggLSAxKSByZXMgPSBsaXN0W2xpc3QubGVuZ3RoIC0gMl07ZWxzZSByZXMgPSBsaXN0W2luZGV4ICsgMV07CiAgfQoKICByZXR1cm4gcmVzOwp9OwovKioKICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVzIOWbnuiwg+WHveaVsOmcgOimgeaJp+ihjOeahOasoeaVsAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayDlm57osIPlh73mlbAKICovCgpleHBvcnQgdmFyIGRvQ3VzdG9tVGltZXMgPSBmdW5jdGlvbiBkb0N1c3RvbVRpbWVzKHRpbWVzLCBjYWxsYmFjaykgewogIHZhciBpID0gLTE7CgogIHdoaWxlICgrK2kgPCB0aW1lcykgewogICAgY2FsbGJhY2soaSk7CiAgfQp9OwovKioKICogQHBhcmFtIHtPYmplY3R9IGZpbGUg5LuO5LiK5Lyg57uE5Lu25b6X5Yiw55qE5paH5Lu25a+56LGhCiAqIEByZXR1cm5zIHtQcm9taXNlfSByZXNvbHZl5Y+C5pWw5piv6Kej5p6Q5ZCO55qE5LqM57u05pWw57uECiAqIEBkZXNjcmlwdGlvbiDku45Dc3bmlofku7bkuK3op6PmnpDlh7rooajmoLzvvIzop6PmnpDmiJDkuoznu7TmlbDnu4QKICovCgpleHBvcnQgdmFyIGdldEFycmF5RnJvbUZpbGUgPSBmdW5jdGlvbiBnZXRBcnJheUZyb21GaWxlKGZpbGUpIHsKICB2YXIgbmFtZVNwbGl0ID0gZmlsZS5uYW1lLnNwbGl0KCcuJyk7CiAgdmFyIGZvcm1hdCA9IG5hbWVTcGxpdFtuYW1lU3BsaXQubGVuZ3RoIC0gMV07CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7IC8vIOS7peaWh+acrOagvOW8j+ivu+WPlgoKICAgIHZhciBhcnIgPSBbXTsKCiAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2dCkgewogICAgICB2YXIgZGF0YSA9IGV2dC50YXJnZXQucmVzdWx0OyAvLyDor7vliLDnmoTmlbDmja4KCiAgICAgIHZhciBwYXN0ZURhdGEgPSBkYXRhLnRyaW0oKTsKICAgICAgYXJyID0gcGFzdGVEYXRhLnNwbGl0KC9bXG5cdTAwODVcdTIwMjhcdTIwMjldfFxyXG4/L2cpLm1hcChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgcmV0dXJuIHJvdy5zcGxpdCgnXHQnKTsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW1bMF0uc3BsaXQoJywnKTsKICAgICAgfSk7CiAgICAgIGlmIChmb3JtYXQgPT09ICdjc3YnKSByZXNvbHZlKGFycik7ZWxzZSByZWplY3QobmV3IEVycm9yKCdbRm9ybWF0IEVycm9yXTrkvaDkuIrkvKDnmoTkuI3mmK9Dc3bmlofku7YnKSk7CiAgICB9OwogIH0pOwp9OwovKioKICogQHBhcmFtIHtBcnJheX0gYXJyYXkg6KGo5qC85pWw5o2u5LqM57u05pWw57uECiAqIEByZXR1cm5zIHtPYmplY3R9IHsgY29sdW1ucywgdGFibGVEYXRhIH0KICogQGRlc2NyaXB0aW9uIOS7juS6jOe7tOaVsOe7hOS4reiOt+WPluihqOWktOWSjOihqOagvOaVsOaNru+8jOWwhuesrOS4gOihjOS9nOS4uuihqOWktO+8jOeUqOS6juWcqGlWaWV355qE6KGo5qC85Lit5bGV56S65pWw5o2uCiAqLwoKZXhwb3J0IHZhciBnZXRUYWJsZURhdGFGcm9tQXJyYXkgPSBmdW5jdGlvbiBnZXRUYWJsZURhdGFGcm9tQXJyYXkoYXJyYXkpIHsKICB2YXIgY29sdW1ucyA9IFtdOwogIHZhciB0YWJsZURhdGEgPSBbXTsKCiAgaWYgKGFycmF5Lmxlbmd0aCA+IDEpIHsKICAgIHZhciB0aXRsZXMgPSBhcnJheS5zaGlmdCgpOwogICAgY29sdW1ucyA9IHRpdGxlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0aXRsZTogaXRlbSwKICAgICAgICBrZXk6IGl0ZW0KICAgICAgfTsKICAgIH0pOwogICAgdGFibGVEYXRhID0gYXJyYXkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHZhciByZXMgPSB7fTsKICAgICAgaXRlbS5mb3JFYWNoKGZ1bmN0aW9uIChjb2wsIGkpIHsKICAgICAgICByZXNbdGl0bGVzW2ldXSA9IGNvbDsKICAgICAgfSk7CiAgICAgIHJldHVybiByZXM7CiAgICB9KTsKICB9CgogIHJldHVybiB7CiAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgdGFibGVEYXRhOiB0YWJsZURhdGEKICB9Owp9OwpleHBvcnQgdmFyIGZpbmROb2RlVXBwZXIgPSBmdW5jdGlvbiBmaW5kTm9kZVVwcGVyKGVsZSwgdGFnKSB7CiAgaWYgKGVsZS5wYXJlbnROb2RlKSB7CiAgICBpZiAoZWxlLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gdGFnLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgcmV0dXJuIGVsZS5wYXJlbnROb2RlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZpbmROb2RlVXBwZXIoZWxlLnBhcmVudE5vZGUsIHRhZyk7CiAgICB9CiAgfQp9OwpleHBvcnQgdmFyIGZpbmROb2RlVXBwZXJCeUNsYXNzZXMgPSBmdW5jdGlvbiBmaW5kTm9kZVVwcGVyQnlDbGFzc2VzKGVsZSwgY2xhc3NlcykgewogIHZhciBwYXJlbnROb2RlID0gZWxlLnBhcmVudE5vZGU7CgogIGlmIChwYXJlbnROb2RlKSB7CiAgICB2YXIgY2xhc3NMaXN0ID0gcGFyZW50Tm9kZS5jbGFzc0xpc3Q7CgogICAgaWYgKGNsYXNzTGlzdCAmJiBjbGFzc2VzLmV2ZXJ5KGZ1bmN0aW9uIChjbGFzc05hbWUpIHsKICAgICAgcmV0dXJuIGNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpOwogICAgfSkpIHsKICAgICAgcmV0dXJuIHBhcmVudE5vZGU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmluZE5vZGVVcHBlckJ5Q2xhc3NlcyhwYXJlbnROb2RlLCBjbGFzc2VzKTsKICAgIH0KICB9Cn07CmV4cG9ydCB2YXIgZmluZE5vZGVEb3dud2FyZCA9IGZ1bmN0aW9uIGZpbmROb2RlRG93bndhcmQoZWxlLCB0YWcpIHsKICB2YXIgdGFnTmFtZSA9IHRhZy50b1VwcGVyQ2FzZSgpOwoKICBpZiAoZWxlLmNoaWxkTm9kZXMubGVuZ3RoKSB7CiAgICB2YXIgaSA9IC0xOwogICAgdmFyIGxlbiA9IGVsZS5jaGlsZE5vZGVzLmxlbmd0aDsKCiAgICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICAgIHZhciBjaGlsZCA9IGVsZS5jaGlsZE5vZGVzW2ldOwogICAgICBpZiAoY2hpbGQudGFnTmFtZSA9PT0gdGFnTmFtZSkgcmV0dXJuIGNoaWxkO2Vsc2UgcmV0dXJuIGZpbmROb2RlRG93bndhcmQoY2hpbGQsIHRhZyk7CiAgICB9CiAgfQp9OwpleHBvcnQgdmFyIHNob3dCeUFjY2VzcyA9IGZ1bmN0aW9uIHNob3dCeUFjY2VzcyhhY2Nlc3MsIGNhblZpZXdBY2Nlc3MpIHsKICByZXR1cm4gaGFzT25lT2YoY2FuVmlld0FjY2VzcywgYWNjZXNzKTsKfTsKLyoqCiAqIEBkZXNjcmlwdGlvbiDmoLnmja5uYW1lL3BhcmFtcy9xdWVyeeWIpOaWreS4pOS4qui3r+eUseWvueixoeaYr+WQpuebuOetiQogKiBAcGFyYW0geyp9IHJvdXRlMSDot6/nlLHlr7nosaEKICogQHBhcmFtIHsqfSByb3V0ZTIg6Lev55Sx5a+56LGhCiAqLwoKZXhwb3J0IHZhciByb3V0ZUVxdWFsID0gZnVuY3Rpb24gcm91dGVFcXVhbChyb3V0ZTEsIHJvdXRlMikgewogIHZhciBwYXJhbXMxID0gcm91dGUxLnBhcmFtcyB8fCB7fTsKICB2YXIgcGFyYW1zMiA9IHJvdXRlMi5wYXJhbXMgfHwge307CiAgdmFyIHF1ZXJ5MSA9IHJvdXRlMS5xdWVyeSB8fCB7fTsKICB2YXIgcXVlcnkyID0gcm91dGUyLnF1ZXJ5IHx8IHt9OwogIHJldHVybiByb3V0ZTEubmFtZSA9PT0gcm91dGUyLm5hbWUgJiYgb2JqRXF1YWwocGFyYW1zMSwgcGFyYW1zMikgJiYgb2JqRXF1YWwocXVlcnkxLCBxdWVyeTIpOwp9OwovKioKICog5Yik5pat5omT5byA55qE5qCH562+5YiX6KGo6YeM5piv5ZCm5bey5a2Y5Zyo6L+Z5Liq5paw5re75Yqg55qE6Lev55Sx5a+56LGhCiAqLwoKZXhwb3J0IHZhciByb3V0ZUhhc0V4aXN0ID0gZnVuY3Rpb24gcm91dGVIYXNFeGlzdCh0YWdOYXZMaXN0LCByb3V0ZUl0ZW0pIHsKICB2YXIgbGVuID0gdGFnTmF2TGlzdC5sZW5ndGg7CiAgdmFyIHJlcyA9IGZhbHNlOwogIGRvQ3VzdG9tVGltZXMobGVuLCBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIGlmIChyb3V0ZUVxdWFsKHRhZ05hdkxpc3RbaW5kZXhdLCByb3V0ZUl0ZW0pKSByZXMgPSB0cnVlOwogIH0pOwogIHJldHVybiByZXM7Cn07CmV4cG9ydCB2YXIgbG9jYWxTYXZlID0gZnVuY3Rpb24gbG9jYWxTYXZlKGtleSwgdmFsdWUpIHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTsKfTsKZXhwb3J0IHZhciBsb2NhbFJlYWQgPSBmdW5jdGlvbiBsb2NhbFJlYWQoa2V5KSB7CiAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgfHwgJyc7Cn07CmV4cG9ydCB2YXIgZm9ybWF0TW9uZXkgPSBmdW5jdGlvbiBmb3JtYXRNb25leShzLCB0eXBlKSB7CiAgaWYgKC9bXjAtOS5dLy50ZXN0KHMpKSByZXR1cm4gJzAuMDAnOwogIGlmIChzID09IG51bGwgfHwgcyA9PSAnbnVsbCcgfHwgcyA9PSAnJykgcmV0dXJuICcwLjAwJzsKICBzID0gcy50b1N0cmluZygpLnJlcGxhY2UoL14oXGQqKSQvLCAnJDEuJyk7CiAgcyA9IChzICsgJzAwJykucmVwbGFjZSgvKFxkKlwuXGRcZClcZCovLCAnJDEnKTsKICBzID0gcy5yZXBsYWNlKCcuJywgJywnKTsKICB2YXIgcmUgPSAvKFxkKShcZHszfSwpLzsKCiAgd2hpbGUgKHJlLnRlc3QocykpIHsKICAgIHMgPSBzLnJlcGxhY2UocmUsICckMSwkMicpOwogIH0KCiAgcyA9IHMucmVwbGFjZSgvLChcZFxkKSQvLCAnLiQxJyk7CgogIGlmICh0eXBlID09IDApIHsKICAgIHZhciBhID0gcy5zcGxpdCgnLicpOwoKICAgIGlmIChhWzFdID09ICcwMCcpIHsKICAgICAgcyA9IGFbMF07CiAgICB9CiAgfQoKICByZXR1cm4gczsKfTsgLy8g5ZCI5bm25pWw57uE77yM5LiU5Y676YeNCgpleHBvcnQgdmFyIGNvbmNhdEFycmF5ID0gZnVuY3Rpb24gY29uY2F0QXJyYXkoYXJyYXkpIHsKICB2YXIgdW5pcSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTsKCiAgaWYgKCFfLmlzQXJyYXkoYXJyYXkpKSB7CiAgICByZXR1cm4gYXJyYXk7CiAgfQoKICB2YXIgYXJyID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyYXkpOwogIHJldHVybiB1bmlxID8gXy51bmlxKGFycikgOiBhcnI7Cn07CmV4cG9ydCB2YXIgc2V0VXNlck5hbWUgPSBmdW5jdGlvbiBzZXRVc2VyTmFtZSh1c2VybmFtZSkgewogIENvb2tpZXMuc2V0KCd1c2VybmFtZScsIHVzZXJuYW1lLCB7CiAgICBleHBpcmVzOiBjb25maWcuY29va2llRXhwaXJlcyB8fCAxIHx8IDEKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRVc2VyTmFtZSA9IGZ1bmN0aW9uIGdldFVzZXJOYW1lKCkgewogIHZhciB1c2VyTmFtZSA9IENvb2tpZXMuZ2V0KCd1c2VybmFtZScpOwogIGlmICh1c2VyTmFtZSkgcmV0dXJuIHVzZXJOYW1lO2Vsc2UgcmV0dXJuIGZhbHNlOwp9OwpleHBvcnQgdmFyIHNldENvb2tpZXNJdGVtID0gZnVuY3Rpb24gc2V0Q29va2llc0l0ZW0oa2V5LCB2YWx1ZSkgewogIENvb2tpZXMuc2V0KGtleSwgdmFsdWUsIHsKICAgIGV4cGlyZXM6IGNvbmZpZy5jb29raWVFeHBpcmVzIHx8IDEgfHwgMQogIH0pOwp9OwpleHBvcnQgdmFyIGdldENvb2tpZXNJdGVtID0gZnVuY3Rpb24gZ2V0Q29va2llc0l0ZW0oa2V5KSB7CiAgdmFyIHZhbHVlID0gQ29va2llcy5nZXQoa2V5KTsKICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZTtlbHNlIHJldHVybiBmYWxzZTsKfTsKZXhwb3J0IHZhciBnZXRVc2VySW5mbyA9IGZ1bmN0aW9uIGdldFVzZXJJbmZvKCkgewogIHZhciB1c2VySW5mbyA9IGxvY2FsUmVhZCgndXNlckluZm8nKTsKCiAgaWYgKHVzZXJJbmZvKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodXNlckluZm8pOwogIH0gZWxzZSB7CiAgICByZXR1cm4ge307CiAgfQp9OyAvLyByc2EgZW5jcnlwdAoKdmFyIFBVQl9LRVkgPSAiXG4tLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLVxuTUlHZk1BMEdDU3FHU0liM0RRRUJBUVVBQTRHTkFEQ0JpUUtCZ1FDbU55S2pzTDNVTmtsQ2ZoSWo3SW45a054alxuVHF3aTc2ZjZwU3VYZlNOaUp1b1Z0S1pOeURDQ1c1RWR6bzBISGdsTGxwc2tWTjhzM0pWNGxtWFRVMTRCVVlXL1xuL0I5ODJod1VBZ1BFbHlvM0JYcGQ2NlZOOFU5QTlGdWRkYUs3Z3ZLOCtGT3NPSFQwYSt2R2I3L1VrM0hwSjFBSlxub08zWnQwRHF5YzBkTC83aEx3SURBUUFCXG4tLS0tLUVORCBQVUJMSUMgS0VZLS0tLS1cbiI7CmV4cG9ydCB2YXIgZW5jcnlwdEJ5UHViS2V5ID0gZnVuY3Rpb24gZW5jcnlwdEJ5UHViS2V5KHJhd0RhdGEpIHsKICB2YXIgY3J5cHRvOwoKICB0cnkgewogICAgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBjb25zb2xlLmxvZygnY3J5cHRvIHN1cHBvcnQgaXMgZGlzYWJsZWQhJyk7CiAgfQoKICB2YXIgYnVmZmVyID0gQnVmZmVyLmZyb20ocmF3RGF0YSk7CiAgdmFyIGVuY3J5cHRlZCA9IGNyeXB0by5wdWJsaWNFbmNyeXB0KFBVQl9LRVksIGJ1ZmZlcik7CiAgcmV0dXJuIGVuY3J5cHRlZC50b1N0cmluZygiYmFzZTY0Iik7Cn07IC8vIHJzYSBlbmNyeXB0Cgp2YXIgUlNBX1BVQl9LRVkgPSAiXG4tLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLVxuTUlHZk1BMEdDU3FHU0liM0RRRUJBUVVBQTRHTkFEQ0JpUUtCZ1FERVNQYUlCdCtuUzBFUW1IY21JOGxsTUZlY1xuY082WE1QM0QxVDI4dlBqSDZLSjlDQ3VyTUgyQWc1bFNXRjBmZTNuUURHVFZUejdvTUVpa3FxTm1QNU5qa3hheVxuZFA0UUFzZmVCS0hpYm5zQ1kvNE1iaHZwSnFFR0F1aFppL0FEMnpqMnNBditBYTQ2RkxlaGp4UVhaZWpMMnRVbFxuZWgwRFc2WUJYVTJvdjhNaUhRSURBUUFCXG4tLS0tLUVORCBQVUJMSUMgS0VZLS0tLS1cbiI7CmV4cG9ydCB2YXIgcnNhRW5jcnlwdEJ5UHViS2V5ID0gZnVuY3Rpb24gcnNhRW5jcnlwdEJ5UHViS2V5KHJhd0RhdGEpIHsKICB2YXIgZW5jcnlwdCA9IG5ldyBKU0VuY3J5cHQoKTsKICBlbmNyeXB0LnNldFB1YmxpY0tleShSU0FfUFVCX0tFWSk7CiAgcmV0dXJuIGVuY3J5cHQuZW5jcnlwdChyYXdEYXRhKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSBhbGdvcml0aG0KICogQHBhcmFtIHthbnl9IGNvbnRlbnQKICogIEByZXR1cm4ge3N0cmluZ30KICovCgpleHBvcnQgdmFyIGVuY3J5cHQgPSBmdW5jdGlvbiBlbmNyeXB0KGFsZ29yaXRobSwgY29udGVudCkgewogIHZhciBoYXNoID0gY3JlYXRlSGFzaChhbGdvcml0aG0pOwogIGhhc2gudXBkYXRlKGNvbnRlbnQpOwogIHJldHVybiBoYXNoLmRpZ2VzdCgnaGV4Jyk7Cn07Ci8qKgogKiBAcGFyYW0ge2FueX0gY29udGVudAogKiAgQHJldHVybiB7c3RyaW5nfQogKi8KCmV4cG9ydCB2YXIgc2hhMSA9IGZ1bmN0aW9uIHNoYTEoY29udGVudCkgewogIHJldHVybiBlbmNyeXB0KCdzaGExJywgY29udGVudCk7Cn07IC8vIOW4geenjeespuWPtwoKZXhwb3J0IHZhciBjdXJyZW5jeSA9IHsKICAnQ05ZJzogJ++/pScsCiAgJ0hLRCc6ICdIS++8hCcsCiAgJ1VTRCc6ICfvvIQnLAogICdFVVInOiAn4oKsJywKICAnR0JQJzogJ++/oScsCiAgJ0pQWSc6ICdK77+lJywKICAnS1JXJzogJ+KCqScKfTsKLyoqCiAqIEBwYXJhbSB7YW55fSBjb250ZW50CiAqICBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKZXhwb3J0IHZhciBtZDUgPSBmdW5jdGlvbiBtZDUoY29udGVudCkgewogIHJldHVybiBlbmNyeXB0KCdtZDUnLCBjb250ZW50KTsKfTsgLy8g5qCh6aqM5piv5ZCm5Li65ZCI5rOV5omL5py65Y+356CBCgpleHBvcnQgdmFyIGlzUGhvbmUgPSBmdW5jdGlvbiBpc1Bob25lKHN0cikgewogIHZhciByZWcgPSAvXlsxXVszLTldXGR7OX0kfF4oWzZ8OV0pXGR7N30kfF5bMF1bOV1cZHs4fSR8Xls2XShbOHw2XSlcZHs1fSQvOwoKICBpZiAoIXJlZy50ZXN0KHN0cikpIHsKICAgIHJldHVybiBmYWxzZTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRydWU7CiAgfQp9OyAvLyDmoLnmja7pg6jpl6jmoJHlvaLnu5PmnoQs6L+U5Zue5Y+25a2Q6IqC54K56YOo6Zeo5pWw57uECgpleHBvcnQgdmFyIGJ1aWxkQ2hpbGREZXBhcnRtZW50QXJyYXkgPSBmdW5jdGlvbiBidWlsZENoaWxkRGVwYXJ0bWVudEFycmF5KHNlbGVjdERlcGFydERhdGEsIG1lcmNoYW50RGVwYXJ0RGF0YSkgewogIC8v5Yik5pat5Lik5Liq5Y+C5pWw5piv5ZCm5Li65pWw57uECiAgdmFyIHRtcCA9IFtdOwogIHNlbGVjdERlcGFydERhdGEubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgaWYgKGl0ZW0pIHsKICAgICAgdG1wLnB1c2goaXRlbSk7IC8v5p+l5om+54i2aWTmmK/lvZPliY1pZOeahOaVsOe7hAoKICAgICAgdmFyIGN1ckRlcGFydCA9IF8uZmlsdGVyKG1lcmNoYW50RGVwYXJ0RGF0YSwgZnVuY3Rpb24gKGN1cikgewogICAgICAgIHJldHVybiBjdXIucGFyZW50aWQgPT0gaXRlbTsKICAgICAgfSk7CgogICAgICBpZiAoY3VyRGVwYXJ0Lmxlbmd0aCAhPT0gMCkgewogICAgICAgIHZhciBkZXBhcnRtZW50cyA9IF8ucGx1Y2soY3VyRGVwYXJ0LCAnZGVwYXJ0bWVudF9pZCcpOwoKICAgICAgICB2YXIgcmVzID0gYnVpbGRDaGlsZERlcGFydG1lbnRBcnJheShkZXBhcnRtZW50cywgbWVyY2hhbnREZXBhcnREYXRhKTsKICAgICAgICB0bXAgPSBfLnVuaW9uKHRtcCwgcmVzKTsKICAgICAgfQogICAgfQogIH0pOyAvLyBjb25zb2xlLmxvZygiYnVpbGRDaGlsZERlcGFydG1lbnRBcnJheT09PT09ZmluaXNoZWQtLS10bXA+Pj4iICsgSlNPTi5zdHJpbmdpZnkodG1wKSk7CgogIHJldHVybiB0bXA7Cn07IC8vIOagueaNruWPtuWtkOiKgueCuemDqOmXqOaVsOe7hOWSjOmDqOmXqOe7hOe7h+aVsOe7hO+8jOi/lOWbnumDqOmXqOagkeW9oue7k+aehAoKZXhwb3J0IHZhciBidWlsZERlcGFydG1lbnRUcmVlID0gZnVuY3Rpb24gYnVpbGREZXBhcnRtZW50VHJlZShjaGlsZERhdGEsIGRlcGFydG1lbnREYXRhKSB7CiAgLy/liKTmlq3kuKTkuKrlj4LmlbDmmK/lkKbkuLrmlbDnu4QKICB2YXIgdG1wID0gW107CiAgY2hpbGREYXRhLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgIGlmIChpdGVtKSB7CiAgICAgIHZhciBjdXJEZXBhcnQgPSBfLmZpbmQoZGVwYXJ0bWVudERhdGEsIGZ1bmN0aW9uIChjdXIpIHsKICAgICAgICByZXR1cm4gY3VyLmRlcGFydG1lbnRfaWQgPT0gaXRlbTsKICAgICAgfSk7CgogICAgICBpZiAoY3VyRGVwYXJ0KSB7CiAgICAgICAgdmFyIG5ld0RlcGFydCA9IHsKICAgICAgICAgIGRlcGFydG1lbnRfaWQ6IGN1ckRlcGFydC5kZXBhcnRtZW50X2lkLAogICAgICAgICAgcGFyZW50aWQ6IGN1ckRlcGFydC5wYXJlbnRpZCwKICAgICAgICAgIG5hbWU6IGN1ckRlcGFydC5uYW1lCiAgICAgICAgfTsKICAgICAgICB0bXAucHVzaChuZXdEZXBhcnQpOwoKICAgICAgICBpZiAoY3VyRGVwYXJ0LnBhcmVudGlkID09ICIiKSB7fSBlbHNlIHsKICAgICAgICAgIHZhciBpbkRlcGFydCA9IFtdOwogICAgICAgICAgaW5EZXBhcnQucHVzaChjdXJEZXBhcnQucGFyZW50aWQpOwogICAgICAgICAgdmFyIHJlcyA9IGJ1aWxkRGVwYXJ0bWVudFRyZWUoaW5EZXBhcnQsIGRlcGFydG1lbnREYXRhKTsKCiAgICAgICAgICB2YXIgdW5pb250bXAgPSBfLnVuaW9uKHRtcCwgcmVzKTsKCiAgICAgICAgICB0bXAgPSBfLnVuaXEodW5pb250bXAsIHRydWUsICdkZXBhcnRtZW50X2lkJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIHRtcDsKfTsgLy8g6YCS5b2S6L+U5Zue5qCR5b2i57uT5p6E77yM6buY6K6k5Li7SUTlrZfmrrXlkI3kuLogY29kZe+8jOeItmlk5a2X5q615ZCN5Li6IHBhcmVudHPvvIwg5qC55o2u5pWw5o2u5Y+v6Ieq5a6a5LmJCgpleHBvcnQgdmFyIGJ1aWxkVHJlZSA9IGZ1bmN0aW9uIGJ1aWxkVHJlZShxdWVyeUFycikgewogIHZhciBzdWIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogIHZhciBjdXJyZW50S2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnY29kZSc7CiAgdmFyIHBhcmVudHNLZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICdwYXJlbnRzJzsKICB2YXIgY2hpbGQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6ICdjaGlsZHJlbic7CiAgdmFyIHJvb3QgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6ICcwJzsKICAvLyBjb25zb2xlLmxvZygiYnVpbGRUcmVlLS0tPj4+IiArIHJvb3QgKyAiLS0tPj4+IiArIEpTT04uc3RyaW5naWZ5KHF1ZXJ5QXJyKSk7CiAgdmFyIHRtcCA9IFtdOwogIHZhciByb290VHJlZSA9IHsKICAgIGRlcGFydG1lbnRfaWQ6ICcwJywKICAgIHBhcmVudGlkOiAiIiwKICAgIG5hbWU6ICLlhajpg6jpg6jpl6giCiAgfTsKICB2YXIgcXVlcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHF1ZXJ5QXJyKSk7CgogIGlmIChyb290ID09ICcwJykgewogICAgcXVlcnkubWFwKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgIGlmICghc3ViW2N1cnJlbnRLZXldKSB7CiAgICAgICAgaWYgKGl0ZW1bcGFyZW50c0tleV0gPT09ICcnKSB7CiAgICAgICAgICBpdGVtW3BhcmVudHNLZXldID0gJzAnOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBxdWVyeS5wdXNoKHJvb3RUcmVlKTsKICB9CgogIHF1ZXJ5Lm1hcChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgaWYgKGl0ZW0pIHsKICAgICAgXy5leHRlbmQoaXRlbSwgewogICAgICAgIGlkOiBpdGVtW2N1cnJlbnRLZXldCiAgICAgIH0pOwoKICAgICAgXy5leHRlbmQoaXRlbSwgewogICAgICAgIHRpdGxlOiBpdGVtWyduYW1lJ10KICAgICAgfSk7CiAgICB9CgogICAgaWYgKCFzdWJbY3VycmVudEtleV0pIHsKICAgICAgaWYgKGl0ZW1bcGFyZW50c0tleV0gPT09ICcnKSB7CiAgICAgICAgcXVlcnlbaV0gPSBmYWxzZTsKICAgICAgICBpdGVtWydjaGVja2VkJ10gPSB0cnVlOwogICAgICAgIHRtcC5wdXNoKGl0ZW0pOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoc3ViW2N1cnJlbnRLZXldID09PSBpdGVtW3BhcmVudHNLZXldKSB7CiAgICAgICAgcXVlcnlbaV0gPSBmYWxzZTsKICAgICAgICBpdGVtWydjaGVja2VkJ10gPSB0cnVlOwogICAgICAgIHRtcC5wdXNoKGl0ZW0pOwogICAgICB9CiAgICB9CiAgfSk7CgogIGlmICh0bXAubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm47CiAgfQoKICBzdWIgPSB0bXA7CgogIGlmIChzdWIubGVuZ3RoID4gMCkgewogICAgLy8gY29uc29sZS5sb2coInN1YiA9PT0+ICIsIHN1YikKICAgIHN1Yi5tYXAoZnVuY3Rpb24gKGN1ciwgYykgewogICAgICB2YXIgcmVzID0gYnVpbGRUcmVlKHF1ZXJ5LCBjdXIsIGN1cnJlbnRLZXksIHBhcmVudHNLZXksIGNoaWxkLCAnMScpOwoKICAgICAgaWYgKHJlcykgewogICAgICAgIHN1YltjXVtjaGlsZF0gPSByZXM7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIHN1YjsKfTsgLy8g6YCS5b2S6L+U5Zue5qCR5b2i57uT5p6E77yM6buY6K6k5Li7SUTlrZfmrrXlkI3kuLogY29kZe+8jOeItmlk5a2X5q615ZCN5Li6IHBhcmVudHPvvIwg5qC55o2u5pWw5o2u5Y+v6Ieq5a6a5LmJCgpleHBvcnQgdmFyIGJ1aWxkVHJlZUNoZWNrZWQgPSBmdW5jdGlvbiBidWlsZFRyZWVDaGVja2VkKHF1ZXJ5QXJyKSB7CiAgdmFyIHN1YiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgdmFyIGN1cnJlbnRLZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICdjb2RlJzsKICB2YXIgcGFyZW50c0tleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJ3BhcmVudHMnOwogIHZhciBjaGlsZCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogJ2NoaWxkcmVuJzsKICB2YXIgcm9vdCA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDogJzAnOwogIHZhciBDaGVja2VkQXJyID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgPyBhcmd1bWVudHNbNl0gOiB1bmRlZmluZWQ7CiAgLy8gY29uc29sZS5sb2coImJ1aWxkVHJlZS0tLT4+PiIgKyByb290ICsgIi0tLT4+PiIgKyBKU09OLnN0cmluZ2lmeShxdWVyeUFycikpOwogIHZhciB0bXAgPSBbXTsKICB2YXIgcm9vdFRyZWUgPSB7CiAgICBkZXBhcnRtZW50X2lkOiAnMCcsCiAgICBwYXJlbnRpZDogIiIsCiAgICBuYW1lOiAi5YWo6YOo6YOo6ZeoIgogIH07CiAgdmFyIHF1ZXJ5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShxdWVyeUFycikpOwoKICBpZiAocm9vdCA9PSAnMCcpIHsKICAgIHF1ZXJ5Lm1hcChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICBpZiAoIXN1YltjdXJyZW50S2V5XSkgewogICAgICAgIGlmIChpdGVtW3BhcmVudHNLZXldID09PSAnJykgewogICAgICAgICAgaXRlbVtwYXJlbnRzS2V5XSA9ICcwJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcXVlcnkucHVzaChyb290VHJlZSk7CiAgfQoKICBxdWVyeS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgIGlmIChpdGVtKSB7CiAgICAgIF8uZXh0ZW5kKGl0ZW0sIHsKICAgICAgICBpZDogaXRlbVtjdXJyZW50S2V5XQogICAgICB9KTsKCiAgICAgIF8uZXh0ZW5kKGl0ZW0sIHsKICAgICAgICB0aXRsZTogaXRlbVsnbmFtZSddCiAgICAgIH0pOwogICAgfQoKICAgIGlmICghc3ViW2N1cnJlbnRLZXldKSB7CiAgICAgIGlmIChpdGVtW3BhcmVudHNLZXldID09PSAnJykgewogICAgICAgIHF1ZXJ5W2ldID0gZmFsc2U7CiAgICAgICAgdG1wLnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChzdWJbY3VycmVudEtleV0gPT09IGl0ZW1bcGFyZW50c0tleV0pIHsKICAgICAgICBxdWVyeVtpXSA9IGZhbHNlOwoKICAgICAgICB2YXIgcG9zID0gXy5pbmRleE9mKENoZWNrZWRBcnIsIGl0ZW1bY3VycmVudEtleV0pOwoKICAgICAgICBpZiAocG9zICE9IC0xKSB7CiAgICAgICAgICBpdGVtWydjaGVja2VkJ10gPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgdG1wLnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0KICB9KTsKCiAgaWYgKHRtcC5sZW5ndGggPT09IDApIHsKICAgIHJldHVybjsKICB9CgogIHN1YiA9IHRtcDsKCiAgaWYgKHN1Yi5sZW5ndGggPiAwKSB7CiAgICAvLyBjb25zb2xlLmxvZygic3ViID09PT4gIiwgc3ViKQogICAgc3ViLm1hcChmdW5jdGlvbiAoY3VyLCBjKSB7CiAgICAgIHZhciByZXMgPSBidWlsZFRyZWVDaGVja2VkKHF1ZXJ5LCBjdXIsIGN1cnJlbnRLZXksIHBhcmVudHNLZXksIGNoaWxkLCAnMScsIENoZWNrZWRBcnIpOwoKICAgICAgaWYgKHJlcykgewogICAgICAgIHN1YltjXVtjaGlsZF0gPSByZXM7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIHN1YjsKfTsgLy8g6YCS5b2S6L+U5Zue5qCR5b2i57uT5p6E77yM6buY6K6k5Li7SUTlrZfmrrXlkI3kuLogY29kZe+8jOeItmlk5a2X5q615ZCN5Li6IHBhcmVudHPvvIwg5qC55o2u5pWw5o2u5Y+v6Ieq5a6a5LmJCgpleHBvcnQgdmFyIGdldFRyZWVOb2Rlc1ZhbHVlID0gZnVuY3Rpb24gZ2V0VHJlZU5vZGVzVmFsdWUocXVlcnlBcnIpIHsKICB2YXIgY3VycmVudEtleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2NvZGUnOwogIHZhciBjaGlsZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJ2NoaWxkcmVuJzsKICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAnJzsKICB2YXIgdG1wID0gW107CiAgdmFyIHF1ZXJ5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShxdWVyeUFycikpOwogIHF1ZXJ5Lm1hcChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgaWYgKGl0ZW1bY3VycmVudEtleV0gIT0gdW5kZWZpbmVkICYmIGl0ZW0pIHsKICAgICAgdG1wLnB1c2goa2V5ID09ICcnID8gaXRlbVtjdXJyZW50S2V5XSA6IGtleSArICctJyArIGl0ZW1bY3VycmVudEtleV0pOwogICAgfQoKICAgIGlmIChpdGVtW2NoaWxkXSAhPSB1bmRlZmluZWQgJiYgaXRlbVtjaGlsZF0ubGVuZ3RoID4gMCkgewogICAgICB2YXIgcmVzID0gZ2V0VHJlZU5vZGVzVmFsdWUoaXRlbVtjaGlsZF0sIGN1cnJlbnRLZXksIGNoaWxkLCBrZXkgPT0gJycgPyBpdGVtW2N1cnJlbnRLZXldIDoga2V5ICsgJy0nICsgaXRlbVtjdXJyZW50S2V5XSk7CgogICAgICBpZiAocmVzLmxlbmd0aCA+IDApIHsKICAgICAgICB0bXAucHVzaC5hcHBseSh0bXAsIF90b0NvbnN1bWFibGVBcnJheShyZXMpKTsKICAgICAgfQogICAgfQogIH0pOwogIHJldHVybiB0bXA7Cn07IC8vIOmAkuW9kui/lOWbnuagkeW9oue7k+aehO+8jOm7mOiupOS4u0lE5a2X5q615ZCN5Li6IGNvZGXvvIzniLZpZOWtl+auteWQjeS4uiBwYXJlbnRz77yMIOagueaNruaVsOaNruWPr+iHquWumuS5iQoKZXhwb3J0IHZhciBnZXRUcmVlTm9kZXMgPSBmdW5jdGlvbiBnZXRUcmVlTm9kZXMocXVlcnlBcnIpIHsKICB2YXIgY3VycmVudEtleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2NvZGUnOwogIHZhciBjaGlsZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJ2NoaWxkcmVuJzsKICB2YXIgdG1wID0gW107CiAgdmFyIHF1ZXJ5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShxdWVyeUFycikpOwogIHF1ZXJ5Lm1hcChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgaWYgKGl0ZW1bY3VycmVudEtleV0gIT0gdW5kZWZpbmVkICYmIGl0ZW0pIHsKICAgICAgdG1wLnB1c2goaXRlbVtjdXJyZW50S2V5XSk7CiAgICB9CgogICAgaWYgKGl0ZW1bY2hpbGRdICE9IHVuZGVmaW5lZCAmJiBpdGVtW2NoaWxkXS5sZW5ndGggPiAwKSB7CiAgICAgIHZhciByZXMgPSBnZXRUcmVlTm9kZXMoaXRlbVtjaGlsZF0sIGN1cnJlbnRLZXksIGNoaWxkKTsKCiAgICAgIGlmIChyZXMubGVuZ3RoID4gMCkgewogICAgICAgIHRtcC5wdXNoLmFwcGx5KHRtcCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcykpOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIHRtcDsKfTsgLy8g6YCS5b2S6L+U5Zue5qCR5b2i57uT5p6E5Lit5p+Q5LiA5Liq5YWz6ZSu5a2X5a+55bqU55qE6IqC54K55pWw5o2u77yM5qC55o2u5pWw5o2u5Y+v6Ieq5a6a5LmJCgpleHBvcnQgdmFyIGdldFRyZWVOb2RlSXRlbSA9IGZ1bmN0aW9uIGdldFRyZWVOb2RlSXRlbShxdWVyeUFycikgewogIHZhciBjdXJyZW50S2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnY29kZSc7CiAgdmFyIGNoaWxkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnY2hpbGRyZW4nOwogIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKICB2YXIgdG1wID0gW107CiAgcXVlcnlBcnIubWFwKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICBpZiAoaXRlbVtjdXJyZW50S2V5XSAhPSB1bmRlZmluZWQgJiYgaXRlbSkgewogICAgICBpZiAoaXRlbVtjdXJyZW50S2V5XSA9PSBrZXkpIHsKICAgICAgICB0bXAucHVzaChpdGVtKTsKICAgICAgfQogICAgfQoKICAgIGlmIChpdGVtW2NoaWxkXSAhPSB1bmRlZmluZWQgJiYgaXRlbVtjaGlsZF0ubGVuZ3RoID4gMCkgewogICAgICB2YXIgcmVzID0gZ2V0VHJlZU5vZGVJdGVtKGl0ZW1bY2hpbGRdLCBjdXJyZW50S2V5LCBjaGlsZCwga2V5KTsKCiAgICAgIGlmIChyZXMubGVuZ3RoID4gMCkgewogICAgICAgIHRtcC5wdXNoLmFwcGx5KHRtcCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcykpOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIHRtcDsKfTsgLy8g6YCS5b2S6L+U5Zue5qCR5b2i57uT5p6E5Lit5p+Q5LiA5Liq5YWz6ZSu5a2X5a+55bqU55qE6IqC54K55pWw5o2u77yM5qC55o2u5pWw5o2u5Y+v6Ieq5a6a5LmJCgpleHBvcnQgdmFyIGdldFRyZWVOb2RlSXRlbU5hbWUgPSBmdW5jdGlvbiBnZXRUcmVlTm9kZUl0ZW1OYW1lKHF1ZXJ5QXJyKSB7CiAgdmFyIGN1cnJlbnRLZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdjb2RlJzsKICB2YXIgY2hpbGQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICdjaGlsZHJlbic7CiAgdmFyIGtleXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKICB2YXIgY3VycmVudE5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gNCA/IGFyZ3VtZW50c1s0XSA6IHVuZGVmaW5lZDsKICB2YXIgdG1wID0gW107CiAgcXVlcnlBcnIubWFwKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICBpZiAoaXRlbVtjdXJyZW50S2V5XSAhPSB1bmRlZmluZWQgJiYgaXRlbSkgewogICAgICBfLmZpbmQoa2V5cywgZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChpdGVtW2N1cnJlbnRLZXldID09IGtleSkgewogICAgICAgICAgdG1wLnB1c2goewogICAgICAgICAgICBpZDogaXRlbVtjdXJyZW50S2V5XSwKICAgICAgICAgICAgbmFtZTogaXRlbVtjdXJyZW50TmFtZV0sCiAgICAgICAgICAgIGxldmVsOiBpdGVtLmxldmVsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGlmIChpdGVtW2NoaWxkXSAhPSB1bmRlZmluZWQgJiYgaXRlbVtjaGlsZF0ubGVuZ3RoID4gMCkgewogICAgICB2YXIgcmVzID0gZ2V0VHJlZU5vZGVJdGVtTmFtZShpdGVtW2NoaWxkXSwgY3VycmVudEtleSwgY2hpbGQsIGtleXMsIGN1cnJlbnROYW1lKTsKCiAgICAgIGlmIChyZXMubGVuZ3RoID4gMCkgewogICAgICAgIHRtcC5wdXNoLmFwcGx5KHRtcCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcykpOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIHRtcDsKfTsgLy8g5a+85Ye66aG16Z2i5Li6UERG5qC85byPCgpleHBvcnQgdmFyIEV4cG9ydFNhdmVQZGYgPSBmdW5jdGlvbiBFeHBvcnRTYXZlUGRmKGVsZW1lbnQsIHBkZk5hbWUsIGN1cnJlbnRUaW1lKSB7CiAgdmFyIGRpcmVjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJ3AnOwogIC8vIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YXRQcmludCIpCiAgaHRtbDJjYW52YXMoZWxlbWVudCwgewogICAgZHBpOiAzMDAsCiAgICB1c2VDT1JTOiB0cnVlLAogICAgLy8g5aaC5p6c6K+05omA55Sf5oiQ55qE6aG16Z2i5Lit5bim5pyJ6Leo5Z+f55qE5Zu+54mH77yM6L+Z5LiqdXNlQ29yc+mcgOimgeiuvue9ruS4ulRydWUg5ZCm5YiZ55S75biD6KKr5rGh5p+T5LiN5Lya5pi+56S6CiAgICBsb2dnaW5nOiBmYWxzZQogIH0pLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykgewogICAgLy8gbGV0IFtpbWdYLCBpbWdZXSA9IFs1OTUuMjgsIDg0MS44OV07CiAgICAvLyBsZXQgcGRmID0gbmV3IGpzUERGKCdwJywgJ3B0JywgJ2E0Jyk7CiAgICAvLyBmb3IgKGxldCBbaW5kZXgsIGl0ZW1dIG9mIHBhZ2VMaXN0LmVudHJpZXMoKSkgewogICAgLy8gICBmb3IgKGxldCBqID0gMDsgaiA8IGl0ZW0uaW1hZ2VMaXN0Lmxlbmd0aDsgaisrKSB7CiAgICAvLyAgICAgY29uc3QgaW1hZ2UgPSBpdGVtLmltYWdlTGlzdFtqXTsKICAgIC8vICAgICBsZXQgaW1nSGVpZ2h0ID0gaW1nWCAvIChpbWFnZS53aWR0aCAvIGltYWdlLmhlaWdodCk7IC8v5qC55o2u5a695bqm6K6h566X6auY5bqmCiAgICAvLyAgICAgcGRmLmFkZEltYWdlKGltYWdlLmRhdGEsICdKUEVHJywgMCwgMCwgaW1nWCwgaW1nSGVpZ2h0KTsKICAgIC8vICAgICBwZGYuYWRkUGFnZSgpOwogICAgLy8gICB9CiAgICAvLyB9CiAgICAvLyBsZXQgdGFyZ2V0UGFnZSA9IHBkZi5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7CiAgICAvLyBwZGYuZGVsZXRlUGFnZSh0YXJnZXRQYWdlKTsgLy8g5Yig6Zmk5pyA5ZCO5LiA6aG1CiAgICAvLyBwZGYuc2F2ZShg5rWL6K+VLnBkZmApOwogICAgLy8gbGV0IHBkZiA9IG5ldyBqc1BERigncCcsICdwdCcsIFtwZGZYLCBwZGZZXSk7CiAgICAvLyDnrKzkuIDkuKrlj4LmlbDvvJogbO+8muaoquWQkSAgcO+8mue6teWQkQogICAgLy8g56ys5LqM5Liq5Y+C5pWw77ya5rWL6YeP5Y2V5L2N77yIInB0Iu+8jCJtbSIsICJjbSIsICJtIiwgImluIiBvciAicHgi77yJCiAgICAvLyDnrKzkuInkuKrlj4LmlbDvvJrlj6/ku6XmmK/kuIvpnaLmoLzlvI/vvIzpu5jorqTkuLrigJxhNOKAnQogICAgdmFyIHBkZiA9IG5ldyBKU1BERihkaXJlY3Rpb24sICJtbSIsICJhNCIpOyAvLyBBNOe6uO+8jOaoquWQkQoKICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgIHZhciBhNHcgPSAxOTA7CiAgICB2YXIgYTRoID0gMjc3OyAvLyBBNOWkp+Wwj++8jDIxMG1tIHggMjk3bW3vvIzlm5vovrnlkITkv53nlZkxMG1t55qE6L656Led77yM5pi+56S65Yy65Z+fMTkweDI3NwoKICAgIGlmIChkaXJlY3Rpb24gPT0gJ2wnKSB7CiAgICAgIGE0dyA9IDI3NzsKICAgICAgYTRoID0gMTkwOwogICAgfQoKICAgIHZhciBpbWdIZWlnaHQgPSBNYXRoLmZsb29yKGE0aCAqIGNhbnZhcy53aWR0aCAvIGE0dyk7IC8vIOaMiUE05pi+56S65q+U5L6L5o2i566X5LiA6aG15Zu+5YOP55qE5YOP57Sg6auY5bqmCgogICAgdmFyIHJlbmRlcmVkSGVpZ2h0ID0gMDsKCiAgICB3aGlsZSAocmVuZGVyZWRIZWlnaHQgPCBjYW52YXMuaGVpZ2h0KSB7CiAgICAgIHZhciBwYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgIHBhZ2Uud2lkdGggPSBjYW52YXMud2lkdGg7CiAgICAgIHBhZ2UuaGVpZ2h0ID0gTWF0aC5taW4oaW1nSGVpZ2h0LCBjYW52YXMuaGVpZ2h0IC0gcmVuZGVyZWRIZWlnaHQpOyAvLyDlj6/og73lhoXlrrnkuI3otrPkuIDpobUKICAgICAgLy8g55SoZ2V0SW1hZ2VEYXRh5Ymq6KOB5oyH5a6a5Yy65Z+f77yM5bm255S75Yiw5YmN6Z2i5Yib5bu655qEY2FudmFz5a+56LGh5LitCgogICAgICBwYWdlLmdldENvbnRleHQoIjJkIikucHV0SW1hZ2VEYXRhKGN0eC5nZXRJbWFnZURhdGEoMCwgcmVuZGVyZWRIZWlnaHQsIGNhbnZhcy53aWR0aCwgTWF0aC5taW4oaW1nSGVpZ2h0LCBjYW52YXMuaGVpZ2h0IC0gcmVuZGVyZWRIZWlnaHQpKSwgMCwgMCk7CiAgICAgIHBkZi5hZGRJbWFnZShwYWdlLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIsIDEuMCksICJKUEVHIiwgMTAsIDEwLCBhNHcsIE1hdGgubWluKGE0aCwgYTR3ICogcGFnZS5oZWlnaHQgLyBwYWdlLndpZHRoKSk7IC8vIOa3u+WKoOWbvuWDj+WIsOmhtemdou+8jOS/neeVmTEwbW3ovrnot50KCiAgICAgIHJlbmRlcmVkSGVpZ2h0ICs9IGltZ0hlaWdodDsKCiAgICAgIGlmIChyZW5kZXJlZEhlaWdodCA8IGNhbnZhcy5oZWlnaHQpIHsKICAgICAgICBwZGYuYWRkUGFnZSgpOwogICAgICB9IC8vIOWmguaenOWQjumdoui/mOacieWGheWuue+8jOa3u+WKoOS4gOS4quepuumhtQogICAgICAvLyBkZWxldGUgcGFnZTsKCiAgICB9CgogICAgcGRmLnNhdmUocGRmTmFtZSArIGN1cnJlbnRUaW1lKTsKICB9KTsKfTsKZXhwb3J0IHZhciBwcmV2aWV3SW1nID0gZnVuY3Rpb24gcHJldmlld0ltZyhlbGUpIHsKICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7CiAgdmFyIGVsZVcgPSBlbGUub2Zmc2V0V2lkdGg7IC8vIOiOt+W+l+ivpeWuueWZqOeahOWuvQoKICB2YXIgZWxlSCA9IGVsZS5vZmZzZXRIZWlnaHQ7IC8vIOiOt+W+l+ivpeWuueWZqOeahOmrmAoKICB2YXIgZWxlT2Zmc2V0VG9wID0gZWxlLm9mZnNldFRvcDsgLy8g6I635b6X6K+l5a655Zmo5Yiw5paH5qGj6aG26YOo55qE6Led56a7CgogIHZhciBlbGVPZmZzZXRMZWZ0ID0gZWxlLm9mZnNldExlZnQ7IC8vIOiOt+W+l+ivpeWuueWZqOWIsOaWh+aho+acgOW3pueahOi3neemuwoKICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgdmFyIGFicyA9IDA7CiAgdmFyIHdpbl9pbiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoOyAvLyDojrflvpflvZPliY3lj6/op4bnqpflj6PnmoTlrr3luqbvvIjkuI3ljIXlkKvmu5rliqjmnaHvvIkKCiAgdmFyIHdpbl9vdXQgPSB3aW5kb3cuaW5uZXJXaWR0aDsgLy8g6I635b6X5b2T5YmN56qX5Y+j55qE5a695bqm77yI5YyF5ZCr5rua5Yqo5p2h77yJCgogIGlmICh3aW5fb3V0ID4gd2luX2luKSB7CiAgICBhYnMgPSAod2luX291dCAtIHdpbl9pbikgLyAyOyAvLyDojrflvpfmu5rliqjmnaHlrr3luqbnmoTkuIDljYoKICB9CgogIGNhbnZhcy53aWR0aCA9IGVsZVcgKiAyOwogIGNhbnZhcy5oZWlnaHQgPSBlbGVIICogMjsKICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogIGNvbnRleHQuc2NhbGUoMiwgMik7CiAgY29udGV4dC50cmFuc2xhdGUoLWVsZU9mZnNldExlZnQgLSBhYnMsIC1lbGVPZmZzZXRUb3ApOwogIHZhciBiYXNlU3JjID0gJyc7CiAgaHRtbDJjYW52YXMoZWxlLCB7CiAgICBkcGk6IDMwMCwKICAgIHNjYWxlOiAyLAogICAgLy/lpITnkIblm77niYfmqKHns4oKICAgIHVzZUNPUlM6IHRydWUgLy/lhYHorrhjYW52YXPnlLvluIPlhoUg5Y+v5Lul6Leo5Z+f6K+35rGC5aSW6YOo6ZO+5o6l5Zu+54mHLCDlhYHorrjot6jln5/or7fmsYLjgIIKCiAgfSkudGhlbihmdW5jdGlvbiAoY2FudmFzKSB7CiAgICB2YXIgcGFnZURhdGEgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywgMS4wKTsKICAgIGJhc2VTcmMgPSBwYWdlRGF0YTsKICB9KTsKICByZXR1cm4gYmFzZVNyYzsKfTsgLy8g6YeR6aKd5qC85byP5YyWCgpleHBvcnQgdmFyIG51bWJlckZvcm1hdCA9IGZ1bmN0aW9uIG51bWJlckZvcm1hdChudW1iZXIpIHsKICB2YXIgZGVjaW1hbHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDI7CiAgdmFyIGRlY1BvaW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnLic7CiAgdmFyIHRob3VzYW5kc1NlcCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJywnOwogIHZhciByb3VuZHRhZyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogJ3JvdW5kJzsKCiAgLyoKICAgKiDlj4LmlbDor7TmmI7vvJoKICAgKiBudW1iZXLvvJropoHmoLzlvI/ljJbnmoTmlbDlrZcKICAgKiBkZWNpbWFsc++8muS/neeVmeWHoOS9jeWwj+aVsAogICAqIGRlY19wb2ludO+8muWwj+aVsOeCueespuWPtwogICAqIHRob3VzYW5kc19zZXDvvJrljYPliIbkvY3nrKblj7cKICAgKiByb3VuZHRhZzroiI3lhaXlj4LmlbDvvIzpu5jorqQgJ2NlaWwnIOWQkeS4iuWPliwnZmxvb3In5ZCR5LiL5Y+WLCdyb3VuZCcg5Zub6IiN5LqU5YWlCiAgICogKi8KICBudW1iZXIgPSAobnVtYmVyICsgJycpLnJlcGxhY2UoL1teMC05Ky1FZS5dL2csICcnKTsKICByb3VuZHRhZyA9IHJvdW5kdGFnIHx8ICdjZWlsJzsgLy8gJ2NlaWwnLCdmbG9vcicsJ3JvdW5kJwoKICB2YXIgbiA9ICFpc0Zpbml0ZSgrbnVtYmVyKSA/IDAgOiArbnVtYmVyOwogIHZhciBwcmVjID0gIWlzRmluaXRlKCtkZWNpbWFscykgPyAwIDogTWF0aC5hYnMoZGVjaW1hbHMpOwogIHZhciBzZXAgPSB0eXBlb2YgdGhvdXNhbmRzU2VwID09PSAndW5kZWZpbmVkJyA/ICcsJyA6IHRob3VzYW5kc1NlcDsKICB2YXIgZGVjID0gdHlwZW9mIGRlY1BvaW50ID09PSAndW5kZWZpbmVkJyA/ICcuJyA6IGRlY1BvaW50OwogIHZhciBzID0gJyc7CgogIHZhciB0b0ZpeGVkRml4ID0gZnVuY3Rpb24gdG9GaXhlZEZpeChuLCBwcmVjKSB7CiAgICB2YXIgayA9IE1hdGgucG93KDEwLCBwcmVjKTsKICAgIGNvbnNvbGUubG9nKCk7CiAgICByZXR1cm4gJycgKyBwYXJzZUZsb2F0KE1hdGhbcm91bmR0YWddKHBhcnNlRmxvYXQoKG4gKiBrKS50b0ZpeGVkKHByZWMgKiAyKSkpLnRvRml4ZWQocHJlYyAqIDIpKSAvIGs7CiAgfTsKCiAgcyA9IChwcmVjID8gdG9GaXhlZEZpeChuLCBwcmVjKSA6ICcnICsgTWF0aC5yb3VuZChuKSkuc3BsaXQoJy4nKTsKICB2YXIgcmUgPSAvKC0/XGQrKShcZHszfSkvOwoKICB3aGlsZSAocmUudGVzdChzWzBdKSkgewogICAgc1swXSA9IHNbMF0ucmVwbGFjZShyZSwgJyQxJyArIHNlcCArICckMicpOwogIH0KCiAgaWYgKChzWzFdIHx8ICcnKS5sZW5ndGggPCBwcmVjKSB7CiAgICBzWzFdID0gc1sxXSB8fCAnJzsKICAgIHNbMV0gKz0gbmV3IEFycmF5KHByZWMgLSBzWzFdLmxlbmd0aCArIDEpLmpvaW4oJzAnKTsKICB9CgogIHJldHVybiBzLmpvaW4oZGVjKTsKfTsKLyoqCiAqIOiOt+WPliBibG9iCiAqIEBwYXJhbSAge1N0cmluZ30gdXJsIOebruagh+aWh+S7tuWcsOWdgAogKiBAcmV0dXJuIHtjYn0KICovCgpmdW5jdGlvbiBnZXRCbG9iKHVybCwgY2IpIHsKICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7CiAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJzsKCiAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsKICAgICAgY2IoeGhyLnJlc3BvbnNlKTsKICAgIH0KICB9OwoKICB4aHIuc2VuZCgpOwp9Ci8qKgogKiDkv53lrZgKICogQHBhcmFtICB7QmxvYn0gYmxvYgogKiBAcGFyYW0gIHtTdHJpbmd9IGZpbGVuYW1lIOaDs+imgeS/neWtmOeahOaWh+S7tuWQjeensAogKi8KCgpmdW5jdGlvbiBzYXZlQXMoYmxvYiwgZmlsZW5hbWUpIHsKICBpZiAod2luZG93Lm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7CiAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBmaWxlbmFtZSk7CiAgfSBlbHNlIHsKICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgdmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7CiAgICBsaW5rLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlbmFtZTsgLy8gZml4IEZpcmVmb3gKCiAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICBib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgbGluay5jbGljaygpOwogICAgYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGxpbmsuaHJlZik7CiAgfQoKICA7Cn0KLyoqCiAqIOS4i+i9vQogKiBAcGFyYW0gIHtTdHJpbmd9IHVybCDnm67moIfmlofku7blnLDlnYAKICogQHBhcmFtICB7U3RyaW5nfSBmaWxlbmFtZSDmg7PopoHkv53lrZjnmoTmlofku7blkI3np7AKICovCgoKZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkRmlsZSh1cmwsIGZpbGVuYW1lKSB7CiAgZ2V0QmxvYih1cmwsIGZ1bmN0aW9uIChibG9iKSB7CiAgICBzYXZlQXMoYmxvYiwgZmlsZW5hbWUpOwogIH0pOwp9Cjs="},{"version":3,"sources":["/Users/zhang/canteen_manage/src/libs/util.js"],"names":["Cookies","config","forEach","hasOneOf","objEqual","_","createHash","html2canvas","JSPDF","JSEncrypt","getRandom","Math","floor","random","toString","isInPrerenderMode","window","__IS_IN_PRERENDER_MODE","delayAfterRender","TOKEN_KEY","SESSION_KEY","ID_TYPE_DCT","setToken","token","set","expires","cookieExpires","getToken","get","setSession","session","getSession","removeCookies","remove","hasChild","item","children","length","showThisMenuEle","access","meta","getMenuByRouter","list","res","hideInMenu","obj","icon","name","showAlways","href","push","getBreadCrumbList","route","homeRoute","homeItem","routeMetched","matched","some","filter","undefined","hide","map","title","to","path","getRouteTitleHandled","router","showTitle","vm","$config","useI18n","$t","setTagNavListInLocalstorage","localStorage","tagNaveList","JSON","stringify","getTagNavListFromLocalstorage","parse","getHomeRoute","routers","homeName","i","len","getNewTagList","newRoute","newList","findIndex","hasAccess","canTurnTo","routes","routePermissionJudge","getParams","url","keyValueArr","split","paramObj","keyValue","getNextRoute","index","routeEqual","doCustomTimes","times","callback","getArrayFromFile","file","nameSplit","format","Promise","resolve","reject","reader","FileReader","readAsText","arr","onload","evt","data","target","result","pasteData","trim","row","Error","getTableDataFromArray","array","columns","tableData","titles","shift","key","col","findNodeUpper","ele","tag","parentNode","tagName","toUpperCase","findNodeUpperByClasses","classes","classList","every","className","contains","findNodeDownward","childNodes","child","showByAccess","canViewAccess","route1","route2","params1","params","params2","query1","query","query2","routeHasExist","tagNavList","routeItem","localSave","value","setItem","localRead","getItem","formatMoney","s","type","test","replace","re","a","concatArray","uniq","isArray","Array","prototype","concat","apply","setUserName","username","getUserName","userName","setCookiesItem","getCookiesItem","getUserInfo","userInfo","PUB_KEY","encryptByPubKey","rawData","crypto","require","err","console","log","buffer","Buffer","from","encrypted","publicEncrypt","RSA_PUB_KEY","rsaEncryptByPubKey","encrypt","setPublicKey","algorithm","content","hash","update","digest","sha1","currency","md5","isPhone","str","reg","buildChildDepartmentArray","selectDepartData","merchantDepartData","tmp","curDepart","cur","parentid","departments","pluck","union","buildDepartmentTree","childData","departmentData","find","department_id","newDepart","inDepart","uniontmp","buildTree","queryArr","sub","currentKey","parentsKey","root","rootTree","extend","id","c","buildTreeChecked","CheckedArr","pos","indexOf","getTreeNodesValue","getTreeNodes","getTreeNodeItem","getTreeNodeItemName","keys","currentName","level","ExportSavePdf","element","pdfName","currentTime","direction","dpi","useCORS","logging","then","canvas","pdf","ctx","getContext","a4w","a4h","imgHeight","width","renderedHeight","height","page","document","createElement","min","putImageData","getImageData","addImage","toDataURL","addPage","save","previewImg","scrollTo","eleW","offsetWidth","eleH","offsetHeight","eleOffsetTop","offsetTop","eleOffsetLeft","offsetLeft","abs","win_in","documentElement","clientWidth","body","win_out","innerWidth","context","scale","translate","baseSrc","pageData","numberFormat","number","decimals","decPoint","thousandsSep","roundtag","n","isFinite","prec","sep","dec","toFixedFix","k","pow","parseFloat","toFixed","round","join","getBlob","cb","xhr","XMLHttpRequest","open","responseType","status","response","send","saveAs","blob","filename","navigator","msSaveOrOpenBlob","msSaveBlob","link","querySelector","URL","createObjectURL","download","style","display","appendChild","click","removeChild","revokeObjectURL","downloadFile"],"mappings":"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","sourcesContent":["import Cookies from 'js-cookie';\n// cookie保存的天数\nimport config from '@/config';\nimport { forEach, hasOneOf, objEqual } from '@/libs/tools';\nimport _ from 'underscore';\nimport { createHash } from 'crypto';\nimport html2canvas from \"html2canvas\";\nimport JSPDF from \"jspdf\";\nimport { JSEncrypt } from 'jsencrypt';\n\nexport const getRandom = () => {\n  return Math.floor(Math.random() * 999999).toString();\n}\n\nexport const isInPrerenderMode = window.__IS_IN_PRERENDER_MODE || false;\nexport const delayAfterRender = isInPrerenderMode ? 500 : 0;\n\nexport const TOKEN_KEY = 'token';\nexport const SESSION_KEY = 'sessionid';\nexport const ID_TYPE_DCT = {\n  '1': '身份证',\n  '2': '护照',\n  '3': '其他'\n};\n\nexport const setToken = (token) => {\n  Cookies.set(TOKEN_KEY, token, { expires: config.cookieExpires || 1 });\n};\n\nexport const getToken = () => {\n  const token = Cookies.get(TOKEN_KEY);\n  if (token) return token;\n  else return false;\n};\n\nexport const setSession = (session) => {\n  Cookies.set(SESSION_KEY, session, { expires: config.cookieExpires || 1 });\n};\n\nexport const getSession = () => {\n  const session = Cookies.get(SESSION_KEY);\n  if (session) return session;\n  else return false;\n};\n\nexport const removeCookies = () => {\n  Cookies.remove('avatar');\n  Cookies.remove('token');\n  Cookies.remove('nickname');\n  Cookies.remove('last_login_time');\n};\n\nexport const hasChild = (item) => {\n  return item.children && item.children.length !== 0;\n};\n\nconst showThisMenuEle = (item, access) => {\n  if (item.meta && item.meta.access && item.meta.access.length) {\n    if (hasOneOf(item.meta.access, access)) return true\n    else return false\n  } else return true\n}\n/**\n * @param {Array} list 通过路由列表得到菜单列表\n * @returns {Array}\n */\nexport const getMenuByRouter = (list, access) => {\n  // console.log('list: ' + JSON.stringify(list, null, 4));\n  // console.log(\"getMenuByRouter permission: \" + permission)\n  let res = [];\n  forEach(list, (item) => {\n    if (!item.meta || (item.meta && !item.meta.hideInMenu)) {\n      let obj = {\n        icon: (item.meta && item.meta.icon) || '',\n        name: item.name,\n        meta: item.meta,\n      };\n      if (\n        (hasChild(item) || (item.meta && item.meta.showAlways)) &&\n        showThisMenuEle(item, access)\n      ) {\n        // console.log(\"item: \" + JSON.stringify(item))\n        obj.children = getMenuByRouter(item.children, access);\n      }\n      if (item.meta && item.meta.href) obj.href = item.meta.href\n      if (showThisMenuEle(item, access)) res.push(obj);\n    }\n  });\n  return res;\n};\n/**\n * @param {Array} routeMetched 当前路由metched\n * @returns {Array}\n */\nexport const getBreadCrumbList = (route, homeRoute) => {\n  let homeItem = { ...homeRoute, icon: homeRoute.meta.icon };\n  let routeMetched = route.matched;\n  if (routeMetched.some((item) => item.name === homeRoute.name)) return [homeItem];\n  let res = routeMetched\n    .filter((item) => {\n      return item.meta === undefined || !item.meta.hide;\n    })\n    .map((item) => {\n      let meta = { ...item.meta };\n      if (meta.title && typeof meta.title === 'function') meta.title = meta.title(route);\n      let obj = {\n        icon: (item.meta && item.meta.icon) || '',\n        name: item.name,\n        meta: meta,\n      };\n      return obj;\n    });\n  res = res.filter((item) => {\n    return !item.meta.hideInMenu;\n  });\n  return [{ ...homeItem, to: homeRoute.path }, ...res];\n};\n\nexport const getRouteTitleHandled = (route) => {\n  let router = { ...route };\n  let meta = { ...route.meta };\n  if (meta.title && typeof meta.title === 'function') meta.title = meta.title(router);\n  router.meta = meta;\n  return router;\n};\n\nexport const showTitle = (item, vm) =>\n  vm.$config.useI18n ? vm.$t(item.name) : (item.meta && item.meta.title) || item.name;\n\n/**\n * @description 本地存储和获取标签导航列表\n */\nexport const setTagNavListInLocalstorage = (list) => {\n  localStorage.tagNaveList = JSON.stringify(list);\n};\n/**\n * @returns {Array} 其中的每个元素只包含路由原信息中的name, path, meta三项\n */\nexport const getTagNavListFromLocalstorage = () => {\n  const list = localStorage.tagNaveList;\n  return list ? JSON.parse(list) : [];\n};\n\n/**\n * @param {Array} routers 路由列表数组\n * @description 用于找到路由列表中name为home的对象\n */\nexport const getHomeRoute = (routers, homeName = 'homePage') => {\n  let i = -1;\n  let len = routers.length;\n  let homeRoute = {};\n  while (++i < len) {\n    let item = routers[i];\n    if (item.children && item.children.length) {\n      let res = getHomeRoute(item.children);\n      if (res.name) return res;\n    } else {\n      if (item.name === homeName) homeRoute = item;\n    }\n  }\n  return homeRoute;\n};\n\n/**\n * @param {*} list 现有标签导航列表\n * @param {*} newRoute 新添加的路由原信息对象\n * @description 如果该newRoute已经存在则不再添加\n */\nexport const getNewTagList = (list, newRoute) => {\n  const { name, path, meta } = newRoute;\n  let newList = [...list];\n  if (newList.findIndex((item) => item.name === name) >= 0) return newList;\n  else newList.push({ name, path, meta });\n  return newList;\n};\n\n/**\n * @param {*} access 用户权限数组，如 ['super_admin', 'admin']\n * @param {*} route 路由列表\n */\nconst hasAccess = (access, route) => {\n  if (route.meta && route.meta.access) return hasOneOf(access, route.meta.access);\n  else return true;\n};\n\n/**\n * 权鉴\n * @param {*} name 即将跳转的路由name\n * @param {*} access 用户权限数组\n * @param {*} routes 路由列表\n * @description 用户是否可跳转到该页\n */\nexport const canTurnTo = (name, access, routes) => {\n  const routePermissionJudge = (list) => {\n    return list.some((item) => {\n      if (item.children && item.children.length) {\n        return routePermissionJudge(item.children);\n      } else if (item.name === name) {\n        return hasAccess(access, item);\n      }\n    });\n  };\n\n  return routePermissionJudge(routes);\n};\n\n/**\n * @param {String} url\n * @description 从URL中解析参数\n */\nexport const getParams = (url) => {\n  const keyValueArr = url.split('?')[1].split('&');\n  let paramObj = {};\n  keyValueArr.forEach((item) => {\n    const keyValue = item.split('=');\n    paramObj[keyValue[0]] = keyValue[1];\n  });\n  return paramObj;\n};\n\n/**\n * @param {Array} list 标签列表\n * @param {String} name 当前关闭的标签的name\n */\nexport const getNextRoute = (list, route) => {\n  let res = {};\n  if (list.length === 2) {\n    res = getHomeRoute(list);\n  } else {\n    const index = list.findIndex((item) => routeEqual(item, route));\n    if (index === list.length - 1) res = list[list.length - 2];\n    else res = list[index + 1];\n  }\n  return res;\n};\n\n/**\n * @param {Number} times 回调函数需要执行的次数\n * @param {Function} callback 回调函数\n */\nexport const doCustomTimes = (times, callback) => {\n  let i = -1;\n  while (++i < times) {\n    callback(i);\n  }\n};\n\n/**\n * @param {Object} file 从上传组件得到的文件对象\n * @returns {Promise} resolve参数是解析后的二维数组\n * @description 从Csv文件中解析出表格，解析成二维数组\n */\nexport const getArrayFromFile = (file) => {\n  let nameSplit = file.name.split('.');\n  let format = nameSplit[nameSplit.length - 1];\n  return new Promise((resolve, reject) => {\n    let reader = new FileReader();\n    reader.readAsText(file); // 以文本格式读取\n    let arr = [];\n    reader.onload = function(evt) {\n      let data = evt.target.result; // 读到的数据\n      let pasteData = data.trim();\n      arr = pasteData\n        .split(/[\\n\\u0085\\u2028\\u2029]|\\r\\n?/g)\n        .map((row) => {\n          return row.split('\\t');\n        })\n        .map((item) => {\n          return item[0].split(',');\n        });\n      if (format === 'csv') resolve(arr);\n      else reject(new Error('[Format Error]:你上传的不是Csv文件'));\n    };\n  });\n};\n\n/**\n * @param {Array} array 表格数据二维数组\n * @returns {Object} { columns, tableData }\n * @description 从二维数组中获取表头和表格数据，将第一行作为表头，用于在iView的表格中展示数据\n */\nexport const getTableDataFromArray = (array) => {\n  let columns = [];\n  let tableData = [];\n  if (array.length > 1) {\n    let titles = array.shift();\n    columns = titles.map((item) => {\n      return {\n        title: item,\n        key: item,\n      };\n    });\n    tableData = array.map((item) => {\n      let res = {};\n      item.forEach((col, i) => {\n        res[titles[i]] = col;\n      });\n      return res;\n    });\n  }\n  return {\n    columns,\n    tableData,\n  };\n};\n\nexport const findNodeUpper = (ele, tag) => {\n  if (ele.parentNode) {\n    if (ele.parentNode.tagName === tag.toUpperCase()) {\n      return ele.parentNode;\n    } else {\n      return findNodeUpper(ele.parentNode, tag);\n    }\n  }\n};\n\nexport const findNodeUpperByClasses = (ele, classes) => {\n  let parentNode = ele.parentNode;\n  if (parentNode) {\n    let classList = parentNode.classList;\n    if (classList && classes.every((className) => classList.contains(className))) {\n      return parentNode;\n    } else {\n      return findNodeUpperByClasses(parentNode, classes);\n    }\n  }\n};\n\nexport const findNodeDownward = (ele, tag) => {\n  const tagName = tag.toUpperCase();\n  if (ele.childNodes.length) {\n    let i = -1;\n    let len = ele.childNodes.length;\n    while (++i < len) {\n      let child = ele.childNodes[i];\n      if (child.tagName === tagName) return child;\n      else return findNodeDownward(child, tag);\n    }\n  }\n};\n\nexport const showByAccess = (access, canViewAccess) => {\n  return hasOneOf(canViewAccess, access);\n};\n\n/**\n * @description 根据name/params/query判断两个路由对象是否相等\n * @param {*} route1 路由对象\n * @param {*} route2 路由对象\n */\nexport const routeEqual = (route1, route2) => {\n  const params1 = route1.params || {};\n  const params2 = route2.params || {};\n  const query1 = route1.query || {};\n  const query2 = route2.query || {};\n  return route1.name === route2.name && objEqual(params1, params2) && objEqual(query1, query2);\n};\n\n/**\n * 判断打开的标签列表里是否已存在这个新添加的路由对象\n */\nexport const routeHasExist = (tagNavList, routeItem) => {\n  let len = tagNavList.length;\n  let res = false;\n  doCustomTimes(len, (index) => {\n    if (routeEqual(tagNavList[index], routeItem)) res = true;\n  });\n  return res;\n};\n\nexport const localSave = (key, value) => {\n  localStorage.setItem(key, value);\n};\n\nexport const localRead = (key) => {\n  return localStorage.getItem(key) || '';\n};\n\nexport const formatMoney = (s, type) => {\n  if (/[^0-9.]/.test(s)) return '0.00';\n  if (s == null || s == 'null' || s == '') return '0.00';\n  s = s.toString().replace(/^(\\d*)$/, '$1.');\n  s = (s + '00').replace(/(\\d*\\.\\d\\d)\\d*/, '$1');\n  s = s.replace('.', ',');\n  var re = /(\\d)(\\d{3},)/;\n  while (re.test(s)) s = s.replace(re, '$1,$2');\n  s = s.replace(/,(\\d\\d)$/, '.$1');\n  if (type == 0) {\n    var a = s.split('.');\n    if (a[1] == '00') {\n      s = a[0];\n    }\n  }\n  return s;\n};\n\n// 合并数组，且去重\nexport const concatArray = (array, uniq = true) => {\n  if (!_.isArray(array)) {\n    return array;\n  }\n  let arr = Array.prototype.concat.apply([], array);\n  return uniq ? _.uniq(arr) : arr;\n};\n\nexport const setUserName = (username) => {\n  Cookies.set('username', username, { expires: config.cookieExpires || 1 || 1 })\n}\n\nexport const getUserName = () => {\n  const userName = Cookies.get('username')\n  if (userName) return userName\n  else return false\n}\n\nexport const setCookiesItem = (key, value) => {\n  Cookies.set(key, value, { expires: config.cookieExpires || 1 || 1 })\n}\n\nexport const getCookiesItem = (key) => {\n  const value = Cookies.get(key)\n  if (value) return value\n  else return false\n}\n\nexport const getUserInfo = () => {\n  const userInfo = localRead('userInfo');\n  if (userInfo) {\n    return JSON.stringify(userInfo)\n  } else {\n    return {}\n  }\n}\n\n// rsa encrypt\nconst PUB_KEY = `\n-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCmNyKjsL3UNklCfhIj7In9kNxj\nTqwi76f6pSuXfSNiJuoVtKZNyDCCW5Edzo0HHglLlpskVN8s3JV4lmXTU14BUYW/\n/B982hwUAgPElyo3BXpd66VN8U9A9FuddaK7gvK8+FOsOHT0a+vGb7/Uk3HpJ1AJ\noO3Zt0Dqyc0dL/7hLwIDAQAB\n-----END PUBLIC KEY-----\n`;\nexport const encryptByPubKey = (rawData) => {\n  let crypto;\n  try {\n    crypto = require('crypto');\n  } catch (err) {\n    console.log('crypto support is disabled!');\n  }\n  var buffer = Buffer.from(rawData);\n  var encrypted = crypto.publicEncrypt(PUB_KEY, buffer);\n  return encrypted.toString(\"base64\");\n}\n\n// rsa encrypt\nconst RSA_PUB_KEY = `\n-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDESPaIBt+nS0EQmHcmI8llMFec\ncO6XMP3D1T28vPjH6KJ9CCurMH2Ag5lSWF0fe3nQDGTVTz7oMEikqqNmP5Njkxay\ndP4QAsfeBKHibnsCY/4MbhvpJqEGAuhZi/AD2zj2sAv+Aa46FLehjxQXZejL2tUl\neh0DW6YBXU2ov8MiHQIDAQAB\n-----END PUBLIC KEY-----\n`;\nexport const rsaEncryptByPubKey = (rawData) => {\n  const encrypt = new JSEncrypt();\n  encrypt.setPublicKey(RSA_PUB_KEY);\n  return encrypt.encrypt(rawData);\n}\n\n\n/**\n * @param {string} algorithm\n * @param {any} content\n *  @return {string}\n */\nexport const encrypt = (algorithm, content) => {\n  let hash = createHash(algorithm)\n  hash.update(content)\n  return hash.digest('hex')\n}\n\n/**\n * @param {any} content\n *  @return {string}\n */\nexport const sha1 = (content) => encrypt('sha1', content)\n\n// 币种符号\nexport const currency = {\n  'CNY': '￥',\n  'HKD': 'HK＄',\n  'USD': '＄',\n  'EUR': '€',\n  'GBP': '￡',\n  'JPY': 'J￥',\n  'KRW': '₩'\n}\n\n\n/**\n * @param {any} content\n *  @return {string}\n */\nexport const md5 = (content) => encrypt('md5', content)\n\n// 校验是否为合法手机号码\nexport const isPhone = (str) => {\n  const reg = /^[1][3-9]\\d{9}$|^([6|9])\\d{7}$|^[0][9]\\d{8}$|^[6]([8|6])\\d{5}$/;\n  if (!reg.test(str)) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\n// 根据部门树形结构,返回叶子节点部门数组\nexport const buildChildDepartmentArray = (selectDepartData, merchantDepartData) => {\n  //判断两个参数是否为数组\n  let tmp = [];\n  selectDepartData.map(function(item, index) {\n    if (item) {\n      tmp.push(item);\n      //查找父id是当前id的数组\n      let curDepart = _.filter(merchantDepartData, cur => {return cur.parentid == item});\n      if (curDepart.length !== 0) {\n        let departments = _.pluck(curDepart,'department_id');\n        let res = buildChildDepartmentArray(departments, merchantDepartData);\n        tmp = _.union(tmp, res);\n      }\n    }\n\n  });\n  // console.log(\"buildChildDepartmentArray=====finished---tmp>>>\" + JSON.stringify(tmp));\n  return tmp;\n}\n\n// 根据叶子节点部门数组和部门组织数组，返回部门树形结构\nexport const buildDepartmentTree = (childData, departmentData) => {\n  //判断两个参数是否为数组\n  let tmp = [];\n  childData.map(function(item, index) {\n    if (item) {\n      let curDepart = _.find(departmentData, cur => {return cur.department_id == item});\n      if (curDepart) {\n        let newDepart = {\n          department_id: curDepart.department_id,\n          parentid: curDepart.parentid,\n          name: curDepart.name\n        };\n        tmp.push(newDepart);\n\n        if (curDepart.parentid == \"\"){\n\n        }\n        else{\n          let inDepart = [];\n          inDepart.push(curDepart.parentid);\n          let res = buildDepartmentTree(inDepart, departmentData);\n          let uniontmp = _.union(tmp, res);\n          tmp = _.uniq(uniontmp, true, 'department_id');\n        }\n      }\n    }\n\n  });\n  return tmp;\n}\n\n// 递归返回树形结构，默认主ID字段名为 code，父id字段名为 parents， 根据数据可自定义\nexport const buildTree = (queryArr, sub = {}, currentKey = 'code', parentsKey = 'parents', child = 'children', root = '0') => {\n  // console.log(\"buildTree--->>>\" + root + \"--->>>\" + JSON.stringify(queryArr));\n  let tmp = [];\n  let rootTree={\n    department_id: '0',\n    parentid: \"\",\n    name: \"全部部门\",\n  };\n  let query = JSON.parse(JSON.stringify(queryArr));\n  if (root == '0'){\n    query.map(function(item, i) {\n      if (!sub[currentKey]) {\n        if (item[parentsKey] === '') {\n          item[parentsKey] = '0';\n        }\n      }\n    });\n    query.push(rootTree);\n  }\n\n  query.map(function(item, i) {\n    if (item) {\n      _.extend(item, { id: item[currentKey] });\n      _.extend(item, { title: item['name'] });\n    }\n    if (!sub[currentKey]) {\n      if (item[parentsKey] === '') {\n        query[i] = false;\n        item['checked'] = true;\n        tmp.push(item);\n      }\n    } else {\n      if (sub[currentKey] === item[parentsKey]) {\n        query[i] = false;\n        item['checked'] = true;\n        tmp.push(item);\n      }\n    }\n  })\n  if (tmp.length === 0) {\n    return;\n  }\n  sub = tmp;\n  if (sub.length > 0) {\n    // console.log(\"sub ===> \", sub)\n    sub.map(function(cur, c) {\n      let res = buildTree(query, cur, currentKey, parentsKey, child, '1');\n      if (res) {\n        sub[c][child] = res;\n      }\n    });\n  }\n  return sub;\n}\n\n// 递归返回树形结构，默认主ID字段名为 code，父id字段名为 parents， 根据数据可自定义\nexport const buildTreeChecked = (queryArr, sub = {}, currentKey = 'code', parentsKey = 'parents', child = 'children', root = '0', CheckedArr) => {\n  // console.log(\"buildTree--->>>\" + root + \"--->>>\" + JSON.stringify(queryArr));\n  let tmp = [];\n  let rootTree={\n    department_id: '0',\n    parentid: \"\",\n    name: \"全部部门\",\n  };\n  let query = JSON.parse(JSON.stringify(queryArr));\n  if (root == '0'){\n    query.map(function(item, i) {\n      if (!sub[currentKey]) {\n        if (item[parentsKey] === '') {\n          item[parentsKey] = '0';\n        }\n      }\n    });\n    query.push(rootTree);\n  }\n\n  query.map(function(item, i) {\n    if (item) {\n      _.extend(item, { id: item[currentKey] });\n      _.extend(item, { title: item['name'] });\n    }\n    if (!sub[currentKey]) {\n      if (item[parentsKey] === '') {\n        query[i] = false;\n        tmp.push(item);\n      }\n    } else {\n      if (sub[currentKey] === item[parentsKey]) {\n        query[i] = false;\n        let pos = _.indexOf(CheckedArr, item[currentKey]);\n        if (pos != -1){\n          item['checked'] = true;\n        }\n        tmp.push(item);\n      }\n    }\n  })\n  if (tmp.length === 0) {\n    return;\n  }\n  sub = tmp;\n  if (sub.length > 0) {\n    // console.log(\"sub ===> \", sub)\n    sub.map(function(cur, c) {\n      let res = buildTreeChecked(query, cur, currentKey, parentsKey, child, '1', CheckedArr);\n      if (res) {\n        sub[c][child] = res;\n      }\n    });\n  }\n  return sub;\n}\n\n\n// 递归返回树形结构，默认主ID字段名为 code，父id字段名为 parents， 根据数据可自定义\nexport const getTreeNodesValue = (queryArr, currentKey = 'code', child = 'children', key = '') => {\n  let tmp = [];\n  let query = JSON.parse(JSON.stringify(queryArr));\n\n  query.map(function(item, i) {\n    if (item[currentKey] != undefined && item) {\n      tmp.push(key==''?item[currentKey]:key + '-' + item[currentKey]);\n    }\n    if (item[child] != undefined && item[child].length > 0) {\n      let res = getTreeNodesValue(item[child], currentKey, child, key==''?item[currentKey]:key + '-' + item[currentKey]);\n      if (res.length > 0){\n        tmp.push(...res);\n      }\n    }\n  })\n\n  return tmp;\n}\n\n// 递归返回树形结构，默认主ID字段名为 code，父id字段名为 parents， 根据数据可自定义\nexport const getTreeNodes = (queryArr, currentKey = 'code', child = 'children') => {\n  let tmp = [];\n  let query = JSON.parse(JSON.stringify(queryArr));\n\n  query.map(function(item, i) {\n    if (item[currentKey] != undefined && item) {\n      tmp.push(item[currentKey]);\n    }\n    if (item[child] != undefined && item[child].length > 0) {\n      let res = getTreeNodes(item[child], currentKey, child);\n      if (res.length > 0){\n        tmp.push(...res);\n      }\n    }\n  })\n\n  return tmp;\n}\n\n// 递归返回树形结构中某一个关键字对应的节点数据，根据数据可自定义\nexport const getTreeNodeItem = (queryArr, currentKey = 'code', child = 'children', key) => {\n  let tmp = [];\n  queryArr.map(function(item, i) {\n    if (item[currentKey] != undefined && item) {\n      if (item[currentKey] == key){\n        tmp.push(item);\n      }\n    }\n    if (item[child] != undefined && item[child].length > 0) {\n      let res = getTreeNodeItem(item[child], currentKey, child, key);\n      if (res.length > 0){\n        tmp.push(...res);\n      }\n    }\n  })\n\n  return tmp;\n}\n\n// 递归返回树形结构中某一个关键字对应的节点数据，根据数据可自定义\nexport const getTreeNodeItemName = (queryArr, currentKey = 'code', child = 'children', keys, currentName) => {\n  let tmp = [];\n  queryArr.map(function(item, i) {\n    if (item[currentKey] != undefined && item) {\n      _.find(keys, function(key){\n        if (item[currentKey] == key){\n          tmp.push({id:item[currentKey],name:item[currentName],level:item.level});\n        }\n      });\n\n    }\n    if (item[child] != undefined && item[child].length > 0) {\n      let res = getTreeNodeItemName(item[child], currentKey, child, keys, currentName);\n      if (res.length > 0){\n        tmp.push(...res);\n      }\n    }\n  });\n\n  return tmp;\n}\n\n// 导出页面为PDF格式\nexport const ExportSavePdf = (element, pdfName, currentTime, direction = 'p') => {\n  // var element = document.getElementById(\"statPrint\")\n  html2canvas(element, {\n    dpi: 300,\n    useCORS: true, // 如果说所生成的页面中带有跨域的图片，这个useCors需要设置为True 否则画布被污染不会显示\n    logging: false,\n  }).then(function (canvas) {\n    // let [imgX, imgY] = [595.28, 841.89];\n    // let pdf = new jsPDF('p', 'pt', 'a4');\n    // for (let [index, item] of pageList.entries()) {\n    //   for (let j = 0; j < item.imageList.length; j++) {\n    //     const image = item.imageList[j];\n    //     let imgHeight = imgX / (image.width / image.height); //根据宽度计算高度\n    //     pdf.addImage(image.data, 'JPEG', 0, 0, imgX, imgHeight);\n    //     pdf.addPage();\n    //   }\n    // }\n    // let targetPage = pdf.internal.getNumberOfPages();\n    // pdf.deletePage(targetPage); // 删除最后一页\n    // pdf.save(`测试.pdf`);\n\n\n    // let pdf = new jsPDF('p', 'pt', [pdfX, pdfY]);\n    // 第一个参数： l：横向  p：纵向\n    // 第二个参数：测量单位（\"pt\"，\"mm\", \"cm\", \"m\", \"in\" or \"px\"）\n    // 第三个参数：可以是下面格式，默认为“a4”\n    let pdf = new JSPDF(direction, \"mm\", \"a4\") // A4纸，横向\n    let ctx = canvas.getContext(\"2d\")\n    let a4w = 190;\n    let a4h = 277; // A4大小，210mm x 297mm，四边各保留10mm的边距，显示区域190x277\n    if (direction == 'l'){\n      a4w = 277;\n      a4h = 190;\n    }\n    let imgHeight = Math.floor(a4h * canvas.width / a4w); // 按A4显示比例换算一页图像的像素高度\n    let renderedHeight = 0;\n\n    while (renderedHeight < canvas.height) {\n      let page = document.createElement(\"canvas\");\n      page.width = canvas.width;\n      page.height = Math.min(imgHeight, canvas.height - renderedHeight);// 可能内容不足一页\n\n      // 用getImageData剪裁指定区域，并画到前面创建的canvas对象中\n      page.getContext(\"2d\").putImageData(ctx.getImageData(0, renderedHeight, canvas.width, Math.min(imgHeight, canvas.height - renderedHeight)), 0, 0);\n      pdf.addImage(page.toDataURL(\"image/jpeg\", 1.0), \"JPEG\", 10, 10, a4w, Math.min(a4h, a4w * page.height / page.width)); // 添加图像到页面，保留10mm边距\n\n      renderedHeight += imgHeight;\n      if (renderedHeight < canvas.height) {\n        pdf.addPage();\n      }// 如果后面还有内容，添加一个空页\n      // delete page;\n    }\n    pdf.save(pdfName + currentTime);\n  })\n}\n\nexport const previewImg = (ele) => {\n  window.scrollTo(0, 0);\n  let eleW = ele.offsetWidth;// 获得该容器的宽\n  let eleH = ele.offsetHeight;// 获得该容器的高\n  let eleOffsetTop = ele.offsetTop;  // 获得该容器到文档顶部的距离\n  let eleOffsetLeft = ele.offsetLeft; // 获得该容器到文档最左的距离\n\n  var canvas = document.createElement(\"canvas\");\n  var abs = 0;\n\n  let win_in = document.documentElement.clientWidth || document.body.clientWidth; // 获得当前可视窗口的宽度（不包含滚动条）\n  let win_out = window.innerWidth; // 获得当前窗口的宽度（包含滚动条）\n\n  if (win_out > win_in) {\n    abs = (win_out - win_in) / 2;    // 获得滚动条宽度的一半\n  }\n  canvas.width = eleW * 2;\n  canvas.height = eleH * 2;\n\n  var context = canvas.getContext(\"2d\");\n  context.scale(2, 2);\n  context.translate(-eleOffsetLeft - abs, -eleOffsetTop);\n  var baseSrc = ''\n  html2canvas(ele, {\n    dpi: 300,\n    scale: 2,//处理图片模糊\n    useCORS: true  //允许canvas画布内 可以跨域请求外部链接图片, 允许跨域请求。\n  }).then((canvas) => {\n    var pageData = canvas.toDataURL('image/jpeg', 1.0);\n    baseSrc = pageData\n  })\n\n  return baseSrc;\n}\n\n\n// 金额格式化\nexport const numberFormat = (number, decimals = 2, decPoint = '.', thousandsSep = ',', roundtag = 'round') => {\n  /*\n   * 参数说明：\n   * number：要格式化的数字\n   * decimals：保留几位小数\n   * dec_point：小数点符号\n   * thousands_sep：千分位符号\n   * roundtag:舍入参数，默认 'ceil' 向上取,'floor'向下取,'round' 四舍五入\n   * */\n  number = (number + '').replace(/[^0-9+-Ee.]/g, '')\n  roundtag = roundtag || 'ceil' // 'ceil','floor','round'\n  let n = !isFinite(+number) ? 0 : +number\n  let prec = !isFinite(+decimals) ? 0 : Math.abs(decimals)\n  let sep = (typeof thousandsSep === 'undefined') ? ',' : thousandsSep\n  let dec = (typeof decPoint === 'undefined') ? '.' : decPoint\n  let s = ''\n  let toFixedFix = function(n, prec) {\n    let k = Math.pow(10, prec)\n    console.log()\n\n    return '' + parseFloat(Math[roundtag](parseFloat((n * k).toFixed(prec * 2))).toFixed(prec * 2)) / k\n  }\n  s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.')\n  let re = /(-?\\d+)(\\d{3})/\n  while (re.test(s[0])) {\n    s[0] = s[0].replace(re, '$1' + sep + '$2')\n  }\n\n  if ((s[1] || '').length < prec) {\n    s[1] = s[1] || ''\n    s[1] += new Array(prec - s[1].length + 1).join('0')\n  }\n  return s.join(dec)\n}\n\n/**\n * 获取 blob\n * @param  {String} url 目标文件地址\n * @return {cb}\n */\nfunction getBlob(url,cb) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url, true);\n  xhr.responseType = 'blob';\n  xhr.onload = function() {\n    if (xhr.status === 200) {\n      cb(xhr.response);\n    }\n  };\n  xhr.send();\n}\n\n/**\n * 保存\n * @param  {Blob} blob\n * @param  {String} filename 想要保存的文件名称\n */\nfunction saveAs(blob, filename) {\n  if (window.navigator.msSaveOrOpenBlob) {\n    navigator.msSaveBlob(blob, filename);\n  } else {\n    var link = document.createElement('a');\n    var body = document.querySelector('body');\n    link.href = window.URL.createObjectURL(blob);\n    link.download = filename;\n    // fix Firefox\n    link.style.display = 'none';\n    body.appendChild(link);\n    link.click();\n    body.removeChild(link);\n    window.URL.revokeObjectURL(link.href);\n  };\n}\n\n/**\n * 下载\n * @param  {String} url 目标文件地址\n * @param  {String} filename 想要保存的文件名称\n */\nexport function downloadFile(url, filename) {\n  getBlob(url, function(blob) {\n    saveAs(blob, filename);\n  });\n};\n\n\n\n"]}]}