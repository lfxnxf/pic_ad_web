{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/businessinfo/restaurant-staff/components/editmodal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/businessinfo/restaurant-staff/components/editmodal.vue","mtime":1639468524270},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7CmltcG9ydCB7IHJzYUVuY3J5cHRCeVB1YktleSB9IGZyb20gIkAvbGlicy91dGlsIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBydWxlRm9ybTogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlkZjlt6Xlp5PlkI0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGhvbmU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmiYvmnLrlj7cnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgcHdkU2hvdzogZmFsc2UsCiAgICAgIHJlc2V0QnRuTmFtZTogJ+mHjee9ruWvhueggScsCiAgICAgIHN0YXR1czogdHJ1ZSwKICAgICAgcGFzc3dvcmQ6ICcnCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6IHsKICAgIGN1ck1lcmNoYW50VXNlcjogZnVuY3Rpb24gY3VyTWVyY2hhbnRVc2VyKCkgewogICAgICB2YXIgaXNFbmFibGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5tZXJjaGFudC5jdXJNZXJjaGFudFVzZXIuaXNfZW5hYmxlOwogICAgICB0aGlzLnN0YXR1cyA9IGlzRW5hYmxlID09IDEgPyB0cnVlIDogZmFsc2U7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5tZXJjaGFudC5jdXJNZXJjaGFudFVzZXI7CiAgICB9LAogICAgZWRpdHN0YWZmTW9kYWw6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLm1lcmNoYW50LmVkaXRNZXJjaGFudFVzZXJNb2RhbDsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRFZGl0TWVyY2hhbnRVc2VyTW9kYWwnLCB2YWwpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBlZGl0VXNlcjogZnVuY3Rpb24gZWRpdFVzZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmVkaXRzdGFmZk1vZGFsLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50SWQsCiAgICAgICAgICAgIHVzZXJfaWQ6IF90aGlzLmN1ck1lcmNoYW50VXNlci51c2VyX2lkLAogICAgICAgICAgICBuYW1lOiBfdGhpcy5jdXJNZXJjaGFudFVzZXIubmFtZSwKICAgICAgICAgICAgcGhvbmU6IF90aGlzLmN1ck1lcmNoYW50VXNlci5waG9uZSwKICAgICAgICAgICAgaXNfZW5hYmxlOiBfdGhpcy5zdGF0dXMgPyAxIDogMCwKICAgICAgICAgICAgenphOiAwCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChfdGhpcy5wd2RTaG93KSB7CiAgICAgICAgICAgIHZhciBwd2QgPSBfdGhpcy5wYXNzd29yZC50cmltKCk7CgogICAgICAgICAgICBpZiAocHdkLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgYWxlcnQoIuivt+i+k+WFpeWvhuegge+8gSIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBhcmFtcy5wYXNzd29yZCA9IHJzYUVuY3J5cHRCeVB1YktleShfdGhpcy5wYXNzd29yZC50cmltKCkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgOwoKICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWVyY2hhbnRVc2VyRWRpdCcsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmIChyZXMucmV0dXJuX2NvZGUgPT0gMCkgewogICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgX3RoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55pS26ZO256uv566h55CG6LSm5Y+35oiQ5Yqf77yBJyk7CgogICAgICAgICAgICAgIHZhciBhcmcgPSB7CiAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgICAgICBwYWdlX3NpemU6IDUwCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtZXJjaGFudFVzZXJMaXN0JywgYXJnKTsKCiAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RWRpdE1lcmNoYW50VXNlck1vZGFsJywgZmFsc2UpOwoKICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5lZGl0c3RhZmZNb2RhbC5yZXNldEZpZWxkcygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uU3RhdHVzQ2hhbmdlOiBmdW5jdGlvbiBvblN0YXR1c0NoYW5nZShzdGF0dXMpIHsKICAgICAgY29uc29sZS5sb2coIm9uU3RhdHVzQ2hhbmdlPT09Pj4+IiArIHN0YXR1cyk7CiAgICB9LAogICAgcmVzZXRQd2Q6IGZ1bmN0aW9uIHJlc2V0UHdkKCkgewogICAgICB0aGlzLnB3ZFNob3cgPSAhdGhpcy5wd2RTaG93OwoKICAgICAgaWYgKHRoaXMucHdkU2hvdykgewogICAgICAgIHRoaXMucmVzZXRCdG5OYW1lID0gJ+WPlua2iOmHjee9ruWvhueggSc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZXNldEJ0bk5hbWUgPSAn6YeN572u5a+G56CBJzsKICAgICAgfQogICAgfQogIH0gLy8gd2F0Y2g6ewogIC8vICAgY3VyTWVyY2hhbnRVc2VyKHZhbCl7CiAgLy8gICAgIGlmKHZhbCl7CiAgLy8gICAgICAgdGhpcy5mb3JtLnVzZXJfaWQgPSB0aGlzLmN1ck1lcmNoYW50VXNlci51c2VyX2lkOwogIC8vICAgICAgIHRoaXMuZm9ybS5uYW1lID0gdGhpcy5jdXJNZXJjaGFudFVzZXIubmFtZTsKICAvLyAgICAgICB0aGlzLmZvcm0ucGhvbmUgPSB0aGlzLmN1ck1lcmNoYW50VXNlci5waG9uZTsKICAvLyAgICAgICB0aGlzLmZvcm0udXNlcm5hbWUgPSB0aGlzLmN1ck1lcmNoYW50VXNlci51c2VybmFtZTsKICAvLyAgICAgICB0aGlzLmZvcm0uaXNfZW5hYmxlID0gdGhpcy5jdXJNZXJjaGFudFVzZXIuaXNfZW5hYmxlOwogIC8vICAgICAgIHRoaXMuZm9ybS5zdGF0dXMgPSB0aGlzLmN1ck1lcmNoYW50VXNlci5pc19lbmFibGUgPT0gMT90cnVlOmZhbHNlOwogIC8vICAgICB9CiAgLy8gICB9CiAgLy8gfSwKCn07"},{"version":3,"sources":["editmodal.vue"],"names":[],"mappings":"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","sourcesContent":["<!--  -->\n<template>\n  <Modal \n    class=\"staff_modal\" \n    v-model=\"editstaffModal\"\n    title=\"编辑收银端管理账号\"\n    :footer-hide=\"true\" \n    width=\"850\">\n    <Form class=\"clearfix\" :model=\"curMerchantUser\" ref=\"editstaffModal\" :rules=\"ruleForm\" label-position=\"top\">\n      <FormItem label=\"员工姓名\" prop=\"name\">\n        <Input v-model=\"curMerchantUser.name\" style=\"width: 200px\" placeholder=\"请输入员工姓名\" />\n      </FormItem>\n      <FormItem label=\"手机号\" prop=\"phone\">\n        <Input v-model=\"curMerchantUser.phone\" style=\"width: 200px\" placeholder=\"请输入手机号\" />\n      </FormItem>\n      <FormItem label=\"登录名\">\n        <Input v-model=\"curMerchantUser.username\" :disabled=\"true\" style=\"width: 200px\" placeholder=\"请输入登录名\" />\n      </FormItem>\n      <Button type=\"success\" style=\"width: 200px;\" @click=\"resetPwd()\">{{resetBtnName}}</Button>\n      <FormItem label=\"登录密码\" v-if=\"pwdShow\">\n        <Input v-model=\"password\" style=\"width: 200px\" placeholder=\"请输入登录密码\" />\n      </FormItem>\n      \n      <FormItem label=\"状态\" class=\"line clearfix margin-bottom-30\">\n        <i-switch size=\"large\" v-model=\"status\">\n          <span slot=\"open\">启用</span>\n          <span slot=\"close\">禁用</span>\n        </i-switch>\n      </FormItem>\n      <div class=\"text-center\">\n        <Button type=\"success\" style=\"width: 200px;\" @click=\"editUser()\">确认修改</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nimport _ from 'underscore';\nimport {rsaEncryptByPubKey} from \"@/libs/util\";\nexport default {\n  data () {\n    return {\n      ruleForm: {\n        name: [\n          { required: true, message: '请输入员工姓名', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '请输入手机号', trigger: 'blur' }\n        ],\n      },\n      pwdShow: false,\n      resetBtnName: '重置密码',\n      status: true,\n      password: '',\n    };\n  },\n\n  components: {},\n\n  computed: {\n    curMerchantUser(){\n      let isEnable = this.$store.state.merchant.curMerchantUser.is_enable;\n      this.status = isEnable==1?true:false;\n      return this.$store.state.merchant.curMerchantUser;\n    },\n    editstaffModal:{\n      get(){\n        return this.$store.state.merchant.editMerchantUserModal;\n      },\n      set(val){\n        this.$store.commit('setEditMerchantUserModal', val)\n      }\n    }\n  },\n\n  methods: {\n    editUser(){\n      this.$refs.editstaffModal.validate((valid) => {\n        if (valid) {\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            user_id: this.curMerchantUser.user_id,\n            name: this.curMerchantUser.name,\n            phone: this.curMerchantUser.phone,\n            is_enable: this.status?1:0,\n            zza: 0,\n          }\n\n          if (this.pwdShow){\n            let pwd = this.password.trim();\n            if (pwd.length == 0){\n              alert(\"请输入密码！\");\n            }\n            else{\n              params.password = rsaEncryptByPubKey(this.password.trim());\n            }\n          };\n\n          this.$store.dispatch('merchantUserEdit', params).then(res => {\n            if (res.return_code == 0) {\n              this.btnLoading = false;\n              this.$Message.success('修改收银端管理账号成功！');\n              let arg = {\n                merchant_id: this.$store.state.user.curMerchantId,\n                page: 1,\n                page_size: 50\n              };\n              this.$store.dispatch('merchantUserList', arg);\n              this.$store.commit('setEditMerchantUserModal', false);\n              this.$refs.editstaffModal.resetFields();\n            }\n          }).catch(err=>{\n            console.log(err);\n          });\n        }\n      });\n    },\n    onStatusChange(status){\n      console.log(\"onStatusChange===>>>\" + status);\n    },\n    resetPwd(){\n      this.pwdShow = !this.pwdShow;\n      if (this.pwdShow){\n        this.resetBtnName = '取消重置密码';\n      }\n      else{\n        this.resetBtnName = '重置密码';\n      }\n    }\n  },\n  // watch:{\n  //   curMerchantUser(val){\n  //     if(val){\n  //       this.form.user_id = this.curMerchantUser.user_id;\n  //       this.form.name = this.curMerchantUser.name;\n  //       this.form.phone = this.curMerchantUser.phone;\n  //       this.form.username = this.curMerchantUser.username;\n  //       this.form.is_enable = this.curMerchantUser.is_enable;\n  //       this.form.status = this.curMerchantUser.is_enable == 1?true:false;\n  //     }\n  //   }\n  // },\n}\n\n</script>\n<style lang='less' scoped>\n@import '../style.css';\n</style>"],"sourceRoot":"src/views/businessinfo/restaurant-staff/components"}]}