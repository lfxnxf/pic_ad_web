{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/trade/components/refund-user-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/trade/components/refund-user-modal.vue","mtime":1645002357390},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJyZWZ1bmQtdXNlci1tb2RhbCIsCiAgcHJvcHM6IHsKICAgIGN1cnJlbnQ6IE9iamVjdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJ0bl9sb2FkaW5nOiBmYWxzZSwKICAgICAgcmVtYXJrOiAnJwogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHt9LAogIGNvbXB1dGVkOiB7CiAgICByZWZ1bmRVc2VyTW9kYWw6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLm9yZGVyLnJlZnVuZFVzZXJNb2RhbDsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZWZ1bmRVc2VyTW9kYWwnLCB2YWwpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+ehruiupOaSpOmUgAogICAgb2s6IGZ1bmN0aW9uIG9rKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5idG5fbG9hZGluZyA9IHRydWU7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICByZW1hcms6IHRoaXMucmVtYXJrLAogICAgICAgIG9wZXJhdG9yOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1clVzZXJDb2RlCiAgICAgIH07CgogICAgICBpZiAodGhpcy5jdXJyZW50LnRyYWRlX3R5cGUgPT0gMSkgewogICAgICAgIHBhcmFtc1sndHJhZGVfY29kZSddID0gdGhpcy5jdXJyZW50LnRyYWRlX2NvZGU7CiAgICAgICAgY29uc29sZS5sb2coIuaSpOmUgOaTjeS9nO+8jHBhcmFtcy0tPj4iICsgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JlZnVuZEJhdGNoJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMucmV0dXJuX2NvZGUgPT0gMCkgewogICAgICAgICAgICBfdGhpcy5idG5fbG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygn5pKk6ZSA5oiQ5Yqf77yBJyk7CgogICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZWZ1bmRCYXRjaE1vZGFsJywgZmFsc2UpOwoKICAgICAgICAgICAgX3RoaXMuJHBhcmVudC5xdWVyeSgpOwoKICAgICAgICAgICAgX3RoaXMucmVtYXJrID0gJyc7CiAgICAgICAgICB9CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgX3RoaXMuYnRuX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnQudHJhZGVfdHlwZSA9PSAyKSB7CiAgICAgICAgcGFyYW1zWyd0cmFkZV9pZCddID0gdGhpcy5jdXJyZW50LnRyYWRlX2lkOwogICAgICAgIGNvbnNvbGUubG9nKCLmkqTplIDmk43kvZzvvIxwYXJhbXMtLT4+IiArIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdkZXBvc2l0Q2FuY2VsJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMucmV0dXJuX2NvZGUgPT0gMCkgewogICAgICAgICAgICBfdGhpcy5idG5fbG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygn5pKk6ZSA5oiQ5Yqf77yBJyk7CgogICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZWZ1bmRCYXRjaE1vZGFsJywgZmFsc2UpOwoKICAgICAgICAgICAgX3RoaXMuJHBhcmVudC5xdWVyeSgpOwoKICAgICAgICAgICAgX3RoaXMucmVtYXJrID0gJyc7CgogICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZWZ1bmRVc2VyTW9kYWwnLCBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgX3RoaXMuYnRuX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFJlZnVuZFVzZXJNb2RhbCcsIGZhbHNlKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["refund-user-modal.vue"],"names":[],"mappings":"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","sourcesContent":["<!--  -->\n<template>\n  <Modal v-model=\"refundUserModal\" :title=\"`${current.is_cancel?'':'撤销'}订单：${current.trade_id}`\" :footer-hide=\"true\" width=\"460px\">\n    <Card dis-hover>\n      <p slot=\"title\" class=\"margin-bottom-5\" v-if=\"current.batch_no\">批次号：{{current.batch_no}}</p>\n      <p slot=\"title\">订单号：{{current.trade_id}}</p>\n      <p>姓名： {{current.name}}</p>\n      <p>手机号： {{current.phone}}</p>\n      <p>部门： {{current.department_name}}</p>\n      <p>人员类型： {{current.role_name}}</p>\n      <p>交易类型： {{current.trade_type_desc}}</p>\n      <p>交易金额：{{current.amount}}</p>\n      <p>是否撤销：{{current.is_cancel?'是':'否'}}</p>\n      <p>交易时间：{{current.payment_time}}</p>\n      <p>创建时间：{{current.create_time}}</p>\n    </Card>\n    <Form inline>\n      <FormItem class=\"width-full\" label=\"备注\">\n        <Input v-model=\"remark\" type=\"textarea\" style=\"width: 300px\"/>\n      </FormItem>\n    </Form>\n    <div v-if=\"!(current.is_cancel)\">\n      <div class=\"text-center margin-top-20 font-size16 red-color\">确认撤销<{{ current.trade_type_desc }}>操作吗？</div>\n      <div class=\"text-center margin-top-30 margin-bottom-20\">\n        <Button class=\"margin-right-20\" @click=\"cancel\">取消</Button>\n        <Button type=\"primary\" :loading=\"btn_loading\" @click=\"ok\">{{ btn_loading ? '撤销中' : '确认' }}</Button>\n      </div>\n    </div>\n\n  </Modal>\n</template>\n\n<script>\nexport default {\n  name: \"refund-user-modal\",\n  props: {\n    current: Object\n  },\n  data () {\n    return {\n      btn_loading: false,\n      remark: ''\n    };\n  },\n\n  components: {},\n\n  computed: {\n    refundUserModal: {\n      get() {\n        return this.$store.state.order.refundUserModal;\n      },\n      set(val) {\n        this.$store.commit('setRefundUserModal', val);\n      }\n    },\n  },\n\n  methods: {\n\n    //确认撤销\n    ok(){\n      this.btn_loading = true;\n      let params = {\n        merchant_id: this.$store.state.user.curMerchantId,\n        remark: this.remark,\n        operator: this.$store.state.user.curUserCode\n      };\n      if(this.current.trade_type==1){\n        params['trade_code'] = this.current.trade_code;\n        console.log(\"撤销操作，params-->>\" + JSON.stringify(params))\n        this.$store.dispatch('refundBatch', params).then(res=>{\n          if(res.return_code == 0){\n            this.btn_loading = false;\n            this.$Message.success('撤销成功！');\n            this.$store.commit('setRefundBatchModal', false);\n            this.$parent.query();\n            this.remark = '';\n          }\n        }).catch(err => {\n          this.btn_loading = false;\n        });\n      }else if(this.current.trade_type==2){\n        params['trade_id'] = this.current.trade_id;\n        console.log(\"撤销操作，params-->>\" + JSON.stringify(params))\n        this.$store.dispatch('depositCancel', params).then(res=>{\n          if(res.return_code == 0){\n            this.btn_loading = false;\n            this.$Message.success('撤销成功！');\n            this.$store.commit('setRefundBatchModal', false);\n            this.$parent.query();\n            this.remark = '';\n            this.$store.commit('setRefundUserModal', false);\n          }\n        }).catch(err => {\n          this.btn_loading = false;\n        });\n\n      }\n    },\n    cancel(){\n      this.$store.commit('setRefundUserModal', false)\n    }\n  }\n}\n\n</script>\n<style lang='less' scoped>\n/deep/.ivu-card{\n  .ivu-card-body p{\n    line-height: 2;\n  }\n}\n/deep/.ivu-form{\n  padding: 20px 40px 0;\n  /deep/.ivu-form-item-content{\n    display: inline-block;\n  }\n}\n\n</style>\n"],"sourceRoot":"src/views/trade/components"}]}