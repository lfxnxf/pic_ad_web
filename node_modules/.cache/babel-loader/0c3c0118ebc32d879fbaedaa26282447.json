{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/src/libs/axios.js","dependencies":[{"path":"/Users/zhang/canteen_manage/src/libs/axios.js","mtime":1638355006756},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvemhhbmcvY2FudGVlbl9tYW5hZ2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvemhhbmcvY2FudGVlbl9tYW5hZ2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOyAvLyBpbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CgppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICd2aWV3LWRlc2lnbic7CmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi91dGlsJzsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCBjb25maWcgZnJvbSAnQC9jb25maWcnOwppbXBvcnQgeyBnZXRUb2tlbiwgcmVtb3ZlQ29va2llcyB9IGZyb20gJy4vdXRpbCc7CmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnOyAvLyBjb25zdCB7IGhvbWVOYW1lIH0gPSBjb25maWc7Ci8vIGltcG9ydCB7IFNwaW4gfSBmcm9tICdpdmlldycKLy8gY29uc3QgYWRkRXJyb3JMb2cgPSAoZXJyb3JJbmZvKSA9PiB7Ci8vICAgY29uc29sZS5sb2coJ2F4aW9zLi4uJyk7Ci8vICAgY29uc3QgewovLyAgICAgc3RhdHVzVGV4dCwKLy8gICAgIHN0YXR1cywKLy8gICAgIHJlcXVlc3Q6IHsgcmVzcG9uc2VVUkwgfSwKLy8gICB9ID0gZXJyb3JJbmZvOwovLyAgIGxldCBpbmZvID0gewovLyAgICAgdHlwZTogJ2FqYXgnLAovLyAgICAgY29kZTogc3RhdHVzLAovLyAgICAgbWVzOiBzdGF0dXNUZXh0LAovLyAgICAgdXJsOiByZXNwb25zZVVSTCwKLy8gICB9OwovLyAgIGlmICghcmVzcG9uc2VVUkwuaW5jbHVkZXMoJ3NhdmVfZXJyb3JfbG9nZ2VyJykpIHN0b3JlLmRpc3BhdGNoKCdhZGRFcnJvckxvZycsIGluZm8pOwovLyB9OwoKdmFyIEh0dHBSZXF1ZXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBIdHRwUmVxdWVzdChiYXNlVXJsKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSHR0cFJlcXVlc3QpOwoKICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7CiAgICB0aGlzLnF1ZXVlID0ge307CiAgfQoKICBfY3JlYXRlQ2xhc3MoSHR0cFJlcXVlc3QsIFt7CiAgICBrZXk6ICJnZXRJbnNpZGVDb25maWciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc2lkZUNvbmZpZygpIHsKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBiYXNlVVJMOiB0aGlzLmJhc2VVcmwsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgfQogICAgICB9OwogICAgICByZXR1cm4gY29uZmlnOwogICAgfQogIH0sIHsKICAgIGtleTogImRlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3kodXJsKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlW3VybF07CgogICAgICBpZiAoIU9iamVjdC5rZXlzKHRoaXMucXVldWUpLmxlbmd0aCkgey8vIFNwaW4uaGlkZSgpCiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbnRlcmNlcHRvcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGludGVyY2VwdG9ycyhpbnN0YW5jZSwgdXJsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyDor7fmsYLmi6bmiKoKICAgICAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICBjb25maWcuaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4nXSA9IHV0aWwuZ2V0VG9rZW4oKTsgLy8g5re75Yqg5YWo5bGA55qEbG9hZGluZy4uLgoKICAgICAgICBpZiAoIU9iamVjdC5rZXlzKF90aGlzLnF1ZXVlKS5sZW5ndGgpIHsvLyBTcGluLnNob3coKSAvLyDkuI3lu7rorq7lvIDlkK/vvIzlm6DkuLrnlYzpnaLkuI3lj4vlpb0KICAgICAgICB9CgogICAgICAgIF90aGlzLnF1ZXVlW3VybF0gPSB0cnVlOwogICAgICAgIHJldHVybiBjb25maWc7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICAgIH0pOyAvLyDmt7vliqDlk43lupTmi6bmiKrlmagKCiAgICAgIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBpcyA9IF90aGlzLmRlc3Ryb3kodXJsKTsKCiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKCiAgICAgICAgaWYgKCFpcykgewogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7Ly8gU3Bpbi5oaWRlKCkKICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAtMTEyMDA0IHx8IGRhdGEuY29kZSA9PT0gLTMwMTAwMykgewogICAgICAgICAgTWVzc2FnZS5lcnJvcign5pyq55m75b2V77yM5oiW55m75b2V5aSx5pWI77yM6K+355m75b2VJyk7CiAgICAgICAgICByZW1vdmVDb29raWVzKCk7CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHBhdGguam9pbihwcm9jZXNzLmVudi5CQVNFX1VSTCwgJ2xvZ2luJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyb3IpKTsKICAgICAgICBpZiAoZXJyb3JbJ2NvZGUnXSA9PT0gJ0VDT05OQUJPUlRFRCcgfHwgIWVycm9yLmhhc093blByb3BlcnR5KCdyZXNwb25zZScpKSB7CiAgICAgICAgICBNZXNzYWdlLmVycm9yKCfmnI3liqHlmajov57mjqXplJnor6/vvIzor7fmo4Dmn6XnvZHnu5zmmK/lkKblj6/nlKgnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIHJlcyA9IGVycm9yWydyZXNwb25zZSddOwoKICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmhhc093blByb3BlcnR5KCdzdGF0dXMnKSAmJiByZXMuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgdmFyIFRPS0VOX0tFWSA9IHV0aWwuZ2V0VG9rZW4oKTsKICAgICAgICAgICAgQ29va2llcy5yZW1vdmUoVE9LRU5fS0VZKTsKCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5tc2cpIHsKICAgICAgICAgICAgICBNZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRoLmpvaW4ocHJvY2Vzcy5lbnYuQkFTRV9VUkwsICdsb2dpbicpOwogICAgICAgICAgICAgIE1lc3NhZ2UuZXJyb3IoJ+acqueZu+W9le+8jOaIlueZu+W9leWkseaViO+8jOivt+eZu+W9lScpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBNZXNzYWdlLmVycm9yKHJlcyAmJiByZXMuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSAmJiByZXMuZGF0YVsnbXNnJ10gPyByZXMuZGF0YVsnbXNnJ10gOiAn5pyN5Yqh5YaF6YOo6ZSZ6K+vJyk7CiAgICAgICAgICB9IC8vIOWvueWTjeW6lOmUmeivr+WBmueCueS7gOS5iAoKCiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICAgIH0KICAgICAgfSk7IC8vIOWTjeW6lOaLpuaIqgogICAgICAvLyBpbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlcyA9PiB7CiAgICAgIC8vICAgdGhpcy5kZXN0cm95KHVybCkKICAgICAgLy8gICBjb25zdCB7IGRhdGEsIHN0YXR1cyB9ID0gcmVzCiAgICAgIC8vICAgcmV0dXJuIHsgZGF0YSwgc3RhdHVzIH0KICAgICAgLy8gfSwgZXJyb3IgPT4gewogICAgICAvLyAgIHRoaXMuZGVzdHJveSh1cmwpCiAgICAgIC8vICAgY29uc29sZS5sb2coJ3Jlc0ludGVyY2VwdG9ycy4uLi4nKQogICAgICAvLyAgIGFkZEVycm9yTG9nKGVycm9yLnJlc3BvbnNlKQogICAgICAvLyAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcikKICAgICAgLy8gfSkKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0KG9wdGlvbnMpIHsKICAgICAgYXhpb3MuZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAgYXhpb3MuZGVmYXVsdHMuY3Jvc3NEb21haW4gPSB0cnVlOwogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7CiAgICAgIHZhciBpbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgICAgICAgdGltZW91dDogNjAwMDAwCiAgICAgIH0pOwogICAgICB2YXIgc2Vzc2lvbmlkID0gZ2V0VG9rZW4oKTsKCiAgICAgIHN3aXRjaCAob3B0aW9ucy5tZXRob2QudG9VcHBlckNhc2UoKSkgewogICAgICAgIGNhc2UgJ1BPU1QnOgogICAgICAgICAgaWYgKHNlc3Npb25pZCkgewogICAgICAgICAgICBpZiAoIV8uaGFzKG9wdGlvbnMsICdkYXRhJykgfHwgXy5pc0VtcHR5KG9wdGlvbnMuZGF0YSkgfHwgIW9wdGlvbnMuZGF0YSkgewogICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHsKICAgICAgICAgICAgICAgIHNlc3Npb25pZDogc2Vzc2lvbmlkCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuc2Vzc2lvbmlkID0gc2Vzc2lvbmlkOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ0dFVCc6CiAgICAgICAgICBpZiAoc2Vzc2lvbmlkKSB7CiAgICAgICAgICAgIGlmICghXy5oYXMob3B0aW9ucywgJ3BhcmFtcycpIHx8IF8uaXNFbXB0eShvcHRpb25zLnBhcmFtcykgfHwgIW9wdGlvbnMucGFyYW1zKSB7CiAgICAgICAgICAgICAgb3B0aW9ucy5wYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBzZXNzaW9uaWQ6IHNlc3Npb25pZAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gb3B0aW9ucy5wYXJhbXMgPSB7fTsKICAgICAgICAgICAgICBvcHRpb25zLnBhcmFtcy5zZXNzaW9uaWQgPSBzZXNzaW9uaWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIC8vIHN0YXRlbWVudHNfZGVmCiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgb3B0aW9ucy5zZXNzaW9uaWQgPSBzZXNzaW9uaWQ7CiAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuZ2V0SW5zaWRlQ29uZmlnKCksIG9wdGlvbnMpOwogICAgICB0aGlzLmludGVyY2VwdG9ycyhpbnN0YW5jZSwgb3B0aW9ucy51cmwpOwogICAgICByZXR1cm4gaW5zdGFuY2Uob3B0aW9ucyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSHR0cFJlcXVlc3Q7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IEh0dHBSZXF1ZXN0Ow=="},{"version":3,"sources":["/Users/zhang/canteen_manage/src/libs/axios.js"],"names":["axios","Vue","Message","util","Cookies","path","config","getToken","removeCookies","_","HttpRequest","baseUrl","queue","baseURL","headers","url","Object","keys","length","instance","interceptors","request","use","error","Promise","reject","response","res","is","destroy","data","setTimeout","code","window","location","href","join","process","env","BASE_URL","hasOwnProperty","status","TOKEN_KEY","remove","msg","options","defaults","withCredentials","crossDomain","post","create","timeout","sessionid","method","toUpperCase","has","isEmpty","params","assign","getInsideConfig"],"mappings":"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","sourcesContent":["import axios from 'axios';\n// import store from '@/store';\nimport Vue from 'vue';\nimport { Message } from 'view-design';\nimport * as util from './util';\nimport Cookies from 'js-cookie';\nimport path from 'path';\nimport config from '@/config';\nimport { getToken, removeCookies } from './util';\nimport _ from 'underscore';\n\n// const { homeName } = config;\n// import { Spin } from 'iview'\n// const addErrorLog = (errorInfo) => {\n//   console.log('axios...');\n//   const {\n//     statusText,\n//     status,\n//     request: { responseURL },\n//   } = errorInfo;\n//   let info = {\n//     type: 'ajax',\n//     code: status,\n//     mes: statusText,\n//     url: responseURL,\n//   };\n//   if (!responseURL.includes('save_error_logger')) store.dispatch('addErrorLog', info);\n// };\n\n\nclass HttpRequest {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl;\n    this.queue = {};\n  }\n  getInsideConfig() {\n    const config = {\n      baseURL: this.baseUrl,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n    };\n    return config;\n  }\n  destroy(url) {\n    delete this.queue[url];\n    if (!Object.keys(this.queue).length) {\n      // Spin.hide()\n    }\n  }\n  interceptors(instance, url) {\n    // 请求拦截\n    instance.interceptors.request.use(\n      (config) => {\n        config.headers['x-access-token'] = util.getToken();\n        // 添加全局的loading...\n        if (!Object.keys(this.queue).length) {\n          // Spin.show() // 不建议开启，因为界面不友好\n        }\n        this.queue[url] = true;\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      },\n    );\n\n    // 添加响应拦截器\n    instance.interceptors.response.use(\n      (res) => {\n        const is = this.destroy(url);\n        const { data } = res;\n        if (!is) {\n          setTimeout(() => {\n            // Spin.hide()\n          }, 500);\n        }\n        if (data.code === -112004 || data.code === -301003) {\n          Message.error('未登录，或登录失效，请登录');\n          removeCookies();\n          window.location.href = path.join(process.env.BASE_URL, 'login');\n        }\n        return data;\n      },\n      (error) => {\n        // console.log(JSON.stringify(error));\n        if (error['code'] === 'ECONNABORTED' || !error.hasOwnProperty('response')) {\n          Message.error('服务器连接错误，请检查网络是否可用');\n        } else {\n          let res = error['response'];\n          if (res && res.hasOwnProperty('status') && res.status === 401) {\n            let TOKEN_KEY = util.getToken();\n            Cookies.remove(TOKEN_KEY);\n            if (res.data.msg) {\n              Message.error(res.data.msg);\n            } else {\n              window.location.href = path.join(process.env.BASE_URL, 'login');\n              Message.error('未登录，或登录失效，请登录');\n            }\n          } else {\n            Message.error(\n              res && res.hasOwnProperty('data') && res.data['msg'] ?\n              res.data['msg'] :\n              '服务内部错误',\n            );\n          }\n          // 对响应错误做点什么\n          return Promise.reject(error);\n        }\n      },\n    );\n    // 响应拦截\n    // instance.interceptors.response.use(res => {\n    //   this.destroy(url)\n    //   const { data, status } = res\n    //   return { data, status }\n    // }, error => {\n    //   this.destroy(url)\n    //   console.log('resInterceptors....')\n    //   addErrorLog(error.response)\n    //   return Promise.reject(error)\n    // })\n  }\n  request(options) {\n    axios.defaults.withCredentials=true;\n    axios.defaults.crossDomain=true;\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n    const instance = axios.create({\n      timeout: 600000,\n    });\n    let sessionid = getToken();\n    switch (options.method.toUpperCase()) {\n      case 'POST':\n        if (sessionid) {\n          if (!_.has(options, 'data') || _.isEmpty(options.data) || !options.data) {\n            options.data = {\n              sessionid: sessionid\n            }\n          } else {\n            options.data.sessionid = sessionid;\n          }\n        }\n        break;\n      case 'GET':\n        if (sessionid) {\n          if (!_.has(options, 'params') || _.isEmpty(options.params) || !options.params) {\n            options.params = {\n              sessionid: sessionid\n            }\n          } else {\n            // options.params = {};\n            options.params.sessionid = sessionid;\n          }\n        }\n        break;\n      default:\n        // statements_def\n        break;\n    }\n    options.sessionid = sessionid;\n    options = Object.assign(this.getInsideConfig(), options);\n    this.interceptors(instance, options.url);\n    return instance(options);\n  }\n}\nexport default HttpRequest;\n"]}]}