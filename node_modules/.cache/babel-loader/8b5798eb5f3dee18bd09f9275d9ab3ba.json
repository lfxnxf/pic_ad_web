{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/staff-management/dining-staff/components/batch-deposit-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/staff-management/dining-staff/components/batch-deposit-modal.vue","mtime":1645413908886},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBfIGZyb20gInVuZGVyc2NvcmUiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudC10aW1lem9uZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBIZWFkZXJzOiB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnCiAgICAgIH0sCiAgICAgIHVwRmlsZU5hbWU6ICcnLAogICAgICB1cEZpbGVTdGF0dXM6ICcnLAogICAgICBmb3JtOiB7CiAgICAgICAgcmVtYXJrOiAnJwogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHt9LAogIGNvbXB1dGVkOiB7CiAgICBiYXRjaERlcG9zaXRNb2RhbDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5iYXRjaERlcG9zaXRNb2RhbDsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRCYXRjaERlcG9zaXRNb2RhbCcsIHZhbCk7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RlZFVzZXJMaXN0OiBmdW5jdGlvbiBzZWxlY3RlZFVzZXJMaXN0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5zZWxlY3RlZFVzZXJMaXN0OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8gLy/lhYXlgLzph5Hpop1pbnB1dAogICAgLy8gdmVyaWZ5RGViaXQoZSl7CiAgICAvLyAgIHRoaXMuZm9ybS5hbW91bnQgPSBlOwogICAgLy8gICAvL+WPquiDvei+k+WFpeS4pOS4quWwj+aVsAogICAgLy8gICB0aGlzLmZvcm0uYW1vdW50ID0gdGhpcy5mb3JtLmFtb3VudC5yZXBsYWNlKC9eKCkqKFxkKylcLihcZFxkKS4qJC8sICIkMSQyLiQzIik7CiAgICAvLyB9LAogICAgLy8KICAgIC8vIC8vbW9uZXlGb3JtYXTlh73mlbAKICAgIC8vIG1vbmV5Rm9ybWF0KHZhbCl7CiAgICAvLyAgIGxldCByZWcgPSAvKF5bMS05XShbMC05XSspPyhcLlswLTldezEsMn0pPyQpfCheKDApezF9JCl8KF5bMC05XVwuWzAtOV0oWzAtOV0pPyQpLzsKICAgIC8vICAgaWYodmFsKXsKICAgIC8vICAgICBpZihyZWcudGVzdCh2YWwpKXsKICAgIC8vICAgICAgIHJldHVybiB2YWw7CiAgICAvLyAgICAgfWVsc2UgewogICAgLy8gICAgICAgdmFsID0gdmFsLnJlcGxhY2UoL14oKSooXGQrKVwuKFxkXGQpLiokLywgIiQxJDIuJDMiKTsKICAgIC8vICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+i+k+WFpeato+ehrumHkeminScpOwogICAgLy8gICAgICAgcmV0dXJuIHZhbDsKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICBoYW5kbGVEZXBvc2l0OiBmdW5jdGlvbiBoYW5kbGVEZXBvc2l0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLnVwRmlsZU5hbWUubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHsKICAgICAgICAgIGNvbnRlbnQ6ICfor7flhYjkuIrkvKDmibnlpITnkIbmlofku7bvvIEnLAogICAgICAgICAgZHVyYXRpb246IDgsCiAgICAgICAgICBjbG9zYWJsZTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBiYXRjaF90eXBlOiAxLAogICAgICAgIG9wZXJhdG9yOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1clVzZXJDb2RlLAogICAgICAgIHVybDogdGhpcy51cEZpbGVOYW1lLAogICAgICAgIG1lcmNoYW50X2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50SWQsCiAgICAgICAgcmVtYXJrOiB0aGlzLmZvcm0ucmVtYXJrCiAgICAgIH07CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdiYXRjaERlcG9zaXRVc2VyJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnJldHVybl9jb2RlID09IDApIHsKICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRCYXRjaERlcG9zaXRNb2RhbCcsIGZhbHNlKTsKCiAgICAgICAgICBfdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICAgICAgY29udGVudDogJ+WFheWAvOS7u+WKoeaPkOS6pOWQjuWPsOaIkOWKnyHor7fnqI3lkI7liLA85Lqk5piT6K6w5b2VPuS4reafpeeci+S6pOaYk+aYr+WQpuaIkOWKn++8gScsCiAgICAgICAgICAgIGR1cmF0aW9uOiA4LAogICAgICAgICAgICBjbG9zYWJsZTogdHJ1ZQogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMudXBGaWxlTmFtZSA9ICcnOwogICAgICAgICAgX3RoaXMudXBGaWxlU3RhdHVzID0gJyc7CgogICAgICAgICAgX3RoaXMuJHJlZnMudXBsb2FkQnV0dG9uLmNsZWFyRmlsZXMoKTsKCiAgICAgICAgICBfdGhpcy4kZW1pdCgnc2VsZWN0aW9uJywgTWF0aC5yYW5kb20oKSAqIDgwICsgMTAsICcnKTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpcy51cEZpbGVOYW1lID0gJyc7CiAgICAgICAgX3RoaXMudXBGaWxlU3RhdHVzID0gJyc7CgogICAgICAgIF90aGlzLiRyZWZzLnVwbG9hZEJ1dHRvbi5jbGVhckZpbGVzKCk7CgogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7IC8vIHRoaXMuJHJlZnMuYmF0Y2hEZXBvc2l0Rm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgLy8gICBpZiAodmFsaWQpIHsKICAgICAgLy8gICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIC8vICAgICBsZXQgdXNlcmNvZGVfZGF0YSA9IF8ucGx1Y2sodGhpcy5zZWxlY3RlZFVzZXJMaXN0LCAndXNlcmNvZGUnKTsKICAgICAgLy8gICAgIHVzZXJjb2RlX2RhdGEgPSB1c2VyY29kZV9kYXRhLnRvU3RyaW5nKCkKICAgICAgLy8KICAgICAgLy8gICAgIGxldCBwYXJhbXMgPSB7CiAgICAgIC8vICAgICAgIG1lcmNoYW50X2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50SWQsCiAgICAgIC8vICAgICAgIC8vIGFtb3VudDogcGFyc2VGbG9hdCh0aGlzLmZvcm0uYW1vdW50KS50b0ZpeGVkKDIpLnRvU3RyaW5nKCkucmVwbGFjZSgvXi0/XGQrL2csIG0gPT4gbS5yZXBsYWNlKC8oPz0oPyFcYikoXGR7M30pKyQpL2csICIsIikpLAogICAgICAvLyAgICAgICBhbW91bnQ6IHRoaXMuZm9ybS5hbW91bnQsCiAgICAgIC8vICAgICAgIHJlbWFyazogdGhpcy5mb3JtLnJlbWFyaywKICAgICAgLy8gICAgICAgdXNlcmNvZGU6IHVzZXJjb2RlX2RhdGEsCiAgICAgIC8vICAgICAgIG9wZXJhdG9yOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1clVzZXJDb2RlLAogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJEZXBvc2l0JywgcGFyYW1zKS50aGVuKHJlcz0+ewogICAgICAvLyAgICAgICBpZihyZXMucmV0dXJuX2NvZGUgPT0gMCl7CiAgICAgIC8vICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIC8vICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRCYXRjaERlcG9zaXRNb2RhbCcsIGZhbHNlKTsKICAgICAgLy8gICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoewogICAgICAvLyAgICAgICAgICAgY29udGVudDogJ+WFheWAvOS7u+WKoeaPkOS6pOWQjuWPsOaIkOWKn++8jOivt+eojeWQjuWcqOS6pOaYk+WIl+ihqOS4reafpeeci+WFheWAvOe7k+aenO+8gScsCiAgICAgIC8vICAgICAgICAgICBkdXJhdGlvbjogOCwKICAgICAgLy8gICAgICAgICAgIGNsb3NhYmxlOiB0cnVlCiAgICAgIC8vICAgICAgICAgfSk7CiAgICAgIC8vICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbicsIE1hdGgucmFuZG9tKCkqODArMTAsIHBhcmFtcy51c2VyY29kZSk7CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgIC8vICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAvLyAgICAgfSk7CiAgICAgIC8vCiAgICAgIC8vICAgfQogICAgICAvLyB9KTsKICAgIH0sCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICBpZiAocmVzLnJldHVybl9jb2RlID09IDApIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaWh+S7tuS4iuS8oOaIkOWKn++8gSIpOwogICAgICAgIGNvbnNvbGUubG9nKCJoYW5kbGVVcGxvYWRTdWNjZXNzLS0tcmVzPj4+IiArIHJlcy5kYXRhLm5hbWUpOwogICAgICAgIGNvbnNvbGUubG9nKCJoYW5kbGVVcGxvYWRTdWNjZXNzLS0tZmlsZT4+PiIgKyBKU09OLnN0cmluZ2lmeShmaWxlKSk7CiAgICAgICAgdGhpcy51cEZpbGVOYW1lID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9ET1dOTE9BRF9GSUxFX1VSTCArICcvJyArIHJlcy5kYXRhLm5hbWU7CiAgICAgICAgY29uc29sZS5sb2coImhhbmRsZVVwbG9hZFN1Y2Nlc3MtLS11cEZpbGVOYW1lPj4+IiArIHRoaXMudXBGaWxlTmFtZSk7CiAgICAgICAgdGhpcy51cEZpbGVTdGF0dXMgPSAi5paH5Lu25LiK5Lyg5oiQ5Yqf77yBIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5yZXR1cm5fbWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVGb3JtYXRFcnJvcjogZnVuY3Rpb24gaGFuZGxlRm9ybWF0RXJyb3IoZmlsZSkgewogICAgICB0aGlzLiROb3RpY2Uud2FybmluZyh7CiAgICAgICAgdGl0bGU6ICfmlofku7bmoLzlvI/kuI3mraPnoa4nLAogICAgICAgIGRlc2M6ICfmlofku7YgJyArIGZpbGUubmFtZSArICcg5qC85byP5LiN5q2j56Gu77yM6K+35LiK5LygLnhscywueGxzeOaWh+S7tuOAgicKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yLCBmaWxlKSB7CiAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIuaVsOaNruWvvOWFpeWksei0pe+8gSIpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGJhdGNoRGVwb3NpdE1vZGFsOiBmdW5jdGlvbiBiYXRjaERlcG9zaXRNb2RhbCh2YWwpIHsKICAgICAgaWYgKCF2YWwpIHsKICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICByZW1hcms6ICcnCiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["batch-deposit-modal.vue"],"names":[],"mappings":"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","sourcesContent":["<!--  -->\n<template>\n  <Modal v-model=\"batchDepositModal\" title=\"批量充值\" width=\"600px\" :footer-hide=\"true\">\n    <Form class=\"padding-left-20 padding-right-20\" ref=\"batchDepositForm\" :model=\"form\" :label-width=\"80\">\n      <FormItem label=\"交易备注\" >\n        <Input type=\"text\" v-model=\"form.remark\" maxlength=\"50\" placeholder=\"请输入备注（50字以内）\" />\n      </FormItem>\n      <FormItem label=\"上传充值文件\">\n        <Upload\n          ref=\"uploadButton\"\n          :on-success=\"handleUploadSuccess\"\n          :on-format-error=\"handleFormatError\"\n          :on-error=\"handleError\"\n          :format =\"['xlsx','xls']\"\n          type=\"drag\"\n          style=\"width:85%\"\n          action=\"/xdiningUpload\">\n          <div style=\"padding: 20px 0\">\n            <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\n            <p>点击或将文件拖拽到这里</p>\n          </div>\n        </Upload>\n\n        <p>{{upFileStatus}}</p>\n      </FormItem>\n\n      <div class=\"margin-bottom-20 text-center margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setBatchDepositModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"loading\" @click=\"handleDeposit\">确认充值</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nimport _ from \"underscore\";\nimport moment from \"moment-timezone\";\nexport default {\n  data() {\n    return {\n      upHeaders: {\n        'Content-Type': 'application/vnd.ms-excel',\n      },\n      upFileName: '',\n      upFileStatus: '',\n      form: {\n        remark: ''\n      },\n      loading: false,\n\n    };\n  },\n\n  components: {},\n\n  computed: {\n    batchDepositModal: {\n      get() {\n        return this.$store.state.user.batchDepositModal;\n      },\n      set(val) {\n        this.$store.commit('setBatchDepositModal', val);\n      }\n    },\n    selectedUserList() {\n      return this.$store.state.user.selectedUserList;\n    }\n\n  },\n\n  methods: {\n    // //充值金额input\n    // verifyDebit(e){\n    //   this.form.amount = e;\n    //   //只能输入两个小数\n    //   this.form.amount = this.form.amount.replace(/^()*(\\d+)\\.(\\d\\d).*$/, \"$1$2.$3\");\n    // },\n    //\n    // //moneyFormat函数\n    // moneyFormat(val){\n    //   let reg = /(^[1-9]([0-9]+)?(\\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\\.[0-9]([0-9])?$)/;\n    //   if(val){\n    //     if(reg.test(val)){\n    //       return val;\n    //     }else {\n    //       val = val.replace(/^()*(\\d+)\\.(\\d\\d).*$/, \"$1$2.$3\");\n    //       this.$Message.error('请输入正确金额');\n    //       return val;\n    //     }\n    //   }\n    // },\n    handleDeposit() {\n      this.loading = true;\n      if (this.upFileName.length == 0) {\n        this.$Message.error({\n          content: '请先上传批处理文件！',\n          duration: 8,\n          closable: true\n        });\n        this.loading = false;\n        return;\n      }\n\n      let params = {\n        batch_type: 1,\n        operator: this.$store.state.user.curUserCode,\n        url: this.upFileName,\n        merchant_id: this.$store.state.user.curMerchantId,\n        remark: this.form.remark,\n      };\n\n      this.$store.dispatch('batchDepositUser', params).then(res => {\n        if (res.return_code == 0) {\n          this.loading = false;\n          this.$store.commit('setBatchDepositModal', false);\n          this.$Message.success({\n            content: '充值任务提交后台成功!请稍后到<交易记录>中查看交易是否成功！',\n            duration: 8,\n            closable: true\n          });\n          this.upFileName = '';\n          this.upFileStatus = '';\n          this.$refs.uploadButton.clearFiles();\n          this.$emit('selection', Math.random()*80+10, '');\n        }\n      }).catch(err => {\n        this.upFileName = '';\n        this.upFileStatus = '';\n        this.$refs.uploadButton.clearFiles();\n        this.loading = false;\n      });\n\n      // this.$refs.batchDepositForm.validate((valid) => {\n      //   if (valid) {\n      //     this.loading = true;\n      //     let usercode_data = _.pluck(this.selectedUserList, 'usercode');\n      //     usercode_data = usercode_data.toString()\n      //\n      //     let params = {\n      //       merchant_id: this.$store.state.user.curMerchantId,\n      //       // amount: parseFloat(this.form.amount).toFixed(2).toString().replace(/^-?\\d+/g, m => m.replace(/(?=(?!\\b)(\\d{3})+$)/g, \",\")),\n      //       amount: this.form.amount,\n      //       remark: this.form.remark,\n      //       usercode: usercode_data,\n      //       operator: this.$store.state.user.curUserCode,\n      //     }\n      //     this.$store.dispatch('userDeposit', params).then(res=>{\n      //       if(res.return_code == 0){\n      //         this.loading = false;\n      //         this.$store.commit('setBatchDepositModal', false);\n      //         this.$Message.success({\n      //           content: '充值任务提交后台成功，请稍后在交易列表中查看充值结果！',\n      //           duration: 8,\n      //           closable: true\n      //         });\n      //       this.$emit('selection', Math.random()*80+10, params.usercode);\n      //       }\n      //     }).catch(err => {\n      //       this.loading = false;\n      //     });\n      //\n      //   }\n      // });\n\n    },\n\n    handleUploadSuccess(res, file) {\n      if (res.return_code == 0) {\n        this.$Message.success(\"文件上传成功！\");\n        console.log(\"handleUploadSuccess---res>>>\" + res.data.name);\n        console.log(\"handleUploadSuccess---file>>>\" + JSON.stringify(file));\n        this.upFileName = process.env.VUE_APP_DOWNLOAD_FILE_URL + '/' + res.data.name;\n        console.log(\"handleUploadSuccess---upFileName>>>\" + this.upFileName);\n        this.upFileStatus = \"文件上传成功！\";\n      } else {\n        this.$Message.error(res.return_message);\n      }\n    },\n\n    handleFormatError(file) {\n      this.$Notice.warning({\n        title: '文件格式不正确',\n        desc: '文件 ' + file.name + ' 格式不正确，请上传.xls,.xlsx文件。'\n      });\n    },\n\n    handleError(error, file) {\n      this.$Message.error(\"数据导入失败！\");\n    },\n  },\n\n  watch:{\n    batchDepositModal(val){\n      if(!val){\n        this.form = {\n          remark: ''\n        };\n\n      }\n    }\n  }\n}\n\n</script>\n<style lang='less' scoped>\n</style>\n"],"sourceRoot":"src/views/staff-management/dining-staff/components"}]}