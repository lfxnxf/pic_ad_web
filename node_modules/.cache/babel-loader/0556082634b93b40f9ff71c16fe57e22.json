{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js!/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/setting/food-management/components/add-food-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/setting/food-management/components/add-food-modal.vue","mtime":1640591318657},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL1x1NURFNVx1NEY1Qy9waWNfYWQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0VkaXQ6IGZhbHNlLAogICAgICBmb29kU3RhdHVzOiB0cnVlLAogICAgICB1cGxvYWRUeXBlOiBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaXQnXSwKICAgICAgcHJvZ3Jlc3M6IGZhbHNlLAogICAgICB1cGxvYWRVcmw6IHJlcXVpcmUoJ0Bhc3NldHMvaW1hZ2VzL2N1cC5wbmcnKSwKICAgICAgdXBsb2FkVGl0bGU6IHRydWUsCiAgICAgIHVwRmlsZU5hbWU6ICcnLAogICAgICB1cEZpbGVTdGF0dXM6ICcnLAogICAgICBmb3JtOiB7CiAgICAgICAgZm9vZF9uYW1lOiAnJywKICAgICAgICBkZXNjOiAnJywKICAgICAgICB0aW1lX3R5cGU6ICcnLAogICAgICAgIHByaWNlOiAnJywKICAgICAgICBpbWc6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBjb21wdXRlZDogewogICAgYWRkTW9kYWw6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmZvb2QuYWRkRm9vZE1vZGFsOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEFkZEZvb2RNb2RhbCcsIHZhbCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG1vZGlmeUZvb2Q6IGZ1bmN0aW9uIG1vZGlmeUZvb2QoKSB7CiAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTsKICAgIH0sCiAgICB1cGxvYWRQcm9ncmVzczogZnVuY3Rpb24gdXBsb2FkUHJvZ3Jlc3MoZXZlbnQsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0cnVlOwoKICAgICAgaWYgKGZpbGVMaXN0Lmxlbmd0aCA+IDEpIHsKICAgICAgICBmaWxlTGlzdCA9IGZpbGVMaXN0LnNwbGljZSgwLCAxKTsKICAgICAgfQogICAgfSwKICAgIHVwbG9hZFN1Y2Nlc3M6IGZ1bmN0aW9uIHVwbG9hZFN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuZm9ybS5pbWcgPSByZXNwb25zZS51cmw7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSBmYWxzZTsKICAgICAgdGhpcy51cGxvYWRUaXRsZSA9IGZhbHNlOwogICAgfSwKICAgIHVwbG9hZEVycm9yOiBmdW5jdGlvbiB1cGxvYWRFcnJvcihlcnJvciwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2coInVwbG9hZGVycm9yPT09Pj4+IiArIEpTT04uc3RyaW5naWZ5KGVycm9yKSk7CiAgICAgIGNvbnNvbGUubG9nKCJ1cGxvYWRlcnJvcj09PWZpbGU+Pj4iICsgSlNPTi5zdHJpbmdpZnkoZmlsZSkpOwogICAgfSwKICAgIGhhbmRsZUZvcm1hdEVycm9yOiBmdW5jdGlvbiBoYW5kbGVGb3JtYXRFcnJvcihmaWxlKSB7CiAgICAgIHRoaXMuJE5vdGljZS53YXJuaW5nKHsKICAgICAgICB0aXRsZTogJ+aWh+S7tuagvOW8j+S4jeato+ehricsCiAgICAgICAgZGVzYzogJ+aWh+S7tiAnICsgZmlsZS5uYW1lICsgJyDmoLzlvI/kuI3mraPnoa7vvIzor7fkuIrkvKBKUEfvvIxKUEVH77yMUE5H77yMR0lU5paH5Lu244CCJwogICAgICB9KTsKICAgIH0sCiAgICBleGNlZWRlZFNpemU6IGZ1bmN0aW9uIGV4Y2VlZGVkU2l6ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7fkuIrkvKDkuI3otoXov4c1TULnmoTlm77niYcnKTsKICAgIH0sCiAgICBoYW5kbGVTYXZlOiBmdW5jdGlvbiBoYW5kbGVTYXZlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gdGhpcy5mb3JtLnByaWNlID0gcGFyc2VGbG9hdCh0aGlzLmZvcm0ucHJpY2UpLnRvRml4ZWQoMikudG9TdHJpbmcoKS5yZXBsYWNlKC9eLT9cZCsvZywgbSA9PiBtLnJlcGxhY2UoLyg/PSg/IVxiKShcZHszfSkrJCkvZywgIiwiKSkKICAgICAgdmFyIHBhcmFtcyA9IF9vYmplY3RTcHJlYWQoewogICAgICAgIG1lcmNoYW50X2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50SWQKICAgICAgfSwgdGhpcy5mb3JtKTsKCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdmb29kQWRkJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnJldHVybl9jb2RlID09IDApIHsKICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOaIkOWKn++8gScpOwoKICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldEFkZEZvb2RNb2RhbCcsIGZhbHNlKTsKCiAgICAgICAgICB2YXIgYXJnID0gewogICAgICAgICAgICBtZXJjaGFudF9pZDogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgcGFnZV9zaXplOiA1MAogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2Zvb2RMaXN0JywgYXJnKTsKCiAgICAgICAgICBfdGhpcy5mb3JtID0ge307CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["add-food-modal.vue"],"names":[],"mappings":"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","sourcesContent":["<!--  -->\n<template>\n  <Modal class=\"detailsModal addModal\" v-model=\"addModal\" width=\"820px\" :footer-hide=\"true\" :closable=\"false\">\n    <div>\n      <div>\n        <div class=\"gray-bg text-center modal-title\">添加菜品</div>\n        <Row>\n          <Col span=\"17\" class=\"border border-top-0 \">\n            <Row class=\"list\">\n              <Col span=\"5\">\n                <span>菜品名称</span>\n              </Col>\n              <Col span=\"19\">\n                <Input v-model=\"form.food_name\" placeholder=\"输入菜品名称\"/>\n              </Col>\n\n              <Col span=\"5\">\n                <span>描述</span>\n              </Col>\n              <Col span=\"19\">\n                <Input v-model=\"form.desc\" type=\"textarea\" :rows=\"3\" placeholder=\"输入菜品描述\" />\n              </Col>\n\n<!--              <Col span=\"5\" class=\"border-l\">-->\n<!--                <span>菜品类型</span>-->\n<!--              </Col>-->\n<!--              <Col span=\"7\">-->\n<!--                <Select v-model=\"form.time_type\" placeholder=\"选择菜品类型\">-->\n<!--                  <Option value=\"breakfast\">早餐</Option>-->\n<!--                  <Option value=\"nooning\">午餐</Option>-->\n<!--                  <Option value=\"dinner\">晚餐</Option>-->\n<!--                </Select>-->\n<!--              </Col>-->\n\n<!--              <Col span=\"5\">-->\n<!--                <span>售价</span>-->\n<!--              </Col>-->\n<!--              <Col span=\"7\">-->\n<!--                <Input v-model=\"form.price\" type=\"number\" placeholder=\"输入菜品售价\"/>-->\n<!--              </Col>-->\n\n\n<!--              <Col span=\"5\" class=\"border-l\">-->\n<!--                <span>备注</span>-->\n<!--              </Col>-->\n<!--              <Col span=\"19\">-->\n<!--                <Input v-model=\"form.remark\" placeholder=\"输入菜品备注\"/>-->\n<!--              </Col>-->\n            </Row>\n          </Col>\n          <Col span=\"7\" >\n            <div class=\"upload_wrapper\">\n              <Upload\n                :class=\"progress?'opcity':''\"\n                type=\"drag\"\n                :paste=\"true\"\n                :format=\"uploadType\"\n                :max-size=\"5120\"\n                :on-progress=\"uploadProgress\"\n                :on-success='uploadSuccess'\n                :on-error='uploadError'\n                :on-exceeded-size=\"exceededSize\"\n                name='file'\n                action=\"/upload\">\n                  <div class=\"upload-container\">\n                    <div class=\"bg\">\n                      <p class=\"cursor\">+</p>\n                      <img class=\"upload-img width-full\" v-show=\"!progress\" :src=\"form.img\" alt=\"\">\n                      <div class=\"mark\"></div>\n                      <p v-show=\"uploadTitle\" class=\"star text-center\">\n                        点击添加菜品图片\n                      </p>\n                    </div>\n                  </div>\n              </Upload>\n              <p class=\"req\">大小不超过5MB，推荐尺寸[212*212]<br/>格式支持JPG，JPEG，PNG，GIT</p>\n            </div>\n          </Col>\n        </Row>\n\n        <div class=\"gray-bg border-top-0 text-center\">\n          <Button class=\"margin-right-10\" @click=\"$store.commit('setAddFoodModal', false)\">取消</Button>\n          <Button type=\"primary\" icon=\"md-checkmark\" @click=\"handleSave\">确认</Button>\n        </div>\n      </div>\n    </div>\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isEdit: false,\n      foodStatus: true,\n      uploadType: ['jpg','jpeg','png','git'],\n      progress: false,\n      uploadUrl: require('@assets/images/cup.png'),\n      uploadTitle: true,\n      upFileName: '',\n      upFileStatus: '',\n      form: {\n        food_name: '',\n        desc: '',\n        time_type: '',\n        price: '',\n        img: '',\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    addModal:{\n      get(){\n        return this.$store.state.food.addFoodModal;\n      },\n      set(val){\n        this.$store.commit('setAddFoodModal', val)\n      }\n    }\n  },\n\n  methods: {\n    modifyFood(){\n      this.isEdit = true;\n    },\n    uploadProgress(event, file, fileList){\n      this.progress = true;\n      if(fileList.length>1){\n        fileList = fileList.splice(0,1);\n      }\n    },\n    uploadSuccess(response, file, fileList) {\n      this.form.img = response.url;\n      this.progress = false;\n      this.uploadTitle = false;\n    },\n\n    uploadError(error, file, fileList) {\n      console.log(\"uploaderror===>>>\" + JSON.stringify(error))\n      console.log(\"uploaderror===file>>>\" + JSON.stringify(file))\n    },\n\n    handleFormatError(file) {\n      this.$Notice.warning({\n        title: '文件格式不正确',\n        desc: '文件 ' + file.name + ' 格式不正确，请上传JPG，JPEG，PNG，GIT文件。'\n      });\n    },\n\n    exceededSize(file, fileList){\n      this.$Message.error('请上传不超过5MB的图片');\n    },\n    handleSave(){\n      // this.form.price = parseFloat(this.form.price).toFixed(2).toString().replace(/^-?\\d+/g, m => m.replace(/(?=(?!\\b)(\\d{3})+$)/g, \",\"))\n      let params = {\n        merchant_id: this.$store.state.user.curMerchantId,\n        ...this.form\n      }\n      this.$store.dispatch('foodAdd', params).then(res=>{\n        if(res.return_code==0){\n          this.$Message.success('添加成功！');\n          this.$store.commit('setAddFoodModal', false);\n          let arg = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            page: 1,\n            page_size: 50\n          };\n          this.$store.dispatch('foodList', arg);\n          this.form = {};\n        }\n      });\n    }\n  }\n};\n</script>\n<style lang='less' scoped>\n  @import '../style';\n</style>\n"],"sourceRoot":"src/views/setting/food-management/components"}]}