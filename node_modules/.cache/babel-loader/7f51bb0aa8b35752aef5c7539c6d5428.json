{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/common/login/components/form-computer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/common/login/components/form-computer.vue","mtime":1644998572167},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZyc7CmltcG9ydCB7IHNldENvb2tpZXNJdGVtLCBnZXRSYW5kb20gfSBmcm9tICdAL2xpYnMvdXRpbCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50LXRpbWV6b25lJzsKaW1wb3J0IHNoYTEgZnJvbSAnanMtc2hhMSc7CmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBjaGVja0NvZGUgPSBmdW5jdGlvbiBjaGVja0NvZGUocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICh2YWx1ZSA9PSBmYWxzZSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L+b6KGM5Lq65py66aqM6K+BJykpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgaGFzaEtleTogZ2V0UmFuZG9tKCksCiAgICAgIGtleTogJzZMZU9scjRaQUFBQUFQNmkxeC1hNzNGTzBvRmwwZjB1V1kxeFU1NEgnLAogICAgICB2YWxpZENvZGU6ICcnCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIC8vIOeUqOaIt+S9v+eUqOS6kemXqOaIt+i0puWPt+iupOivgQogICAgaGFuZGxlSWNwTG9naW46IGZ1bmN0aW9uIGhhbmRsZUljcExvZ2luKGUpIHsKICAgICAgdmFyIGRvbWFpbiA9IGVuY29kZVVSSUNvbXBvbmVudCgiIi5jb25jYXQobG9jYXRpb24ucHJvdG9jb2wsICIvLyIpLmNvbmNhdChsb2NhdGlvbi5ob3N0KS5jb25jYXQobG9jYXRpb24ucGF0aG5hbWUpKTsKICAgICAgdmFyIHBhdGggPSB0aGlzLiRyb3V0ZS5wYXRoOwogICAgICB2YXIgY2xpZW50SWQgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0lDTE9VRF9PQVVUSF9DTElFTlRJRDsKICAgICAgdmFyIG9hdXRoVXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9JQ0xPVURfT0FVVEhfVVJMOyAvLyBsZXQgY2xpZW50SWQgPSBjb25maWcub2F1dGguaWNsb3VkLmNsaWVudElkOwoKICAgICAgdmFyIHN0YXRlID0gewogICAgICAgIHBhdGg6IHBhdGgsCiAgICAgICAgdHlwZTogJ2ljbG91ZCcKICAgICAgfTsgLy8gbGV0IGhyZWYgPSBgJHtjb25maWcub2F1dGguaWNsb3VkLnVybH0/Y2xpZW50X2lkPSR7Y2xpZW50SWR9JnJlZGlyZWN0X3VyaT0ke2RvbWFpbn0mcmVzcG9uc2VfdHlwZT1jb2RlJnNjb3BlPWFwaV91c2VyJnN0YXRlPSR7SlNPTi5zdHJpbmdpZnkoc3RhdGUpfWA7CgogICAgICB2YXIgaHJlZiA9ICIiLmNvbmNhdChvYXV0aFVybCwgIj9jbGllbnRfaWQ9IikuY29uY2F0KGNsaWVudElkLCAiJnJlZGlyZWN0X3VyaT0iKS5jb25jYXQoZG9tYWluLCAiJnJlc3BvbnNlX3R5cGU9Y29kZSZzY29wZT1hcGlfdXNlciZzdGF0ZT0iKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmOwogICAgfQogIH0KfTs="},{"version":3,"sources":["form-computer.vue"],"names":[],"mappings":";;;;;;;;AAQA,OAAA,MAAA,MAAA,UAAA;AACA,SAAA,cAAA,EAAA,SAAA,QAAA,aAAA;AACA,OAAA,MAAA,MAAA,iBAAA;AACA,OAAA,IAAA,MAAA,SAAA;AACA,OAAA,CAAA,MAAA,YAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,QAAA,SAAA,GAAA,SAAA,SAAA,CAAA,IAAA,EAAA,KAAA,EAAA,QAAA,EAAA;AACA,UAAA,KAAA,IAAA,KAAA,EAAA;AACA,QAAA,QAAA,CAAA,IAAA,KAAA,CAAA,SAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,QAAA;AACA;AACA,KANA;;AAOA,WAAA;AACA,MAAA,OAAA,EAAA,SAAA,EADA;AAEA,MAAA,GAAA,EAAA,0CAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GAdA;AAgBA,EAAA,UAAA,EAAA,EAhBA;AAkBA,EAAA,QAAA,EAAA,EAlBA;AAoBA,EAAA,OAAA,EAAA;AAEA;AACA,IAAA,cAHA,0BAGA,CAHA,EAGA;AACA,UAAA,MAAA,GAAA,kBAAA,WAAA,QAAA,CAAA,QAAA,eAAA,QAAA,CAAA,IAAA,SAAA,QAAA,CAAA,QAAA,EAAA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,IAAA;AACA,UAAA,QAAA,GAAA,OAAA,CAAA,GAAA,CAAA,6BAAA;AACA,UAAA,QAAA,GAAA,OAAA,CAAA,GAAA,CAAA,wBAAA,CAJA,CAKA;;AACA,UAAA,KAAA,GAAA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA,CANA,CAWA;;AACA,UAAA,IAAA,aAAA,QAAA,wBAAA,QAAA,2BAAA,MAAA,sDAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,CAAA;AACA,MAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,IAAA;AACA;AAjBA;AApBA,CAAA","sourcesContent":["<!--  -->\n<template>\n  <Form class=\"text-center\" ref=\"loginForm\" @keydown.enter.native=\"handleSubmit\">\n    <p class=\"font-blod font-size18 text-center margin-bottom-20\">食堂管理系统</p>\n    <Button class=\"icloudportal\" type='success' style=\"margin-top:26%;\" @click=\"handleIcpLogin\">云门户账号登录</Button>\n  </Form>\n</template>\n<script>\nimport config from '@/config';\nimport { setCookiesItem, getRandom } from '@/libs/util';\nimport moment from 'moment-timezone';\nimport sha1 from 'js-sha1';\nimport _ from 'underscore';\n\nexport default {\n  data() {\n    let checkCode = (rule, value, callback) => {\n      if (value == false) {\n        callback(new Error('请进行人机验证'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      hashKey: getRandom(),\n      key: '6LeOlr4ZAAAAAP6i1x-a73FO0oFl0f0uWY1xU54H',\n      validCode: '',\n    };\n  },\n\n  components: {},\n\n  computed: {},\n\n  methods: {\n\n    // 用户使用云门户账号认证\n    handleIcpLogin(e) {\n      let domain = encodeURIComponent(`${location.protocol}//${location.host}${location.pathname}`);\n      let path = this.$route.path;\n      let clientId = process.env.VUE_APP_ICLOUD_OAUTH_CLIENTID;\n      let oauthUrl = process.env.VUE_APP_ICLOUD_OAUTH_URL;\n      // let clientId = config.oauth.icloud.clientId;\n      let state = {\n        path: path,\n        type: 'icloud'\n      };\n\n      // let href = `${config.oauth.icloud.url}?client_id=${clientId}&redirect_uri=${domain}&response_type=code&scope=api_user&state=${JSON.stringify(state)}`;\n      let href = `${oauthUrl}?client_id=${clientId}&redirect_uri=${domain}&response_type=code&scope=api_user&state=${JSON.stringify(state)}`;\n      window.location.href = href;\n    },\n\n\n  },\n\n}\n</script>\n<style lang='less' scoped>\n@import '../style';\n</style>\n"],"sourceRoot":"src/views/common/login/components"}]}