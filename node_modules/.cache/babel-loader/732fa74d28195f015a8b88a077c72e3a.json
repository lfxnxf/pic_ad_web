{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/setting/department-setting/components/add-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/setting/department-setting/components/add-modal.vue","mtime":1638523446917},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGFuZy9jYW50ZWVuX21hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJzsKaW1wb3J0IHsgZ2V0VHJlZU5vZGVzLCBidWlsZFRyZWUsIGJ1aWxkVHJlZUNoZWNrZWQgfSBmcm9tICJAL2xpYnMvdXRpbCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnRuTG9hZGluZzogZmFsc2UsCiAgICAgIGJ0bkxvYWRpbmcyOiBmYWxzZSwKICAgICAgYnRuTG9hZGluZzM6IGZhbHNlLAogICAgICBpc0VkaXQ6IGZhbHNlLAogICAgICBtZXJjaGFudF9uYW1lOiAnJywKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdHJlZURhdGE6IFtdLAogICAgICBkZXBhcnRtZW50czogW10sCiAgICAgIGRlcGFydG1lbnRJZHM6IFtdCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6IHsKICAgIGxvYWRpbmc6IGZ1bmN0aW9uIGxvYWRpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJMb2FkaW5nOwogICAgfSwKICAgIGN1cnJlbnRNZXJjaGFudElkOiBmdW5jdGlvbiBjdXJyZW50TWVyY2hhbnRJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZDsKICAgIH0sCiAgICBjdXJyZW50TWVyY2hhbnROYW1lOiBmdW5jdGlvbiBjdXJyZW50TWVyY2hhbnROYW1lKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudE5hbWU7CiAgICB9LAogICAgY3VycmVudE9yZ0lkOiBmdW5jdGlvbiBjdXJyZW50T3JnSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck9yZ0lkOwogICAgfSwKICAgIHNlc3Npb25JZDogZnVuY3Rpb24gc2Vzc2lvbklkKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci50b2tlbjsKICAgIH0sCiAgICBlbXBVc2VyQ29kZTogZnVuY3Rpb24gZW1wVXNlckNvZGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmVtcFVzZXJDb2RlOwogICAgfSwKICAgIC8v6YOo6Zeo5YiX6KGoCiAgICBkZXBhcnRtZW50TGlzdDogZnVuY3Rpb24gZGVwYXJ0bWVudExpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmRlcGFydG1lbnRMaXN0OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdERhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbml0RGF0YSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMubWVyY2hhbnRfbmFtZSA9IHRoaXMuY3VycmVudE1lcmNoYW50TmFtZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVwYXJ0bWVudExpc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlEZXBhcnRtZW50TGlzdChyZXMpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaW5pdERhdGEoKSB7CiAgICAgICAgcmV0dXJuIF9pbml0RGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5pdERhdGE7CiAgICB9KCksCiAgICAvL+iOt+WPluS8geS4mumDqOmXqOWIl+ihqAogICAgcXVlcnlEZXBhcnRtZW50TGlzdDogZnVuY3Rpb24gcXVlcnlEZXBhcnRtZW50TGlzdChzdHJDaGVja2VkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzLCB2YWxpZFJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGVwYXJ0bWVudExpc3QnLCB7CiAgICAgICAgICAgICAgICAgIG9yZ19pZDogX3RoaXMuY3VycmVudE9yZ0lkLAogICAgICAgICAgICAgICAgICBzZXNzaW9uaWQ6IF90aGlzLnNlc3Npb25JZCwKICAgICAgICAgICAgICAgICAgbGltaXQ6IDIwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJxdWVyeURlcGFydG1lbnRMaXN0PT09cmVzPj4+IiArIEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgICAgICAgdmFsaWRSZXMgPSBfLmZpbHRlcihyZXMsIGZ1bmN0aW9uIChjdXIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1ci5zdGF0dXMgPT0gMTsKICAgICAgICAgICAgICAgIH0pOyAvLyBjb25zb2xlLmxvZygicXVlcnlEZXBhcnRtZW50TGlzdD09PXZhbGlkUmVzPj4+IiArIEpTT04uc3RyaW5naWZ5KHZhbGlkUmVzKSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5jb21taXQoIlVwZGF0ZUVtcERlcGFydG1lbnRMaXN0IiwgdmFsaWRSZXMpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBpZiAodmFsaWRSZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBfdGhpcy50cmVlRGF0YSA9IGJ1aWxkVHJlZUNoZWNrZWQodmFsaWRSZXMsIHt9LCAnZGVwYXJ0bWVudF9pZCcsICdwYXJlbnRpZCcsICdjaGlsZHJlbicsICcwJywgc3RyQ2hlY2tlZCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNob2ljZUFsbDogZnVuY3Rpb24gY2hvaWNlQWxsKGRhdGEpIHsKICAgICAgdmFyIGNob2ljZXNEYXRhID0gdGhpcy4kcmVmcy50cmVlMy5nZXRDaGVja2VkQW5kSW5kZXRlcm1pbmF0ZU5vZGVzKCk7CiAgICAgIHRoaXMuZGVwYXJ0bWVudHMgPSBfLm1hcChjaG9pY2VzRGF0YSwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgb3JnX2lkOiBpdGVtLm9yZ19pZCwKICAgICAgICAgIHBhcmVudGlkOiBpdGVtLnBhcmVudGlkLAogICAgICAgICAgZGVwYXJ0bWVudF9pZDogaXRlbS5kZXBhcnRtZW50X2lkCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgc3luY0RlcGFydG1lbnRMaXN0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc3luY0RlcGFydG1lbnRMaXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgdmFyIHJvb3RUcmVlLCBmaW5kSXRlbSwgQmFzZTY0LCBwYXJhbXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuYnRuTG9hZGluZyA9IHRydWU7IC8v57uZ6YOo6Zeo5re75Yqg6Lef6IqC54K577ybCgogICAgICAgICAgICAgICAgcm9vdFRyZWUgPSB7CiAgICAgICAgICAgICAgICAgIGRlcGFydG1lbnRfaWQ6ICcwJywKICAgICAgICAgICAgICAgICAgcGFyZW50aWQ6ICIiLAogICAgICAgICAgICAgICAgICBuYW1lOiAi5YWo6YOo6YOo6ZeoIiwKICAgICAgICAgICAgICAgICAgb3JnX2lkOiB0aGlzLmN1cnJlbnRPcmdJZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGZpbmRJdGVtID0gXy5maW5kKHRoaXMuZGVwYXJ0bWVudHMsIGZ1bmN0aW9uIChjdXIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1ci5kZXBhcnRtZW50X2lkID09ICcwJzsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChmaW5kSXRlbSA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5kZXBhcnRtZW50cy5wdXNoKHJvb3RUcmVlKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGZpbmRJdGVtWydvcmdfaWQnXSA9IHRoaXMuY3VycmVudE9yZ0lkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEJhc2U2NCA9IHJlcXVpcmUoJ2pzLWJhc2U2NCcpLkJhc2U2NDsKICAgICAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuY3VycmVudE1lcmNoYW50SWQsCiAgICAgICAgICAgICAgICAgIGRlcGFydG1lbnRzOiBCYXNlNjQuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGVwYXJ0bWVudHMpKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc3luY0RlcGFydG1lbnRzJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlcy5yZXR1cm5fY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmJ0bkxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLiRNZXNzYWdlLnN1Y2Nlc3MoJ+WQjOatpemDqOmXqOS/oeaBr+aIkOWKn++8gScpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5idG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc3luY0RlcGFydG1lbnRMaXN0KCkgewogICAgICAgIHJldHVybiBfc3luY0RlcGFydG1lbnRMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzeW5jRGVwYXJ0bWVudExpc3Q7CiAgICB9KCksCiAgICBnZXREZXBhcnRtZW50TGlzdDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldERlcGFydG1lbnRMaXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcGFyYW1zLCByZXMsIHJlc1RyZWU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuY3VycmVudE1lcmNoYW50SWQsCiAgICAgICAgICAgICAgICAgIGxldmVsOiAxCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRNZXJjaGFudERlcGFydG1lbnRMaXN0JywgcGFyYW1zKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzLnJldHVybl9jb2RlID09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfojrflj5bpg6jpl6jkv6Hmga/miJDlip/vvIEnKTsKICAgICAgICAgICAgICAgIHJlc1RyZWUgPSBnZXRUcmVlTm9kZXMocmVzLmRhdGEsICdkZXBhcnRtZW50X2lkJywgJ2NoaWxkcmVuJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgcmVzVHJlZSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldERlcGFydG1lbnRMaXN0KCkgewogICAgICAgIHJldHVybiBfZ2V0RGVwYXJ0bWVudExpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldERlcGFydG1lbnRMaXN0OwogICAgfSgpLAogICAgLy8g5ZCM5q2l5ZGY5belCiAgICBzeW5jRW1wbG95ZWU6IGZ1bmN0aW9uIHN5bmNFbXBsb3llZShlbnRpdHlEYXRhKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmIChlbnRpdHlEYXRhID09ICdkZXBhcnRtZW50JykgewogICAgICAgICAgICAgICAgICBfdGhpczMuYnRuTG9hZGluZzIgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbnRpdHlEYXRhID09ICdlbXBsb3llZScpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLmJ0bkxvYWRpbmczID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLiRzdG9yZS5kaXNwYXRjaCgnaWNsb3VkU3luYycsIHsKICAgICAgICAgICAgICAgICAgb3JnX2lkOiBfdGhpczMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyT3JnSWQsCiAgICAgICAgICAgICAgICAgIGVudGl0eTogZW50aXR5RGF0YQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlcy5yZXR1cm5fY29kZSAhPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczMuJE1lc3NhZ2UuZXJyb3IocmVzLnJldHVybl9tZXNzYWdlKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF90aGlzMy5idG5Mb2FkaW5nMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMzLmJ0bkxvYWRpbmczID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXMzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+WQjOatpeaVsOaNruWRveS7pOWPkemAgeaIkOWKn++8jOivt+eojeWQjuafpeeci+WQjOatpeaVsOaNrue7k+aenO+8gScpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIF90aGlzMy5idG5Mb2FkaW5nMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMzLmJ0bkxvYWRpbmczID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIG51bGwsIFtbMCwgMTNdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdERhdGEoKTsKICB9LAogIHdhdGNoOiB7CiAgICBkZXBhcnRtZW50TW9kYWw6IGZ1bmN0aW9uIGRlcGFydG1lbnRNb2RhbCh2YWwpIHsKICAgICAgaWYgKCF2YWwpIHsKICAgICAgICB0aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLmJ0bkxvYWRpbmcyID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["add-modal.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 同步部门信息 -->\n<template>\n  <Row :gutter=\"15\">\n    <Col span=\"12\">\n      <Card title=\"设置商户部门\">\n\n          <Form class=\"margin-top-20\" :label-width=\"100\">\n            <FormItem label=\"商户名称：\">\n              <span class=\"font-blod\" style=\"padding-left:12px\">{{ merchant_name }}</span>\n            </FormItem>\n            <Form inline :label-width=\"100\">\n              <FormItem class=\"tree\" label=\"选择部门：\">\n                <Tree :data=\"treeData\" @on-check-change=\"choiceAll\" ref=\"tree3\" show-checkbox multiple></Tree>\n              </FormItem>\n              <FormItem>\n                <Button type=\"primary\" :loading=\"btnLoading\" @click=\"syncDepartmentList\">提交</Button>\n              </FormItem>\n            </Form>\n          </Form>\n\n      </Card>\n    </Col>\n    <Col span=\"12\">\n      <Card title=\"同步云门户数据到用户中心\">\n\n          <Form class=\"margin-top-20\" :label-width=\"100\">\n\n            <FormItem class=\"margin-bottom-40\" label=\"同步部门：\">\n              <Button class=\"margin-right-20\" type='primary' :loading=\"btnLoading2\" icon=\"md-refresh\"\n                      @click=\"syncEmployee('department')\">同步部门\n              </Button>\n              <!-- <span class=\"orange-color\"><Icon class=\"margin-right-5\" type=\"md-information-circle\"/>同步部门数据</span> -->\n            </FormItem>\n          </Form>\n          <Form class=\"margin-top-20\" :label-width=\"100\">\n\n            <FormItem class=\"margin-bottom-40\" label=\"同步人员：\">\n              <Button class=\"margin-right-20\" type='primary' :loading=\"btnLoading3\" icon=\"md-refresh\"\n                      @click=\"syncEmployee('employee')\">同步人员\n              </Button>\n              <!-- <span class=\"orange-color\"><Icon class=\"margin-right-5\" type=\"md-information-circle\"/>同步人员数据</span> -->\n            </FormItem>\n\n          </Form>\n\n      </Card>\n    </Col>\n  </Row>\n\n</template>\n\n<script>\nimport _ from 'underscore';\nimport {getTreeNodes, buildTree, buildTreeChecked} from \"@/libs/util\";\nexport default {\n  data() {\n    return {\n      btnLoading: false,\n      btnLoading2: false,\n      btnLoading3: false,\n      isEdit: false,\n      merchant_name: '',\n      tableData: [],\n      treeData: [],\n      departments: [],\n      departmentIds: [],\n    };\n  },\n\n  components: {},\n\n  computed: {\n    loading() {\n      return this.$store.state.user.userLoading;\n    },\n    currentMerchantId(){\n      return this.$store.state.user.curMerchantId;\n    },\n    currentMerchantName(){\n      return this.$store.state.user.curMerchantName;\n    },\n    currentOrgId() {\n      return this.$store.state.user.curOrgId;\n    },\n    sessionId() {\n      return this.$store.state.user.token;\n    },\n    empUserCode() {\n      return this.$store.state.user.empUserCode;\n    },\n\n    //部门列表\n    departmentList() {\n      return this.$store.state.user.departmentList;\n    },\n\n  },\n\n  methods: {\n    initData: async function() {\n      this.merchant_name = this.currentMerchantName;\n      let res = await this.getDepartmentList();\n      await this.queryDepartmentList(res);\n    },\n\n    //获取企业部门列表\n    async queryDepartmentList(strChecked) {\n      let res = await this.$store.dispatch('departmentList', { org_id: this.currentOrgId, sessionid: this.sessionId,limit: 2000 });\n      // console.log(\"queryDepartmentList===res>>>\" + JSON.stringify(res));\n      let validRes = _.filter(res, cur => {return cur.status == 1 });\n      // console.log(\"queryDepartmentList===validRes>>>\" + JSON.stringify(validRes));\n      await this.$store.commit(\"UpdateEmpDepartmentList\", validRes);\n      if (validRes.length > 0) {\n        this.treeData = buildTreeChecked(validRes, {}, 'department_id', 'parentid', 'children', '0', strChecked);\n      }\n    },\n\n    choiceAll(data){\n      let choicesData = this.$refs.tree3.getCheckedAndIndeterminateNodes();\n      this.departments = _.map(choicesData, function(item){ return {name: item.name, org_id: item.org_id, parentid: item.parentid, department_id: item.department_id}; });\n    },\n\n    syncDepartmentList: async function() {\n      this.btnLoading = true;\n      //给部门添加跟节点；\n      let rootTree={\n        department_id: '0',\n        parentid: \"\",\n        name: \"全部部门\",\n        org_id: this.currentOrgId,\n      };\n\n      let findItem = _.find(this.departments, cur=>{return cur.department_id == '0' });\n\n      if (findItem == undefined){\n        this.departments.push(rootTree);\n      }\n      else{\n        findItem['org_id'] = this.currentOrgId;\n      }\n\n      let Base64 = require('js-base64').Base64;\n\n      let params = {\n        merchant_id: this.currentMerchantId,\n        departments: Base64.encode(JSON.stringify(this.departments)),\n      };\n\n      await this.$store.dispatch('syncDepartments', params).then(res=>{\n        if(res.return_code==0){\n          this.btnLoading = false;\n          this.$Message.success('同步部门信息成功！');\n        }\n      }).catch(err=>{\n        this.btnLoading = false;\n      });\n    },\n\n    getDepartmentList: async function() {\n\n      let params = {\n        merchant_id: this.currentMerchantId,\n        level: 1,\n      };\n\n      let res = await this.$store.dispatch('getMerchantDepartmentList', params);\n      if(res.return_code==0){\n          this.$Message.success('获取部门信息成功！');\n          let resTree = getTreeNodes(res.data, 'department_id',  'children');\n          return resTree;\n      }\n    },\n    // 同步员工\n    async syncEmployee(entityData) {\n      try {\n        if(entityData=='department'){\n          this.btnLoading2 = true;\n        }else if(entityData=='employee'){\n          this.btnLoading3 = true;\n        }\n\n        let res = await this.$store.dispatch('icloudSync', { org_id: this.$store.state.user.curOrgId, entity: entityData });\n        if (res.return_code !== 0) {\n          this.$Message.error(res.return_message);\n          return;\n        }\n        this.btnLoading2 = false;\n        this.btnLoading3 = false;\n\n        this.$Message.success('同步数据命令发送成功，请稍后查看同步数据结果！');\n      } catch (e) {\n        // console.log(e);\n        this.btnLoading2 = false;\n        this.btnLoading3 = false;\n      }\n    },\n\n\n  },\n\n  mounted(){\n    this.initData();\n  },\n\n  watch: {\n    departmentModal(val){\n      if(!val){\n        this.btnLoading = false;\n        this.btnLoading2 = false;\n      }\n    }\n  }\n};\n</script>\n<style lang='less' scoped>\n/deep/.ivu-card{\n  height: ~'-webkit-calc(100vh - 40px - 36px)';\n  height: ~'-moz-calc(100vh - 40px - 36px)';\n  height: ~'-ms-calc(100vh - 40px - 36px)';\n  height: ~'-o-calc(100vh - 40px - 36px)';\n  height: calc(100vh - 40px - 36px);\n\n}\n\n/deep/.ivu-input{\n  text-align: right;\n}\n/deep/.ivu-form .tree{\n  .ivu-form-item-content{\n    max-height: 500px;\n    overflow-y: auto;\n    background-color: #fff;\n    border: 1px solid #dcdee2;\n    border-radius: 4px;\n    padding: 0 8px;\n    margin-left: 0 !important;\n  }\n  +.ivu-form-item .ivu-form-item-content{\n    margin-left: 0 !important;\n  }\n  .ivu-btn{\n    position: absolute;\n    right: 0;\n    top: 0;\n  }\n}\n/deep/.ivu-tree{\n  li{\n    margin: 0 !important;\n    line-height: 32px;\n  }\n}\n\n</style>\n"],"sourceRoot":"src/views/setting/department-setting/components"}]}