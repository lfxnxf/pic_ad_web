{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/setting/role-setting/components/add-role-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/setting/role-setting/components/add-role-modal.vue","mtime":1639468524276},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL2NhbnRlZW5fbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGFuZy9jYW50ZWVuX21hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBidG5Mb2FkaW5nOiBmYWxzZSwKICAgICAgZm9vZFN0YXR1czogdHJ1ZSwKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeS6uuWRmOexu+Wei+WQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6IHsKICAgIGFkZE1vZGFsOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5yb2xlLmFkZE1vZGFsOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEFkZFJvbGVNb2RhbCcsIHZhbCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZFJvbGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9hZGRSb2xlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWRkTW9kYWwudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSB0cnVlOyAvL3RoaXMuZm9ybS5wcmljZSA9IHBhcnNlRmxvYXQodGhpcy5mb3JtLnByaWNlKS50b0ZpeGVkKDIpLnRvU3RyaW5nKCkucmVwbGFjZSgvXi0/XGQrL2csIG0gPT4gbS5yZXBsYWNlKC8oPz0oPyFcYikoXGR7M30pKyQpL2csICIsIikpCgogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgICAgIG1lcmNoYW50X2lkOiBfdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkCiAgICAgICAgICAgICAgICAgICAgfSwgX3RoaXMuZm9ybSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgncm9sZUFkZCcsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnJldHVybl9jb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYnRuTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5Lq65ZGY57G75Z6L5oiQ5Yqf77yBJyk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJnID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmNoYW50X2lkOiBfdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZV9zaXplOiA1MAogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdyb2xlTGlzdCcsIGFyZyk7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRBZGRSb2xlTW9kYWwnLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5hZGRNb2RhbC5yZXNldEZpZWxkcygpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBhZGRSb2xlKCkgewogICAgICAgIHJldHVybiBfYWRkUm9sZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYWRkUm9sZTsKICAgIH0oKQogIH0KfTs="},{"version":3,"sources":["add-role-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAqBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,UAAA,EAAA,IAFA;AAGA,MAAA,IAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA,OAHA;AAMA,MAAA,QAAA,EAAA;AACA,QAAA,IAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,WAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AADA;AANA,KAAA;AAYA,GAdA;AAgBA,EAAA,UAAA,EAAA,EAhBA;AAkBA,EAAA,QAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,GAJA,EAIA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,iBAAA,EAAA,GAAA;AAEA;AAPA;AADA,GAlBA;AA8BA,EAAA,OAAA,EAAA;AAEA,IAAA,OAAA;AAAA,6EAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,qBAAA,KAAA,CAAA,QAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,sBAAA,KAAA,EAAA;AACA,oBAAA,KAAA,CAAA,UAAA,GAAA,IAAA,CADA,CAEA;;AACA,wBAAA,MAAA;AACA,sBAAA,WAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AADA,uBAEA,KAAA,CAAA,IAFA,CAAA;;AAIA,oBAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,SAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,WAAA,IAAA,CAAA,EAAA;AACA,wBAAA,KAAA,CAAA,UAAA,GAAA,KAAA;;AACA,wBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,WAAA;;AACA,4BAAA,GAAA,GAAA;AACA,0BAAA,WAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,aADA;AAEA,0BAAA,IAAA,EAAA,CAFA;AAGA,0BAAA,SAAA,EAAA;AAHA,yBAAA;;AAKA,wBAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,UAAA,EAAA,GAAA;;AACA,wBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,iBAAA,EAAA,KAAA;;AACA,wBAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,WAAA;AACA;AACA,qBAbA,WAaA,UAAA,GAAA,EAAA;AACA,sBAAA,KAAA,CAAA,UAAA,GAAA,KAAA;AACA,qBAfA;AAgBA;AACA,iBAzBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAFA;AA9BA,CAAA","sourcesContent":["<!-- -->\n<!-- 新增人员类型信息 -->\n<template>\n  <Modal\n    v-model=\"addModal\"\n    title=\"新增人员类型\"\n    :footer-hide=\"true\"\n    width=\"420px\">\n    <Form :model=\"form\" :label-width=\"90\" ref=\"addModal\" :rules=\"ruleForm\">\n      <FormItem label=\"人员类型\" prop=\"name\">\n        <Input v-model=\"form.name\" style=\"width: 200px\" placeholder=\"请输入人员类型名称\" />\n      </FormItem>\n      <div class=\"text-center margin-bottom-20 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setAddRoleModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"addRole\">确定</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      btnLoading: false,\n      foodStatus: true,\n      form: {\n        name: '',\n      },\n      ruleForm: {\n        name: [\n          { required: true, message: '请输入人员类型名称', trigger: 'blur' }\n        ],\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    addModal:{\n      get(){\n        return this.$store.state.role.addModal;\n      },\n      set(val){\n        this.$store.commit('setAddRoleModal', val);\n        \n      }\n    }\n  },\n\n  methods: {\n\n    addRole: async function(){\n      this.$refs.addModal.validate((valid) => {\n        if (valid) {\n          this.btnLoading = true;\n          //this.form.price = parseFloat(this.form.price).toFixed(2).toString().replace(/^-?\\d+/g, m => m.replace(/(?=(?!\\b)(\\d{3})+$)/g, \",\"))\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            ...this.form\n          }\n          this.$store.dispatch('roleAdd', params).then(res => {\n            if (res.return_code == 0) {\n              this.btnLoading = false;\n              this.$Message.success('添加人员类型成功！');\n              let arg = {\n                merchant_id: this.$store.state.user.curMerchantId,\n                page: 1,\n                page_size: 50\n              };\n              this.$store.dispatch('roleList', arg);\n              this.$store.commit('setAddRoleModal', false);\n              this.$refs.addModal.resetFields();\n            }\n          }).catch(err=>{\n            this.btnLoading = false;\n          });\n        }\n      });\n    },\n  }\n};\n</script>\n<style lang='less' scoped>\n  @import '../style';\n</style>\n"],"sourceRoot":"src/views/setting/role-setting/components"}]}