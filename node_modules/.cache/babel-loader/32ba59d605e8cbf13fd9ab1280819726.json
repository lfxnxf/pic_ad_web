{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/src/store/modules/auth.js","dependencies":[{"path":"/Users/zhang/canteen_manage/src/store/modules/auth.js","mtime":1638355006765},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgUHJvbWlzZSB9IGZyb20gJ2NvcmUtanMnOwppbXBvcnQgYXhpb3MgZnJvbSAnQC9saWJzL2FwaS5yZXF1ZXN0JzsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICBpY3BBY2Nlc3NUb2tlbjogbnVsbCwKICAgIGljcFVzZXJJbmZvOiBudWxsCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHVwZGF0ZUljcEFjY2Vzc1Rva2VuOiBmdW5jdGlvbiB1cGRhdGVJY3BBY2Nlc3NUb2tlbihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5pY3BBY2Nlc3NUb2tlbiA9IHBheWxvYWQ7CiAgICB9LAogICAgdXBkYXRlSWNwVXNlckluZm86IGZ1bmN0aW9uIHVwZGF0ZUljcFVzZXJJbmZvKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmljcFVzZXJJbmZvID0gcGF5bG9hZDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGZldGNoSWNwQWNjZXNzVG9rZW46IGZ1bmN0aW9uIGZldGNoSWNwQWNjZXNzVG9rZW4oX3JlZiwgcGF5bG9hZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIGNvbnNvbGUubG9nKCdmZXRjaEljcEFjY2Vzc1Rva2VuLS0tLS0tLS1wYXlsb2FkOicsIHBheWxvYWQpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGF4aW9zLnJlcXVlc3QoewogICAgICAgICAgdXJsOiAnJywKICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgZGF0YTogcGF5bG9hZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2coJ3N0YXRlLS0tLS0tLS1yZXM6JywgcmVzKTsKICAgICAgICAgIHZhciB0b2tlbkluZm8gPSByZXMuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKCdzdGF0ZS0tLS0tLS0tdG9rZW5JbmZvOicsIHRva2VuSW5mbyk7CiAgICAgICAgICBjb21taXQoJ3VwZGF0ZUljcEFjY2Vzc1Rva2VuJywgdG9rZW5JbmZvLmFjY2Vzc190b2tlbik7CiAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9IC8vIGZldGNoSWNwVXNlcmluZm8oeyBjb21taXQgfSwgcGF5bG9hZCkgewogICAgLy8gICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgLy8gICAgIGF4aW9zLnJlcXVlc3QoeyB1cmw6ICdhcGkvdjEvYXV0aC9pY3AvdXNlcicsIG1ldGhvZDogJ2dldCcsIHBhcmFtczogcGF5bG9hZCB9KS50aGVuKHJlcyA9PiB7CiAgICAvLyAgICAgICBjb25zdCB1c2VySW5mbyA9IHJlcy5kYXRhOwogICAgLy8gICAgICAgY29tbWl0KCd1cGRhdGVJY3BVc2VySW5mbycsIHVzZXJJbmZvKTsKICAgIC8vICAgICAgIHJlc29sdmUocmVzLmRhdGEpCiAgICAvLyAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgIC8vICAgICAgIHJlamVjdChlcnIpCiAgICAvLyAgICAgfSkKICAgIC8vICAgfSkKICAgIC8vIH0KCiAgfQp9Ow=="},{"version":3,"sources":["/Users/zhang/canteen_manage/src/store/modules/auth.js"],"names":["Promise","axios","state","icpAccessToken","icpUserInfo","mutations","updateIcpAccessToken","payload","updateIcpUserInfo","actions","fetchIcpAccessToken","commit","console","log","resolve","reject","request","url","method","data","then","res","tokenInfo","access_token","err"],"mappings":"AAAA,SAASA,OAAT,QAAwB,SAAxB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAEA,eAAe;AACbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,cAAc,EAAE,IADX;AAELC,IAAAA,WAAW,EAAE;AAFR,GADM;AAKbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,oBADS,gCACYJ,KADZ,EACmBK,OADnB,EAC4B;AACnCL,MAAAA,KAAK,CAACC,cAAN,GAAuBI,OAAvB;AACD,KAHQ;AAITC,IAAAA,iBAJS,6BAISN,KAJT,EAIgBK,OAJhB,EAIyB;AAChCL,MAAAA,KAAK,CAACE,WAAN,GAAoBG,OAApB;AACD;AANQ,GALE;AAabE,EAAAA,OAAO,EAAE;AACPC,IAAAA,mBADO,qCACyBH,OADzB,EACkC;AAAA,UAAnBI,MAAmB,QAAnBA,MAAmB;AACvCC,MAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ,EAAkDN,OAAlD;AACA,aAAO,IAAIP,OAAJ,CAAY,UAACc,OAAD,EAAUC,MAAV,EAAqB;AACtCd,QAAAA,KAAK,CAACe,OAAN,CAAc;AAAEC,UAAAA,GAAG,EAAE,EAAP;AAAWC,UAAAA,MAAM,EAAE,MAAnB;AAA2BC,UAAAA,IAAI,EAAEZ;AAAjC,SAAd,EAA0Da,IAA1D,CAA+D,UAAAC,GAAG,EAAI;AACpET,UAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAgCQ,GAAhC;AACA,cAAMC,SAAS,GAAGD,GAAG,CAACF,IAAtB;AACAP,UAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAsCS,SAAtC;AACAX,UAAAA,MAAM,CAAC,sBAAD,EAAyBW,SAAS,CAACC,YAAnC,CAAN;AACAT,UAAAA,OAAO,CAACO,GAAG,CAACF,IAAL,CAAP;AACD,SAND,WAMS,UAAAK,GAAG,EAAI;AACdT,UAAAA,MAAM,CAACS,GAAD,CAAN;AACD,SARD;AASD,OAVM,CAAP;AAWD,KAdM,CAeP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAzBO;AAbI,CAAf","sourcesContent":["import { Promise } from 'core-js';\nimport axios from '@/libs/api.request';\n\nexport default {\n  state: {\n    icpAccessToken: null,\n    icpUserInfo: null,\n  },\n  mutations: {\n    updateIcpAccessToken(state, payload) {\n      state.icpAccessToken = payload;\n    },\n    updateIcpUserInfo(state, payload) {\n      state.icpUserInfo = payload;\n    }\n  },\n  actions: {\n    fetchIcpAccessToken({ commit }, payload) {\n      console.log('fetchIcpAccessToken--------payload:',payload)\n      return new Promise((resolve, reject) => {\n        axios.request({ url: '', method: 'post', data: payload }).then(res => {\n          console.log('state--------res:',res)\n          const tokenInfo = res.data\n          console.log('state--------tokenInfo:',tokenInfo)\n          commit('updateIcpAccessToken', tokenInfo.access_token);\n          resolve(res.data)\n        }).catch(err => {\n          reject(err)\n        })\n      })\n    },\n    // fetchIcpUserinfo({ commit }, payload) {\n    //   return new Promise((resolve, reject) => {\n    //     axios.request({ url: 'api/v1/auth/icp/user', method: 'get', params: payload }).then(res => {\n    //       const userInfo = res.data;\n    //       commit('updateIcpUserInfo', userInfo);\n    //       resolve(res.data)\n    //     }).catch(err => {\n    //       reject(err)\n    //     })\n    //   })\n    // }\n  }\n};\n"]}]}