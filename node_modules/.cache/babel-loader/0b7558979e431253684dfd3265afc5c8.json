{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/src/router/index.js","dependencies":[{"path":"/Users/zhang/canteen_manage/src/router/index.js","mtime":1638355006763},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVycyc7CmltcG9ydCBjb25maWcgZnJvbSAnQC9jb25maWcnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCBWaWV3VUkgZnJvbSAndmlldy1kZXNpZ24nOyAvLyBpbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnJzsKLy/kv67mlLnljp/lnovlr7nosaHkuIrnmoRwdXNo5Ye95pWwCgp2YXIgb3JpZ2luYWxQdXNoID0gVnVlUm91dGVyLnByb3RvdHlwZS5wdXNoOyAvL+S/ruaUueWOn+Wei+WvueixoeS4reeahHB1c2jmlrnms5UKClZ1ZVJvdXRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2gobG9jYXRpb24pIHsKICByZXR1cm4gb3JpZ2luYWxQdXNoLmNhbGwodGhpcywgbG9jYXRpb24pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgIHJldHVybiBlcnI7CiAgfSk7Cn07IC8vIGNvbnN0IHsgaG9tZU5hbWUgfSA9IGNvbmZpZzsKCgpWdWUudXNlKFZ1ZVJvdXRlcik7CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICByb3V0ZXM6IHJvdXRlcywKICBtb2RlOiAnaGlzdG9yeScsCiAgYmFzZTogY29uZmlnLnB1YmxpY1BhdGgKfSk7IC8vIGNvbnN0IExPR0lOX1BBR0VfTkFNRSA9ICdsb2dpbic7Ci8vIGNvbnN0IFJFR0lTVEVSX1BBR0VfTkFNRSA9ICdyZWdpc3Rlcic7Ci8vIGNvbnN0IEZPUkdFVF9QV0RfUEFHRV9OQU1FID0gJ2ZvcmdldHB3ZCc7Ci8vIGNvbnN0IHB1YmxpY1BhZ2VzID0gWydzdGFydCcsIExPR0lOX1BBR0VfTkFNRSwgUkVHSVNURVJfUEFHRV9OQU1FLCBGT1JHRVRfUFdEX1BBR0VfTkFNRV07Ci8vIHJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSwgbmV4dCkgPT4gewovLyAgIGlmICghaXNJblByZXJlbmRlck1vZGUpIHsKLy8gICAgIGlWaWV3LkxvYWRpbmdCYXIuc3RhcnQoKTsKLy8gICB9Ci8vICAgY29uc3QgdG9rZW4gPSBnZXRUb2tlbigpOwovLyAgIGNvbnN0IGF1dGhSZXF1aXJlZCA9ICFwdWJsaWNQYWdlcy5pbmNsdWRlcyh0by5uYW1lKTsKLy8gICAvLyBpZiAoIXRva2VuICYmIHRvLm5hbWUgIT09IExPR0lOX1BBR0VfTkFNRSkgewovLyB9KTsKLy8gcm91dGVyLmFmdGVyRWFjaCgodG8pID0+IHsKLy8gICBpZiAoIWlzSW5QcmVyZW5kZXJNb2RlKSB7Ci8vICAgICBWaWV3VUkuTG9hZGluZ0Jhci5maW5pc2goKTsKLy8gICB9Ci8vICAgd2luZG93LnNjcm9sbFRvKDAsIDApOwovLyB9KTsKCnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIC8vIGNvbnNvbGUubG9nKCJiZWZvcmVFYWNoIHVzZXJuYW1lPT09PiAiLCBzdG9yZS5zdGF0ZS51c2VyLmN1clVzZXJOYW1lKTsKICBWaWV3VUkuTG9hZGluZ0Jhci5zdGFydCgpOwogIHZhciB1c2VyTmFtZSA9IHN0b3JlLnN0YXRlLnVzZXIuY3VyVXNlck5hbWUgfHwgJyc7CgogIGlmICh1c2VyTmFtZSA9PSAnJykgewogICAgaWYgKHRvLnBhdGggIT09ICcvbG9naW4nKSB7CiAgICAgIHJldHVybiBuZXh0KHsKICAgICAgICBwYXRoOiAnL2xvZ2luJwogICAgICB9KTsKICAgIH0KICB9CgogIDsKICB2YXIgcm9sZUFkbWluID0gc3RvcmUuc3RhdGUudXNlci5hZG1pblJvbGUgfHwgJyc7CgogIGlmIChyb2xlQWRtaW4gPT0gJ3N1cGVydmlzb3JfYWRtaW4nKSB7CiAgICBpZiAodG8ucGF0aCA9PT0gJy8nKSB7CiAgICAgIHJldHVybiBuZXh0KHsKICAgICAgICBwYXRoOiAnL2J1c2luZXNzLWluZm9ybWF0aW9uL2Jhc2ljLWluZm9ybWF0aW9uJwogICAgICB9KTsKICAgIH0KICB9CgogIDsKCiAgaWYgKHJvbGVBZG1pbiA9PSAnbWVyY2hhbnRfYWRtaW4nKSB7CiAgICBpZiAodG8ucGF0aCA9PT0gJy8nKSB7CiAgICAgIHJldHVybiBuZXh0KHsKICAgICAgICBwYXRoOiAnL2J1c2luZXNzLWluZm9ybWF0aW9uL2Jhc2ljLWluZm9ybWF0aW9uJwogICAgICB9KTsKICAgIH0KICB9CgogIDsKICBuZXh0KCk7Cn0pOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogIFZpZXdVSS5Mb2FkaW5nQmFyLmZpbmlzaCgpOwp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/Users/zhang/canteen_manage/src/router/index.js"],"names":["Vue","VueRouter","routes","config","store","ViewUI","originalPush","prototype","push","location","call","err","use","router","mode","base","publicPath","beforeEach","to","from","next","LoadingBar","start","userName","state","user","curUserName","path","roleAdmin","adminRole","afterEach","route","finish"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB,C,CACA;AAGA;;AACA,IAAMC,YAAY,GAAGL,SAAS,CAACM,SAAV,CAAoBC,IAAzC,C,CACA;;AACAP,SAAS,CAACM,SAAV,CAAoBC,IAApB,GAA2B,SAASA,IAAT,CAAcC,QAAd,EAAuB;AAChD,SAAOH,YAAY,CAACI,IAAb,CAAkB,IAAlB,EAAwBD,QAAxB,WAAwC,UAAAE,GAAG;AAAA,WAAEA,GAAF;AAAA,GAA3C,CAAP;AACD,CAFD,C,CAKA;;;AACAX,GAAG,CAACY,GAAJ,CAAQX,SAAR;AACA,IAAMY,MAAM,GAAG,IAAIZ,SAAJ,CAAc;AAC3BC,EAAAA,MAAM,EAANA,MAD2B;AAE3BY,EAAAA,IAAI,EAAE,SAFqB;AAG3BC,EAAAA,IAAI,EAAEZ,MAAM,CAACa;AAHc,CAAd,CAAf,C,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAH,MAAM,CAACI,UAAP,CAAkB,UAASC,EAAT,EAAaC,IAAb,EAAmBC,IAAnB,EAAyB;AACzC;AACAf,EAAAA,MAAM,CAACgB,UAAP,CAAkBC,KAAlB;AAEA,MAAIC,QAAQ,GAAGnB,KAAK,CAACoB,KAAN,CAAYC,IAAZ,CAAiBC,WAAjB,IAAgC,EAA/C;;AACA,MAAIH,QAAQ,IAAI,EAAhB,EAAoB;AAClB,QAAIL,EAAE,CAACS,IAAH,KAAY,QAAhB,EAA0B;AACxB,aAAOP,IAAI,CAAC;AAACO,QAAAA,IAAI,EAAE;AAAP,OAAD,CAAX;AACD;AACF;;AAAA;AAED,MAAIC,SAAS,GAAGxB,KAAK,CAACoB,KAAN,CAAYC,IAAZ,CAAiBI,SAAjB,IAA8B,EAA9C;;AACA,MAAID,SAAS,IAAI,kBAAjB,EAAqC;AACnC,QAAIV,EAAE,CAACS,IAAH,KAAY,GAAhB,EAAqB;AACnB,aAAOP,IAAI,CAAC;AAACO,QAAAA,IAAI,EAAE;AAAP,OAAD,CAAX;AACD;AACF;;AAAA;;AACD,MAAIC,SAAS,IAAI,gBAAjB,EAAmC;AACjC,QAAIV,EAAE,CAACS,IAAH,KAAY,GAAhB,EAAqB;AACnB,aAAOP,IAAI,CAAC;AAACO,QAAAA,IAAI,EAAE;AAAP,OAAD,CAAX;AACD;AACF;;AAAA;AAEDP,EAAAA,IAAI;AACL,CAxBD;AA0BAP,MAAM,CAACiB,SAAP,CAAiB,UAAAC,KAAK,EAAI;AACxB1B,EAAAA,MAAM,CAACgB,UAAP,CAAkBW,MAAlB;AACD,CAFD;AAIA,eAAenB,MAAf","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport routes from './routers';\nimport config from '@/config';\nimport store from '@/store';\nimport ViewUI from 'view-design';\n// import config from '@/config';\n\n\n//修改原型对象上的push函数\nconst originalPush = VueRouter.prototype.push;\n//修改原型对象中的push方法\nVueRouter.prototype.push = function push(location){\n  return originalPush.call(this, location).catch(err=>err);\n}\n\n\n// const { homeName } = config;\nVue.use(VueRouter)\nconst router = new VueRouter({\n  routes,\n  mode: 'history',\n  base: config.publicPath,\n});\n\n// const LOGIN_PAGE_NAME = 'login';\n// const REGISTER_PAGE_NAME = 'register';\n// const FORGET_PWD_PAGE_NAME = 'forgetpwd';\n// const publicPages = ['start', LOGIN_PAGE_NAME, REGISTER_PAGE_NAME, FORGET_PWD_PAGE_NAME];\n// router.beforeEach((to, from, next) => {\n//   if (!isInPrerenderMode) {\n//     iView.LoadingBar.start();\n//   }\n//   const token = getToken();\n//   const authRequired = !publicPages.includes(to.name);\n//   // if (!token && to.name !== LOGIN_PAGE_NAME) {\n\n// });\n// router.afterEach((to) => {\n//   if (!isInPrerenderMode) {\n//     ViewUI.LoadingBar.finish();\n//   }\n//   window.scrollTo(0, 0);\n// });\nrouter.beforeEach(function(to, from, next) {\n  // console.log(\"beforeEach username===> \", store.state.user.curUserName);\n  ViewUI.LoadingBar.start();\n\n  let userName = store.state.user.curUserName || '';\n  if (userName == '') {\n    if (to.path !== '/login') {\n      return next({path: '/login'});\n    }\n  };\n\n  let roleAdmin = store.state.user.adminRole || '';\n  if (roleAdmin == 'supervisor_admin') {\n    if (to.path === '/') {\n      return next({path: '/business-information/basic-information'});\n    }\n  };\n  if (roleAdmin == 'merchant_admin') {\n    if (to.path === '/') {\n      return next({path: '/business-information/basic-information'});\n    }\n  };\n\n  next();\n});\n\nrouter.afterEach(route => {\n  ViewUI.LoadingBar.finish();\n});\n\nexport default router\n"]}]}