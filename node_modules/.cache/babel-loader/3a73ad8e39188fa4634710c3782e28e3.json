{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js!/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/common/login/thirdauth.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/common/login/thirdauth.vue","mtime":1638355006778},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL1x1NURFNVx1NEY1Qy9waWNfYWQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBTdGF0ZSwgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RoaXJkTG9naW5Nb2RhbCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb2Nlc3NUZXh0OiAn56ys5LiJ5pa55o6I5p2D55m75b2V5LitLi4uLi4uJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoewogICAgdGhpcmRUb2tlbjogZnVuY3Rpb24gdGhpcmRUb2tlbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYXV0aC5pY3BBY2Nlc3NUb2tlbjsKICAgIH0sCiAgICBzbXRVc2VySW5mbzogZnVuY3Rpb24gc210VXNlckluZm8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXIudXNlckluZm87CiAgICB9CiAgfSkpLCBtYXBHZXR0ZXJzKFsnaGFzV2FsbGV0J10pKSwge30sIHsKICAgIHRoaXJkQ29kZTogZnVuY3Rpb24gdGhpcmRDb2RlKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUucXVlcnkuY29kZTsKICAgIH0KICB9KSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnZmV0Y2hJY3BBY2Nlc3NUb2tlbicsICdpY3BBdXRoTG9naW4nXSkpLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuZmV0Y2hJY3BBY2Nlc3NUb2tlbih7CiAgICAgIGdyYW50X3R5cGU6ICdhdXRob3JpemF0aW9uX2NvZGUnLAogICAgICBjb2RlOiB0aGlzLnRoaXJkQ29kZQogICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnByb2Nlc3NUZXh0ID0gJ+esrOS4ieaWueW3suaOiOadg++8jOeUqOaIt+eZu+W9leS4rS4uLi4uLic7CgogICAgICBfdGhpcy5pY3BBdXRoTG9naW4oewogICAgICAgIGFjY2Vzc190b2tlbjogX3RoaXMudGhpcmRUb2tlbgogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5wcm9jZXNzVGV4dCA9ICfnrKzkuInmlrnnlKjmiLfnmbvlvZXmiJDlip8nOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMucHJvY2Vzc1RleHQgPSAn56ys5LiJ5pa555So5oi355m75b2V5oiQ5Yqf5aSx6LSlJzsKCiAgICAgICAgX3RoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyKTsKICAgICAgfSk7CiAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgIF90aGlzLnByb2Nlc3NUZXh0ID0gJ+esrOS4ieaWueaOiOadg+Wksei0pSc7CgogICAgICBfdGhpcy4kTWVzc2FnZS5lcnJvcihlcnIpOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["thirdauth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,SAAA,UAAA,EAAA,QAAA,EAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,WAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,QAAA,gDACA,QAAA,CAAA;AACA,IAAA,UAAA,EAAA,oBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,cAAA;AAAA,KADA;AAEA,IAAA,WAAA,EAAA,qBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,QAAA;AAAA;AAFA,GAAA,CADA,GAKA,UAAA,CAAA,CAAA,WAAA,CAAA,CALA;AAMA,IAAA,SANA,uBAMA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA;AACA;AARA,IAPA;AAiBA,EAAA,OAAA,oBACA,UAAA,CAAA,CAAA,qBAAA,EAAA,cAAA,CAAA,CADA,CAjBA;AAoBA,EAAA,OApBA,qBAoBA;AAAA;;AACA,SAAA,mBAAA,CACA;AACA,MAAA,UAAA,EAAA,oBADA;AAEA,MAAA,IAAA,EAAA,KAAA;AAFA,KADA,EAKA,IALA,CAKA,YAAA;AACA,MAAA,KAAA,CAAA,WAAA,GAAA,oBAAA;;AACA,MAAA,KAAA,CAAA,YAAA,CAAA;AAAA,QAAA,YAAA,EAAA,KAAA,CAAA;AAAA,OAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,WAAA;AACA,OAFA,WAEA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,aAAA;;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA;AACA,OALA;AAMA,KAbA,WAaA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,WAAA,GAAA,SAAA;;AACA,MAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA;AACA,KAhBA;AAiBA;AAtCA,CAAA","sourcesContent":["<template>\n    <div class=\"third-auth-page\">\n        <!-- <Row v-if=\"!needThirdUser\" :gutter=\"16\">\n            <Col span=\"11\">\n                <Card style=\"width: 320px\">\n                    <div slot=\"title\">\n                        <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                        云门户\n                    </div>\n                    <List v-if=\"thirdUserinfo\">\n                        <ListItem style=\"text-align:center\">\n                            {{ `账号: ${thirdUserinfo.userName}` }}\n                        </ListItem>\n                         <ListItem style=\"text-align:center\">\n                            {{ `名称: ${thirdUserinfo.name}` }}\n                        </ListItem>\n                    </List>\n                </Card>\n            </Col>\n            <Col span=\"2\">\n                <Spin size=\"large\">\n                    <Icon type=\"md-sync\" size=24 class=\"demo-spin-icon-load\"></Icon>\n                </Spin>\n            </Col>\n            <Col span=\"11\">\n                <Card style=\"width: 320px\">\n                    <div slot=\"title\">\n                        <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                        小付通行证\n                    </div>\n                    <List v-if=\"smtUserInfo\">\n                        <ListItem style=\"text-align:center\">\n                            {{ `账号: ${smtUserInfo.username}` }}\n                        </ListItem>\n                         <ListItem style=\"text-align:center\">\n                            {{ `名称: ${smtUserInfo.name}` }}\n                        </ListItem>\n                    </List>\n                    <Form ref=\"smtLoginForm\"></Form>\n                </Card>\n            </Col>\n        </Row> -->\n        <Spin v-if=\"!smtUserInfo\" size=\"large\">\n            <Icon type=\"ios-loading\" size=24 class=\"demo-spin-icon-load\"></Icon>\n            <div>{{ processText }}</div>\n        </Spin>\n        <Card  v-else style=\"width: 480px\">\n            <div slot=\"title\">\n                <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                小付通行证\n            </div>\n            <List>\n                <ListItem style=\"text-align:center\">\n                    {{ `账号: ${smtUserInfo.reg_username}` }}\n                </ListItem>\n                <ListItem style=\"text-align:center\">\n                    {{ `名称: ${smtUserInfo.nickname}` }}\n                </ListItem>\n                <ListItem>\n                    {{ `钱包状态:` }}\n                    <Tag v-if=\"hasWallet\" color=\"success\">已开通</Tag>\n                    <div v-else>\n                    <Tag color=\"error\">未开通</Tag>\n                    请您选择<router-link :to=\"{ name: 'RegComplete', params: { step: 'open_wallet' } }\">立即开通</router-link>\n                    {{`                  或者                  `}}\n                    <router-link to=\"/\">暂时跳过</router-link>\n                    </div>\n                </ListItem>\n            </List>\n        </Card>\n    </div>\n</template>\n<script>\n    import { mapActions, mapState, mapGetters } from 'vuex';\n\n    export default {\n        name: 'ThirdLoginModal',\n        data() {\n            return {\n                processText: '第三方授权登录中......'\n            }\n        },\n        computed: {\n            ...mapState({\n                thirdToken: state => state.auth.icpAccessToken,\n                smtUserInfo: state => state.user.userInfo\n            }),\n            ...mapGetters(['hasWallet']),\n            thirdCode() {\n                return this.$route.query.code\n            }\n        },\n        methods: {\n            ...mapActions(['fetchIcpAccessToken', 'icpAuthLogin'])\n        },\n        mounted () {\n            this.fetchIcpAccessToken(\n                {\n                    grant_type: 'authorization_code',\n                    code: this.thirdCode\n                }\n            ).then(() => {\n                this.processText = '第三方已授权，用户登录中......';\n                this.icpAuthLogin({ access_token: this.thirdToken }).then(() => {\n                    this.processText = '第三方用户登录成功';\n                }).catch(err => {\n                    this.processText = '第三方用户登录成功失败';\n                    this.$Message.error(err);\n                    });\n            }).catch(err => {\n                this.processText = '第三方授权失败';\n                this.$Message.error(err);\n            });\n        },\n    }\n</script>\n\n<style lang=\"less\" scoped>\n.third-auth-page {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    @keyframes ani-demo-spin {\n        from { transform: rotate(0deg);}\n        50%  { transform: rotate(180deg);}\n        to   { transform: rotate(360deg);}\n    }\n    .demo-spin-icon-load{\n        animation: ani-demo-spin 1s linear infinite;\n    }\n    .ivu-row {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n}\n</style>\n"],"sourceRoot":"src/views/common/login"}]}