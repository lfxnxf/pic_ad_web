{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/setting/food-card-setting/components/add-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/setting/food-card-setting/components/add-modal.vue","mtime":1638355006800},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGFuZy9jYW50ZWVuX21hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBidG5Mb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIGNhcmRfaWQ6ICcnLAogICAgICAgIGNhcmRfbm86ICcnLAogICAgICAgIHJvbGVfaWQ6IHVuZGVmaW5lZCwKICAgICAgICByb2xlX25hbWU6ICcnLAogICAgICAgIGNhcmRfdHlwZTogJzInLAogICAgICAgIGNhcmRfdHlwZV9kZXNjOiAnJywKICAgICAgICBpc19lbmFibGU6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgY2FyZF9ubzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWwsemkkOWNoeWPtycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBjYXJkX3R5cGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nlsLHppJDljaHnsbvlnosnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICByb2xlX2lkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5bCx6aSQ5Lq65ZGY57G75Z6LJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgdHlwZTogJ251bWJlcicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6IHsKICAgIGFkZE1vZGFsOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jYXJkLmFkZE1vZGFsOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEFkZENhcmRNb2RhbCcsIHZhbCk7CiAgICAgIH0KICAgIH0sCiAgICByb2xlTGlzdDogZnVuY3Rpb24gcm9sZUxpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5yb2xlLnJvbGVMaXN0LnJlc3VsdDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZENhcmQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9hZGRDYXJkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWRkTW9kYWwudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgICAgICAgICAgIGNhcmRfbm86IF90aGlzLmZvcm0uY2FyZF9ubywKICAgICAgICAgICAgICAgICAgICAgIGNhcmRfdHlwZTogX3RoaXMuZm9ybS5jYXJkX3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICByb2xlX2lkOiBfdGhpcy5mb3JtLnJvbGVfaWQKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NhcmRBZGQnLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5yZXR1cm5fY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOaIkOWKn++8gScpOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdjYXJkTGlzdCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlX3NpemU6IF90aGlzLiRwYXJlbnQucGFnZV9zaXplCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0QWRkQ2FyZE1vZGFsJywgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHJlZnMuYWRkTW9kYWwucmVzZXRGaWVsZHMoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5idG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYWRkQ2FyZCgpIHsKICAgICAgICByZXR1cm4gX2FkZENhcmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFkZENhcmQ7CiAgICB9KCkKICB9Cn07"},{"version":3,"sources":["add-modal.vue"],"names":[],"mappings":"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","sourcesContent":["<!--  -->\n<template>\n  <Modal\n    v-model=\"addModal\"\n    title=\"新增就餐卡\"\n    :footer-hide=\"true\"\n    width=\"420px\">\n    <Form :model=\"form\" :label-width=\"120\" ref=\"addModal\" :rules=\"ruleForm\">\n      <FormItem label=\"卡号\" prop=\"card_no\">\n        <Input v-model=\"form.card_no\" style=\"width: 200px\" placeholder=\"请输入卡号\" />\n      </FormItem>\n      <FormItem label=\"卡类型\" prop=\"card_type\">\n         <RadioGroup v-model=\"form.card_type\">\n          <Radio label=\"2\">储值卡</Radio>\n          <Radio label=\"1\">计次卡</Radio>\n        </RadioGroup>\n      </FormItem>\n      <FormItem v-if=\"form.card_type==1\" label=\"人员类型\" prop=\"role_id\">\n        <Select placeholder=\"请选择人员类型\" v-model=\"form.role_id\" style=\"width:200px\">\n          <Option v-for=\"item in roleList\" :key=\"item.role_id\" :value=\"item.role_id\" :label=\"item.name\">\n            <span>{{ item.name }}</span>\n          </Option>\n        </Select>\n      </FormItem>\n      <div class=\"text-center margin-bottom-20 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setAddCardModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"addCard\">确定</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      btnLoading: false,\n      form: {\n        card_id: '',\n        card_no: '',\n        role_id: undefined,\n        role_name: '',\n        card_type: '2',\n        card_type_desc: '',\n        is_enable: ''\n      },\n      ruleForm: {\n        card_no: [\n          { required: true, message: '请输入就餐卡号', trigger: 'blur' }\n        ],\n        card_type: [\n          { required: true, message: '请选择就餐卡类型', trigger: 'change' }\n        ],\n        role_id: [\n          { required: true, message: '请选择就餐人员类型', trigger: 'change', type: 'number' }\n        ],\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    addModal:{\n      get(){\n        return this.$store.state.card.addModal;\n      },\n      set(val){\n        this.$store.commit('setAddCardModal', val)\n      }\n    },\n    roleList() {\n      return this.$store.state.role.roleList.result;\n    },\n\n  },\n\n  methods: {\n    addCard: async function(){\n      this.$refs.addModal.validate((valid) => {\n        if (valid) {\n          this.btnLoading = true;\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            card_no: this.form.card_no,\n            card_type: this.form.card_type,\n            role_id: this.form.role_id\n          }\n          this.$store.dispatch('cardAdd', params).then(res => {\n            if (res.return_code == 0) {\n              this.btnLoading = false;\n              this.$Message.success('添加成功！')\n              this.$store.dispatch('cardList', {\n                merchant_id: this.$store.state.user.curMerchantId,\n                page_size: this.$parent.page_size\n              });\n              this.$store.commit('setAddCardModal', false);\n              this.$refs.addModal.resetFields();\n            }\n          }).catch(err=>{\n            this.btnLoading = false;\n          });\n        }\n      });\n    },\n  }\n}\n\n</script>\n<style lang='less' scoped>\n</style>\n"],"sourceRoot":"src/views/setting/food-card-setting/components"}]}