{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js!/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/setting/department-setting/components/add-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/setting/department-setting/components/add-modal.vue","mtime":1638523446917},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGFuZy9cdTVERTVcdTRGNUMvcGljX2FkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnOwppbXBvcnQgeyBnZXRUcmVlTm9kZXMsIGJ1aWxkVHJlZSwgYnVpbGRUcmVlQ2hlY2tlZCB9IGZyb20gIkAvbGlicy91dGlsIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBidG5Mb2FkaW5nOiBmYWxzZSwKICAgICAgYnRuTG9hZGluZzI6IGZhbHNlLAogICAgICBidG5Mb2FkaW5nMzogZmFsc2UsCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIG1lcmNoYW50X25hbWU6ICcnLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0cmVlRGF0YTogW10sCiAgICAgIGRlcGFydG1lbnRzOiBbXSwKICAgICAgZGVwYXJ0bWVudElkczogW10KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBjb21wdXRlZDogewogICAgbG9hZGluZzogZnVuY3Rpb24gbG9hZGluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlckxvYWRpbmc7CiAgICB9LAogICAgY3VycmVudE1lcmNoYW50SWQ6IGZ1bmN0aW9uIGN1cnJlbnRNZXJjaGFudElkKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkOwogICAgfSwKICAgIGN1cnJlbnRNZXJjaGFudE5hbWU6IGZ1bmN0aW9uIGN1cnJlbnRNZXJjaGFudE5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50TmFtZTsKICAgIH0sCiAgICBjdXJyZW50T3JnSWQ6IGZ1bmN0aW9uIGN1cnJlbnRPcmdJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyT3JnSWQ7CiAgICB9LAogICAgc2Vzc2lvbklkOiBmdW5jdGlvbiBzZXNzaW9uSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnRva2VuOwogICAgfSwKICAgIGVtcFVzZXJDb2RlOiBmdW5jdGlvbiBlbXBVc2VyQ29kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuZW1wVXNlckNvZGU7CiAgICB9LAogICAgLy/pg6jpl6jliJfooagKICAgIGRlcGFydG1lbnRMaXN0OiBmdW5jdGlvbiBkZXBhcnRtZW50TGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuZGVwYXJ0bWVudExpc3Q7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0RGF0YTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXREYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5tZXJjaGFudF9uYW1lID0gdGhpcy5jdXJyZW50TWVyY2hhbnROYW1lOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREZXBhcnRtZW50TGlzdCgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeURlcGFydG1lbnRMaXN0KHJlcyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbml0RGF0YSgpIHsKICAgICAgICByZXR1cm4gX2luaXREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbml0RGF0YTsKICAgIH0oKSwKICAgIC8v6I635Y+W5LyB5Lia6YOo6Zeo5YiX6KGoCiAgICBxdWVyeURlcGFydG1lbnRMaXN0OiBmdW5jdGlvbiBxdWVyeURlcGFydG1lbnRMaXN0KHN0ckNoZWNrZWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXMsIHZhbGlkUmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdkZXBhcnRtZW50TGlzdCcsIHsKICAgICAgICAgICAgICAgICAgb3JnX2lkOiBfdGhpcy5jdXJyZW50T3JnSWQsCiAgICAgICAgICAgICAgICAgIHNlc3Npb25pZDogX3RoaXMuc2Vzc2lvbklkLAogICAgICAgICAgICAgICAgICBsaW1pdDogMjAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInF1ZXJ5RGVwYXJ0bWVudExpc3Q9PT1yZXM+Pj4iICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICAgICAgICB2YWxpZFJlcyA9IF8uZmlsdGVyKHJlcywgZnVuY3Rpb24gKGN1cikgewogICAgICAgICAgICAgICAgICByZXR1cm4gY3VyLnN0YXR1cyA9PSAxOwogICAgICAgICAgICAgICAgfSk7IC8vIGNvbnNvbGUubG9nKCJxdWVyeURlcGFydG1lbnRMaXN0PT09dmFsaWRSZXM+Pj4iICsgSlNPTi5zdHJpbmdpZnkodmFsaWRSZXMpKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmNvbW1pdCgiVXBkYXRlRW1wRGVwYXJ0bWVudExpc3QiLCB2YWxpZFJlcyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGlmICh2YWxpZFJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnRyZWVEYXRhID0gYnVpbGRUcmVlQ2hlY2tlZCh2YWxpZFJlcywge30sICdkZXBhcnRtZW50X2lkJywgJ3BhcmVudGlkJywgJ2NoaWxkcmVuJywgJzAnLCBzdHJDaGVja2VkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2hvaWNlQWxsOiBmdW5jdGlvbiBjaG9pY2VBbGwoZGF0YSkgewogICAgICB2YXIgY2hvaWNlc0RhdGEgPSB0aGlzLiRyZWZzLnRyZWUzLmdldENoZWNrZWRBbmRJbmRldGVybWluYXRlTm9kZXMoKTsKICAgICAgdGhpcy5kZXBhcnRtZW50cyA9IF8ubWFwKGNob2ljZXNEYXRhLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgICBvcmdfaWQ6IGl0ZW0ub3JnX2lkLAogICAgICAgICAgcGFyZW50aWQ6IGl0ZW0ucGFyZW50aWQsCiAgICAgICAgICBkZXBhcnRtZW50X2lkOiBpdGVtLmRlcGFydG1lbnRfaWQKICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCiAgICBzeW5jRGVwYXJ0bWVudExpc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zeW5jRGVwYXJ0bWVudExpc3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICB2YXIgcm9vdFRyZWUsIGZpbmRJdGVtLCBCYXNlNjQsIHBhcmFtczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5idG5Mb2FkaW5nID0gdHJ1ZTsgLy/nu5npg6jpl6jmt7vliqDot5/oioLngrnvvJsKCiAgICAgICAgICAgICAgICByb290VHJlZSA9IHsKICAgICAgICAgICAgICAgICAgZGVwYXJ0bWVudF9pZDogJzAnLAogICAgICAgICAgICAgICAgICBwYXJlbnRpZDogIiIsCiAgICAgICAgICAgICAgICAgIG5hbWU6ICLlhajpg6jpg6jpl6giLAogICAgICAgICAgICAgICAgICBvcmdfaWQ6IHRoaXMuY3VycmVudE9yZ0lkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZmluZEl0ZW0gPSBfLmZpbmQodGhpcy5kZXBhcnRtZW50cywgZnVuY3Rpb24gKGN1cikgewogICAgICAgICAgICAgICAgICByZXR1cm4gY3VyLmRlcGFydG1lbnRfaWQgPT0gJzAnOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKGZpbmRJdGVtID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICB0aGlzLmRlcGFydG1lbnRzLnB1c2gocm9vdFRyZWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZmluZEl0ZW1bJ29yZ19pZCddID0gdGhpcy5jdXJyZW50T3JnSWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgQmFzZTY0ID0gcmVxdWlyZSgnanMtYmFzZTY0JykuQmFzZTY0OwogICAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogdGhpcy5jdXJyZW50TWVyY2hhbnRJZCwKICAgICAgICAgICAgICAgICAgZGVwYXJ0bWVudHM6IEJhc2U2NC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodGhpcy5kZXBhcnRtZW50cykpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzeW5jRGVwYXJ0bWVudHMnLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBpZiAocmVzLnJldHVybl9jb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczIuYnRuTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczIuJE1lc3NhZ2Uuc3VjY2Vzcygn5ZCM5q2l6YOo6Zeo5L+h5oGv5oiQ5Yqf77yBJyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzeW5jRGVwYXJ0bWVudExpc3QoKSB7CiAgICAgICAgcmV0dXJuIF9zeW5jRGVwYXJ0bWVudExpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHN5bmNEZXBhcnRtZW50TGlzdDsKICAgIH0oKSwKICAgIGdldERlcGFydG1lbnRMaXN0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0RGVwYXJ0bWVudExpc3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBwYXJhbXMsIHJlcywgcmVzVHJlZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogdGhpcy5jdXJyZW50TWVyY2hhbnRJZCwKICAgICAgICAgICAgICAgICAgbGV2ZWw6IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldE1lcmNoYW50RGVwYXJ0bWVudExpc3QnLCBwYXJhbXMpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXMucmV0dXJuX2NvZGUgPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+iOt+WPlumDqOmXqOS/oeaBr+aIkOWKn++8gScpOwogICAgICAgICAgICAgICAgcmVzVHJlZSA9IGdldFRyZWVOb2RlcyhyZXMuZGF0YSwgJ2RlcGFydG1lbnRfaWQnLCAnY2hpbGRyZW4nKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCByZXNUcmVlKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0RGVwYXJ0bWVudExpc3QoKSB7CiAgICAgICAgcmV0dXJuIF9nZXREZXBhcnRtZW50TGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0RGVwYXJ0bWVudExpc3Q7CiAgICB9KCksCiAgICAvLyDlkIzmraXlkZjlt6UKICAgIHN5bmNFbXBsb3llZTogZnVuY3Rpb24gc3luY0VtcGxveWVlKGVudGl0eURhdGEpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKGVudGl0eURhdGEgPT0gJ2RlcGFydG1lbnQnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5idG5Mb2FkaW5nMiA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVudGl0eURhdGEgPT0gJ2VtcGxveWVlJykgewogICAgICAgICAgICAgICAgICBfdGhpczMuYnRuTG9hZGluZzMgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdpY2xvdWRTeW5jJywgewogICAgICAgICAgICAgICAgICBvcmdfaWQ6IF90aGlzMy4kc3RvcmUuc3RhdGUudXNlci5jdXJPcmdJZCwKICAgICAgICAgICAgICAgICAgZW50aXR5OiBlbnRpdHlEYXRhCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ1LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzLnJldHVybl9jb2RlICE9PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMy4kTWVzc2FnZS5lcnJvcihyZXMucmV0dXJuX21lc3NhZ2UpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3RoaXMzLmJ0bkxvYWRpbmcyID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczMuYnRuTG9hZGluZzMgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczMuJE1lc3NhZ2Uuc3VjY2Vzcygn5ZCM5q2l5pWw5o2u5ZG95Luk5Y+R6YCB5oiQ5Yqf77yM6K+356iN5ZCO5p+l55yL5ZCM5q2l5pWw5o2u57uT5p6c77yBJyk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgX3RoaXMzLmJ0bkxvYWRpbmcyID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczMuYnRuTG9hZGluZzMgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1swLCAxM11dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0RGF0YSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGRlcGFydG1lbnRNb2RhbDogZnVuY3Rpb24gZGVwYXJ0bWVudE1vZGFsKHZhbCkgewogICAgICBpZiAoIXZhbCkgewogICAgICAgIHRoaXMuYnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuYnRuTG9hZGluZzIgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["add-modal.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 同步部门信息 -->\n<template>\n  <Row :gutter=\"15\">\n    <Col span=\"12\">\n      <Card title=\"设置商户部门\">\n\n          <Form class=\"margin-top-20\" :label-width=\"100\">\n            <FormItem label=\"商户名称：\">\n              <span class=\"font-blod\" style=\"padding-left:12px\">{{ merchant_name }}</span>\n            </FormItem>\n            <Form inline :label-width=\"100\">\n              <FormItem class=\"tree\" label=\"选择部门：\">\n                <Tree :data=\"treeData\" @on-check-change=\"choiceAll\" ref=\"tree3\" show-checkbox multiple></Tree>\n              </FormItem>\n              <FormItem>\n                <Button type=\"primary\" :loading=\"btnLoading\" @click=\"syncDepartmentList\">提交</Button>\n              </FormItem>\n            </Form>\n          </Form>\n\n      </Card>\n    </Col>\n    <Col span=\"12\">\n      <Card title=\"同步云门户数据到用户中心\">\n\n          <Form class=\"margin-top-20\" :label-width=\"100\">\n\n            <FormItem class=\"margin-bottom-40\" label=\"同步部门：\">\n              <Button class=\"margin-right-20\" type='primary' :loading=\"btnLoading2\" icon=\"md-refresh\"\n                      @click=\"syncEmployee('department')\">同步部门\n              </Button>\n              <!-- <span class=\"orange-color\"><Icon class=\"margin-right-5\" type=\"md-information-circle\"/>同步部门数据</span> -->\n            </FormItem>\n          </Form>\n          <Form class=\"margin-top-20\" :label-width=\"100\">\n\n            <FormItem class=\"margin-bottom-40\" label=\"同步人员：\">\n              <Button class=\"margin-right-20\" type='primary' :loading=\"btnLoading3\" icon=\"md-refresh\"\n                      @click=\"syncEmployee('employee')\">同步人员\n              </Button>\n              <!-- <span class=\"orange-color\"><Icon class=\"margin-right-5\" type=\"md-information-circle\"/>同步人员数据</span> -->\n            </FormItem>\n\n          </Form>\n\n      </Card>\n    </Col>\n  </Row>\n\n</template>\n\n<script>\nimport _ from 'underscore';\nimport {getTreeNodes, buildTree, buildTreeChecked} from \"@/libs/util\";\nexport default {\n  data() {\n    return {\n      btnLoading: false,\n      btnLoading2: false,\n      btnLoading3: false,\n      isEdit: false,\n      merchant_name: '',\n      tableData: [],\n      treeData: [],\n      departments: [],\n      departmentIds: [],\n    };\n  },\n\n  components: {},\n\n  computed: {\n    loading() {\n      return this.$store.state.user.userLoading;\n    },\n    currentMerchantId(){\n      return this.$store.state.user.curMerchantId;\n    },\n    currentMerchantName(){\n      return this.$store.state.user.curMerchantName;\n    },\n    currentOrgId() {\n      return this.$store.state.user.curOrgId;\n    },\n    sessionId() {\n      return this.$store.state.user.token;\n    },\n    empUserCode() {\n      return this.$store.state.user.empUserCode;\n    },\n\n    //部门列表\n    departmentList() {\n      return this.$store.state.user.departmentList;\n    },\n\n  },\n\n  methods: {\n    initData: async function() {\n      this.merchant_name = this.currentMerchantName;\n      let res = await this.getDepartmentList();\n      await this.queryDepartmentList(res);\n    },\n\n    //获取企业部门列表\n    async queryDepartmentList(strChecked) {\n      let res = await this.$store.dispatch('departmentList', { org_id: this.currentOrgId, sessionid: this.sessionId,limit: 2000 });\n      // console.log(\"queryDepartmentList===res>>>\" + JSON.stringify(res));\n      let validRes = _.filter(res, cur => {return cur.status == 1 });\n      // console.log(\"queryDepartmentList===validRes>>>\" + JSON.stringify(validRes));\n      await this.$store.commit(\"UpdateEmpDepartmentList\", validRes);\n      if (validRes.length > 0) {\n        this.treeData = buildTreeChecked(validRes, {}, 'department_id', 'parentid', 'children', '0', strChecked);\n      }\n    },\n\n    choiceAll(data){\n      let choicesData = this.$refs.tree3.getCheckedAndIndeterminateNodes();\n      this.departments = _.map(choicesData, function(item){ return {name: item.name, org_id: item.org_id, parentid: item.parentid, department_id: item.department_id}; });\n    },\n\n    syncDepartmentList: async function() {\n      this.btnLoading = true;\n      //给部门添加跟节点；\n      let rootTree={\n        department_id: '0',\n        parentid: \"\",\n        name: \"全部部门\",\n        org_id: this.currentOrgId,\n      };\n\n      let findItem = _.find(this.departments, cur=>{return cur.department_id == '0' });\n\n      if (findItem == undefined){\n        this.departments.push(rootTree);\n      }\n      else{\n        findItem['org_id'] = this.currentOrgId;\n      }\n\n      let Base64 = require('js-base64').Base64;\n\n      let params = {\n        merchant_id: this.currentMerchantId,\n        departments: Base64.encode(JSON.stringify(this.departments)),\n      };\n\n      await this.$store.dispatch('syncDepartments', params).then(res=>{\n        if(res.return_code==0){\n          this.btnLoading = false;\n          this.$Message.success('同步部门信息成功！');\n        }\n      }).catch(err=>{\n        this.btnLoading = false;\n      });\n    },\n\n    getDepartmentList: async function() {\n\n      let params = {\n        merchant_id: this.currentMerchantId,\n        level: 1,\n      };\n\n      let res = await this.$store.dispatch('getMerchantDepartmentList', params);\n      if(res.return_code==0){\n          this.$Message.success('获取部门信息成功！');\n          let resTree = getTreeNodes(res.data, 'department_id',  'children');\n          return resTree;\n      }\n    },\n    // 同步员工\n    async syncEmployee(entityData) {\n      try {\n        if(entityData=='department'){\n          this.btnLoading2 = true;\n        }else if(entityData=='employee'){\n          this.btnLoading3 = true;\n        }\n\n        let res = await this.$store.dispatch('icloudSync', { org_id: this.$store.state.user.curOrgId, entity: entityData });\n        if (res.return_code !== 0) {\n          this.$Message.error(res.return_message);\n          return;\n        }\n        this.btnLoading2 = false;\n        this.btnLoading3 = false;\n\n        this.$Message.success('同步数据命令发送成功，请稍后查看同步数据结果！');\n      } catch (e) {\n        // console.log(e);\n        this.btnLoading2 = false;\n        this.btnLoading3 = false;\n      }\n    },\n\n\n  },\n\n  mounted(){\n    this.initData();\n  },\n\n  watch: {\n    departmentModal(val){\n      if(!val){\n        this.btnLoading = false;\n        this.btnLoading2 = false;\n      }\n    }\n  }\n};\n</script>\n<style lang='less' scoped>\n/deep/.ivu-card{\n  height: ~'-webkit-calc(100vh - 40px - 36px)';\n  height: ~'-moz-calc(100vh - 40px - 36px)';\n  height: ~'-ms-calc(100vh - 40px - 36px)';\n  height: ~'-o-calc(100vh - 40px - 36px)';\n  height: calc(100vh - 40px - 36px);\n\n}\n\n/deep/.ivu-input{\n  text-align: right;\n}\n/deep/.ivu-form .tree{\n  .ivu-form-item-content{\n    max-height: 500px;\n    overflow-y: auto;\n    background-color: #fff;\n    border: 1px solid #dcdee2;\n    border-radius: 4px;\n    padding: 0 8px;\n    margin-left: 0 !important;\n  }\n  +.ivu-form-item .ivu-form-item-content{\n    margin-left: 0 !important;\n  }\n  .ivu-btn{\n    position: absolute;\n    right: 0;\n    top: 0;\n  }\n}\n/deep/.ivu-tree{\n  li{\n    margin: 0 !important;\n    line-height: 32px;\n  }\n}\n\n</style>\n"],"sourceRoot":"src/views/setting/department-setting/components"}]}