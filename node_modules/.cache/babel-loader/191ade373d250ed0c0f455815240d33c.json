{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/businessinfo/restaurant-staff/components/modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/businessinfo/restaurant-staff/components/modal.vue","mtime":1639472713064},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL2NhbnRlZW5fbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7CmltcG9ydCB7IHJzYUVuY3J5cHRCeVB1YktleSB9IGZyb20gIkAvbGlicy91dGlsIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgcGhvbmU6ICcnLAogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgcnVsZUZvcm06IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZGY5bel5aeT5ZCNJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHBob25lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5omL5py65Y+3JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHVzZXJuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55m75b2V5ZCNJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55m75b2V5a+G56CBJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHN3aXRjaFNob3c6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6IHsKICAgIHN0YWZmTW9kYWw6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNvbXBhbnkuc3RhZmZNb2RhbDsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTdGFmZk1vZGFsJywgdmFsKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkVXNlcjogZnVuY3Rpb24gYWRkVXNlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuc3RhZmZNb2RhbC52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHZhciBwYXJhbXMgPSBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50SWQKICAgICAgICAgIH0sIF90aGlzLmZvcm0pOwoKICAgICAgICAgIHZhciBwYXNzd29yZCA9IHJzYUVuY3J5cHRCeVB1YktleShfdGhpcy5mb3JtLnBhc3N3b3JkKTsKICAgICAgICAgIHBhcmFtcy5wYXNzd29yZCA9IHBhc3N3b3JkOwoKICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWVyY2hhbnRVc2VyQWRkJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5yZXR1cm5fY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgX3RoaXMuYnRuTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBfdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfmt7vliqDmlLbpk7bnq6/nrqHnkIbotKblj7fmiJDlip/vvIEnKTsKCiAgICAgICAgICAgICAgdmFyIGFyZyA9IHsKICAgICAgICAgICAgICAgIG1lcmNoYW50X2lkOiBfdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkLAogICAgICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgICAgIHBhZ2Vfc2l6ZTogNTAKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21lcmNoYW50VXNlckxpc3QnLCBhcmcpOwoKICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTdGFmZk1vZGFsJywgZmFsc2UpOwoKICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5zdGFmZk1vZGFsLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgb25TdGF0dXNDaGFuZ2U6IGZ1bmN0aW9uIG9uU3RhdHVzQ2hhbmdlKHN0YXR1cykgewogICAgICBjb25zb2xlLmxvZygib25TdGF0dXNDaGFuZ2U9PT0+Pj4iICsgc3RhdHVzKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["modal.vue"],"names":[],"mappings":"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","sourcesContent":["<!--  -->\n<template>\n  <Modal \n    class=\"staff_modal\" \n    v-model=\"staffModal\"\n    title=\"添加收银端管理员\" \n    :footer-hide=\"true\" \n    width=\"450\">\n    <Form class=\"clearfix\" :model=\"form\" ref=\"staffModal\" :rules=\"ruleForm\" :label-width=\"120\">\n      <FormItem label=\"员工姓名\" prop=\"name\">\n        <Input v-model=\"form.name\" style=\"width: 200px\" placeholder=\"请输入员工姓名\" />\n      </FormItem>\n      <FormItem label=\"手机号\" prop=\"phone\">\n        <Input v-model=\"form.phone\" style=\"width: 200px\" placeholder=\"请输入手机号\" />\n      </FormItem>\n      <FormItem label=\"登录名\" prop=\"username\">\n        <Input v-model=\"form.username\" style=\"width: 200px\" placeholder=\"请输入登录名\" />\n      </FormItem>\n      <FormItem label=\"登录密码\" prop=\"password\">\n        <Input v-model=\"form.password\" style=\"width: 200px\" placeholder=\"请输入登录密码\" />\n      </FormItem>\n\n      <div class=\"text-center margin-top-30\">\n        <Button type=\"success\" style=\"width: 200px;\" @click=\"addUser()\">确认</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nimport _ from 'underscore';\nimport {rsaEncryptByPubKey} from \"@/libs/util\";\nexport default {\n  data () {\n    return {\n      form: {\n        name: '',\n        phone: '',\n        username: '',\n        password: '',\n      },\n      ruleForm: {\n        name: [\n          { required: true, message: '请输入员工姓名', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '请输入手机号', trigger: 'blur' }\n        ],\n        username: [\n          { required: true, message: '请输入登录名', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入登录密码', trigger: 'blur' }\n        ],\n      },\n      switchShow: false,\n    };\n  },\n\n  components: {},\n\n  computed: {\n    staffModal:{\n      get(){\n        return this.$store.state.company.staffModal;\n      },\n      set(val){\n        this.$store.commit('setStaffModal', val)\n      }\n    }\n  },\n\n  methods: {\n    addUser(){\n      this.$refs.staffModal.validate((valid) => {\n        if (valid) {\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            ...this.form\n          }\n          let password = rsaEncryptByPubKey(this.form.password);\n          params.password = password;\n\n\n          this.$store.dispatch('merchantUserAdd', params).then(res => {\n            if (res.return_code == 0) {\n              this.btnLoading = false;\n              this.$Message.success('添加收银端管理账号成功！');\n              let arg = {\n                merchant_id: this.$store.state.user.curMerchantId,\n                page: 1,\n                page_size: 50\n              };\n              this.$store.dispatch('merchantUserList', arg);\n              this.$store.commit('setStaffModal', false);\n              this.$refs.staffModal.resetFields();\n            }\n          }).catch(err=>{\n            console.log(err);\n          });\n        }\n      });\n    },\n    onStatusChange(status){\n      console.log(\"onStatusChange===>>>\" + status);\n    },\n  }\n}\n\n</script>\n<style lang='less' scoped>\n\n</style>"],"sourceRoot":"src/views/businessinfo/restaurant-staff/components"}]}