{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/setting/device-setting/components/add-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/setting/device-setting/components/add-modal.vue","mtime":1638355006799},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGFuZy9jYW50ZWVuX21hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnRuTG9hZGluZzogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBkZXZpY2VfY29kZTogJycsCiAgICAgICAgbmFtZTogJycKICAgICAgfSwKICAgICAgcnVsZUZvcm06IHsKICAgICAgICBkZXZpY2VfY29kZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeiuvuWkh+WPtycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6K6+5aSH5ZCN56ewJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBjb21wdXRlZDogewogICAgYWRkTW9kYWw6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmRldmljZS5hZGREZXZpY2VNb2RhbDsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRBZGREZXZpY2VNb2RhbCcsIHZhbCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZERldmljZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2FkZERldmljZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFkZE1vZGFsLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5idG5Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50SWQsCiAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VfY29kZTogX3RoaXMuZm9ybS5kZXZpY2VfY29kZSwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IF90aGlzLmZvcm0ubmFtZQogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGV2aWNlQWRkJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMucmV0dXJuX2NvZGUgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5idG5Mb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfmt7vliqDmiJDlip/vvIEnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGV2aWNlTGlzdCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlX3NpemU6IF90aGlzLiRwYXJlbnQucGFnZV9zaXplCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0QWRkRGV2aWNlTW9kYWwnLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5hZGRNb2RhbC5yZXNldEZpZWxkcygpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBhZGREZXZpY2UoKSB7CiAgICAgICAgcmV0dXJuIF9hZGREZXZpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFkZERldmljZTsKICAgIH0oKQogIH0KfTs="},{"version":3,"sources":["add-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,IAAA,EAAA;AACA,QAAA,WAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAFA;AAMA,MAAA,QAAA,EAAA;AACA,QAAA,WAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,QAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CADA;AAIA,QAAA,IAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AAJA;AANA,KAAA;AAeA,GAjBA;AAmBA,EAAA,UAAA,EAAA,EAnBA;AAqBA,EAAA,QAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,cAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,GAJA,EAIA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,mBAAA,EAAA,GAAA;AACA;AANA;AADA,GArBA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,SAAA;AAAA,+EAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,qBAAA,KAAA,CAAA,QAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,sBAAA,KAAA,EAAA;AACA,oBAAA,KAAA,CAAA,UAAA,GAAA,IAAA;AACA,wBAAA,MAAA,GAAA;AACA,sBAAA,WAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,aADA;AAEA,sBAAA,WAAA,EAAA,KAAA,CAAA,IAAA,CAAA,WAFA;AAGA,sBAAA,IAAA,EAAA,KAAA,CAAA,IAAA,CAAA;AAHA,qBAAA;;AAKA,oBAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,WAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,WAAA,IAAA,CAAA,EAAA;AACA,wBAAA,KAAA,CAAA,UAAA,GAAA,KAAA;;AACA,wBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA;;AACA,wBAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,0BAAA,WAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,aADA;AAEA,0BAAA,SAAA,EAAA,KAAA,CAAA,OAAA,CAAA;AAFA,yBAAA;;AAIA,wBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,mBAAA,EAAA,KAAA;;AACA,wBAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,WAAA;AACA;AACA,qBAXA,WAWA,UAAA,GAAA,EAAA;AACA,sBAAA,KAAA,CAAA,UAAA,GAAA,KAAA;AACA,qBAbA;AAcA;AACA,iBAvBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AADA;AAjCA,CAAA","sourcesContent":["<!-- 新增设备信息 -->\n<template>\n  <Modal\n    v-model=\"addModal\"\n    title=\"新增设备\"\n    :footer-hide=\"true\"\n    width=\"420px\">\n    <Form :model=\"form\" :label-width=\"90\" ref=\"addModal\" :rules=\"ruleForm\">\n      <FormItem label=\"设备号\" prop=\"device_code\">\n        <Input v-model=\"form.device_code\" style=\"width: 200px\" placeholder=\"请输入设备号\" />\n      </FormItem>\n      <FormItem label=\"设备名称\" prop=\"name\">\n        <Input v-model=\"form.name\" style=\"width: 200px\" placeholder=\"请输入设备名称\" />\n      </FormItem>\n      <div class=\"text-center margin-bottom-20 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setAddDeviceModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"addDevice\">确定</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      btnLoading: false,\n      form: {\n        device_code: '',\n        name: ''\n      },\n      ruleForm: {\n        device_code: [\n          { required: true, message: '请输入设备号', trigger: 'blur' }\n        ],\n        name: [\n          { required: true, message: '请输入设备名称', trigger: 'blur' }\n        ],\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    addModal:{\n      get(){\n        return this.$store.state.device.addDeviceModal;\n      },\n      set(val){\n        this.$store.commit('setAddDeviceModal', val)\n      }\n    },\n\n  },\n\n  methods: {\n    addDevice: async function(){\n      this.$refs.addModal.validate((valid) => {\n        if (valid) {\n          this.btnLoading = true;\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            device_code: this.form.device_code,\n            name: this.form.name,\n          }\n          this.$store.dispatch('deviceAdd', params).then(res => {\n            if (res.return_code == 0) {\n              this.btnLoading = false;\n              this.$Message.success('添加成功！')\n              this.$store.dispatch('deviceList', {\n                merchant_id: this.$store.state.user.curMerchantId,\n                page_size: this.$parent.page_size,\n              });\n              this.$store.commit('setAddDeviceModal', false);\n              this.$refs.addModal.resetFields();\n            }\n          }).catch(err=>{\n            this.btnLoading = false;\n          });\n        }\n      });\n    },\n  }\n}\n\n</script>\n<style lang='less' scoped>\n</style>\n"],"sourceRoot":"src/views/setting/device-setting/components"}]}