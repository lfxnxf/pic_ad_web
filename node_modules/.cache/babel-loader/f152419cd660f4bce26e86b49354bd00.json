{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js!/Users/zhang/工作/pic_ad/src/libs/util.js","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/libs/util.js","mtime":1640065471601},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvemhhbmcvXHU1REU1XHU0RjVDL3BpY19hZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvemhhbmcvXHU1REU1XHU0RjVDL3BpY19hZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsgLy8gY29va2ll5L+d5a2Y55qE5aSp5pWwCgppbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnJzsKaW1wb3J0IHsgZm9yRWFjaCwgaGFzT25lT2YsIG9iakVxdWFsIH0gZnJvbSAnQC9saWJzL3Rvb2xzJzsKaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7CmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdjcnlwdG8nOwppbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAiaHRtbDJjYW52YXMiOwppbXBvcnQgSlNQREYgZnJvbSAianNwZGYiOwppbXBvcnQgeyBKU0VuY3J5cHQgfSBmcm9tICdqc2VuY3J5cHQnOwpleHBvcnQgdmFyIGdldFJhbmRvbSA9IGZ1bmN0aW9uIGdldFJhbmRvbSgpIHsKICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTk5OTk5KS50b1N0cmluZygpOwp9OwpleHBvcnQgdmFyIGlzSW5QcmVyZW5kZXJNb2RlID0gd2luZG93Ll9fSVNfSU5fUFJFUkVOREVSX01PREUgfHwgZmFsc2U7CmV4cG9ydCB2YXIgZGVsYXlBZnRlclJlbmRlciA9IGlzSW5QcmVyZW5kZXJNb2RlID8gNTAwIDogMDsKZXhwb3J0IHZhciBUT0tFTl9LRVkgPSAndG9rZW4nOwpleHBvcnQgdmFyIFNFU1NJT05fS0VZID0gJ3Nlc3Npb25pZCc7CmV4cG9ydCB2YXIgSURfVFlQRV9EQ1QgPSB7CiAgJzEnOiAn6Lqr5Lu96K+BJywKICAnMic6ICfmiqTnhacnLAogICczJzogJ+WFtuS7licKfTsKZXhwb3J0IHZhciBzZXRUb2tlbiA9IGZ1bmN0aW9uIHNldFRva2VuKHRva2VuKSB7CiAgQ29va2llcy5zZXQoVE9LRU5fS0VZLCB0b2tlbiwgewogICAgZXhwaXJlczogY29uZmlnLmNvb2tpZUV4cGlyZXMgfHwgMQogIH0pOwp9OwpleHBvcnQgdmFyIGdldFRva2VuID0gZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgdmFyIHRva2VuID0gQ29va2llcy5nZXQoVE9LRU5fS0VZKTsKICBpZiAodG9rZW4pIHJldHVybiB0b2tlbjtlbHNlIHJldHVybiBmYWxzZTsKfTsKZXhwb3J0IHZhciBzZXRTZXNzaW9uID0gZnVuY3Rpb24gc2V0U2Vzc2lvbihzZXNzaW9uKSB7CiAgQ29va2llcy5zZXQoU0VTU0lPTl9LRVksIHNlc3Npb24sIHsKICAgIGV4cGlyZXM6IGNvbmZpZy5jb29raWVFeHBpcmVzIHx8IDEKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRTZXNzaW9uID0gZnVuY3Rpb24gZ2V0U2Vzc2lvbigpIHsKICB2YXIgc2Vzc2lvbiA9IENvb2tpZXMuZ2V0KFNFU1NJT05fS0VZKTsKICBpZiAoc2Vzc2lvbikgcmV0dXJuIHNlc3Npb247ZWxzZSByZXR1cm4gZmFsc2U7Cn07CmV4cG9ydCB2YXIgcmVtb3ZlQ29va2llcyA9IGZ1bmN0aW9uIHJlbW92ZUNvb2tpZXMoKSB7CiAgQ29va2llcy5yZW1vdmUoJ2F2YXRhcicpOwogIENvb2tpZXMucmVtb3ZlKCd0b2tlbicpOwogIENvb2tpZXMucmVtb3ZlKCduaWNrbmFtZScpOwogIENvb2tpZXMucmVtb3ZlKCdsYXN0X2xvZ2luX3RpbWUnKTsKfTsKZXhwb3J0IHZhciBoYXNDaGlsZCA9IGZ1bmN0aW9uIGhhc0NoaWxkKGl0ZW0pIHsKICByZXR1cm4gaXRlbS5jaGlsZHJlbiAmJiBpdGVtLmNoaWxkcmVuLmxlbmd0aCAhPT0gMDsKfTsKCnZhciBzaG93VGhpc01lbnVFbGUgPSBmdW5jdGlvbiBzaG93VGhpc01lbnVFbGUoaXRlbSwgYWNjZXNzKSB7CiAgaWYgKGl0ZW0ubWV0YSAmJiBpdGVtLm1ldGEuYWNjZXNzICYmIGl0ZW0ubWV0YS5hY2Nlc3MubGVuZ3RoKSB7CiAgICBpZiAoaGFzT25lT2YoaXRlbS5tZXRhLmFjY2VzcywgYWNjZXNzKSkgcmV0dXJuIHRydWU7ZWxzZSByZXR1cm4gZmFsc2U7CiAgfSBlbHNlIHJldHVybiB0cnVlOwp9OwovKioKICogQHBhcmFtIHtBcnJheX0gbGlzdCDpgJrov4fot6/nlLHliJfooajlvpfliLDoj5zljZXliJfooagKICogQHJldHVybnMge0FycmF5fQogKi8KCgpleHBvcnQgdmFyIGdldE1lbnVCeVJvdXRlciA9IGZ1bmN0aW9uIGdldE1lbnVCeVJvdXRlcihsaXN0LCBhY2Nlc3MpIHsKICAvLyBjb25zb2xlLmxvZygnbGlzdDogJyArIEpTT04uc3RyaW5naWZ5KGxpc3QsIG51bGwsIDQpKTsKICAvLyBjb25zb2xlLmxvZygiZ2V0TWVudUJ5Um91dGVyIHBlcm1pc3Npb246ICIgKyBwZXJtaXNzaW9uKQogIHZhciByZXMgPSBbXTsKICBmb3JFYWNoKGxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoIWl0ZW0ubWV0YSB8fCBpdGVtLm1ldGEgJiYgIWl0ZW0ubWV0YS5oaWRlSW5NZW51KSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgaWNvbjogaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS5pY29uIHx8ICcnLAogICAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgICBtZXRhOiBpdGVtLm1ldGEKICAgICAgfTsKCiAgICAgIGlmICgoaGFzQ2hpbGQoaXRlbSkgfHwgaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS5zaG93QWx3YXlzKSAmJiBzaG93VGhpc01lbnVFbGUoaXRlbSwgYWNjZXNzKSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJpdGVtOiAiICsgSlNPTi5zdHJpbmdpZnkoaXRlbSkpCiAgICAgICAgb2JqLmNoaWxkcmVuID0gZ2V0TWVudUJ5Um91dGVyKGl0ZW0uY2hpbGRyZW4sIGFjY2Vzcyk7CiAgICAgIH0KCiAgICAgIGlmIChpdGVtLm1ldGEgJiYgaXRlbS5tZXRhLmhyZWYpIG9iai5ocmVmID0gaXRlbS5tZXRhLmhyZWY7CiAgICAgIGlmIChzaG93VGhpc01lbnVFbGUoaXRlbSwgYWNjZXNzKSkgcmVzLnB1c2gob2JqKTsKICAgIH0KICB9KTsKICByZXR1cm4gcmVzOwp9OwovKioKICogQHBhcmFtIHtBcnJheX0gcm91dGVNZXRjaGVkIOW9k+WJjei3r+eUsW1ldGNoZWQKICogQHJldHVybnMge0FycmF5fQogKi8KCmV4cG9ydCB2YXIgZ2V0QnJlYWRDcnVtYkxpc3QgPSBmdW5jdGlvbiBnZXRCcmVhZENydW1iTGlzdChyb3V0ZSwgaG9tZVJvdXRlKSB7CiAgdmFyIGhvbWVJdGVtID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBob21lUm91dGUpLCB7fSwgewogICAgaWNvbjogaG9tZVJvdXRlLm1ldGEuaWNvbgogIH0pOwoKICB2YXIgcm91dGVNZXRjaGVkID0gcm91dGUubWF0Y2hlZDsKICBpZiAocm91dGVNZXRjaGVkLnNvbWUoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLm5hbWUgPT09IGhvbWVSb3V0ZS5uYW1lOwogIH0pKSByZXR1cm4gW2hvbWVJdGVtXTsKICB2YXIgcmVzID0gcm91dGVNZXRjaGVkLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0ubWV0YSA9PT0gdW5kZWZpbmVkIHx8ICFpdGVtLm1ldGEuaGlkZTsKICB9KS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHZhciBtZXRhID0gX29iamVjdFNwcmVhZCh7fSwgaXRlbS5tZXRhKTsKCiAgICBpZiAobWV0YS50aXRsZSAmJiB0eXBlb2YgbWV0YS50aXRsZSA9PT0gJ2Z1bmN0aW9uJykgbWV0YS50aXRsZSA9IG1ldGEudGl0bGUocm91dGUpOwogICAgdmFyIG9iaiA9IHsKICAgICAgaWNvbjogaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS5pY29uIHx8ICcnLAogICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgIG1ldGE6IG1ldGEKICAgIH07CiAgICByZXR1cm4gb2JqOwogIH0pOwogIHJlcyA9IHJlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiAhaXRlbS5tZXRhLmhpZGVJbk1lbnU7CiAgfSk7CiAgcmV0dXJuIFtfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGhvbWVJdGVtKSwge30sIHsKICAgIHRvOiBob21lUm91dGUucGF0aAogIH0pXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcykpOwp9OwpleHBvcnQgdmFyIGdldFJvdXRlVGl0bGVIYW5kbGVkID0gZnVuY3Rpb24gZ2V0Um91dGVUaXRsZUhhbmRsZWQocm91dGUpIHsKICB2YXIgcm91dGVyID0gX29iamVjdFNwcmVhZCh7fSwgcm91dGUpOwoKICB2YXIgbWV0YSA9IF9vYmplY3RTcHJlYWQoe30sIHJvdXRlLm1ldGEpOwoKICBpZiAobWV0YS50aXRsZSAmJiB0eXBlb2YgbWV0YS50aXRsZSA9PT0gJ2Z1bmN0aW9uJykgbWV0YS50aXRsZSA9IG1ldGEudGl0bGUocm91dGVyKTsKICByb3V0ZXIubWV0YSA9IG1ldGE7CiAgcmV0dXJuIHJvdXRlcjsKfTsKZXhwb3J0IHZhciBzaG93VGl0bGUgPSBmdW5jdGlvbiBzaG93VGl0bGUoaXRlbSwgdm0pIHsKICByZXR1cm4gdm0uJGNvbmZpZy51c2VJMThuID8gdm0uJHQoaXRlbS5uYW1lKSA6IGl0ZW0ubWV0YSAmJiBpdGVtLm1ldGEudGl0bGUgfHwgaXRlbS5uYW1lOwp9OwovKioKICogQGRlc2NyaXB0aW9uIOacrOWcsOWtmOWCqOWSjOiOt+WPluagh+etvuWvvOiIquWIl+ihqAogKi8KCmV4cG9ydCB2YXIgc2V0VGFnTmF2TGlzdEluTG9jYWxzdG9yYWdlID0gZnVuY3Rpb24gc2V0VGFnTmF2TGlzdEluTG9jYWxzdG9yYWdlKGxpc3QpIHsKICBsb2NhbFN0b3JhZ2UudGFnTmF2ZUxpc3QgPSBKU09OLnN0cmluZ2lmeShsaXN0KTsKfTsKLyoqCiAqIEByZXR1cm5zIHtBcnJheX0g5YW25Lit55qE5q+P5Liq5YWD57Sg5Y+q5YyF5ZCr6Lev55Sx5Y6f5L+h5oGv5Lit55qEbmFtZSwgcGF0aCwgbWV0YeS4iemhuQogKi8KCmV4cG9ydCB2YXIgZ2V0VGFnTmF2TGlzdEZyb21Mb2NhbHN0b3JhZ2UgPSBmdW5jdGlvbiBnZXRUYWdOYXZMaXN0RnJvbUxvY2Fsc3RvcmFnZSgpIHsKICB2YXIgbGlzdCA9IGxvY2FsU3RvcmFnZS50YWdOYXZlTGlzdDsKICByZXR1cm4gbGlzdCA/IEpTT04ucGFyc2UobGlzdCkgOiBbXTsKfTsKLyoqCiAqIEBwYXJhbSB7QXJyYXl9IHJvdXRlcnMg6Lev55Sx5YiX6KGo5pWw57uECiAqIEBkZXNjcmlwdGlvbiDnlKjkuo7mib7liLDot6/nlLHliJfooajkuK1uYW1l5Li6aG9tZeeahOWvueixoQogKi8KCmV4cG9ydCB2YXIgZ2V0SG9tZVJvdXRlID0gZnVuY3Rpb24gZ2V0SG9tZVJvdXRlKHJvdXRlcnMpIHsKICB2YXIgaG9tZU5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdob21lUGFnZSc7CiAgdmFyIGkgPSAtMTsKICB2YXIgbGVuID0gcm91dGVycy5sZW5ndGg7CiAgdmFyIGhvbWVSb3V0ZSA9IHt9OwoKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICB2YXIgaXRlbSA9IHJvdXRlcnNbaV07CgogICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgdmFyIHJlcyA9IGdldEhvbWVSb3V0ZShpdGVtLmNoaWxkcmVuKTsKICAgICAgaWYgKHJlcy5uYW1lKSByZXR1cm4gcmVzOwogICAgfSBlbHNlIHsKICAgICAgaWYgKGl0ZW0ubmFtZSA9PT0gaG9tZU5hbWUpIGhvbWVSb3V0ZSA9IGl0ZW07CiAgICB9CiAgfQoKICByZXR1cm4gaG9tZVJvdXRlOwp9OwovKioKICogQHBhcmFtIHsqfSBsaXN0IOeOsOacieagh+etvuWvvOiIquWIl+ihqAogKiBAcGFyYW0geyp9IG5ld1JvdXRlIOaWsOa3u+WKoOeahOi3r+eUseWOn+S/oeaBr+WvueixoQogKiBAZGVzY3JpcHRpb24g5aaC5p6c6K+lbmV3Um91dGXlt7Lnu4/lrZjlnKjliJnkuI3lho3mt7vliqAKICovCgpleHBvcnQgdmFyIGdldE5ld1RhZ0xpc3QgPSBmdW5jdGlvbiBnZXROZXdUYWdMaXN0KGxpc3QsIG5ld1JvdXRlKSB7CiAgdmFyIG5hbWUgPSBuZXdSb3V0ZS5uYW1lLAogICAgICBwYXRoID0gbmV3Um91dGUucGF0aCwKICAgICAgbWV0YSA9IG5ld1JvdXRlLm1ldGE7CgogIHZhciBuZXdMaXN0ID0gX3RvQ29uc3VtYWJsZUFycmF5KGxpc3QpOwoKICBpZiAobmV3TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLm5hbWUgPT09IG5hbWU7CiAgfSkgPj0gMCkgcmV0dXJuIG5ld0xpc3Q7ZWxzZSBuZXdMaXN0LnB1c2goewogICAgbmFtZTogbmFtZSwKICAgIHBhdGg6IHBhdGgsCiAgICBtZXRhOiBtZXRhCiAgfSk7CiAgcmV0dXJuIG5ld0xpc3Q7Cn07Ci8qKgogKiBAcGFyYW0geyp9IGFjY2VzcyDnlKjmiLfmnYPpmZDmlbDnu4TvvIzlpoIgWydzdXBlcl9hZG1pbicsICdhZG1pbiddCiAqIEBwYXJhbSB7Kn0gcm91dGUg6Lev55Sx5YiX6KGoCiAqLwoKdmFyIGhhc0FjY2VzcyA9IGZ1bmN0aW9uIGhhc0FjY2VzcyhhY2Nlc3MsIHJvdXRlKSB7CiAgaWYgKHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5hY2Nlc3MpIHJldHVybiBoYXNPbmVPZihhY2Nlc3MsIHJvdXRlLm1ldGEuYWNjZXNzKTtlbHNlIHJldHVybiB0cnVlOwp9OwovKioKICog5p2D6Ym0CiAqIEBwYXJhbSB7Kn0gbmFtZSDljbPlsIbot7PovaznmoTot6/nlLFuYW1lCiAqIEBwYXJhbSB7Kn0gYWNjZXNzIOeUqOaIt+adg+mZkOaVsOe7hAogKiBAcGFyYW0geyp9IHJvdXRlcyDot6/nlLHliJfooagKICogQGRlc2NyaXB0aW9uIOeUqOaIt+aYr+WQpuWPr+i3s+i9rOWIsOivpemhtQogKi8KCgpleHBvcnQgdmFyIGNhblR1cm5UbyA9IGZ1bmN0aW9uIGNhblR1cm5UbyhuYW1lLCBhY2Nlc3MsIHJvdXRlcykgewogIHZhciByb3V0ZVBlcm1pc3Npb25KdWRnZSA9IGZ1bmN0aW9uIHJvdXRlUGVybWlzc2lvbkp1ZGdlKGxpc3QpIHsKICAgIHJldHVybiBsaXN0LnNvbWUoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gcm91dGVQZXJtaXNzaW9uSnVkZ2UoaXRlbS5jaGlsZHJlbik7CiAgICAgIH0gZWxzZSBpZiAoaXRlbS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgcmV0dXJuIGhhc0FjY2VzcyhhY2Nlc3MsIGl0ZW0pOwogICAgICB9CiAgICB9KTsKICB9OwoKICByZXR1cm4gcm91dGVQZXJtaXNzaW9uSnVkZ2Uocm91dGVzKTsKfTsKLyoqCiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwKICogQGRlc2NyaXB0aW9uIOS7jlVSTOS4reino+aekOWPguaVsAogKi8KCmV4cG9ydCB2YXIgZ2V0UGFyYW1zID0gZnVuY3Rpb24gZ2V0UGFyYW1zKHVybCkgewogIHZhciBrZXlWYWx1ZUFyciA9IHVybC5zcGxpdCgnPycpWzFdLnNwbGl0KCcmJyk7CiAgdmFyIHBhcmFtT2JqID0ge307CiAga2V5VmFsdWVBcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgdmFyIGtleVZhbHVlID0gaXRlbS5zcGxpdCgnPScpOwogICAgcGFyYW1PYmpba2V5VmFsdWVbMF1dID0ga2V5VmFsdWVbMV07CiAgfSk7CiAgcmV0dXJuIHBhcmFtT2JqOwp9OwovKioKICogQHBhcmFtIHtBcnJheX0gbGlzdCDmoIfnrb7liJfooagKICogQHBhcmFtIHtTdHJpbmd9IG5hbWUg5b2T5YmN5YWz6Zet55qE5qCH562+55qEbmFtZQogKi8KCmV4cG9ydCB2YXIgZ2V0TmV4dFJvdXRlID0gZnVuY3Rpb24gZ2V0TmV4dFJvdXRlKGxpc3QsIHJvdXRlKSB7CiAgdmFyIHJlcyA9IHt9OwoKICBpZiAobGlzdC5sZW5ndGggPT09IDIpIHsKICAgIHJlcyA9IGdldEhvbWVSb3V0ZShsaXN0KTsKICB9IGVsc2UgewogICAgdmFyIGluZGV4ID0gbGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIHJvdXRlRXF1YWwoaXRlbSwgcm91dGUpOwogICAgfSk7CiAgICBpZiAoaW5kZXggPT09IGxpc3QubGVuZ3RoIC0gMSkgcmVzID0gbGlzdFtsaXN0Lmxlbmd0aCAtIDJdO2Vsc2UgcmVzID0gbGlzdFtpbmRleCArIDFdOwogIH0KCiAgcmV0dXJuIHJlczsKfTsKLyoqCiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lcyDlm57osIPlh73mlbDpnIDopoHmiafooYznmoTmrKHmlbAKICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sg5Zue6LCD5Ye95pWwCiAqLwoKZXhwb3J0IHZhciBkb0N1c3RvbVRpbWVzID0gZnVuY3Rpb24gZG9DdXN0b21UaW1lcyh0aW1lcywgY2FsbGJhY2spIHsKICB2YXIgaSA9IC0xOwoKICB3aGlsZSAoKytpIDwgdGltZXMpIHsKICAgIGNhbGxiYWNrKGkpOwogIH0KfTsKLyoqCiAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlIOS7juS4iuS8oOe7hOS7tuW+l+WIsOeahOaWh+S7tuWvueixoQogKiBAcmV0dXJucyB7UHJvbWlzZX0gcmVzb2x2ZeWPguaVsOaYr+ino+aekOWQjueahOS6jOe7tOaVsOe7hAogKiBAZGVzY3JpcHRpb24g5LuOQ3N25paH5Lu25Lit6Kej5p6Q5Ye66KGo5qC877yM6Kej5p6Q5oiQ5LqM57u05pWw57uECiAqLwoKZXhwb3J0IHZhciBnZXRBcnJheUZyb21GaWxlID0gZnVuY3Rpb24gZ2V0QXJyYXlGcm9tRmlsZShmaWxlKSB7CiAgdmFyIG5hbWVTcGxpdCA9IGZpbGUubmFtZS5zcGxpdCgnLicpOwogIHZhciBmb3JtYXQgPSBuYW1lU3BsaXRbbmFtZVNwbGl0Lmxlbmd0aCAtIDFdOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOyAvLyDku6XmlofmnKzmoLzlvI/or7vlj5YKCiAgICB2YXIgYXJyID0gW107CgogICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldnQpIHsKICAgICAgdmFyIGRhdGEgPSBldnQudGFyZ2V0LnJlc3VsdDsgLy8g6K+75Yiw55qE5pWw5o2uCgogICAgICB2YXIgcGFzdGVEYXRhID0gZGF0YS50cmltKCk7CiAgICAgIGFyciA9IHBhc3RlRGF0YS5zcGxpdCgvW1xuXHUwMDg1XHUyMDI4XHUyMDI5XXxcclxuPy9nKS5tYXAoZnVuY3Rpb24gKHJvdykgewogICAgICAgIHJldHVybiByb3cuc3BsaXQoJ1x0Jyk7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtWzBdLnNwbGl0KCcsJyk7CiAgICAgIH0pOwogICAgICBpZiAoZm9ybWF0ID09PSAnY3N2JykgcmVzb2x2ZShhcnIpO2Vsc2UgcmVqZWN0KG5ldyBFcnJvcignW0Zvcm1hdCBFcnJvcl065L2g5LiK5Lyg55qE5LiN5pivQ3N25paH5Lu2JykpOwogICAgfTsKICB9KTsKfTsKLyoqCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IOihqOagvOaVsOaNruS6jOe7tOaVsOe7hAogKiBAcmV0dXJucyB7T2JqZWN0fSB7IGNvbHVtbnMsIHRhYmxlRGF0YSB9CiAqIEBkZXNjcmlwdGlvbiDku47kuoznu7TmlbDnu4TkuK3ojrflj5booajlpLTlkozooajmoLzmlbDmja7vvIzlsIbnrKzkuIDooYzkvZzkuLrooajlpLTvvIznlKjkuo7lnKhpVmlld+eahOihqOagvOS4reWxleekuuaVsOaNrgogKi8KCmV4cG9ydCB2YXIgZ2V0VGFibGVEYXRhRnJvbUFycmF5ID0gZnVuY3Rpb24gZ2V0VGFibGVEYXRhRnJvbUFycmF5KGFycmF5KSB7CiAgdmFyIGNvbHVtbnMgPSBbXTsKICB2YXIgdGFibGVEYXRhID0gW107CgogIGlmIChhcnJheS5sZW5ndGggPiAxKSB7CiAgICB2YXIgdGl0bGVzID0gYXJyYXkuc2hpZnQoKTsKICAgIGNvbHVtbnMgPSB0aXRsZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGl0bGU6IGl0ZW0sCiAgICAgICAga2V5OiBpdGVtCiAgICAgIH07CiAgICB9KTsKICAgIHRhYmxlRGF0YSA9IGFycmF5Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICB2YXIgcmVzID0ge307CiAgICAgIGl0ZW0uZm9yRWFjaChmdW5jdGlvbiAoY29sLCBpKSB7CiAgICAgICAgcmVzW3RpdGxlc1tpXV0gPSBjb2w7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzOwogICAgfSk7CiAgfQoKICByZXR1cm4gewogICAgY29sdW1uczogY29sdW1ucywKICAgIHRhYmxlRGF0YTogdGFibGVEYXRhCiAgfTsKfTsKZXhwb3J0IHZhciBmaW5kTm9kZVVwcGVyID0gZnVuY3Rpb24gZmluZE5vZGVVcHBlcihlbGUsIHRhZykgewogIGlmIChlbGUucGFyZW50Tm9kZSkgewogICAgaWYgKGVsZS5wYXJlbnROb2RlLnRhZ05hbWUgPT09IHRhZy50b1VwcGVyQ2FzZSgpKSB7CiAgICAgIHJldHVybiBlbGUucGFyZW50Tm9kZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmaW5kTm9kZVVwcGVyKGVsZS5wYXJlbnROb2RlLCB0YWcpOwogICAgfQogIH0KfTsKZXhwb3J0IHZhciBmaW5kTm9kZVVwcGVyQnlDbGFzc2VzID0gZnVuY3Rpb24gZmluZE5vZGVVcHBlckJ5Q2xhc3NlcyhlbGUsIGNsYXNzZXMpIHsKICB2YXIgcGFyZW50Tm9kZSA9IGVsZS5wYXJlbnROb2RlOwoKICBpZiAocGFyZW50Tm9kZSkgewogICAgdmFyIGNsYXNzTGlzdCA9IHBhcmVudE5vZGUuY2xhc3NMaXN0OwoKICAgIGlmIChjbGFzc0xpc3QgJiYgY2xhc3Nlcy5ldmVyeShmdW5jdGlvbiAoY2xhc3NOYW1lKSB7CiAgICAgIHJldHVybiBjbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTsKICAgIH0pKSB7CiAgICAgIHJldHVybiBwYXJlbnROb2RlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZpbmROb2RlVXBwZXJCeUNsYXNzZXMocGFyZW50Tm9kZSwgY2xhc3Nlcyk7CiAgICB9CiAgfQp9OwpleHBvcnQgdmFyIGZpbmROb2RlRG93bndhcmQgPSBmdW5jdGlvbiBmaW5kTm9kZURvd253YXJkKGVsZSwgdGFnKSB7CiAgdmFyIHRhZ05hbWUgPSB0YWcudG9VcHBlckNhc2UoKTsKCiAgaWYgKGVsZS5jaGlsZE5vZGVzLmxlbmd0aCkgewogICAgdmFyIGkgPSAtMTsKICAgIHZhciBsZW4gPSBlbGUuY2hpbGROb2Rlcy5sZW5ndGg7CgogICAgd2hpbGUgKCsraSA8IGxlbikgewogICAgICB2YXIgY2hpbGQgPSBlbGUuY2hpbGROb2Rlc1tpXTsKICAgICAgaWYgKGNoaWxkLnRhZ05hbWUgPT09IHRhZ05hbWUpIHJldHVybiBjaGlsZDtlbHNlIHJldHVybiBmaW5kTm9kZURvd253YXJkKGNoaWxkLCB0YWcpOwogICAgfQogIH0KfTsKZXhwb3J0IHZhciBzaG93QnlBY2Nlc3MgPSBmdW5jdGlvbiBzaG93QnlBY2Nlc3MoYWNjZXNzLCBjYW5WaWV3QWNjZXNzKSB7CiAgcmV0dXJuIGhhc09uZU9mKGNhblZpZXdBY2Nlc3MsIGFjY2Vzcyk7Cn07Ci8qKgogKiBAZGVzY3JpcHRpb24g5qC55o2ubmFtZS9wYXJhbXMvcXVlcnnliKTmlq3kuKTkuKrot6/nlLHlr7nosaHmmK/lkKbnm7jnrYkKICogQHBhcmFtIHsqfSByb3V0ZTEg6Lev55Sx5a+56LGhCiAqIEBwYXJhbSB7Kn0gcm91dGUyIOi3r+eUseWvueixoQogKi8KCmV4cG9ydCB2YXIgcm91dGVFcXVhbCA9IGZ1bmN0aW9uIHJvdXRlRXF1YWwocm91dGUxLCByb3V0ZTIpIHsKICB2YXIgcGFyYW1zMSA9IHJvdXRlMS5wYXJhbXMgfHwge307CiAgdmFyIHBhcmFtczIgPSByb3V0ZTIucGFyYW1zIHx8IHt9OwogIHZhciBxdWVyeTEgPSByb3V0ZTEucXVlcnkgfHwge307CiAgdmFyIHF1ZXJ5MiA9IHJvdXRlMi5xdWVyeSB8fCB7fTsKICByZXR1cm4gcm91dGUxLm5hbWUgPT09IHJvdXRlMi5uYW1lICYmIG9iakVxdWFsKHBhcmFtczEsIHBhcmFtczIpICYmIG9iakVxdWFsKHF1ZXJ5MSwgcXVlcnkyKTsKfTsKLyoqCiAqIOWIpOaWreaJk+W8gOeahOagh+etvuWIl+ihqOmHjOaYr+WQpuW3suWtmOWcqOi/meS4quaWsOa3u+WKoOeahOi3r+eUseWvueixoQogKi8KCmV4cG9ydCB2YXIgcm91dGVIYXNFeGlzdCA9IGZ1bmN0aW9uIHJvdXRlSGFzRXhpc3QodGFnTmF2TGlzdCwgcm91dGVJdGVtKSB7CiAgdmFyIGxlbiA9IHRhZ05hdkxpc3QubGVuZ3RoOwogIHZhciByZXMgPSBmYWxzZTsKICBkb0N1c3RvbVRpbWVzKGxlbiwgZnVuY3Rpb24gKGluZGV4KSB7CiAgICBpZiAocm91dGVFcXVhbCh0YWdOYXZMaXN0W2luZGV4XSwgcm91dGVJdGVtKSkgcmVzID0gdHJ1ZTsKICB9KTsKICByZXR1cm4gcmVzOwp9OwpleHBvcnQgdmFyIGxvY2FsU2F2ZSA9IGZ1bmN0aW9uIGxvY2FsU2F2ZShrZXksIHZhbHVlKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7Cn07CmV4cG9ydCB2YXIgbG9jYWxSZWFkID0gZnVuY3Rpb24gbG9jYWxSZWFkKGtleSkgewogIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpIHx8ICcnOwp9OwpleHBvcnQgdmFyIGZvcm1hdE1vbmV5ID0gZnVuY3Rpb24gZm9ybWF0TW9uZXkocywgdHlwZSkgewogIGlmICgvW14wLTkuXS8udGVzdChzKSkgcmV0dXJuICcwLjAwJzsKICBpZiAocyA9PSBudWxsIHx8IHMgPT0gJ251bGwnIHx8IHMgPT0gJycpIHJldHVybiAnMC4wMCc7CiAgcyA9IHMudG9TdHJpbmcoKS5yZXBsYWNlKC9eKFxkKikkLywgJyQxLicpOwogIHMgPSAocyArICcwMCcpLnJlcGxhY2UoLyhcZCpcLlxkXGQpXGQqLywgJyQxJyk7CiAgcyA9IHMucmVwbGFjZSgnLicsICcsJyk7CiAgdmFyIHJlID0gLyhcZCkoXGR7M30sKS87CgogIHdoaWxlIChyZS50ZXN0KHMpKSB7CiAgICBzID0gcy5yZXBsYWNlKHJlLCAnJDEsJDInKTsKICB9CgogIHMgPSBzLnJlcGxhY2UoLywoXGRcZCkkLywgJy4kMScpOwoKICBpZiAodHlwZSA9PSAwKSB7CiAgICB2YXIgYSA9IHMuc3BsaXQoJy4nKTsKCiAgICBpZiAoYVsxXSA9PSAnMDAnKSB7CiAgICAgIHMgPSBhWzBdOwogICAgfQogIH0KCiAgcmV0dXJuIHM7Cn07IC8vIOWQiOW5tuaVsOe7hO+8jOS4lOWOu+mHjQoKZXhwb3J0IHZhciBjb25jYXRBcnJheSA9IGZ1bmN0aW9uIGNvbmNhdEFycmF5KGFycmF5KSB7CiAgdmFyIHVuaXEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CgogIGlmICghXy5pc0FycmF5KGFycmF5KSkgewogICAgcmV0dXJuIGFycmF5OwogIH0KCiAgdmFyIGFyciA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFycmF5KTsKICByZXR1cm4gdW5pcSA/IF8udW5pcShhcnIpIDogYXJyOwp9OwpleHBvcnQgdmFyIHNldFVzZXJOYW1lID0gZnVuY3Rpb24gc2V0VXNlck5hbWUodXNlcm5hbWUpIHsKICBDb29raWVzLnNldCgndXNlcm5hbWUnLCB1c2VybmFtZSwgewogICAgZXhwaXJlczogY29uZmlnLmNvb2tpZUV4cGlyZXMgfHwgMSB8fCAxCiAgfSk7Cn07CmV4cG9ydCB2YXIgZ2V0VXNlck5hbWUgPSBmdW5jdGlvbiBnZXRVc2VyTmFtZSgpIHsKICB2YXIgdXNlck5hbWUgPSBDb29raWVzLmdldCgndXNlcm5hbWUnKTsKICBpZiAodXNlck5hbWUpIHJldHVybiB1c2VyTmFtZTtlbHNlIHJldHVybiBmYWxzZTsKfTsKZXhwb3J0IHZhciBzZXRDb29raWVzSXRlbSA9IGZ1bmN0aW9uIHNldENvb2tpZXNJdGVtKGtleSwgdmFsdWUpIHsKICBDb29raWVzLnNldChrZXksIHZhbHVlLCB7CiAgICBleHBpcmVzOiBjb25maWcuY29va2llRXhwaXJlcyB8fCAxIHx8IDEKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRDb29raWVzSXRlbSA9IGZ1bmN0aW9uIGdldENvb2tpZXNJdGVtKGtleSkgewogIHZhciB2YWx1ZSA9IENvb2tpZXMuZ2V0KGtleSk7CiAgaWYgKHZhbHVlKSByZXR1cm4gdmFsdWU7ZWxzZSByZXR1cm4gZmFsc2U7Cn07CmV4cG9ydCB2YXIgZ2V0VXNlckluZm8gPSBmdW5jdGlvbiBnZXRVc2VySW5mbygpIHsKICB2YXIgdXNlckluZm8gPSBsb2NhbFJlYWQoJ3VzZXJJbmZvJyk7CgogIGlmICh1c2VySW5mbykgewogICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHVzZXJJbmZvKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHt9OwogIH0KfTsgLy8gcnNhIGVuY3J5cHQKCnZhciBQVUJfS0VZID0gIlxuLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS1cbk1JR2ZNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0R05BRENCaVFLQmdRQ21OeUtqc0wzVU5rbENmaElqN0luOWtOeGpcblRxd2k3NmY2cFN1WGZTTmlKdW9WdEtaTnlEQ0NXNUVkem8wSEhnbExscHNrVk44czNKVjRsbVhUVTE0QlVZVy9cbi9COTgyaHdVQWdQRWx5bzNCWHBkNjZWTjhVOUE5RnVkZGFLN2d2SzgrRk9zT0hUMGErdkdiNy9VazNIcEoxQUpcbm9PM1p0MERxeWMwZEwvN2hMd0lEQVFBQlxuLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tXG4iOwpleHBvcnQgdmFyIGVuY3J5cHRCeVB1YktleSA9IGZ1bmN0aW9uIGVuY3J5cHRCeVB1YktleShyYXdEYXRhKSB7CiAgdmFyIGNyeXB0bzsKCiAgdHJ5IHsKICAgIGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpOwogIH0gY2F0Y2ggKGVycikgewogICAgY29uc29sZS5sb2coJ2NyeXB0byBzdXBwb3J0IGlzIGRpc2FibGVkIScpOwogIH0KCiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHJhd0RhdGEpOwogIHZhciBlbmNyeXB0ZWQgPSBjcnlwdG8ucHVibGljRW5jcnlwdChQVUJfS0VZLCBidWZmZXIpOwogIHJldHVybiBlbmNyeXB0ZWQudG9TdHJpbmcoImJhc2U2NCIpOwp9OyAvLyByc2EgZW5jcnlwdAoKdmFyIFJTQV9QVUJfS0VZID0gIlxuLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS1cbk1JR2ZNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0R05BRENCaVFLQmdRREVTUGFJQnQrblMwRVFtSGNtSThsbE1GZWNcbmNPNlhNUDNEMVQyOHZQakg2S0o5Q0N1ck1IMkFnNWxTV0YwZmUzblFER1RWVHo3b01FaWtxcU5tUDVOamt4YXlcbmRQNFFBc2ZlQktIaWJuc0NZLzRNYmh2cEpxRUdBdWhaaS9BRDJ6ajJzQXYrQWE0NkZMZWhqeFFYWmVqTDJ0VWxcbmVoMERXNllCWFUyb3Y4TWlIUUlEQVFBQlxuLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tXG4iOwpleHBvcnQgdmFyIHJzYUVuY3J5cHRCeVB1YktleSA9IGZ1bmN0aW9uIHJzYUVuY3J5cHRCeVB1YktleShyYXdEYXRhKSB7CiAgdmFyIGVuY3J5cHQgPSBuZXcgSlNFbmNyeXB0KCk7CiAgZW5jcnlwdC5zZXRQdWJsaWNLZXkoUlNBX1BVQl9LRVkpOwogIHJldHVybiBlbmNyeXB0LmVuY3J5cHQocmF3RGF0YSk7Cn07Ci8qKgogKiBAcGFyYW0ge3N0cmluZ30gYWxnb3JpdGhtCiAqIEBwYXJhbSB7YW55fSBjb250ZW50CiAqICBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKZXhwb3J0IHZhciBlbmNyeXB0ID0gZnVuY3Rpb24gZW5jcnlwdChhbGdvcml0aG0sIGNvbnRlbnQpIHsKICB2YXIgaGFzaCA9IGNyZWF0ZUhhc2goYWxnb3JpdGhtKTsKICBoYXNoLnVwZGF0ZShjb250ZW50KTsKICByZXR1cm4gaGFzaC5kaWdlc3QoJ2hleCcpOwp9OwovKioKICogQHBhcmFtIHthbnl9IGNvbnRlbnQKICogIEByZXR1cm4ge3N0cmluZ30KICovCgpleHBvcnQgdmFyIHNoYTEgPSBmdW5jdGlvbiBzaGExKGNvbnRlbnQpIHsKICByZXR1cm4gZW5jcnlwdCgnc2hhMScsIGNvbnRlbnQpOwp9OyAvLyDluIHnp43nrKblj7cKCmV4cG9ydCB2YXIgY3VycmVuY3kgPSB7CiAgJ0NOWSc6ICfvv6UnLAogICdIS0QnOiAnSEvvvIQnLAogICdVU0QnOiAn77yEJywKICAnRVVSJzogJ+KCrCcsCiAgJ0dCUCc6ICfvv6EnLAogICdKUFknOiAnSu+/pScsCiAgJ0tSVyc6ICfigqknCn07Ci8qKgogKiBAcGFyYW0ge2FueX0gY29udGVudAogKiAgQHJldHVybiB7c3RyaW5nfQogKi8KCmV4cG9ydCB2YXIgbWQ1ID0gZnVuY3Rpb24gbWQ1KGNvbnRlbnQpIHsKICByZXR1cm4gZW5jcnlwdCgnbWQ1JywgY29udGVudCk7Cn07IC8vIOagoemqjOaYr+WQpuS4uuWQiOazleaJi+acuuWPt+eggQoKZXhwb3J0IHZhciBpc1Bob25lID0gZnVuY3Rpb24gaXNQaG9uZShzdHIpIHsKICB2YXIgcmVnID0gL15bMV1bMy05XVxkezl9JHxeKFs2fDldKVxkezd9JHxeWzBdWzldXGR7OH0kfF5bNl0oWzh8Nl0pXGR7NX0kLzsKCiAgaWYgKCFyZWcudGVzdChzdHIpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0cnVlOwogIH0KfTsgLy8g5qC55o2u6YOo6Zeo5qCR5b2i57uT5p6ELOi/lOWbnuWPtuWtkOiKgueCuemDqOmXqOaVsOe7hAoKZXhwb3J0IHZhciBidWlsZENoaWxkRGVwYXJ0bWVudEFycmF5ID0gZnVuY3Rpb24gYnVpbGRDaGlsZERlcGFydG1lbnRBcnJheShzZWxlY3REZXBhcnREYXRhLCBtZXJjaGFudERlcGFydERhdGEpIHsKICAvL+WIpOaWreS4pOS4quWPguaVsOaYr+WQpuS4uuaVsOe7hAogIHZhciB0bXAgPSBbXTsKICBzZWxlY3REZXBhcnREYXRhLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgIGlmIChpdGVtKSB7CiAgICAgIHRtcC5wdXNoKGl0ZW0pOyAvL+afpeaJvueItmlk5piv5b2T5YmNaWTnmoTmlbDnu4QKCiAgICAgIHZhciBjdXJEZXBhcnQgPSBfLmZpbHRlcihtZXJjaGFudERlcGFydERhdGEsIGZ1bmN0aW9uIChjdXIpIHsKICAgICAgICByZXR1cm4gY3VyLnBhcmVudGlkID09IGl0ZW07CiAgICAgIH0pOwoKICAgICAgaWYgKGN1ckRlcGFydC5sZW5ndGggIT09IDApIHsKICAgICAgICB2YXIgZGVwYXJ0bWVudHMgPSBfLnBsdWNrKGN1ckRlcGFydCwgJ2RlcGFydG1lbnRfaWQnKTsKCiAgICAgICAgdmFyIHJlcyA9IGJ1aWxkQ2hpbGREZXBhcnRtZW50QXJyYXkoZGVwYXJ0bWVudHMsIG1lcmNoYW50RGVwYXJ0RGF0YSk7CiAgICAgICAgdG1wID0gXy51bmlvbih0bXAsIHJlcyk7CiAgICAgIH0KICAgIH0KICB9KTsgLy8gY29uc29sZS5sb2coImJ1aWxkQ2hpbGREZXBhcnRtZW50QXJyYXk9PT09PWZpbmlzaGVkLS0tdG1wPj4+IiArIEpTT04uc3RyaW5naWZ5KHRtcCkpOwoKICByZXR1cm4gdG1wOwp9OyAvLyDmoLnmja7lj7blrZDoioLngrnpg6jpl6jmlbDnu4Tlkozpg6jpl6jnu4Tnu4fmlbDnu4TvvIzov5Tlm57pg6jpl6jmoJHlvaLnu5PmnoQKCmV4cG9ydCB2YXIgYnVpbGREZXBhcnRtZW50VHJlZSA9IGZ1bmN0aW9uIGJ1aWxkRGVwYXJ0bWVudFRyZWUoY2hpbGREYXRhLCBkZXBhcnRtZW50RGF0YSkgewogIC8v5Yik5pat5Lik5Liq5Y+C5pWw5piv5ZCm5Li65pWw57uECiAgdmFyIHRtcCA9IFtdOwogIGNoaWxkRGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICBpZiAoaXRlbSkgewogICAgICB2YXIgY3VyRGVwYXJ0ID0gXy5maW5kKGRlcGFydG1lbnREYXRhLCBmdW5jdGlvbiAoY3VyKSB7CiAgICAgICAgcmV0dXJuIGN1ci5kZXBhcnRtZW50X2lkID09IGl0ZW07CiAgICAgIH0pOwoKICAgICAgaWYgKGN1ckRlcGFydCkgewogICAgICAgIHZhciBuZXdEZXBhcnQgPSB7CiAgICAgICAgICBkZXBhcnRtZW50X2lkOiBjdXJEZXBhcnQuZGVwYXJ0bWVudF9pZCwKICAgICAgICAgIHBhcmVudGlkOiBjdXJEZXBhcnQucGFyZW50aWQsCiAgICAgICAgICBuYW1lOiBjdXJEZXBhcnQubmFtZQogICAgICAgIH07CiAgICAgICAgdG1wLnB1c2gobmV3RGVwYXJ0KTsKCiAgICAgICAgaWYgKGN1ckRlcGFydC5wYXJlbnRpZCA9PSAiIikge30gZWxzZSB7CiAgICAgICAgICB2YXIgaW5EZXBhcnQgPSBbXTsKICAgICAgICAgIGluRGVwYXJ0LnB1c2goY3VyRGVwYXJ0LnBhcmVudGlkKTsKICAgICAgICAgIHZhciByZXMgPSBidWlsZERlcGFydG1lbnRUcmVlKGluRGVwYXJ0LCBkZXBhcnRtZW50RGF0YSk7CgogICAgICAgICAgdmFyIHVuaW9udG1wID0gXy51bmlvbih0bXAsIHJlcyk7CgogICAgICAgICAgdG1wID0gXy51bmlxKHVuaW9udG1wLCB0cnVlLCAnZGVwYXJ0bWVudF9pZCcpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0pOwogIHJldHVybiB0bXA7Cn07IC8vIOmAkuW9kui/lOWbnuagkeW9oue7k+aehO+8jOm7mOiupOS4u0lE5a2X5q615ZCN5Li6IGNvZGXvvIzniLZpZOWtl+auteWQjeS4uiBwYXJlbnRz77yMIOagueaNruaVsOaNruWPr+iHquWumuS5iQoKZXhwb3J0IHZhciBidWlsZFRyZWUgPSBmdW5jdGlvbiBidWlsZFRyZWUocXVlcnlBcnIpIHsKICB2YXIgc3ViID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICB2YXIgY3VycmVudEtleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJ2NvZGUnOwogIHZhciBwYXJlbnRzS2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAncGFyZW50cyc7CiAgdmFyIGNoaWxkID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiAnY2hpbGRyZW4nOwogIHZhciByb290ID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiAnMCc7CiAgLy8gY29uc29sZS5sb2coImJ1aWxkVHJlZS0tLT4+PiIgKyByb290ICsgIi0tLT4+PiIgKyBKU09OLnN0cmluZ2lmeShxdWVyeUFycikpOwogIHZhciB0bXAgPSBbXTsKICB2YXIgcm9vdFRyZWUgPSB7CiAgICBkZXBhcnRtZW50X2lkOiAnMCcsCiAgICBwYXJlbnRpZDogIiIsCiAgICBuYW1lOiAi5YWo6YOo6YOo6ZeoIgogIH07CiAgdmFyIHF1ZXJ5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShxdWVyeUFycikpOwoKICBpZiAocm9vdCA9PSAnMCcpIHsKICAgIHF1ZXJ5Lm1hcChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICBpZiAoIXN1YltjdXJyZW50S2V5XSkgewogICAgICAgIGlmIChpdGVtW3BhcmVudHNLZXldID09PSAnJykgewogICAgICAgICAgaXRlbVtwYXJlbnRzS2V5XSA9ICcwJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcXVlcnkucHVzaChyb290VHJlZSk7CiAgfQoKICBxdWVyeS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgIGlmIChpdGVtKSB7CiAgICAgIF8uZXh0ZW5kKGl0ZW0sIHsKICAgICAgICBpZDogaXRlbVtjdXJyZW50S2V5XQogICAgICB9KTsKCiAgICAgIF8uZXh0ZW5kKGl0ZW0sIHsKICAgICAgICB0aXRsZTogaXRlbVsnbmFtZSddCiAgICAgIH0pOwogICAgfQoKICAgIGlmICghc3ViW2N1cnJlbnRLZXldKSB7CiAgICAgIGlmIChpdGVtW3BhcmVudHNLZXldID09PSAnJykgewogICAgICAgIHF1ZXJ5W2ldID0gZmFsc2U7CiAgICAgICAgaXRlbVsnY2hlY2tlZCddID0gdHJ1ZTsKICAgICAgICB0bXAucHVzaChpdGVtKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKHN1YltjdXJyZW50S2V5XSA9PT0gaXRlbVtwYXJlbnRzS2V5XSkgewogICAgICAgIHF1ZXJ5W2ldID0gZmFsc2U7CiAgICAgICAgaXRlbVsnY2hlY2tlZCddID0gdHJ1ZTsKICAgICAgICB0bXAucHVzaChpdGVtKTsKICAgICAgfQogICAgfQogIH0pOwoKICBpZiAodG1wLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuOwogIH0KCiAgc3ViID0gdG1wOwoKICBpZiAoc3ViLmxlbmd0aCA+IDApIHsKICAgIC8vIGNvbnNvbGUubG9nKCJzdWIgPT09PiAiLCBzdWIpCiAgICBzdWIubWFwKGZ1bmN0aW9uIChjdXIsIGMpIHsKICAgICAgdmFyIHJlcyA9IGJ1aWxkVHJlZShxdWVyeSwgY3VyLCBjdXJyZW50S2V5LCBwYXJlbnRzS2V5LCBjaGlsZCwgJzEnKTsKCiAgICAgIGlmIChyZXMpIHsKICAgICAgICBzdWJbY11bY2hpbGRdID0gcmVzOwogICAgICB9CiAgICB9KTsKICB9CgogIHJldHVybiBzdWI7Cn07IC8vIOmAkuW9kui/lOWbnuagkeW9oue7k+aehO+8jOm7mOiupOS4u0lE5a2X5q615ZCN5Li6IGNvZGXvvIzniLZpZOWtl+auteWQjeS4uiBwYXJlbnRz77yMIOagueaNruaVsOaNruWPr+iHquWumuS5iQoKZXhwb3J0IHZhciBidWlsZFRyZWVDaGVja2VkID0gZnVuY3Rpb24gYnVpbGRUcmVlQ2hlY2tlZChxdWVyeUFycikgewogIHZhciBzdWIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogIHZhciBjdXJyZW50S2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnY29kZSc7CiAgdmFyIHBhcmVudHNLZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICdwYXJlbnRzJzsKICB2YXIgY2hpbGQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6ICdjaGlsZHJlbic7CiAgdmFyIHJvb3QgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6ICcwJzsKICB2YXIgQ2hlY2tlZEFyciA9IGFyZ3VtZW50cy5sZW5ndGggPiA2ID8gYXJndW1lbnRzWzZdIDogdW5kZWZpbmVkOwogIC8vIGNvbnNvbGUubG9nKCJidWlsZFRyZWUtLS0+Pj4iICsgcm9vdCArICItLS0+Pj4iICsgSlNPTi5zdHJpbmdpZnkocXVlcnlBcnIpKTsKICB2YXIgdG1wID0gW107CiAgdmFyIHJvb3RUcmVlID0gewogICAgZGVwYXJ0bWVudF9pZDogJzAnLAogICAgcGFyZW50aWQ6ICIiLAogICAgbmFtZTogIuWFqOmDqOmDqOmXqCIKICB9OwogIHZhciBxdWVyeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocXVlcnlBcnIpKTsKCiAgaWYgKHJvb3QgPT0gJzAnKSB7CiAgICBxdWVyeS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgICAgaWYgKCFzdWJbY3VycmVudEtleV0pIHsKICAgICAgICBpZiAoaXRlbVtwYXJlbnRzS2V5XSA9PT0gJycpIHsKICAgICAgICAgIGl0ZW1bcGFyZW50c0tleV0gPSAnMCc7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHF1ZXJ5LnB1c2gocm9vdFRyZWUpOwogIH0KCiAgcXVlcnkubWFwKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICBpZiAoaXRlbSkgewogICAgICBfLmV4dGVuZChpdGVtLCB7CiAgICAgICAgaWQ6IGl0ZW1bY3VycmVudEtleV0KICAgICAgfSk7CgogICAgICBfLmV4dGVuZChpdGVtLCB7CiAgICAgICAgdGl0bGU6IGl0ZW1bJ25hbWUnXQogICAgICB9KTsKICAgIH0KCiAgICBpZiAoIXN1YltjdXJyZW50S2V5XSkgewogICAgICBpZiAoaXRlbVtwYXJlbnRzS2V5XSA9PT0gJycpIHsKICAgICAgICBxdWVyeVtpXSA9IGZhbHNlOwogICAgICAgIHRtcC5wdXNoKGl0ZW0pOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoc3ViW2N1cnJlbnRLZXldID09PSBpdGVtW3BhcmVudHNLZXldKSB7CiAgICAgICAgcXVlcnlbaV0gPSBmYWxzZTsKCiAgICAgICAgdmFyIHBvcyA9IF8uaW5kZXhPZihDaGVja2VkQXJyLCBpdGVtW2N1cnJlbnRLZXldKTsKCiAgICAgICAgaWYgKHBvcyAhPSAtMSkgewogICAgICAgICAgaXRlbVsnY2hlY2tlZCddID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHRtcC5wdXNoKGl0ZW0pOwogICAgICB9CiAgICB9CiAgfSk7CgogIGlmICh0bXAubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm47CiAgfQoKICBzdWIgPSB0bXA7CgogIGlmIChzdWIubGVuZ3RoID4gMCkgewogICAgLy8gY29uc29sZS5sb2coInN1YiA9PT0+ICIsIHN1YikKICAgIHN1Yi5tYXAoZnVuY3Rpb24gKGN1ciwgYykgewogICAgICB2YXIgcmVzID0gYnVpbGRUcmVlQ2hlY2tlZChxdWVyeSwgY3VyLCBjdXJyZW50S2V5LCBwYXJlbnRzS2V5LCBjaGlsZCwgJzEnLCBDaGVja2VkQXJyKTsKCiAgICAgIGlmIChyZXMpIHsKICAgICAgICBzdWJbY11bY2hpbGRdID0gcmVzOwogICAgICB9CiAgICB9KTsKICB9CgogIHJldHVybiBzdWI7Cn07IC8vIOmAkuW9kui/lOWbnuagkeW9oue7k+aehO+8jOm7mOiupOS4u0lE5a2X5q615ZCN5Li6IGNvZGXvvIzniLZpZOWtl+auteWQjeS4uiBwYXJlbnRz77yMIOagueaNruaVsOaNruWPr+iHquWumuS5iQoKZXhwb3J0IHZhciBnZXRUcmVlTm9kZXNWYWx1ZSA9IGZ1bmN0aW9uIGdldFRyZWVOb2Rlc1ZhbHVlKHF1ZXJ5QXJyKSB7CiAgdmFyIGN1cnJlbnRLZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdjb2RlJzsKICB2YXIgY2hpbGQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICdjaGlsZHJlbic7CiAgdmFyIGtleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJyc7CiAgdmFyIHRtcCA9IFtdOwogIHZhciBxdWVyeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocXVlcnlBcnIpKTsKICBxdWVyeS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgIGlmIChpdGVtW2N1cnJlbnRLZXldICE9IHVuZGVmaW5lZCAmJiBpdGVtKSB7CiAgICAgIHRtcC5wdXNoKGtleSA9PSAnJyA/IGl0ZW1bY3VycmVudEtleV0gOiBrZXkgKyAnLScgKyBpdGVtW2N1cnJlbnRLZXldKTsKICAgIH0KCiAgICBpZiAoaXRlbVtjaGlsZF0gIT0gdW5kZWZpbmVkICYmIGl0ZW1bY2hpbGRdLmxlbmd0aCA+IDApIHsKICAgICAgdmFyIHJlcyA9IGdldFRyZWVOb2Rlc1ZhbHVlKGl0ZW1bY2hpbGRdLCBjdXJyZW50S2V5LCBjaGlsZCwga2V5ID09ICcnID8gaXRlbVtjdXJyZW50S2V5XSA6IGtleSArICctJyArIGl0ZW1bY3VycmVudEtleV0pOwoKICAgICAgaWYgKHJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdG1wLnB1c2guYXBwbHkodG1wLCBfdG9Db25zdW1hYmxlQXJyYXkocmVzKSk7CiAgICAgIH0KICAgIH0KICB9KTsKICByZXR1cm4gdG1wOwp9OyAvLyDpgJLlvZLov5Tlm57moJHlvaLnu5PmnoTvvIzpu5jorqTkuLtJROWtl+auteWQjeS4uiBjb2Rl77yM54i2aWTlrZfmrrXlkI3kuLogcGFyZW50c++8jCDmoLnmja7mlbDmja7lj6/oh6rlrprkuYkKCmV4cG9ydCB2YXIgZ2V0VHJlZU5vZGVzID0gZnVuY3Rpb24gZ2V0VHJlZU5vZGVzKHF1ZXJ5QXJyKSB7CiAgdmFyIGN1cnJlbnRLZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdjb2RlJzsKICB2YXIgY2hpbGQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICdjaGlsZHJlbic7CiAgdmFyIHRtcCA9IFtdOwogIHZhciBxdWVyeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocXVlcnlBcnIpKTsKICBxdWVyeS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgIGlmIChpdGVtW2N1cnJlbnRLZXldICE9IHVuZGVmaW5lZCAmJiBpdGVtKSB7CiAgICAgIHRtcC5wdXNoKGl0ZW1bY3VycmVudEtleV0pOwogICAgfQoKICAgIGlmIChpdGVtW2NoaWxkXSAhPSB1bmRlZmluZWQgJiYgaXRlbVtjaGlsZF0ubGVuZ3RoID4gMCkgewogICAgICB2YXIgcmVzID0gZ2V0VHJlZU5vZGVzKGl0ZW1bY2hpbGRdLCBjdXJyZW50S2V5LCBjaGlsZCk7CgogICAgICBpZiAocmVzLmxlbmd0aCA+IDApIHsKICAgICAgICB0bXAucHVzaC5hcHBseSh0bXAsIF90b0NvbnN1bWFibGVBcnJheShyZXMpKTsKICAgICAgfQogICAgfQogIH0pOwogIHJldHVybiB0bXA7Cn07IC8vIOmAkuW9kui/lOWbnuagkeW9oue7k+aehOS4reafkOS4gOS4quWFs+mUruWtl+WvueW6lOeahOiKgueCueaVsOaNru+8jOagueaNruaVsOaNruWPr+iHquWumuS5iQoKZXhwb3J0IHZhciBnZXRUcmVlTm9kZUl0ZW0gPSBmdW5jdGlvbiBnZXRUcmVlTm9kZUl0ZW0ocXVlcnlBcnIpIHsKICB2YXIgY3VycmVudEtleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2NvZGUnOwogIHZhciBjaGlsZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJ2NoaWxkcmVuJzsKICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgdmFyIHRtcCA9IFtdOwogIHF1ZXJ5QXJyLm1hcChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgaWYgKGl0ZW1bY3VycmVudEtleV0gIT0gdW5kZWZpbmVkICYmIGl0ZW0pIHsKICAgICAgaWYgKGl0ZW1bY3VycmVudEtleV0gPT0ga2V5KSB7CiAgICAgICAgdG1wLnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaXRlbVtjaGlsZF0gIT0gdW5kZWZpbmVkICYmIGl0ZW1bY2hpbGRdLmxlbmd0aCA+IDApIHsKICAgICAgdmFyIHJlcyA9IGdldFRyZWVOb2RlSXRlbShpdGVtW2NoaWxkXSwgY3VycmVudEtleSwgY2hpbGQsIGtleSk7CgogICAgICBpZiAocmVzLmxlbmd0aCA+IDApIHsKICAgICAgICB0bXAucHVzaC5hcHBseSh0bXAsIF90b0NvbnN1bWFibGVBcnJheShyZXMpKTsKICAgICAgfQogICAgfQogIH0pOwogIHJldHVybiB0bXA7Cn07IC8vIOmAkuW9kui/lOWbnuagkeW9oue7k+aehOS4reafkOS4gOS4quWFs+mUruWtl+WvueW6lOeahOiKgueCueaVsOaNru+8jOagueaNruaVsOaNruWPr+iHquWumuS5iQoKZXhwb3J0IHZhciBnZXRUcmVlTm9kZUl0ZW1OYW1lID0gZnVuY3Rpb24gZ2V0VHJlZU5vZGVJdGVtTmFtZShxdWVyeUFycikgewogIHZhciBjdXJyZW50S2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnY29kZSc7CiAgdmFyIGNoaWxkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnY2hpbGRyZW4nOwogIHZhciBrZXlzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgdmFyIGN1cnJlbnROYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgPyBhcmd1bWVudHNbNF0gOiB1bmRlZmluZWQ7CiAgdmFyIHRtcCA9IFtdOwogIHF1ZXJ5QXJyLm1hcChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgaWYgKGl0ZW1bY3VycmVudEtleV0gIT0gdW5kZWZpbmVkICYmIGl0ZW0pIHsKICAgICAgXy5maW5kKGtleXMsIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoaXRlbVtjdXJyZW50S2V5XSA9PSBrZXkpIHsKICAgICAgICAgIHRtcC5wdXNoKHsKICAgICAgICAgICAgaWQ6IGl0ZW1bY3VycmVudEtleV0sCiAgICAgICAgICAgIG5hbWU6IGl0ZW1bY3VycmVudE5hbWVdLAogICAgICAgICAgICBsZXZlbDogaXRlbS5sZXZlbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICBpZiAoaXRlbVtjaGlsZF0gIT0gdW5kZWZpbmVkICYmIGl0ZW1bY2hpbGRdLmxlbmd0aCA+IDApIHsKICAgICAgdmFyIHJlcyA9IGdldFRyZWVOb2RlSXRlbU5hbWUoaXRlbVtjaGlsZF0sIGN1cnJlbnRLZXksIGNoaWxkLCBrZXlzLCBjdXJyZW50TmFtZSk7CgogICAgICBpZiAocmVzLmxlbmd0aCA+IDApIHsKICAgICAgICB0bXAucHVzaC5hcHBseSh0bXAsIF90b0NvbnN1bWFibGVBcnJheShyZXMpKTsKICAgICAgfQogICAgfQogIH0pOwogIHJldHVybiB0bXA7Cn07IC8vIOWvvOWHuumhtemdouS4ulBERuagvOW8jwoKZXhwb3J0IHZhciBFeHBvcnRTYXZlUGRmID0gZnVuY3Rpb24gRXhwb3J0U2F2ZVBkZihlbGVtZW50LCBwZGZOYW1lLCBjdXJyZW50VGltZSkgewogIHZhciBkaXJlY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICdwJzsKICAvLyB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGF0UHJpbnQiKQogIGh0bWwyY2FudmFzKGVsZW1lbnQsIHsKICAgIGRwaTogMzAwLAogICAgdXNlQ09SUzogdHJ1ZSwKICAgIC8vIOWmguaenOivtOaJgOeUn+aIkOeahOmhtemdouS4reW4puaciei3qOWfn+eahOWbvueJh++8jOi/meS4qnVzZUNvcnPpnIDopoHorr7nva7kuLpUcnVlIOWQpuWImeeUu+W4g+iiq+axoeafk+S4jeS8muaYvuekugogICAgbG9nZ2luZzogZmFsc2UKICB9KS50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHsKICAgIC8vIGxldCBbaW1nWCwgaW1nWV0gPSBbNTk1LjI4LCA4NDEuODldOwogICAgLy8gbGV0IHBkZiA9IG5ldyBqc1BERigncCcsICdwdCcsICdhNCcpOwogICAgLy8gZm9yIChsZXQgW2luZGV4LCBpdGVtXSBvZiBwYWdlTGlzdC5lbnRyaWVzKCkpIHsKICAgIC8vICAgZm9yIChsZXQgaiA9IDA7IGogPCBpdGVtLmltYWdlTGlzdC5sZW5ndGg7IGorKykgewogICAgLy8gICAgIGNvbnN0IGltYWdlID0gaXRlbS5pbWFnZUxpc3Rbal07CiAgICAvLyAgICAgbGV0IGltZ0hlaWdodCA9IGltZ1ggLyAoaW1hZ2Uud2lkdGggLyBpbWFnZS5oZWlnaHQpOyAvL+agueaNruWuveW6puiuoeeul+mrmOW6pgogICAgLy8gICAgIHBkZi5hZGRJbWFnZShpbWFnZS5kYXRhLCAnSlBFRycsIDAsIDAsIGltZ1gsIGltZ0hlaWdodCk7CiAgICAvLyAgICAgcGRmLmFkZFBhZ2UoKTsKICAgIC8vICAgfQogICAgLy8gfQogICAgLy8gbGV0IHRhcmdldFBhZ2UgPSBwZGYuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOwogICAgLy8gcGRmLmRlbGV0ZVBhZ2UodGFyZ2V0UGFnZSk7IC8vIOWIoOmZpOacgOWQjuS4gOmhtQogICAgLy8gcGRmLnNhdmUoYOa1i+ivlS5wZGZgKTsKICAgIC8vIGxldCBwZGYgPSBuZXcganNQREYoJ3AnLCAncHQnLCBbcGRmWCwgcGRmWV0pOwogICAgLy8g56ys5LiA5Liq5Y+C5pWw77yaIGzvvJrmqKrlkJEgIHDvvJrnurXlkJEKICAgIC8vIOesrOS6jOS4quWPguaVsO+8mua1i+mHj+WNleS9je+8iCJwdCLvvIwibW0iLCAiY20iLCAibSIsICJpbiIgb3IgInB4Iu+8iQogICAgLy8g56ys5LiJ5Liq5Y+C5pWw77ya5Y+v5Lul5piv5LiL6Z2i5qC85byP77yM6buY6K6k5Li64oCcYTTigJ0KICAgIHZhciBwZGYgPSBuZXcgSlNQREYoZGlyZWN0aW9uLCAibW0iLCAiYTQiKTsgLy8gQTTnurjvvIzmqKrlkJEKCiAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICB2YXIgYTR3ID0gMTkwOwogICAgdmFyIGE0aCA9IDI3NzsgLy8gQTTlpKflsI/vvIwyMTBtbSB4IDI5N21t77yM5Zub6L655ZCE5L+d55WZMTBtbeeahOi+uei3ne+8jOaYvuekuuWMuuWfnzE5MHgyNzcKCiAgICBpZiAoZGlyZWN0aW9uID09ICdsJykgewogICAgICBhNHcgPSAyNzc7CiAgICAgIGE0aCA9IDE5MDsKICAgIH0KCiAgICB2YXIgaW1nSGVpZ2h0ID0gTWF0aC5mbG9vcihhNGggKiBjYW52YXMud2lkdGggLyBhNHcpOyAvLyDmjIlBNOaYvuekuuavlOS+i+aNoueul+S4gOmhteWbvuWDj+eahOWDj+e0oOmrmOW6pgoKICAgIHZhciByZW5kZXJlZEhlaWdodCA9IDA7CgogICAgd2hpbGUgKHJlbmRlcmVkSGVpZ2h0IDwgY2FudmFzLmhlaWdodCkgewogICAgICB2YXIgcGFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgICBwYWdlLndpZHRoID0gY2FudmFzLndpZHRoOwogICAgICBwYWdlLmhlaWdodCA9IE1hdGgubWluKGltZ0hlaWdodCwgY2FudmFzLmhlaWdodCAtIHJlbmRlcmVkSGVpZ2h0KTsgLy8g5Y+v6IO95YaF5a655LiN6Laz5LiA6aG1CiAgICAgIC8vIOeUqGdldEltYWdlRGF0YeWJquijgeaMh+WumuWMuuWfn++8jOW5tueUu+WIsOWJjemdouWIm+W7uueahGNhbnZhc+WvueixoeS4rQoKICAgICAgcGFnZS5nZXRDb250ZXh0KCIyZCIpLnB1dEltYWdlRGF0YShjdHguZ2V0SW1hZ2VEYXRhKDAsIHJlbmRlcmVkSGVpZ2h0LCBjYW52YXMud2lkdGgsIE1hdGgubWluKGltZ0hlaWdodCwgY2FudmFzLmhlaWdodCAtIHJlbmRlcmVkSGVpZ2h0KSksIDAsIDApOwogICAgICBwZGYuYWRkSW1hZ2UocGFnZS50b0RhdGFVUkwoImltYWdlL2pwZWciLCAxLjApLCAiSlBFRyIsIDEwLCAxMCwgYTR3LCBNYXRoLm1pbihhNGgsIGE0dyAqIHBhZ2UuaGVpZ2h0IC8gcGFnZS53aWR0aCkpOyAvLyDmt7vliqDlm77lg4/liLDpobXpnaLvvIzkv53nlZkxMG1t6L656LedCgogICAgICByZW5kZXJlZEhlaWdodCArPSBpbWdIZWlnaHQ7CgogICAgICBpZiAocmVuZGVyZWRIZWlnaHQgPCBjYW52YXMuaGVpZ2h0KSB7CiAgICAgICAgcGRmLmFkZFBhZ2UoKTsKICAgICAgfSAvLyDlpoLmnpzlkI7pnaLov5jmnInlhoXlrrnvvIzmt7vliqDkuIDkuKrnqbrpobUKICAgICAgLy8gZGVsZXRlIHBhZ2U7CgogICAgfQoKICAgIHBkZi5zYXZlKHBkZk5hbWUgKyBjdXJyZW50VGltZSk7CiAgfSk7Cn07CmV4cG9ydCB2YXIgcHJldmlld0ltZyA9IGZ1bmN0aW9uIHByZXZpZXdJbWcoZWxlKSB7CiAgd2luZG93LnNjcm9sbFRvKDAsIDApOwogIHZhciBlbGVXID0gZWxlLm9mZnNldFdpZHRoOyAvLyDojrflvpfor6XlrrnlmajnmoTlrr0KCiAgdmFyIGVsZUggPSBlbGUub2Zmc2V0SGVpZ2h0OyAvLyDojrflvpfor6XlrrnlmajnmoTpq5gKCiAgdmFyIGVsZU9mZnNldFRvcCA9IGVsZS5vZmZzZXRUb3A7IC8vIOiOt+W+l+ivpeWuueWZqOWIsOaWh+aho+mhtumDqOeahOi3neemuwoKICB2YXIgZWxlT2Zmc2V0TGVmdCA9IGVsZS5vZmZzZXRMZWZ0OyAvLyDojrflvpfor6XlrrnlmajliLDmlofmoaPmnIDlt6bnmoTot53nprsKCiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogIHZhciBhYnMgPSAwOwogIHZhciB3aW5faW4gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsgLy8g6I635b6X5b2T5YmN5Y+v6KeG56qX5Y+j55qE5a695bqm77yI5LiN5YyF5ZCr5rua5Yqo5p2h77yJCgogIHZhciB3aW5fb3V0ID0gd2luZG93LmlubmVyV2lkdGg7IC8vIOiOt+W+l+W9k+WJjeeql+WPo+eahOWuveW6pu+8iOWMheWQq+a7muWKqOadoe+8iQoKICBpZiAod2luX291dCA+IHdpbl9pbikgewogICAgYWJzID0gKHdpbl9vdXQgLSB3aW5faW4pIC8gMjsgLy8g6I635b6X5rua5Yqo5p2h5a695bqm55qE5LiA5Y2KCiAgfQoKICBjYW52YXMud2lkdGggPSBlbGVXICogMjsKICBjYW52YXMuaGVpZ2h0ID0gZWxlSCAqIDI7CiAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICBjb250ZXh0LnNjYWxlKDIsIDIpOwogIGNvbnRleHQudHJhbnNsYXRlKC1lbGVPZmZzZXRMZWZ0IC0gYWJzLCAtZWxlT2Zmc2V0VG9wKTsKICB2YXIgYmFzZVNyYyA9ICcnOwogIGh0bWwyY2FudmFzKGVsZSwgewogICAgZHBpOiAzMDAsCiAgICBzY2FsZTogMiwKICAgIC8v5aSE55CG5Zu+54mH5qih57OKCiAgICB1c2VDT1JTOiB0cnVlIC8v5YWB6K64Y2FudmFz55S75biD5YaFIOWPr+S7pei3qOWfn+ivt+axguWklumDqOmTvuaOpeWbvueJhywg5YWB6K646Leo5Z+f6K+35rGC44CCCgogIH0pLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykgewogICAgdmFyIHBhZ2VEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIDEuMCk7CiAgICBiYXNlU3JjID0gcGFnZURhdGE7CiAgfSk7CiAgcmV0dXJuIGJhc2VTcmM7Cn07IC8vIOmHkemineagvOW8j+WMlgoKZXhwb3J0IHZhciBudW1iZXJGb3JtYXQgPSBmdW5jdGlvbiBudW1iZXJGb3JtYXQobnVtYmVyKSB7CiAgdmFyIGRlY2ltYWxzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAyOwogIHZhciBkZWNQb2ludCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJy4nOwogIHZhciB0aG91c2FuZHNTZXAgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICcsJzsKICB2YXIgcm91bmR0YWcgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6ICdyb3VuZCc7CgogIC8qCiAgICog5Y+C5pWw6K+05piO77yaCiAgICogbnVtYmVy77ya6KaB5qC85byP5YyW55qE5pWw5a2XCiAgICogZGVjaW1hbHPvvJrkv53nlZnlh6DkvY3lsI/mlbAKICAgKiBkZWNfcG9pbnTvvJrlsI/mlbDngrnnrKblj7cKICAgKiB0aG91c2FuZHNfc2Vw77ya5Y2D5YiG5L2N56ym5Y+3CiAgICogcm91bmR0YWc66IiN5YWl5Y+C5pWw77yM6buY6K6kICdjZWlsJyDlkJHkuIrlj5YsJ2Zsb29yJ+WQkeS4i+WPliwncm91bmQnIOWbm+iIjeS6lOWFpQogICAqICovCiAgbnVtYmVyID0gKG51bWJlciArICcnKS5yZXBsYWNlKC9bXjAtOSstRWUuXS9nLCAnJyk7CiAgcm91bmR0YWcgPSByb3VuZHRhZyB8fCAnY2VpbCc7IC8vICdjZWlsJywnZmxvb3InLCdyb3VuZCcKCiAgdmFyIG4gPSAhaXNGaW5pdGUoK251bWJlcikgPyAwIDogK251bWJlcjsKICB2YXIgcHJlYyA9ICFpc0Zpbml0ZSgrZGVjaW1hbHMpID8gMCA6IE1hdGguYWJzKGRlY2ltYWxzKTsKICB2YXIgc2VwID0gdHlwZW9mIHRob3VzYW5kc1NlcCA9PT0gJ3VuZGVmaW5lZCcgPyAnLCcgOiB0aG91c2FuZHNTZXA7CiAgdmFyIGRlYyA9IHR5cGVvZiBkZWNQb2ludCA9PT0gJ3VuZGVmaW5lZCcgPyAnLicgOiBkZWNQb2ludDsKICB2YXIgcyA9ICcnOwoKICB2YXIgdG9GaXhlZEZpeCA9IGZ1bmN0aW9uIHRvRml4ZWRGaXgobiwgcHJlYykgewogICAgdmFyIGsgPSBNYXRoLnBvdygxMCwgcHJlYyk7CiAgICBjb25zb2xlLmxvZygpOwogICAgcmV0dXJuICcnICsgcGFyc2VGbG9hdChNYXRoW3JvdW5kdGFnXShwYXJzZUZsb2F0KChuICogaykudG9GaXhlZChwcmVjICogMikpKS50b0ZpeGVkKHByZWMgKiAyKSkgLyBrOwogIH07CgogIHMgPSAocHJlYyA/IHRvRml4ZWRGaXgobiwgcHJlYykgOiAnJyArIE1hdGgucm91bmQobikpLnNwbGl0KCcuJyk7CiAgdmFyIHJlID0gLygtP1xkKykoXGR7M30pLzsKCiAgd2hpbGUgKHJlLnRlc3Qoc1swXSkpIHsKICAgIHNbMF0gPSBzWzBdLnJlcGxhY2UocmUsICckMScgKyBzZXAgKyAnJDInKTsKICB9CgogIGlmICgoc1sxXSB8fCAnJykubGVuZ3RoIDwgcHJlYykgewogICAgc1sxXSA9IHNbMV0gfHwgJyc7CiAgICBzWzFdICs9IG5ldyBBcnJheShwcmVjIC0gc1sxXS5sZW5ndGggKyAxKS5qb2luKCcwJyk7CiAgfQoKICByZXR1cm4gcy5qb2luKGRlYyk7Cn07Ci8qKgogKiDojrflj5YgYmxvYgogKiBAcGFyYW0gIHtTdHJpbmd9IHVybCDnm67moIfmlofku7blnLDlnYAKICogQHJldHVybiB7Y2J9CiAqLwoKZnVuY3Rpb24gZ2V0QmxvYih1cmwsIGNiKSB7CiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpOwogIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7CgogIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgIGNiKHhoci5yZXNwb25zZSk7CiAgICB9CiAgfTsKCiAgeGhyLnNlbmQoKTsKfQovKioKICog5L+d5a2YCiAqIEBwYXJhbSAge0Jsb2J9IGJsb2IKICogQHBhcmFtICB7U3RyaW5nfSBmaWxlbmFtZSDmg7PopoHkv53lrZjnmoTmlofku7blkI3np7AKICovCgoKZnVuY3Rpb24gc2F2ZUFzKGJsb2IsIGZpbGVuYW1lKSB7CiAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYikgewogICAgbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYiwgZmlsZW5hbWUpOwogIH0gZWxzZSB7CiAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpOwogICAgbGluay5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICBsaW5rLmRvd25sb2FkID0gZmlsZW5hbWU7IC8vIGZpeCBGaXJlZm94CgogICAgbGluay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgIGxpbmsuY2xpY2soKTsKICAgIGJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChsaW5rLmhyZWYpOwogIH0KCiAgOwp9Ci8qKgogKiDkuIvovb0KICogQHBhcmFtICB7U3RyaW5nfSB1cmwg55uu5qCH5paH5Lu25Zyw5Z2ACiAqIEBwYXJhbSAge1N0cmluZ30gZmlsZW5hbWUg5oOz6KaB5L+d5a2Y55qE5paH5Lu25ZCN56ewCiAqLwoKCmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZEZpbGUodXJsLCBmaWxlbmFtZSkgewogIGdldEJsb2IodXJsLCBmdW5jdGlvbiAoYmxvYikgewogICAgc2F2ZUFzKGJsb2IsIGZpbGVuYW1lKTsKICB9KTsKfQo7"},{"version":3,"sources":["/Users/zhang/工作/pic_ad/src/libs/util.js"],"names":["Cookies","config","forEach","hasOneOf","objEqual","_","createHash","html2canvas","JSPDF","JSEncrypt","getRandom","Math","floor","random","toString","isInPrerenderMode","window","__IS_IN_PRERENDER_MODE","delayAfterRender","TOKEN_KEY","SESSION_KEY","ID_TYPE_DCT","setToken","token","set","expires","cookieExpires","getToken","get","setSession","session","getSession","removeCookies","remove","hasChild","item","children","length","showThisMenuEle","access","meta","getMenuByRouter","list","res","hideInMenu","obj","icon","name","showAlways","href","push","getBreadCrumbList","route","homeRoute","homeItem","routeMetched","matched","some","filter","undefined","hide","map","title","to","path","getRouteTitleHandled","router","showTitle","vm","$config","useI18n","$t","setTagNavListInLocalstorage","localStorage","tagNaveList","JSON","stringify","getTagNavListFromLocalstorage","parse","getHomeRoute","routers","homeName","i","len","getNewTagList","newRoute","newList","findIndex","hasAccess","canTurnTo","routes","routePermissionJudge","getParams","url","keyValueArr","split","paramObj","keyValue","getNextRoute","index","routeEqual","doCustomTimes","times","callback","getArrayFromFile","file","nameSplit","format","Promise","resolve","reject","reader","FileReader","readAsText","arr","onload","evt","data","target","result","pasteData","trim","row","Error","getTableDataFromArray","array","columns","tableData","titles","shift","key","col","findNodeUpper","ele","tag","parentNode","tagName","toUpperCase","findNodeUpperByClasses","classes","classList","every","className","contains","findNodeDownward","childNodes","child","showByAccess","canViewAccess","route1","route2","params1","params","params2","query1","query","query2","routeHasExist","tagNavList","routeItem","localSave","value","setItem","localRead","getItem","formatMoney","s","type","test","replace","re","a","concatArray","uniq","isArray","Array","prototype","concat","apply","setUserName","username","getUserName","userName","setCookiesItem","getCookiesItem","getUserInfo","userInfo","PUB_KEY","encryptByPubKey","rawData","crypto","require","err","console","log","buffer","Buffer","from","encrypted","publicEncrypt","RSA_PUB_KEY","rsaEncryptByPubKey","encrypt","setPublicKey","algorithm","content","hash","update","digest","sha1","currency","md5","isPhone","str","reg","buildChildDepartmentArray","selectDepartData","merchantDepartData","tmp","curDepart","cur","parentid","departments","pluck","union","buildDepartmentTree","childData","departmentData","find","department_id","newDepart","inDepart","uniontmp","buildTree","queryArr","sub","currentKey","parentsKey","root","rootTree","extend","id","c","buildTreeChecked","CheckedArr","pos","indexOf","getTreeNodesValue","getTreeNodes","getTreeNodeItem","getTreeNodeItemName","keys","currentName","level","ExportSavePdf","element","pdfName","currentTime","direction","dpi","useCORS","logging","then","canvas","pdf","ctx","getContext","a4w","a4h","imgHeight","width","renderedHeight","height","page","document","createElement","min","putImageData","getImageData","addImage","toDataURL","addPage","save","previewImg","scrollTo","eleW","offsetWidth","eleH","offsetHeight","eleOffsetTop","offsetTop","eleOffsetLeft","offsetLeft","abs","win_in","documentElement","clientWidth","body","win_out","innerWidth","context","scale","translate","baseSrc","pageData","numberFormat","number","decimals","decPoint","thousandsSep","roundtag","n","isFinite","prec","sep","dec","toFixedFix","k","pow","parseFloat","toFixed","round","join","getBlob","cb","xhr","XMLHttpRequest","open","responseType","status","response","send","saveAs","blob","filename","navigator","msSaveOrOpenBlob","msSaveBlob","link","querySelector","URL","createObjectURL","download","style","display","appendChild","click","removeChild","revokeObjectURL","downloadFile"],"mappings":"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","sourcesContent":["import Cookies from 'js-cookie';\n// cookie保存的天数\nimport config from '@/config';\nimport { forEach, hasOneOf, objEqual } from '@/libs/tools';\nimport _ from 'underscore';\nimport { createHash } from 'crypto';\nimport html2canvas from \"html2canvas\";\nimport JSPDF from \"jspdf\";\nimport { JSEncrypt } from 'jsencrypt';\n\nexport const getRandom = () => {\n  return Math.floor(Math.random() * 999999).toString();\n}\n\nexport const isInPrerenderMode = window.__IS_IN_PRERENDER_MODE || false;\nexport const delayAfterRender = isInPrerenderMode ? 500 : 0;\n\nexport const TOKEN_KEY = 'token';\nexport const SESSION_KEY = 'sessionid';\nexport const ID_TYPE_DCT = {\n  '1': '身份证',\n  '2': '护照',\n  '3': '其他'\n};\n\nexport const setToken = (token) => {\n  Cookies.set(TOKEN_KEY, token, { expires: config.cookieExpires || 1 });\n};\n\nexport const getToken = () => {\n  const token = Cookies.get(TOKEN_KEY);\n  if (token) return token;\n  else return false;\n};\n\nexport const setSession = (session) => {\n  Cookies.set(SESSION_KEY, session, { expires: config.cookieExpires || 1 });\n};\n\nexport const getSession = () => {\n  const session = Cookies.get(SESSION_KEY);\n  if (session) return session;\n  else return false;\n};\n\nexport const removeCookies = () => {\n  Cookies.remove('avatar');\n  Cookies.remove('token');\n  Cookies.remove('nickname');\n  Cookies.remove('last_login_time');\n};\n\nexport const hasChild = (item) => {\n  return item.children && item.children.length !== 0;\n};\n\nconst showThisMenuEle = (item, access) => {\n  if (item.meta && item.meta.access && item.meta.access.length) {\n    if (hasOneOf(item.meta.access, access)) return true\n    else return false\n  } else return true\n}\n/**\n * @param {Array} list 通过路由列表得到菜单列表\n * @returns {Array}\n */\nexport const getMenuByRouter = (list, access) => {\n  // console.log('list: ' + JSON.stringify(list, null, 4));\n  // console.log(\"getMenuByRouter permission: \" + permission)\n  let res = [];\n  forEach(list, (item) => {\n    if (!item.meta || (item.meta && !item.meta.hideInMenu)) {\n      let obj = {\n        icon: (item.meta && item.meta.icon) || '',\n        name: item.name,\n        meta: item.meta,\n      };\n      if (\n        (hasChild(item) || (item.meta && item.meta.showAlways)) &&\n        showThisMenuEle(item, access)\n      ) {\n        // console.log(\"item: \" + JSON.stringify(item))\n        obj.children = getMenuByRouter(item.children, access);\n      }\n      if (item.meta && item.meta.href) obj.href = item.meta.href\n      if (showThisMenuEle(item, access)) res.push(obj);\n    }\n  });\n  return res;\n};\n/**\n * @param {Array} routeMetched 当前路由metched\n * @returns {Array}\n */\nexport const getBreadCrumbList = (route, homeRoute) => {\n  let homeItem = { ...homeRoute, icon: homeRoute.meta.icon };\n  let routeMetched = route.matched;\n  if (routeMetched.some((item) => item.name === homeRoute.name)) return [homeItem];\n  let res = routeMetched\n    .filter((item) => {\n      return item.meta === undefined || !item.meta.hide;\n    })\n    .map((item) => {\n      let meta = { ...item.meta };\n      if (meta.title && typeof meta.title === 'function') meta.title = meta.title(route);\n      let obj = {\n        icon: (item.meta && item.meta.icon) || '',\n        name: item.name,\n        meta: meta,\n      };\n      return obj;\n    });\n  res = res.filter((item) => {\n    return !item.meta.hideInMenu;\n  });\n  return [{ ...homeItem, to: homeRoute.path }, ...res];\n};\n\nexport const getRouteTitleHandled = (route) => {\n  let router = { ...route };\n  let meta = { ...route.meta };\n  if (meta.title && typeof meta.title === 'function') meta.title = meta.title(router);\n  router.meta = meta;\n  return router;\n};\n\nexport const showTitle = (item, vm) =>\n  vm.$config.useI18n ? vm.$t(item.name) : (item.meta && item.meta.title) || item.name;\n\n/**\n * @description 本地存储和获取标签导航列表\n */\nexport const setTagNavListInLocalstorage = (list) => {\n  localStorage.tagNaveList = JSON.stringify(list);\n};\n/**\n * @returns {Array} 其中的每个元素只包含路由原信息中的name, path, meta三项\n */\nexport const getTagNavListFromLocalstorage = () => {\n  const list = localStorage.tagNaveList;\n  return list ? JSON.parse(list) : [];\n};\n\n/**\n * @param {Array} routers 路由列表数组\n * @description 用于找到路由列表中name为home的对象\n */\nexport const getHomeRoute = (routers, homeName = 'homePage') => {\n  let i = -1;\n  let len = routers.length;\n  let homeRoute = {};\n  while (++i < len) {\n    let item = routers[i];\n    if (item.children && item.children.length) {\n      let res = getHomeRoute(item.children);\n      if (res.name) return res;\n    } else {\n      if (item.name === homeName) homeRoute = item;\n    }\n  }\n  return homeRoute;\n};\n\n/**\n * @param {*} list 现有标签导航列表\n * @param {*} newRoute 新添加的路由原信息对象\n * @description 如果该newRoute已经存在则不再添加\n */\nexport const getNewTagList = (list, newRoute) => {\n  const { name, path, meta } = newRoute;\n  let newList = [...list];\n  if (newList.findIndex((item) => item.name === name) >= 0) return newList;\n  else newList.push({ name, path, meta });\n  return newList;\n};\n\n/**\n * @param {*} access 用户权限数组，如 ['super_admin', 'admin']\n * @param {*} route 路由列表\n */\nconst hasAccess = (access, route) => {\n  if (route.meta && route.meta.access) return hasOneOf(access, route.meta.access);\n  else return true;\n};\n\n/**\n * 权鉴\n * @param {*} name 即将跳转的路由name\n * @param {*} access 用户权限数组\n * @param {*} routes 路由列表\n * @description 用户是否可跳转到该页\n */\nexport const canTurnTo = (name, access, routes) => {\n  const routePermissionJudge = (list) => {\n    return list.some((item) => {\n      if (item.children && item.children.length) {\n        return routePermissionJudge(item.children);\n      } else if (item.name === name) {\n        return hasAccess(access, item);\n      }\n    });\n  };\n\n  return routePermissionJudge(routes);\n};\n\n/**\n * @param {String} url\n * @description 从URL中解析参数\n */\nexport const getParams = (url) => {\n  const keyValueArr = url.split('?')[1].split('&');\n  let paramObj = {};\n  keyValueArr.forEach((item) => {\n    const keyValue = item.split('=');\n    paramObj[keyValue[0]] = keyValue[1];\n  });\n  return paramObj;\n};\n\n/**\n * @param {Array} list 标签列表\n * @param {String} name 当前关闭的标签的name\n */\nexport const getNextRoute = (list, route) => {\n  let res = {};\n  if (list.length === 2) {\n    res = getHomeRoute(list);\n  } else {\n    const index = list.findIndex((item) => routeEqual(item, route));\n    if (index === list.length - 1) res = list[list.length - 2];\n    else res = list[index + 1];\n  }\n  return res;\n};\n\n/**\n * @param {Number} times 回调函数需要执行的次数\n * @param {Function} callback 回调函数\n */\nexport const doCustomTimes = (times, callback) => {\n  let i = -1;\n  while (++i < times) {\n    callback(i);\n  }\n};\n\n/**\n * @param {Object} file 从上传组件得到的文件对象\n * @returns {Promise} resolve参数是解析后的二维数组\n * @description 从Csv文件中解析出表格，解析成二维数组\n */\nexport const getArrayFromFile = (file) => {\n  let nameSplit = file.name.split('.');\n  let format = nameSplit[nameSplit.length - 1];\n  return new Promise((resolve, reject) => {\n    let reader = new FileReader();\n    reader.readAsText(file); // 以文本格式读取\n    let arr = [];\n    reader.onload = function(evt) {\n      let data = evt.target.result; // 读到的数据\n      let pasteData = data.trim();\n      arr = pasteData\n        .split(/[\\n\\u0085\\u2028\\u2029]|\\r\\n?/g)\n        .map((row) => {\n          return row.split('\\t');\n        })\n        .map((item) => {\n          return item[0].split(',');\n        });\n      if (format === 'csv') resolve(arr);\n      else reject(new Error('[Format Error]:你上传的不是Csv文件'));\n    };\n  });\n};\n\n/**\n * @param {Array} array 表格数据二维数组\n * @returns {Object} { columns, tableData }\n * @description 从二维数组中获取表头和表格数据，将第一行作为表头，用于在iView的表格中展示数据\n */\nexport const getTableDataFromArray = (array) => {\n  let columns = [];\n  let tableData = [];\n  if (array.length > 1) {\n    let titles = array.shift();\n    columns = titles.map((item) => {\n      return {\n        title: item,\n        key: item,\n      };\n    });\n    tableData = array.map((item) => {\n      let res = {};\n      item.forEach((col, i) => {\n        res[titles[i]] = col;\n      });\n      return res;\n    });\n  }\n  return {\n    columns,\n    tableData,\n  };\n};\n\nexport const findNodeUpper = (ele, tag) => {\n  if (ele.parentNode) {\n    if (ele.parentNode.tagName === tag.toUpperCase()) {\n      return ele.parentNode;\n    } else {\n      return findNodeUpper(ele.parentNode, tag);\n    }\n  }\n};\n\nexport const findNodeUpperByClasses = (ele, classes) => {\n  let parentNode = ele.parentNode;\n  if (parentNode) {\n    let classList = parentNode.classList;\n    if (classList && classes.every((className) => classList.contains(className))) {\n      return parentNode;\n    } else {\n      return findNodeUpperByClasses(parentNode, classes);\n    }\n  }\n};\n\nexport const findNodeDownward = (ele, tag) => {\n  const tagName = tag.toUpperCase();\n  if (ele.childNodes.length) {\n    let i = -1;\n    let len = ele.childNodes.length;\n    while (++i < len) {\n      let child = ele.childNodes[i];\n      if (child.tagName === tagName) return child;\n      else return findNodeDownward(child, tag);\n    }\n  }\n};\n\nexport const showByAccess = (access, canViewAccess) => {\n  return hasOneOf(canViewAccess, access);\n};\n\n/**\n * @description 根据name/params/query判断两个路由对象是否相等\n * @param {*} route1 路由对象\n * @param {*} route2 路由对象\n */\nexport const routeEqual = (route1, route2) => {\n  const params1 = route1.params || {};\n  const params2 = route2.params || {};\n  const query1 = route1.query || {};\n  const query2 = route2.query || {};\n  return route1.name === route2.name && objEqual(params1, params2) && objEqual(query1, query2);\n};\n\n/**\n * 判断打开的标签列表里是否已存在这个新添加的路由对象\n */\nexport const routeHasExist = (tagNavList, routeItem) => {\n  let len = tagNavList.length;\n  let res = false;\n  doCustomTimes(len, (index) => {\n    if (routeEqual(tagNavList[index], routeItem)) res = true;\n  });\n  return res;\n};\n\nexport const localSave = (key, value) => {\n  localStorage.setItem(key, value);\n};\n\nexport const localRead = (key) => {\n  return localStorage.getItem(key) || '';\n};\n\nexport const formatMoney = (s, type) => {\n  if (/[^0-9.]/.test(s)) return '0.00';\n  if (s == null || s == 'null' || s == '') return '0.00';\n  s = s.toString().replace(/^(\\d*)$/, '$1.');\n  s = (s + '00').replace(/(\\d*\\.\\d\\d)\\d*/, '$1');\n  s = s.replace('.', ',');\n  var re = /(\\d)(\\d{3},)/;\n  while (re.test(s)) s = s.replace(re, '$1,$2');\n  s = s.replace(/,(\\d\\d)$/, '.$1');\n  if (type == 0) {\n    var a = s.split('.');\n    if (a[1] == '00') {\n      s = a[0];\n    }\n  }\n  return s;\n};\n\n// 合并数组，且去重\nexport const concatArray = (array, uniq = true) => {\n  if (!_.isArray(array)) {\n    return array;\n  }\n  let arr = Array.prototype.concat.apply([], array);\n  return uniq ? _.uniq(arr) : arr;\n};\n\nexport const setUserName = (username) => {\n  Cookies.set('username', username, { expires: config.cookieExpires || 1 || 1 })\n}\n\nexport const getUserName = () => {\n  const userName = Cookies.get('username')\n  if (userName) return userName\n  else return false\n}\n\nexport const setCookiesItem = (key, value) => {\n  Cookies.set(key, value, { expires: config.cookieExpires || 1 || 1 })\n}\n\nexport const getCookiesItem = (key) => {\n  const value = Cookies.get(key)\n  if (value) return value\n  else return false\n}\n\nexport const getUserInfo = () => {\n  const userInfo = localRead('userInfo');\n  if (userInfo) {\n    return JSON.stringify(userInfo)\n  } else {\n    return {}\n  }\n}\n\n// rsa encrypt\nconst PUB_KEY = `\n-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCmNyKjsL3UNklCfhIj7In9kNxj\nTqwi76f6pSuXfSNiJuoVtKZNyDCCW5Edzo0HHglLlpskVN8s3JV4lmXTU14BUYW/\n/B982hwUAgPElyo3BXpd66VN8U9A9FuddaK7gvK8+FOsOHT0a+vGb7/Uk3HpJ1AJ\noO3Zt0Dqyc0dL/7hLwIDAQAB\n-----END PUBLIC KEY-----\n`;\nexport const encryptByPubKey = (rawData) => {\n  let crypto;\n  try {\n    crypto = require('crypto');\n  } catch (err) {\n    console.log('crypto support is disabled!');\n  }\n  var buffer = Buffer.from(rawData);\n  var encrypted = crypto.publicEncrypt(PUB_KEY, buffer);\n  return encrypted.toString(\"base64\");\n}\n\n// rsa encrypt\nconst RSA_PUB_KEY = `\n-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDESPaIBt+nS0EQmHcmI8llMFec\ncO6XMP3D1T28vPjH6KJ9CCurMH2Ag5lSWF0fe3nQDGTVTz7oMEikqqNmP5Njkxay\ndP4QAsfeBKHibnsCY/4MbhvpJqEGAuhZi/AD2zj2sAv+Aa46FLehjxQXZejL2tUl\neh0DW6YBXU2ov8MiHQIDAQAB\n-----END PUBLIC KEY-----\n`;\nexport const rsaEncryptByPubKey = (rawData) => {\n  const encrypt = new JSEncrypt();\n  encrypt.setPublicKey(RSA_PUB_KEY);\n  return encrypt.encrypt(rawData);\n}\n\n\n/**\n * @param {string} algorithm\n * @param {any} content\n *  @return {string}\n */\nexport const encrypt = (algorithm, content) => {\n  let hash = createHash(algorithm)\n  hash.update(content)\n  return hash.digest('hex')\n}\n\n/**\n * @param {any} content\n *  @return {string}\n */\nexport const sha1 = (content) => encrypt('sha1', content)\n\n// 币种符号\nexport const currency = {\n  'CNY': '￥',\n  'HKD': 'HK＄',\n  'USD': '＄',\n  'EUR': '€',\n  'GBP': '￡',\n  'JPY': 'J￥',\n  'KRW': '₩'\n}\n\n\n/**\n * @param {any} content\n *  @return {string}\n */\nexport const md5 = (content) => encrypt('md5', content)\n\n// 校验是否为合法手机号码\nexport const isPhone = (str) => {\n  const reg = /^[1][3-9]\\d{9}$|^([6|9])\\d{7}$|^[0][9]\\d{8}$|^[6]([8|6])\\d{5}$/;\n  if (!reg.test(str)) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\n// 根据部门树形结构,返回叶子节点部门数组\nexport const buildChildDepartmentArray = (selectDepartData, merchantDepartData) => {\n  //判断两个参数是否为数组\n  let tmp = [];\n  selectDepartData.map(function(item, index) {\n    if (item) {\n      tmp.push(item);\n      //查找父id是当前id的数组\n      let curDepart = _.filter(merchantDepartData, cur => {return cur.parentid == item});\n      if (curDepart.length !== 0) {\n        let departments = _.pluck(curDepart,'department_id');\n        let res = buildChildDepartmentArray(departments, merchantDepartData);\n        tmp = _.union(tmp, res);\n      }\n    }\n\n  });\n  // console.log(\"buildChildDepartmentArray=====finished---tmp>>>\" + JSON.stringify(tmp));\n  return tmp;\n}\n\n// 根据叶子节点部门数组和部门组织数组，返回部门树形结构\nexport const buildDepartmentTree = (childData, departmentData) => {\n  //判断两个参数是否为数组\n  let tmp = [];\n  childData.map(function(item, index) {\n    if (item) {\n      let curDepart = _.find(departmentData, cur => {return cur.department_id == item});\n      if (curDepart) {\n        let newDepart = {\n          department_id: curDepart.department_id,\n          parentid: curDepart.parentid,\n          name: curDepart.name\n        };\n        tmp.push(newDepart);\n\n        if (curDepart.parentid == \"\"){\n\n        }\n        else{\n          let inDepart = [];\n          inDepart.push(curDepart.parentid);\n          let res = buildDepartmentTree(inDepart, departmentData);\n          let uniontmp = _.union(tmp, res);\n          tmp = _.uniq(uniontmp, true, 'department_id');\n        }\n      }\n    }\n\n  });\n  return tmp;\n}\n\n// 递归返回树形结构，默认主ID字段名为 code，父id字段名为 parents， 根据数据可自定义\nexport const buildTree = (queryArr, sub = {}, currentKey = 'code', parentsKey = 'parents', child = 'children', root = '0') => {\n  // console.log(\"buildTree--->>>\" + root + \"--->>>\" + JSON.stringify(queryArr));\n  let tmp = [];\n  let rootTree={\n    department_id: '0',\n    parentid: \"\",\n    name: \"全部部门\",\n  };\n  let query = JSON.parse(JSON.stringify(queryArr));\n  if (root == '0'){\n    query.map(function(item, i) {\n      if (!sub[currentKey]) {\n        if (item[parentsKey] === '') {\n          item[parentsKey] = '0';\n        }\n      }\n    });\n    query.push(rootTree);\n  }\n\n  query.map(function(item, i) {\n    if (item) {\n      _.extend(item, { id: item[currentKey] });\n      _.extend(item, { title: item['name'] });\n    }\n    if (!sub[currentKey]) {\n      if (item[parentsKey] === '') {\n        query[i] = false;\n        item['checked'] = true;\n        tmp.push(item);\n      }\n    } else {\n      if (sub[currentKey] === item[parentsKey]) {\n        query[i] = false;\n        item['checked'] = true;\n        tmp.push(item);\n      }\n    }\n  })\n  if (tmp.length === 0) {\n    return;\n  }\n  sub = tmp;\n  if (sub.length > 0) {\n    // console.log(\"sub ===> \", sub)\n    sub.map(function(cur, c) {\n      let res = buildTree(query, cur, currentKey, parentsKey, child, '1');\n      if (res) {\n        sub[c][child] = res;\n      }\n    });\n  }\n  return sub;\n}\n\n// 递归返回树形结构，默认主ID字段名为 code，父id字段名为 parents， 根据数据可自定义\nexport const buildTreeChecked = (queryArr, sub = {}, currentKey = 'code', parentsKey = 'parents', child = 'children', root = '0', CheckedArr) => {\n  // console.log(\"buildTree--->>>\" + root + \"--->>>\" + JSON.stringify(queryArr));\n  let tmp = [];\n  let rootTree={\n    department_id: '0',\n    parentid: \"\",\n    name: \"全部部门\",\n  };\n  let query = JSON.parse(JSON.stringify(queryArr));\n  if (root == '0'){\n    query.map(function(item, i) {\n      if (!sub[currentKey]) {\n        if (item[parentsKey] === '') {\n          item[parentsKey] = '0';\n        }\n      }\n    });\n    query.push(rootTree);\n  }\n\n  query.map(function(item, i) {\n    if (item) {\n      _.extend(item, { id: item[currentKey] });\n      _.extend(item, { title: item['name'] });\n    }\n    if (!sub[currentKey]) {\n      if (item[parentsKey] === '') {\n        query[i] = false;\n        tmp.push(item);\n      }\n    } else {\n      if (sub[currentKey] === item[parentsKey]) {\n        query[i] = false;\n        let pos = _.indexOf(CheckedArr, item[currentKey]);\n        if (pos != -1){\n          item['checked'] = true;\n        }\n        tmp.push(item);\n      }\n    }\n  })\n  if (tmp.length === 0) {\n    return;\n  }\n  sub = tmp;\n  if (sub.length > 0) {\n    // console.log(\"sub ===> \", sub)\n    sub.map(function(cur, c) {\n      let res = buildTreeChecked(query, cur, currentKey, parentsKey, child, '1', CheckedArr);\n      if (res) {\n        sub[c][child] = res;\n      }\n    });\n  }\n  return sub;\n}\n\n\n// 递归返回树形结构，默认主ID字段名为 code，父id字段名为 parents， 根据数据可自定义\nexport const getTreeNodesValue = (queryArr, currentKey = 'code', child = 'children', key = '') => {\n  let tmp = [];\n  let query = JSON.parse(JSON.stringify(queryArr));\n\n  query.map(function(item, i) {\n    if (item[currentKey] != undefined && item) {\n      tmp.push(key==''?item[currentKey]:key + '-' + item[currentKey]);\n    }\n    if (item[child] != undefined && item[child].length > 0) {\n      let res = getTreeNodesValue(item[child], currentKey, child, key==''?item[currentKey]:key + '-' + item[currentKey]);\n      if (res.length > 0){\n        tmp.push(...res);\n      }\n    }\n  })\n\n  return tmp;\n}\n\n// 递归返回树形结构，默认主ID字段名为 code，父id字段名为 parents， 根据数据可自定义\nexport const getTreeNodes = (queryArr, currentKey = 'code', child = 'children') => {\n  let tmp = [];\n  let query = JSON.parse(JSON.stringify(queryArr));\n\n  query.map(function(item, i) {\n    if (item[currentKey] != undefined && item) {\n      tmp.push(item[currentKey]);\n    }\n    if (item[child] != undefined && item[child].length > 0) {\n      let res = getTreeNodes(item[child], currentKey, child);\n      if (res.length > 0){\n        tmp.push(...res);\n      }\n    }\n  })\n\n  return tmp;\n}\n\n// 递归返回树形结构中某一个关键字对应的节点数据，根据数据可自定义\nexport const getTreeNodeItem = (queryArr, currentKey = 'code', child = 'children', key) => {\n  let tmp = [];\n  queryArr.map(function(item, i) {\n    if (item[currentKey] != undefined && item) {\n      if (item[currentKey] == key){\n        tmp.push(item);\n      }\n    }\n    if (item[child] != undefined && item[child].length > 0) {\n      let res = getTreeNodeItem(item[child], currentKey, child, key);\n      if (res.length > 0){\n        tmp.push(...res);\n      }\n    }\n  })\n\n  return tmp;\n}\n\n// 递归返回树形结构中某一个关键字对应的节点数据，根据数据可自定义\nexport const getTreeNodeItemName = (queryArr, currentKey = 'code', child = 'children', keys, currentName) => {\n  let tmp = [];\n  queryArr.map(function(item, i) {\n    if (item[currentKey] != undefined && item) {\n      _.find(keys, function(key){\n        if (item[currentKey] == key){\n          tmp.push({id:item[currentKey],name:item[currentName],level:item.level});\n        }\n      });\n\n    }\n    if (item[child] != undefined && item[child].length > 0) {\n      let res = getTreeNodeItemName(item[child], currentKey, child, keys, currentName);\n      if (res.length > 0){\n        tmp.push(...res);\n      }\n    }\n  });\n\n  return tmp;\n}\n\n// 导出页面为PDF格式\nexport const ExportSavePdf = (element, pdfName, currentTime, direction = 'p') => {\n  // var element = document.getElementById(\"statPrint\")\n  html2canvas(element, {\n    dpi: 300,\n    useCORS: true, // 如果说所生成的页面中带有跨域的图片，这个useCors需要设置为True 否则画布被污染不会显示\n    logging: false,\n  }).then(function (canvas) {\n    // let [imgX, imgY] = [595.28, 841.89];\n    // let pdf = new jsPDF('p', 'pt', 'a4');\n    // for (let [index, item] of pageList.entries()) {\n    //   for (let j = 0; j < item.imageList.length; j++) {\n    //     const image = item.imageList[j];\n    //     let imgHeight = imgX / (image.width / image.height); //根据宽度计算高度\n    //     pdf.addImage(image.data, 'JPEG', 0, 0, imgX, imgHeight);\n    //     pdf.addPage();\n    //   }\n    // }\n    // let targetPage = pdf.internal.getNumberOfPages();\n    // pdf.deletePage(targetPage); // 删除最后一页\n    // pdf.save(`测试.pdf`);\n\n\n    // let pdf = new jsPDF('p', 'pt', [pdfX, pdfY]);\n    // 第一个参数： l：横向  p：纵向\n    // 第二个参数：测量单位（\"pt\"，\"mm\", \"cm\", \"m\", \"in\" or \"px\"）\n    // 第三个参数：可以是下面格式，默认为“a4”\n    let pdf = new JSPDF(direction, \"mm\", \"a4\") // A4纸，横向\n    let ctx = canvas.getContext(\"2d\")\n    let a4w = 190;\n    let a4h = 277; // A4大小，210mm x 297mm，四边各保留10mm的边距，显示区域190x277\n    if (direction == 'l'){\n      a4w = 277;\n      a4h = 190;\n    }\n    let imgHeight = Math.floor(a4h * canvas.width / a4w); // 按A4显示比例换算一页图像的像素高度\n    let renderedHeight = 0;\n\n    while (renderedHeight < canvas.height) {\n      let page = document.createElement(\"canvas\");\n      page.width = canvas.width;\n      page.height = Math.min(imgHeight, canvas.height - renderedHeight);// 可能内容不足一页\n\n      // 用getImageData剪裁指定区域，并画到前面创建的canvas对象中\n      page.getContext(\"2d\").putImageData(ctx.getImageData(0, renderedHeight, canvas.width, Math.min(imgHeight, canvas.height - renderedHeight)), 0, 0);\n      pdf.addImage(page.toDataURL(\"image/jpeg\", 1.0), \"JPEG\", 10, 10, a4w, Math.min(a4h, a4w * page.height / page.width)); // 添加图像到页面，保留10mm边距\n\n      renderedHeight += imgHeight;\n      if (renderedHeight < canvas.height) {\n        pdf.addPage();\n      }// 如果后面还有内容，添加一个空页\n      // delete page;\n    }\n    pdf.save(pdfName + currentTime);\n  })\n}\n\nexport const previewImg = (ele) => {\n  window.scrollTo(0, 0);\n  let eleW = ele.offsetWidth;// 获得该容器的宽\n  let eleH = ele.offsetHeight;// 获得该容器的高\n  let eleOffsetTop = ele.offsetTop;  // 获得该容器到文档顶部的距离\n  let eleOffsetLeft = ele.offsetLeft; // 获得该容器到文档最左的距离\n\n  var canvas = document.createElement(\"canvas\");\n  var abs = 0;\n\n  let win_in = document.documentElement.clientWidth || document.body.clientWidth; // 获得当前可视窗口的宽度（不包含滚动条）\n  let win_out = window.innerWidth; // 获得当前窗口的宽度（包含滚动条）\n\n  if (win_out > win_in) {\n    abs = (win_out - win_in) / 2;    // 获得滚动条宽度的一半\n  }\n  canvas.width = eleW * 2;\n  canvas.height = eleH * 2;\n\n  var context = canvas.getContext(\"2d\");\n  context.scale(2, 2);\n  context.translate(-eleOffsetLeft - abs, -eleOffsetTop);\n  var baseSrc = ''\n  html2canvas(ele, {\n    dpi: 300,\n    scale: 2,//处理图片模糊\n    useCORS: true  //允许canvas画布内 可以跨域请求外部链接图片, 允许跨域请求。\n  }).then((canvas) => {\n    var pageData = canvas.toDataURL('image/jpeg', 1.0);\n    baseSrc = pageData\n  })\n\n  return baseSrc;\n}\n\n\n// 金额格式化\nexport const numberFormat = (number, decimals = 2, decPoint = '.', thousandsSep = ',', roundtag = 'round') => {\n  /*\n   * 参数说明：\n   * number：要格式化的数字\n   * decimals：保留几位小数\n   * dec_point：小数点符号\n   * thousands_sep：千分位符号\n   * roundtag:舍入参数，默认 'ceil' 向上取,'floor'向下取,'round' 四舍五入\n   * */\n  number = (number + '').replace(/[^0-9+-Ee.]/g, '')\n  roundtag = roundtag || 'ceil' // 'ceil','floor','round'\n  let n = !isFinite(+number) ? 0 : +number\n  let prec = !isFinite(+decimals) ? 0 : Math.abs(decimals)\n  let sep = (typeof thousandsSep === 'undefined') ? ',' : thousandsSep\n  let dec = (typeof decPoint === 'undefined') ? '.' : decPoint\n  let s = ''\n  let toFixedFix = function(n, prec) {\n    let k = Math.pow(10, prec)\n    console.log()\n\n    return '' + parseFloat(Math[roundtag](parseFloat((n * k).toFixed(prec * 2))).toFixed(prec * 2)) / k\n  }\n  s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.')\n  let re = /(-?\\d+)(\\d{3})/\n  while (re.test(s[0])) {\n    s[0] = s[0].replace(re, '$1' + sep + '$2')\n  }\n\n  if ((s[1] || '').length < prec) {\n    s[1] = s[1] || ''\n    s[1] += new Array(prec - s[1].length + 1).join('0')\n  }\n  return s.join(dec)\n}\n\n/**\n * 获取 blob\n * @param  {String} url 目标文件地址\n * @return {cb}\n */\nfunction getBlob(url,cb) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url, true);\n  xhr.responseType = 'blob';\n  xhr.onload = function() {\n    if (xhr.status === 200) {\n      cb(xhr.response);\n    }\n  };\n  xhr.send();\n}\n\n/**\n * 保存\n * @param  {Blob} blob\n * @param  {String} filename 想要保存的文件名称\n */\nfunction saveAs(blob, filename) {\n  if (window.navigator.msSaveOrOpenBlob) {\n    navigator.msSaveBlob(blob, filename);\n  } else {\n    var link = document.createElement('a');\n    var body = document.querySelector('body');\n    link.href = window.URL.createObjectURL(blob);\n    link.download = filename;\n    // fix Firefox\n    link.style.display = 'none';\n    body.appendChild(link);\n    link.click();\n    body.removeChild(link);\n    window.URL.revokeObjectURL(link.href);\n  };\n}\n\n/**\n * 下载\n * @param  {String} url 目标文件地址\n * @param  {String} filename 想要保存的文件名称\n */\nexport function downloadFile(url, filename) {\n  getBlob(url, function(blob) {\n    saveAs(blob, filename);\n  });\n};\n\n\n\n"]}]}