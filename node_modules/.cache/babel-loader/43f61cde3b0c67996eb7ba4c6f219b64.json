{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js!/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/staff-management/dining-staff/components/add-otheruser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/staff-management/dining-staff/components/add-otheruser.vue","mtime":1638522076785},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL1x1NURFNVx1NEY1Qy9waWNfYWQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3poYW5nL1x1NURFNVx1NEY1Qy9waWNfYWQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBfIGZyb20gInVuZGVyc2NvcmUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkZC1vdGhlcnVzZXItbW9kYWwudnVlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnRuTG9hZGluZzogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBpZF9ubzogJycsCiAgICAgICAgcGhvbmVzOiAnJywKICAgICAgICByb2xlX2lkOiB1bmRlZmluZWQsCiAgICAgICAgY2FyZF9ubzogJycsCiAgICAgICAgZW1haWxzOiAnJwogICAgICB9LAogICAgICBydWxlRm9ybTogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlp5PlkI0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgaWRfbm86IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXouqvku73or4Hlj7cnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGhvbmVzOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+35aGr5YaZ5omL5py65Y+3JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHJvbGVfaWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nkurrlkZjnsbvlnosnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6IHsKICAgIHJvbGVMaXN0OiBmdW5jdGlvbiByb2xlTGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnJvbGUucm9sZUxpc3QucmVzdWx0OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkT3RoZXJVc2VyOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYWRkT3RoZXJVc2VyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybU90aGVyVXNlck1vZGFsLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5idG5Mb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXMuZm9ybSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgICAgICAgICAgIHVzZXJfdHlwZTogMiwKICAgICAgICAgICAgICAgICAgICAgIGNfdXNlcmNvZGU6IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmVtcFVzZXJDb2RlLAogICAgICAgICAgICAgICAgICAgICAgb3JnX2lkOiBfdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJPcmdJZCwKICAgICAgICAgICAgICAgICAgICAgIG9yZ19uYW1lOiBfdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJPcmdOYW1lLAogICAgICAgICAgICAgICAgICAgICAgaXNfYWRtaW46IDAsCiAgICAgICAgICAgICAgICAgICAgICBpc193YWxsZXRfYWRtaW46IDAKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtc0RhdGEgPSBbXTsKICAgICAgICAgICAgICAgICAgICBwYXJhbXNEYXRhLnB1c2gocGFyYW1zKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIEJhc2U2NCA9IHJlcXVpcmUoJ2pzLWJhc2U2NCcpLkJhc2U2NDsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbHMgPSBCYXNlNjQuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHBhcmFtc0RhdGEpKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVxUGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbmlkOiBfdGhpcy4kc3RvcmUuc3RhdGUudXNlci50b2tlbiwKICAgICAgICAgICAgICAgICAgICAgIHVzZXJfZGV0YWlsOiBkZXRhaWxzCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyQWRkJywgcmVxUGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMucmV0dXJuX2NvZGUgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5idG5Mb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfmt7vliqDlsLHppJDkurrlkZjmiJDlip/vvIEnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRwYXJlbnQucXVlcnkoKTsgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRPdGhlclVzZXJNb2RhbCcsIGZhbHNlKTsKCgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5mb3JtT3RoZXJVc2VyTW9kYWwucmVzZXRGaWVsZHMoKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLmVycm9yKCLplJnor6/noIHvvJoiICsgcmVzLnJldHVybl9jb2RlICsgIiwg6ZSZ6K+v5L+h5oGv77yaIiArIHJlcy5yZXR1cm5fbWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImFkZE90aGVyVXNlcj09PT09PWVycm9yPj4+PiIgKyBlcnIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGFkZE90aGVyVXNlcigpIHsKICAgICAgICByZXR1cm4gX2FkZE90aGVyVXNlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYWRkT3RoZXJVc2VyOwogICAgfSgpCiAgfSwKICB3YXRjaDogewogICAgb3RoZXJVc2VyQWRkTW9kYWw6IGZ1bmN0aW9uIG90aGVyVXNlckFkZE1vZGFsKHZhbCkgewogICAgICBpZiAoIXZhbCkgewogICAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgaWRfbm86ICcnLAogICAgICAgICAgcGhvbmVzOiAnJywKICAgICAgICAgIHJvbGVfaWQ6IHVuZGVmaW5lZCwKICAgICAgICAgIGNhcmRfbm86ICcnLAogICAgICAgICAgZW1haWxzOiAnJwogICAgICAgIH07CiAgICAgICAgdGhpcy5idG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7Ly8gdGhpcy4kcmVmc1snZm9ybU90aGVyVXNlck1vZGFsJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["add-otheruser.vue"],"names":[],"mappings":"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","sourcesContent":["\n<!--  -->\n<template>\n  <div>\n    <Form class=\"form-wrapper margin-top-20\" :model=\"form\" :label-width=\"80\" ref=\"formOtherUserModal\" :rules=\"ruleForm\" >\n      <FormItem label=\"姓名\" prop=\"name\">\n        <Input type=\"text\" v-model=\"form.name\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"身份证号\" prop=\"id_no\">\n        <Input type=\"text\" v-model=\"form.id_no\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"手机号\"  prop=\"phones\">\n        <Input type=\"text\" v-model=\"form.phones\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"人员类型\" prop=\"role_id\">\n        <Select class=\"r\" v-model=\"form.role_id\" style=\"width: 80%;\">\n          <Option v-for=\"item of roleList\" :key=\"item.role_id\" :value=\"item.role_id+''\">{{item.name}}</Option>\n        </Select>\n      </FormItem>\n      <FormItem label=\"就餐卡号\">\n        <Input type=\"text\" v-model=\"form.card_no\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"邮箱\">\n        <Input type=\"text\" v-model=\"form.emails\" style=\"width: 80%;\"/>\n      </FormItem>\n      <div class=\"text-center margin-bottom-30 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"form={};\">重置</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"addOtherUser\">确定</Button>\n      </div>\n\n    </Form>\n  </div>\n</template>\n\n<script>\nimport _ from \"underscore\";\n\nexport default {\n  name: \"add-otheruser-modal.vue\",\n  data () {\n    return {\n      btnLoading: false,\n      form: {\n        name: '',\n        id_no: '',\n        phones: '',\n        role_id: undefined,\n        card_no: '',\n        emails: ''\n      },\n      ruleForm: {\n        name: [\n          { required: true, message: '请输入姓名', trigger: 'blur' }\n        ],\n        id_no: [\n          { required: true, message: '请输入身份证号', trigger: 'blur' }\n        ],\n        phones: [\n          { required: true, message: '请填写手机号', trigger: 'blur' }\n        ],\n        role_id: [\n          { required: true, message: '请选择人员类型', trigger: 'change' }\n        ],\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    roleList(){\n      return this.$store.state.role.roleList.result;\n    },\n\n  },\n\n  methods: {\n    addOtherUser: async function(){\n      this.$refs.formOtherUserModal.validate((valid) => {\n        if (valid) {\n          this.btnLoading = true;\n          let params = {\n            ...this.form,\n            merchant_id: this.$store.state.user.curMerchantId,\n            user_type: 2,\n            c_usercode: this.$store.state.user.empUserCode,\n            org_id: this.$store.state.user.curOrgId,\n            org_name: this.$store.state.user.curOrgName,\n            is_admin: 0,\n            is_wallet_admin: 0,\n          };\n\n          let paramsData = [];\n          paramsData.push(params);\n\n          let Base64 = require('js-base64').Base64;\n          let details = Base64.encode(JSON.stringify(paramsData));\n\n          let reqParams = {\n            sessionid: this.$store.state.user.token,\n            user_detail: details,\n          };\n\n          this.$store.dispatch('userAdd', reqParams).then(res=>{\n            if(res.return_code == 0){\n              this.btnLoading = false;\n              this.$Message.success('添加就餐人员成功！');\n              this.$parent.query();\n              // this.$store.commit('setOtherUserModal', false);\n              this.$refs.formOtherUserModal.resetFields();\n            }\n            else{\n              this.$Message.error(\"错误码：\" + res.return_code + \", 错误信息：\" + res.return_message);\n            }\n          }).catch((err) => {\n            this.btnLoading = false;\n            console.log(\"addOtherUser======error>>>>\" + err);\n          });\n        }\n      })\n    },\n  },\n  watch: {\n    otherUserAddModal(val){\n      if(!val){\n        this.form = {\n          name: '',\n          id_no: '',\n          phones: '',\n          role_id: undefined,\n          card_no: '',\n          emails: ''\n        }\n        this.btnLoading = false;\n      }else{\n        // this.$refs['formOtherUserModal'].resetFields();\n      }\n    }\n  }\n}\n\n</script>\n<style lang='less' scoped>\n</style>\n"],"sourceRoot":"src/views/staff-management/dining-staff/components"}]}