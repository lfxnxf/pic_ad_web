{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js!/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/staff-management/dining-staff/components/edit-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/staff-management/dining-staff/components/edit-modal.vue","mtime":1638761278034},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3poYW5nL2NhbnRlZW5fbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRpdGxlOiAnJywKICAgICAgZm9ybTogewogICAgICAgIHJvbGVfaWQ6ICcnLAogICAgICAgIGNhcmRfbm86ICcnLAogICAgICAgIHN0YXR1czogJycKICAgICAgfQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHt9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyRWRpdE1vZGFsOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJFZGl0TW9kYWw7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0VXNlckVkaXRNb2RhbCcsIHZhbCk7CiAgICAgIH0KICAgIH0sCiAgICByb2xlTGlzdDogZnVuY3Rpb24gcm9sZUxpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5yb2xlLnJvbGVMaXN0LnJlc3VsdDsKICAgIH0sCiAgICBjdXJVc2VyRWRpdERhdGE6IGZ1bmN0aW9uIGN1clVzZXJFZGl0RGF0YSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyVXNlckVkaXREYXRhOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CgogICAgICB2YXIgcGFyYW1zID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgc3RhZmZfaWQ6IHRoaXMuY3VyVXNlckVkaXREYXRhLnN0YWZmX2lkCiAgICAgIH0sIHRoaXMuZm9ybSk7CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlckVkaXQnLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMucmV0dXJuX2NvZGUgPT0gMCkgewogICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+aPkOS6pOaIkOWKn++8gScpOwoKICAgICAgICAgIF90aGlzLiRwYXJlbnQucXVlcnkoKTsKCiAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRVc2VyRWRpdE1vZGFsJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdXNlckVkaXRNb2RhbDogZnVuY3Rpb24gdXNlckVkaXRNb2RhbCh2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLmN1clVzZXJFZGl0RGF0YS5uYW1lOwogICAgICAgIHRoaXMuZm9ybS5yb2xlX2lkID0gdGhpcy5jdXJVc2VyRWRpdERhdGEucm9sZV9pZCArICcnOwogICAgICAgIHRoaXMuZm9ybS5jYXJkX25vID0gdGhpcy5jdXJVc2VyRWRpdERhdGEuY2FyZF9ubzsKICAgICAgICB0aGlzLmZvcm0uc3RhdHVzID0gdGhpcy5jdXJVc2VyRWRpdERhdGEuc3RhdHVzICsgJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmc1snZm9ybU1vZGFsRWRpdCddLnJlc2V0RmllbGRzKCk7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["edit-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,OAAA,EAAA,EAFA;AAGA,QAAA,MAAA,EAAA;AAHA;AAHA,KAAA;AASA,GAXA;AAaA,EAAA,UAAA,EAAA,EAbA;AAeA,EAAA,QAAA,EAAA;AACA,IAAA,aAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,aAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,GAJA,EAIA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,GAAA;AACA;AANA,KADA;AASA,IAAA,QATA,sBASA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA,CAAA,MAAA;AACA,KAXA;AAYA,IAAA,eAZA,6BAYA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,eAAA;AACA;AAdA,GAfA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;;AACA,UAAA,MAAA;AACA,QAAA,QAAA,EAAA,KAAA,eAAA,CAAA;AADA,SAEA,KAAA,IAFA,CAAA;;AAIA,WAAA,MAAA,CAAA,QAAA,CAAA,UAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,WAAA,IAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA;;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,KAAA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,KAAA;AACA;AACA,OAPA,WAOA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OATA;AAUA;AAjBA,GAhCA;AAmDA,EAAA,KAAA,EAAA;AACA,IAAA,aADA,yBACA,GADA,EACA;AACA,UAAA,GAAA,EAAA;AACA,aAAA,KAAA,GAAA,KAAA,eAAA,CAAA,IAAA;AACA,aAAA,IAAA,CAAA,OAAA,GAAA,KAAA,eAAA,CAAA,OAAA,GAAA,EAAA;AACA,aAAA,IAAA,CAAA,OAAA,GAAA,KAAA,eAAA,CAAA,OAAA;AACA,aAAA,IAAA,CAAA,MAAA,GAAA,KAAA,eAAA,CAAA,MAAA,GAAA,EAAA;AACA,OALA,MAKA;AACA,aAAA,KAAA,CAAA,eAAA,EAAA,WAAA;AACA,aAAA,OAAA,GAAA,KAAA;AACA;AACA;AAXA;AAnDA,CAAA","sourcesContent":["<!--  -->\n<template>\n  <Modal v-model=\"userEditModal\" width=\"520px\" :footer-hide=\"true\" :title=\"title\" >\n    <Form class=\"padding-left-20\" v-model=\"form\" :label-width=\"80\" ref=\"formModalEdit\">\n      <FormItem label=\"人员类型\">\n        <Select class=\"r\" v-model=\"form.role_id\" style=\"width: 80%;\">\n          <Option v-for=\"item of roleList\" :key=\"item.role_id\" :value=\"item.role_id+''\">{{item.name}}</Option>\n        </Select>\n      </FormItem>\n     \n      <FormItem label=\"就餐卡号\">\n        <Input type=\"text\" v-model=\"form.card_no\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"状态\">\n        <RadioGroup v-model=\"form.status\">\n          <Radio class=\"margin-right-20\" label=\"1\">正常</Radio>\n          <Radio label=\"0\">删除</Radio>\n        </RadioGroup>\n      </FormItem>\n      <div class=\"margin-top-30 margin-bottom-20 text-center\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setUserEditModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"loading\" @click=\"handleEdit\">确认</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      loading: false,\n      title: '',\n      form: {\n        role_id: '',\n        card_no: '',\n        status: ''\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    userEditModal: {\n      get() {\n        return this.$store.state.user.userEditModal;\n      },\n      set(val) {\n        this.$store.commit('setUserEditModal', val);\n      }\n    },\n    roleList(){\n      return this.$store.state.role.roleList.result;\n    },\n    curUserEditData() {\n      return this.$store.state.user.curUserEditData;\n    }\n  },\n\n  methods: {\n    handleEdit() {\n      this.loading = true;\n      let params = {\n        staff_id: this.curUserEditData.staff_id,\n        ...this.form\n      }\n      this.$store.dispatch('userEdit', params).then(res=>{\n        if(res.return_code == 0){\n          this.loading = false;\n          this.$Message.success('提交成功！');\n          this.$parent.query();\n          this.$store.commit('setUserEditModal', false);\n        }\n      }).catch(err => {\n        this.loading = false;\n      });\n    }\n  },\n  watch: {\n    userEditModal(val){\n      if(val){\n        this.title = this.curUserEditData.name;\n        this.form.role_id = this.curUserEditData.role_id+'';\n        this.form.card_no = this.curUserEditData.card_no;\n        this.form.status = this.curUserEditData.status+''\n      }else{\n        this.$refs['formModalEdit'].resetFields();\n        this.loading = false;\n      }\n    }\n\n  }\n}\n\n</script>\n<style lang='less' scoped>\n</style>\n"],"sourceRoot":"src/views/staff-management/dining-staff/components"}]}