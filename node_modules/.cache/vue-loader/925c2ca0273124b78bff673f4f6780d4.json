{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/components/enterprise-main/components/side-menu/side-menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/components/enterprise-main/components/side-menu/side-menu.vue","mtime":1638355006727},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTaWRlTWVudUl0ZW0gZnJvbSAnLi9zaWRlLW1lbnUtaXRlbS52dWUnOwppbXBvcnQgQ29sbGFwc2VkTWVudSBmcm9tICcuL2NvbGxhcHNlZC1tZW51LnZ1ZSc7CmltcG9ydCB7IGdldFVuaW9uIH0gZnJvbSAnQC9saWJzL3Rvb2xzJzsKaW1wb3J0IG1peGluIGZyb20gJy4vbWl4aW4nOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTaWRlTWVudScsCiAgbWl4aW5zOiBbbWl4aW5dLAogIGNvbXBvbmVudHM6IHsKICAgIFNpZGVNZW51SXRlbSwKICAgIENvbGxhcHNlZE1lbnUsCiAgfSwKICBwcm9wczogewogICAgbWVudUxpc3Q6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgfSwKICAgIGNvbGxhcHNlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgfSwKICAgIHRoZW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2xpZ2h0JywKICAgIH0sCiAgICByb290SWNvblNpemU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAyMCwKICAgIH0sCiAgICBpY29uU2l6ZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDE2LAogICAgfSwKICAgIGFjY29yZGlvbjogQm9vbGVhbiwKICAgIGFjdGl2ZU5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJywKICAgIH0sCiAgICBvcGVuTmFtZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcGVuZWROYW1lczogW10sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2VsZWN0KG5hbWUpIHsKICAgICAgdGhpcy4kZW1pdCgnb24tc2VsZWN0JywgbmFtZSk7CiAgICB9LAogICAgZ2V0T3BlbmVkTmFtZXNCeUFjdGl2ZU5hbWUobmFtZSkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUubWF0Y2hlZC5tYXAoKGl0ZW0pID0+IGl0ZW0ubmFtZSkuZmlsdGVyKChpdGVtKSA9PiBpdGVtICE9PSBuYW1lKTsKICAgIH0sCiAgICB1cGRhdGVPcGVuTmFtZShuYW1lKSB7CiAgICAgIGlmIChuYW1lID09PSAnaG9tZScpIHRoaXMub3BlbmVkTmFtZXMgPSBbXTsKICAgICAgZWxzZSB0aGlzLm9wZW5lZE5hbWVzID0gdGhpcy5nZXRPcGVuZWROYW1lc0J5QWN0aXZlTmFtZShuYW1lKTsKICAgIH0sCiAgfSwKICBjb21wdXRlZDogewogICAgdGV4dENvbG9yKCkgewogICAgICByZXR1cm4gJyM0OTUwNjAnOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBhY3RpdmVOYW1lKG5hbWUpIHsKICAgICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB0aGlzLm9wZW5lZE5hbWVzID0gdGhpcy5nZXRPcGVuZWROYW1lc0J5QWN0aXZlTmFtZShuYW1lKTsKICAgICAgZWxzZSB0aGlzLm9wZW5lZE5hbWVzID0gZ2V0VW5pb24odGhpcy5vcGVuZWROYW1lcywgdGhpcy5nZXRPcGVuZWROYW1lc0J5QWN0aXZlTmFtZShuYW1lKSk7CiAgICB9LAogICAgb3Blbk5hbWVzKG5ld05hbWVzKSB7CiAgICAgIHRoaXMub3BlbmVkTmFtZXMgPSBuZXdOYW1lczsKICAgIH0sCiAgICBvcGVuZWROYW1lcygpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIC8vIHRoaXMuJHJlZnMubWVudS51cGRhdGVPcGVuZWQoKTsKICAgICAgfSk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMub3BlbmVkTmFtZXMgPSBnZXRVbmlvbih0aGlzLm9wZW5lZE5hbWVzLCB0aGlzLmdldE9wZW5lZE5hbWVzQnlBY3RpdmVOYW1lKG5hbWUpKTsKICB9LAp9Owo="},{"version":3,"sources":["side-menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"side-menu.vue","sourceRoot":"src/components/enterprise-main/components/side-menu","sourcesContent":["<template>\n  <div class=\"side-menu-wrapper\">\n    <slot></slot>\n    <Menu\n      ref=\"menu\"\n      v-show=\"!collapsed\"\n      :active-name=\"activeName\"\n      :open-names=\"openedNames\"\n      :accordion=\"accordion\"\n      :theme=\"theme\"\n      width=\"auto\"\n      @on-select=\"handleSelect\"\n    >\n      <template v-for=\"item in menuList\">\n        <template v-if=\"item.children && item.children.length === 1\">\n          <side-menu-item\n            v-if=\"showChildren(item)\"\n            :key=\"`menu-${item.name}`\"\n            :parent-item=\"item\"\n          ></side-menu-item>\n          <menu-item v-else :name=\"getNameOrHref(item, true)\" :key=\"`menu-${item.children[0].name}`\"\n            ><common-icon :type=\"item.children[0].icon || ''\" /><span>{{\n              showTitle(item.children[0])\n            }}</span></menu-item\n          >\n        </template>\n        <template v-else>\n          <side-menu-item\n            v-if=\"showChildren(item)\"\n            :key=\"`menu-${item.name}`\"\n            :parent-item=\"item\"\n          ></side-menu-item>\n          <menu-item v-else :name=\"getNameOrHref(item)\" :key=\"`menu-${item.name}`\">\n            <common-icon :type=\"item.icon || ''\" /><span>{{ showTitle(item) }}</span>\n          </menu-item>\n        </template>\n      </template>\n    </Menu>\n    <div class=\"menu-collapsed\" v-show=\"collapsed\" :list=\"menuList\">\n      <template v-for=\"(item, index) in menuList\">\n        <collapsed-menu\n          v-if=\"item.children && item.children.length > 1\"\n          @on-click=\"handleSelect\"\n          hide-title\n          :root-icon-size=\"rootIconSize\"\n          :icon-size=\"iconSize\"\n          :theme=\"theme\"\n          :parent-item=\"item\"\n          :key=\"`drop-menu-${index}`\"\n        ></collapsed-menu>\n        <Tooltip\n          transfer\n          v-else\n          :content=\"\n            (item.meta && item.meta.title) ||\n              (item.children && item.children[0] && item.children[0].meta.title)\n          \"\n          placement=\"right\"\n          :key=\"`drop-menu-${index}`\"\n        >\n          <a\n            @click=\"handleSelect(getNameOrHref(item, true))\"\n            class=\"drop-menu-a\"\n            :style=\"{ textAlign: 'center' }\"\n            ><common-icon\n              :size=\"rootIconSize\"\n              :color=\"textColor\"\n              :type=\"item.icon || (item.children && item.children[0].icon)\"\n          /></a>\n        </Tooltip>\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nimport SideMenuItem from './side-menu-item.vue';\nimport CollapsedMenu from './collapsed-menu.vue';\nimport { getUnion } from '@/libs/tools';\nimport mixin from './mixin';\n\nexport default {\n  name: 'SideMenu',\n  mixins: [mixin],\n  components: {\n    SideMenuItem,\n    CollapsedMenu,\n  },\n  props: {\n    menuList: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    collapsed: {\n      type: Boolean,\n    },\n    theme: {\n      type: String,\n      default: 'light',\n    },\n    rootIconSize: {\n      type: Number,\n      default: 20,\n    },\n    iconSize: {\n      type: Number,\n      default: 16,\n    },\n    accordion: Boolean,\n    activeName: {\n      type: String,\n      default: '',\n    },\n    openNames: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      openedNames: [],\n    };\n  },\n  methods: {\n    handleSelect(name) {\n      this.$emit('on-select', name);\n    },\n    getOpenedNamesByActiveName(name) {\n      return this.$route.matched.map((item) => item.name).filter((item) => item !== name);\n    },\n    updateOpenName(name) {\n      if (name === 'home') this.openedNames = [];\n      else this.openedNames = this.getOpenedNamesByActiveName(name);\n    },\n  },\n  computed: {\n    textColor() {\n      return '#495060';\n    },\n  },\n  watch: {\n    activeName(name) {\n      if (this.accordion) this.openedNames = this.getOpenedNamesByActiveName(name);\n      else this.openedNames = getUnion(this.openedNames, this.getOpenedNamesByActiveName(name));\n    },\n    openNames(newNames) {\n      this.openedNames = newNames;\n    },\n    openedNames() {\n      this.$nextTick(() => {\n        // this.$refs.menu.updateOpened();\n      });\n    },\n  },\n  mounted() {\n    this.openedNames = getUnion(this.openedNames, this.getOpenedNamesByActiveName(name));\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n@import './side-menu.less';\n</style>\n"]}]}