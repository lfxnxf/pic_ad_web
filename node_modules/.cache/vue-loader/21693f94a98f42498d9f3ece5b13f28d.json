{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/components/enterprise-main/components/nav-bar/nav-bar.vue?vue&type=style&index=0&id=23ad90f8&lang=less&scoped=true&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/components/enterprise-main/components/nav-bar/nav-bar.vue","mtime":1638355006725},{"path":"/Users/zhang/canteen_manage/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICcuL25hdi1iYXInOwo="},{"version":3,"sources":["nav-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA","file":"nav-bar.vue","sourceRoot":"src/components/enterprise-main/components/nav-bar","sourcesContent":["<!--  -->\n<template>\n  <div class='nav-bar clearfix'>\n    <div class=\"l\">\n      <ul class=\"icons\">\n        <li class=\"menu\" :class=\"collapsed?'rotate':''\" @click='handleCollpasedChange'></li>\n        <!-- <li class=\"home\" @click='toEnterpriseHome'></li> -->\n      </ul>\n    </div>\n    <div class=\"r\">\n      <ul class=\"icons\">\n        <!-- <li class=\"pic\"></li> -->\n        <li class=\"account\">\n          <Dropdown transfer>\n              <a href=\"javascript:void(0)\">\n                  {{getCurMerchantName}} [{{getCurUserName}}]\n              </a>\n          </Dropdown>\n        </li>\n        <li class=\"logout\">\n          <Poptip\n            confirm\n            transfer\n            title=\"是否退出登录\"\n            trigger=\"hover\"\n            placement=\"bottom\"\n            ok-text=\"是\"\n            cancel-text=\"否\"\n            @on-ok=\"confirmLogout\">\n            <div class=\"bg\"></div>\n          </Poptip>\n        </li>\n\n      </ul>\n    </div>\n    <Modal\n        v-model=\"logoutModal\"\n        title=\"签退确认\"\n        @on-ok=\"confirmLogout\"\n        @on-cancel=\"cancelLogout\">\n        确认是否需要签退？\n    </Modal>\n  </div>\n</template>\n<script>\nimport _ from 'underscore';\nimport { localSave, localRead, setCookiesItem, removeCookies } from '@/libs/util';\nexport default {\n  name: 'NavBar',\n  props: {\n    collapsed: Boolean,\n  },\n  data() {\n    return {\n      logoutModal: false\n    };\n  },\n\n  components: {},\n\n  computed: {\n    getToken() {\n      return localRead('sessionId');;\n    },\n    getCurUserName(){\n      return localRead('curUserName');\n    },\n    getCurOrgName(){\n      return localRead('curOrgName');\n    },\n    getCurMerchantName(){\n      return localRead('curMerchantName');\n    },\n    adminOrgs() {\n      let list = this.$store.state.user.adminRole;\n      console.log(\"adminRole list ===> \", list)\n\n      return list;\n    },\n    currentOrg() {\n      let dct = this.$store.state.user.curOrgName;\n      return JSON.parse(dct || '{}');\n    }\n  },\n\n  methods: {\n    async logout() {\n      let _this = this;\n      _this.$store.dispatch('adminLogout',{sessionid: _this.$store.state.user.token,}).then(res => {\n        removeCookies();\n        _this.$store.commit('setAdminRole', '');\n        _this.$store.commit('setCurDepartment', '');\n        _this.$store.commit('setCurDepartmentName', '');\n        _this.$store.commit('setCurEmpId', '');\n        _this.$store.commit('setLastLoginTime', '');\n        _this.$store.commit('setCurUserName', '');\n        _this.$store.commit('setCurOrgId', '');\n        _this.$store.commit('setCurOrgName', '');\n        _this.$store.commit('setCurUserCode', '');\n        _this.$store.commit('setToken', '');\n        _this.$store.commit('setCurMerchantId', '');\n        _this.$store.commit('setCurMerchantName', '');    \n        _this.$router.replace('/login');\n        _this.$forceUpdate();\n      }, error => {\n        console.log(error);\n      });\n      \n    },\n    async handleClick() {\n      this.logoutModal = true;\n    },\n    async confirmLogout() {\n      let result = await this.logout();\n      console.log(\"confirmLogout result ===> \", result)\n      this.logoutModal = false;\n    },\n    cancelLogout() {\n      this.logoutModal = false;\n    },\n    handleCollpasedChange() {\n      let state = this.collapsed;\n      this.$emit('on-coll-change', !state);\n    },\n    toEnterpriseHome() {\n      console.log(\"nav-bar,toEnterpriseHome.........\");\n      this.$router.push({ name: 'EnterpriseHome' });\n    },\n  },\n  watch: {\n    adminOrgs(val) {\n      console.log(\"adminOrgs val ====> \", val)\n    }\n  }\n}\n</script>\n<style lang='less' scoped>\n@import './nav-bar';\n</style>\n"]}]}