{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/businessinfo/restaurant-staff/components/modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/businessinfo/restaurant-staff/components/modal.vue","mtime":1639472713064},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnOwppbXBvcnQge3JzYUVuY3J5cHRCeVB1YktleX0gZnJvbSAiQC9saWJzL3V0aWwiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgcGhvbmU6ICcnLAogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgIH0sCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWRmOW3peWnk+WQjScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBwaG9uZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeaJi+acuuWPtycsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICB1c2VybmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeZu+W9leWQjScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeZu+W9leWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgfSwKICAgICAgc3dpdGNoU2hvdzogZmFsc2UsCiAgICB9OwogIH0sCgogIGNvbXBvbmVudHM6IHt9LAoKICBjb21wdXRlZDogewogICAgc3RhZmZNb2RhbDp7CiAgICAgIGdldCgpewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jb21wYW55LnN0YWZmTW9kYWw7CiAgICAgIH0sCiAgICAgIHNldCh2YWwpewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0U3RhZmZNb2RhbCcsIHZhbCkKICAgICAgfQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFkZFVzZXIoKXsKICAgICAgdGhpcy4kcmVmcy5zdGFmZk1vZGFsLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgLi4udGhpcy5mb3JtCiAgICAgICAgICB9CiAgICAgICAgICBsZXQgcGFzc3dvcmQgPSByc2FFbmNyeXB0QnlQdWJLZXkodGhpcy5mb3JtLnBhc3N3b3JkKTsKICAgICAgICAgIHBhcmFtcy5wYXNzd29yZCA9IHBhc3N3b3JkOwoKCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWVyY2hhbnRVc2VyQWRkJywgcGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMucmV0dXJuX2NvZGUgPT0gMCkgewogICAgICAgICAgICAgIHRoaXMuYnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5pS26ZO256uv566h55CG6LSm5Y+35oiQ5Yqf77yBJyk7CiAgICAgICAgICAgICAgbGV0IGFyZyA9IHsKICAgICAgICAgICAgICAgIG1lcmNoYW50X2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50SWQsCiAgICAgICAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgICAgICAgcGFnZV9zaXplOiA1MAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21lcmNoYW50VXNlckxpc3QnLCBhcmcpOwogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0U3RhZmZNb2RhbCcsIGZhbHNlKTsKICAgICAgICAgICAgICB0aGlzLiRyZWZzLnN0YWZmTW9kYWwucmVzZXRGaWVsZHMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZXJyPT57CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uU3RhdHVzQ2hhbmdlKHN0YXR1cyl7CiAgICAgIGNvbnNvbGUubG9nKCJvblN0YXR1c0NoYW5nZT09PT4+PiIgKyBzdGF0dXMpOwogICAgfSwKICB9Cn0KCg=="},{"version":3,"sources":["modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modal.vue","sourceRoot":"src/views/businessinfo/restaurant-staff/components","sourcesContent":["<!--  -->\n<template>\n  <Modal \n    class=\"staff_modal\" \n    v-model=\"staffModal\"\n    title=\"添加收银端管理员\" \n    :footer-hide=\"true\" \n    width=\"450\">\n    <Form class=\"clearfix\" :model=\"form\" ref=\"staffModal\" :rules=\"ruleForm\" :label-width=\"120\">\n      <FormItem label=\"员工姓名\" prop=\"name\">\n        <Input v-model=\"form.name\" style=\"width: 200px\" placeholder=\"请输入员工姓名\" />\n      </FormItem>\n      <FormItem label=\"手机号\" prop=\"phone\">\n        <Input v-model=\"form.phone\" style=\"width: 200px\" placeholder=\"请输入手机号\" />\n      </FormItem>\n      <FormItem label=\"登录名\" prop=\"username\">\n        <Input v-model=\"form.username\" style=\"width: 200px\" placeholder=\"请输入登录名\" />\n      </FormItem>\n      <FormItem label=\"登录密码\" prop=\"password\">\n        <Input v-model=\"form.password\" style=\"width: 200px\" placeholder=\"请输入登录密码\" />\n      </FormItem>\n\n      <div class=\"text-center margin-top-30\">\n        <Button type=\"success\" style=\"width: 200px;\" @click=\"addUser()\">确认</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nimport _ from 'underscore';\nimport {rsaEncryptByPubKey} from \"@/libs/util\";\nexport default {\n  data () {\n    return {\n      form: {\n        name: '',\n        phone: '',\n        username: '',\n        password: '',\n      },\n      ruleForm: {\n        name: [\n          { required: true, message: '请输入员工姓名', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '请输入手机号', trigger: 'blur' }\n        ],\n        username: [\n          { required: true, message: '请输入登录名', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入登录密码', trigger: 'blur' }\n        ],\n      },\n      switchShow: false,\n    };\n  },\n\n  components: {},\n\n  computed: {\n    staffModal:{\n      get(){\n        return this.$store.state.company.staffModal;\n      },\n      set(val){\n        this.$store.commit('setStaffModal', val)\n      }\n    }\n  },\n\n  methods: {\n    addUser(){\n      this.$refs.staffModal.validate((valid) => {\n        if (valid) {\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            ...this.form\n          }\n          let password = rsaEncryptByPubKey(this.form.password);\n          params.password = password;\n\n\n          this.$store.dispatch('merchantUserAdd', params).then(res => {\n            if (res.return_code == 0) {\n              this.btnLoading = false;\n              this.$Message.success('添加收银端管理账号成功！');\n              let arg = {\n                merchant_id: this.$store.state.user.curMerchantId,\n                page: 1,\n                page_size: 50\n              };\n              this.$store.dispatch('merchantUserList', arg);\n              this.$store.commit('setStaffModal', false);\n              this.$refs.staffModal.resetFields();\n            }\n          }).catch(err=>{\n            console.log(err);\n          });\n        }\n      });\n    },\n    onStatusChange(status){\n      console.log(\"onStatusChange===>>>\" + status);\n    },\n  }\n}\n\n</script>\n<style lang='less' scoped>\n\n</style>"]}]}