{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/common/login/thirdauth.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/common/login/thirdauth.vue","mtime":1638355006778},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcFN0YXRlLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnVGhpcmRMb2dpbk1vZGFsJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcHJvY2Vzc1RleHQ6ICfnrKzkuInmlrnmjojmnYPnmbvlvZXkuK0uLi4uLi4nCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoewogICAgICAgICAgICB0aGlyZFRva2VuOiBzdGF0ZSA9PiBzdGF0ZS5hdXRoLmljcEFjY2Vzc1Rva2VuLAogICAgICAgICAgICBzbXRVc2VySW5mbzogc3RhdGUgPT4gc3RhdGUudXNlci51c2VySW5mbwogICAgICAgIH0pLAogICAgICAgIC4uLm1hcEdldHRlcnMoWydoYXNXYWxsZXQnXSksCiAgICAgICAgdGhpcmRDb2RlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kcm91dGUucXVlcnkuY29kZQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwQWN0aW9ucyhbJ2ZldGNoSWNwQWNjZXNzVG9rZW4nLCAnaWNwQXV0aExvZ2luJ10pCiAgICB9LAogICAgbW91bnRlZCAoKSB7CiAgICAgICAgdGhpcy5mZXRjaEljcEFjY2Vzc1Rva2VuKAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJywKICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMudGhpcmRDb2RlCiAgICAgICAgICAgIH0KICAgICAgICApLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLnByb2Nlc3NUZXh0ID0gJ+esrOS4ieaWueW3suaOiOadg++8jOeUqOaIt+eZu+W9leS4rS4uLi4uLic7CiAgICAgICAgICAgIHRoaXMuaWNwQXV0aExvZ2luKHsgYWNjZXNzX3Rva2VuOiB0aGlzLnRoaXJkVG9rZW4gfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NUZXh0ID0gJ+esrOS4ieaWueeUqOaIt+eZu+W9leaIkOWKnyc7CiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NUZXh0ID0gJ+esrOS4ieaWueeUqOaIt+eZu+W9leaIkOWKn+Wksei0pSc7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICB0aGlzLnByb2Nlc3NUZXh0ID0gJ+esrOS4ieaWueaOiOadg+Wksei0pSc7CiAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyKTsKICAgICAgICB9KTsKICAgIH0sCn0K"},{"version":3,"sources":["thirdauth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"thirdauth.vue","sourceRoot":"src/views/common/login","sourcesContent":["<template>\n    <div class=\"third-auth-page\">\n        <!-- <Row v-if=\"!needThirdUser\" :gutter=\"16\">\n            <Col span=\"11\">\n                <Card style=\"width: 320px\">\n                    <div slot=\"title\">\n                        <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                        云门户\n                    </div>\n                    <List v-if=\"thirdUserinfo\">\n                        <ListItem style=\"text-align:center\">\n                            {{ `账号: ${thirdUserinfo.userName}` }}\n                        </ListItem>\n                         <ListItem style=\"text-align:center\">\n                            {{ `名称: ${thirdUserinfo.name}` }}\n                        </ListItem>\n                    </List>\n                </Card>\n            </Col>\n            <Col span=\"2\">\n                <Spin size=\"large\">\n                    <Icon type=\"md-sync\" size=24 class=\"demo-spin-icon-load\"></Icon>\n                </Spin>\n            </Col>\n            <Col span=\"11\">\n                <Card style=\"width: 320px\">\n                    <div slot=\"title\">\n                        <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                        小付通行证\n                    </div>\n                    <List v-if=\"smtUserInfo\">\n                        <ListItem style=\"text-align:center\">\n                            {{ `账号: ${smtUserInfo.username}` }}\n                        </ListItem>\n                         <ListItem style=\"text-align:center\">\n                            {{ `名称: ${smtUserInfo.name}` }}\n                        </ListItem>\n                    </List>\n                    <Form ref=\"smtLoginForm\"></Form>\n                </Card>\n            </Col>\n        </Row> -->\n        <Spin v-if=\"!smtUserInfo\" size=\"large\">\n            <Icon type=\"ios-loading\" size=24 class=\"demo-spin-icon-load\"></Icon>\n            <div>{{ processText }}</div>\n        </Spin>\n        <Card  v-else style=\"width: 480px\">\n            <div slot=\"title\">\n                <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                小付通行证\n            </div>\n            <List>\n                <ListItem style=\"text-align:center\">\n                    {{ `账号: ${smtUserInfo.reg_username}` }}\n                </ListItem>\n                <ListItem style=\"text-align:center\">\n                    {{ `名称: ${smtUserInfo.nickname}` }}\n                </ListItem>\n                <ListItem>\n                    {{ `钱包状态:` }}\n                    <Tag v-if=\"hasWallet\" color=\"success\">已开通</Tag>\n                    <div v-else>\n                    <Tag color=\"error\">未开通</Tag>\n                    请您选择<router-link :to=\"{ name: 'RegComplete', params: { step: 'open_wallet' } }\">立即开通</router-link>\n                    {{`                  或者                  `}}\n                    <router-link to=\"/\">暂时跳过</router-link>\n                    </div>\n                </ListItem>\n            </List>\n        </Card>\n    </div>\n</template>\n<script>\n    import { mapActions, mapState, mapGetters } from 'vuex';\n\n    export default {\n        name: 'ThirdLoginModal',\n        data() {\n            return {\n                processText: '第三方授权登录中......'\n            }\n        },\n        computed: {\n            ...mapState({\n                thirdToken: state => state.auth.icpAccessToken,\n                smtUserInfo: state => state.user.userInfo\n            }),\n            ...mapGetters(['hasWallet']),\n            thirdCode() {\n                return this.$route.query.code\n            }\n        },\n        methods: {\n            ...mapActions(['fetchIcpAccessToken', 'icpAuthLogin'])\n        },\n        mounted () {\n            this.fetchIcpAccessToken(\n                {\n                    grant_type: 'authorization_code',\n                    code: this.thirdCode\n                }\n            ).then(() => {\n                this.processText = '第三方已授权，用户登录中......';\n                this.icpAuthLogin({ access_token: this.thirdToken }).then(() => {\n                    this.processText = '第三方用户登录成功';\n                }).catch(err => {\n                    this.processText = '第三方用户登录成功失败';\n                    this.$Message.error(err);\n                    });\n            }).catch(err => {\n                this.processText = '第三方授权失败';\n                this.$Message.error(err);\n            });\n        },\n    }\n</script>\n\n<style lang=\"less\" scoped>\n.third-auth-page {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    @keyframes ani-demo-spin {\n        from { transform: rotate(0deg);}\n        50%  { transform: rotate(180deg);}\n        to   { transform: rotate(360deg);}\n    }\n    .demo-spin-icon-load{\n        animation: ani-demo-spin 1s linear infinite;\n    }\n    .ivu-row {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n}\n</style>\n"]}]}