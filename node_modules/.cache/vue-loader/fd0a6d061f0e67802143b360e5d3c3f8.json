{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/statistics/stat-home/components/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/statistics/stat-home/components/form.vue","mtime":1638516298163},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudC10aW1lem9uZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3NlYXJjaEZvcm0nLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgZGF0ZTogW21vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpLCBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKV0sCiAgICAgICAgaW50ZXJ2YWw6ICdjX2RheScsCiAgICAgIH0sCiAgICAgIGV4cG9ydF9leGNlbF9wYXJhbXM6IHt9LAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgcmVzdWx0Rm9ybSgpewogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBzdGFydF9kYXRlOiBtb21lbnQodGhpcy5mb3JtLmRhdGVbMF0pLmZvcm1hdCgnWVlZWS1NTS1ERCcpLAogICAgICAgIGVuZF9kYXRlOiBtb21lbnQodGhpcy5mb3JtLmRhdGVbMV0pLmZvcm1hdCgnWVlZWS1NTS1ERCcpLAogICAgICB9CiAgICAgIHJldHVybiBkYXRhOwogICAgfSwKCiAgfSwKCiAgbWV0aG9kczogewogICAgaW5wdXRJbnRlcnZhbCgkZXZlbnQsIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSA9PSAiY19kYXkiKSB7CiAgICAgICAgdGhpcy5mb3JtLmRhdGUgPSBbbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJyksIG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpXTsKICAgICAgICB0aGlzLmZvcm0uaW50ZXJ2YWwgPSB2YWx1ZTsKICAgICAgfQogICAgICBpZiAodmFsdWUgPT0gImNfd2VlayIpIHsKICAgICAgICB0aGlzLmZvcm0uZGF0ZSA9IFttb21lbnQoKS5zdGFydE9mKCd3ZWVrJykuZm9ybWF0KCJZWVlZLU1NLUREIiksIG1vbWVudCgpLmVuZE9mKCd3ZWVrJykuZm9ybWF0KCJZWVlZLU1NLUREIildOwogICAgICAgIHRoaXMuZm9ybS5pbnRlcnZhbCA9IHZhbHVlOwogICAgICB9CiAgICAgIGlmICh2YWx1ZSA9PSAiY19tb250aCIpIHsKICAgICAgICB0aGlzLmZvcm0uZGF0ZSA9IFttb21lbnQoKS5zdGFydE9mKCdtb250aCcpLmZvcm1hdCgiWVlZWS1NTS1ERCIpLCBtb21lbnQoKS5lbmRPZignbW9udGgnKS5mb3JtYXQoIllZWVktTU0tREQiKV07CiAgICAgICAgdGhpcy5mb3JtLmludGVydmFsID0gdmFsdWU7CiAgICAgIH0KICAgICAgaWYgKHZhbHVlID09ICJjX2luaXQiKSB7CiAgICAgICAgdGhpcy5mb3JtLmludGVydmFsID0gdW5kZWZpbmVkOwogICAgICB9CiAgICB9LAoKICAgIGhhbmRsZVJhZGlvQ2xpY2soJGV2ZW50LCB2YWx1ZSkgewogICAgICBjb25zb2xlLmxvZygiZXZlbnQgY2hlY2s9PT12YWx1ZT4+PiIgKyB2YWx1ZSk7CiAgICAgIGNvbnNvbGUubG9nKCJldmVudCBjaGVjaz09PXRoaXMuZm9ybS5pbnRlcnZhbD4+PiIgKyB0aGlzLmZvcm0uaW50ZXJ2YWwpOwogICAgICBsZXQgbm93ID0gK25ldyBEYXRlKCk7CiAgICAgIGlmIChub3cgLSB0aGlzLmV2VGltZVN0YW1wIDwgMTAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuZXZUaW1lU3RhbXAgPSBub3c7CiAgICAgIGlmICh0aGlzLmZvcm0uaW50ZXJ2YWwgPT0gdmFsdWUpIHsKICAgICAgICB0aGlzLmZvcm0uaW50ZXJ2YWwgPSB1bmRlZmluZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtLmludGVydmFsID0gdmFsdWU7CiAgICAgIH0KICAgIH0sCgogICAgcXVlcnlTdGF0aXN0aWNzOiBhc3luYyBmdW5jdGlvbihwYWdlKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnVEFCTEVfTE9BRElORycsIHRydWUpOwogICAgICBsZXQgc3RhcnREYXRlID0gdGhpcy5yZXN1bHRGb3JtLnN0YXJ0X2RhdGUgfHwgJyc7CiAgICAgIGxldCBlbmREYXRlID0gdGhpcy5yZXN1bHRGb3JtLmVuZF9kYXRlIHx8ICcnOwogICAgICBpZiAoc3RhcnREYXRlID09ICcnIHx8IHN0YXJ0RGF0ZSA9PSAnSW52YWxpZCBkYXRlJyB8fCBlbmREYXRlID09ICcnIHx8IGVuZERhdGUgPT0gJ0ludmFsaWQgZGF0ZScpewogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIuivt+mAieaLqeWwsemkkOe7n+iuoeaXpeacn+i1t+atou+8gSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCdnZXREYXRlJywgdGhpcy5yZXN1bHRGb3JtKTsKICAgICAgLy8gLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRFbXBsb3llZUxpc3RMb2FkaW5nJywgdHJ1ZSk7CiAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICBzZXNzaW9uaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudG9rZW4sCiAgICAgICAgcGFnZTogcGFnZSB8fCAxLAogICAgICAgIHBhZ2Vfc2l6ZTogdGhpcy4kcGFyZW50LnBhZ2Vfc2l6ZSwKICAgICAgICAuLi50aGlzLnJlc3VsdEZvcm0KICAgICAgfTsKICAgICAgY29uc29sZS5sb2coInF1ZXJ5U3RhdGlzdGljcz09PXBhcmFtcz4+PiIgKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTsKICAgICAgbGV0IHJlcyA9IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzdGF0aXN0aWNzSG9tZScsIHBhcmFtcyk7CiAgICAgIGNvbnNvbGUubG9nKCJxdWVyeVN0YXRpc3RpY3M9PT1yZXM+Pj4iICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS5yZXNldEZpZWxkcygpOwogICAgfSwKCiAgICBleHBvcnREaW5uZXI6IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICBsZXQgZmlsZU5hbWUgPSAn5bCx6aSQ5YiX6KGoJzsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdUQUJMRV9MT0FESU5HJywgdHJ1ZSk7CiAgICAgIGxldCBzdGFydERhdGUgPSB0aGlzLnJlc3VsdEZvcm0uc3RhcnRfZGF0ZSB8fCAnJzsKICAgICAgbGV0IGVuZERhdGUgPSB0aGlzLnJlc3VsdEZvcm0uZW5kX2RhdGUgfHwgJyc7CiAgICAgIGlmIChzdGFydERhdGUgPT0gJycgfHwgc3RhcnREYXRlID09ICdJbnZhbGlkIGRhdGUnIHx8IGVuZERhdGUgPT0gJycgfHwgZW5kRGF0ZSA9PSAnSW52YWxpZCBkYXRlJyl7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi6K+36YCJ5oup5bCx6aSQ57uf6K6h5pel5pyf6LW35q2i77yBIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoaXMuJGVtaXQoJ2dldERhdGUnLCB0aGlzLnJlc3VsdEZvcm0pOwogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIG1lcmNoYW50X2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1ck1lcmNoYW50SWQsCiAgICAgICAgLi4udGhpcy5yZXN1bHRGb3JtCiAgICAgIH07CiAgICAgIGxldCBxdWVyeUFycmF5ID0gcGFyYW1zLmRlcGFydG1lbnRzIHx8ICcnOwogICAgICBpZiAocXVlcnlBcnJheSAhPT0gJycpewogICAgICAgIGxldCBzdHJpbmdSZXN1bHQgPSBxdWVyeUFycmF5LnNwbGl0KCcsJyk7CiAgICAgICAgbGV0IGRlcGFydEFycmF5ID0gYnVpbGRDaGlsZERlcGFydG1lbnRBcnJheShzdHJpbmdSZXN1bHQsdGhpcy4kc3RvcmUuc3RhdGUudXNlci5kZXBhcnRtZW50TGlzdCk7CiAgICAgICAgbGV0IGFycmF5UmVzdWx0ID0gZGVwYXJ0QXJyYXkuam9pbignLCcpOwogICAgICAgIHBhcmFtcy5kZXBhcnRtZW50cyA9IGFycmF5UmVzdWx0OwogICAgICB9CiAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc3RhdGlzdGljc0Rpbm5lckV4cG9ydCcsIHBhcmFtcyk7CiAgICAgIGlmIChyZXMucmV0dXJuX2NvZGUgPT0gMCl7CiAgICAgICAgbGV0IGZpbGVVcmwgPSByZXMuZGF0YS51cmw7CiAgICAgICAgdGhpcy5kb3dubG9hZChmaWxlVXJsKTsKICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1RBQkxFX0xPQURJTkcnLCBmYWxzZSk7CiAgICB9LAoKCiAgICAvLyDkuIvovb3mlofku7YKICAgIGRvd25sb2FkKGZpbGVVcmwpIHsKICAgICAgaWYgKCFmaWxlVXJsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgbGluay5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBsaW5rLmhyZWYgPSBmaWxlVXJsOwogICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBmaWxlVXJsKTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgbGluay5jbGljaygpOwogICAgICAvLyB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuS4i+i9veWujOaIkO+8gSIpOwogICAgfSwKCiAgICAvL+aVsOaNruWvvOWHugogICAgbGlzdFJlc3VsdEV4cG9ydDogYXN5bmMgZnVuY3Rpb24ocGFnZVNpemUpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdUQUJMRV9MT0FESU5HJywgdHJ1ZSk7CiAgICAgIGxldCBzdGFydERhdGUgPSB0aGlzLnJlc3VsdEZvcm0uc3RhcnRfZGF0ZSB8fCAnJzsKICAgICAgbGV0IGVuZERhdGUgPSB0aGlzLnJlc3VsdEZvcm0uZW5kX2RhdGUgfHwgJyc7CiAgICAgIGlmIChzdGFydERhdGUgPT0gJycgfHwgc3RhcnREYXRlID09ICdJbnZhbGlkIGRhdGUnIHx8IGVuZERhdGUgPT0gJycgfHwgZW5kRGF0ZSA9PSAnSW52YWxpZCBkYXRlJyl7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi6K+36YCJ5oup5bCx6aSQ5pel5pyf6LW35q2i77yBIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgbWF4UGFnZVNpemUgPSBwYWdlU2l6ZSA/IHBhZ2VTaXplIDogdGhpcy4kcGFyZW50LnBhZ2Vfc2l6ZTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBtZXJjaGFudF9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkLAogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgcGFnZV9zaXplOiBtYXhQYWdlU2l6ZSwKICAgICAgICAuLi50aGlzLnJlc3VsdEZvcm0KICAgICAgfTsKCgogICAgICBsZXQgcXVlcnlBcnJheSA9IHBhcmFtcy5kZXBhcnRtZW50cyB8fCAnJzsKICAgICAgaWYgKHF1ZXJ5QXJyYXkgIT09ICcnKXsKICAgICAgICBsZXQgc3RyaW5nUmVzdWx0ID0gcXVlcnlBcnJheS5zcGxpdCgnLCcpOwogICAgICAgIGxldCBkZXBhcnRBcnJheSA9IGJ1aWxkQ2hpbGREZXBhcnRtZW50QXJyYXkoc3RyaW5nUmVzdWx0LHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuZGVwYXJ0bWVudExpc3QpOwogICAgICAgIGxldCBhcnJheVJlc3VsdCA9IGRlcGFydEFycmF5LmpvaW4oJywnKTsKICAgICAgICBwYXJhbXMuZGVwYXJ0bWVudHMgPSBhcnJheVJlc3VsdDsKICAgICAgfQoKICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdvcmRlckxpc3RFeHBvcnQnLCBwYXJhbXMpOwogICAgfSwKCiAgICAvL+WkmumAiXNlbGVjdAogICAgaGFuZGxlU2VsZWN0KHZhbCwgbmFtZSl7CiAgICAgIGlmKF8uaW5kZXhPZih2YWwsICctMScpICE9IC0xKXsKICAgICAgICB0aGlzLmZvcm1bbmFtZV0gPSBbJy0xJ107CiAgICAgIH0KICAgIH0sCgogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIHRoaXMucXVlcnlTdGF0aXN0aWNzKCk7CiAgfQp9Cg=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/views/statistics/stat-home/components","sourcesContent":["<!-- 就餐统计数据 -->\n<template>\n  <div class=\"card\">\n    <Form inline ref=\"form\" :model=\"form\" label-colon>\n      <FormItem label=\"就餐日期\">\n        <DatePicker @keyup.enter.native=\"queryStatistics()\" @on-change=\"inputInterval($event, 'c_init')\" v-model=\"form.date\" type=\"daterange\" format=\"yyyy/MM/dd\" placeholder=\"就餐日期起止\" style=\"width: 200px\"></DatePicker>\n        <Input type=\"text\" v-show=\"false\" style=\"width: 1px;\"/>\n      </FormItem>\n      <FormItem>\n        <RadioGroup v-model=\"form.interval\" >\n          <Radio @click.native=\"inputInterval($event, 'c_day')\" label=\"c_day\"><Icon type=\"social-apple\"></Icon>当天</Radio>\n          <Radio @click.native=\"inputInterval($event, 'c_week')\" label=\"c_week\"><Icon type=\"social-apple\"></Icon>当周</Radio>\n          <Radio @click.native=\"inputInterval($event, 'c_month')\" label=\"c_month\"><Icon type=\"social-apple\"></Icon>当月</Radio>\n        </RadioGroup>\n      </FormItem>\n      <FormItem>\n        <Button type='primary' icon=\"md-search\" @click=\"queryStatistics()\">查询</Button>\n        <Button class=\"margin-left-10\" type='primary' ghost icon=\"md-download\" @click=\"exportDinner\">导出EXCEL</Button>\n      </FormItem>\n\n    </Form>\n  </div>\n</template>\n<script>\nimport _ from 'underscore';\nimport moment from \"moment-timezone\";\n\nexport default {\n  name: 'searchForm',\n  data() {\n    return {\n      form: {\n        date: [moment().format('YYYY-MM-DD'), moment().format('YYYY-MM-DD')],\n        interval: 'c_day',\n      },\n      export_excel_params: {},\n    };\n  },\n\n  computed: {\n    resultForm(){\n      let data = {\n        start_date: moment(this.form.date[0]).format('YYYY-MM-DD'),\n        end_date: moment(this.form.date[1]).format('YYYY-MM-DD'),\n      }\n      return data;\n    },\n\n  },\n\n  methods: {\n    inputInterval($event, value) {\n      if (value == \"c_day\") {\n        this.form.date = [moment().format('YYYY-MM-DD'), moment().format('YYYY-MM-DD')];\n        this.form.interval = value;\n      }\n      if (value == \"c_week\") {\n        this.form.date = [moment().startOf('week').format(\"YYYY-MM-DD\"), moment().endOf('week').format(\"YYYY-MM-DD\")];\n        this.form.interval = value;\n      }\n      if (value == \"c_month\") {\n        this.form.date = [moment().startOf('month').format(\"YYYY-MM-DD\"), moment().endOf('month').format(\"YYYY-MM-DD\")];\n        this.form.interval = value;\n      }\n      if (value == \"c_init\") {\n        this.form.interval = undefined;\n      }\n    },\n\n    handleRadioClick($event, value) {\n      console.log(\"event check===value>>>\" + value);\n      console.log(\"event check===this.form.interval>>>\" + this.form.interval);\n      let now = +new Date();\n      if (now - this.evTimeStamp < 100) {\n        return;\n      }\n      this.evTimeStamp = now;\n      if (this.form.interval == value) {\n        this.form.interval = undefined;\n      } else {\n        this.form.interval = value;\n      }\n    },\n\n    queryStatistics: async function(page) {\n      this.$store.commit('TABLE_LOADING', true);\n      let startDate = this.resultForm.start_date || '';\n      let endDate = this.resultForm.end_date || '';\n      if (startDate == '' || startDate == 'Invalid date' || endDate == '' || endDate == 'Invalid date'){\n        this.$Message.error(\"请选择就餐统计日期起止！\");\n        return;\n      }\n      this.$emit('getDate', this.resultForm);\n      // // this.$store.commit('setEmployeeListLoading', true);\n      let params = {\n        merchant_id: this.$store.state.user.curMerchantId,\n        sessionid: this.$store.state.user.token,\n        page: page || 1,\n        page_size: this.$parent.page_size,\n        ...this.resultForm\n      };\n      console.log(\"queryStatistics===params>>>\" + JSON.stringify(params));\n      let res = this.$store.dispatch('statisticsHome', params);\n      console.log(\"queryStatistics===res>>>\" + JSON.stringify(res));\n      this.$refs['form'].resetFields();\n    },\n\n    exportDinner: async function() {\n      let fileName = '就餐列表';\n      this.$store.commit('TABLE_LOADING', true);\n      let startDate = this.resultForm.start_date || '';\n      let endDate = this.resultForm.end_date || '';\n      if (startDate == '' || startDate == 'Invalid date' || endDate == '' || endDate == 'Invalid date'){\n        this.$Message.error(\"请选择就餐统计日期起止！\");\n        return;\n      }\n      // this.$emit('getDate', this.resultForm);\n      let params = {\n        merchant_id: this.$store.state.user.curMerchantId,\n        ...this.resultForm\n      };\n      let queryArray = params.departments || '';\n      if (queryArray !== ''){\n        let stringResult = queryArray.split(',');\n        let departArray = buildChildDepartmentArray(stringResult,this.$store.state.user.departmentList);\n        let arrayResult = departArray.join(',');\n        params.departments = arrayResult;\n      }\n      let res = await this.$store.dispatch('statisticsDinnerExport', params);\n      if (res.return_code == 0){\n        let fileUrl = res.data.url;\n        this.download(fileUrl);\n      }\n      this.$store.commit('TABLE_LOADING', false);\n    },\n\n\n    // 下载文件\n    download(fileUrl) {\n      if (!fileUrl) {\n        return;\n      }\n\n      let link = document.createElement(\"a\");\n      link.style.display = \"none\";\n      link.href = fileUrl;\n      link.setAttribute(\"download\", fileUrl);\n      document.body.appendChild(link);\n      link.click();\n      // this.$Message.success(\"下载完成！\");\n    },\n\n    //数据导出\n    listResultExport: async function(pageSize) {\n      this.$store.commit('TABLE_LOADING', true);\n      let startDate = this.resultForm.start_date || '';\n      let endDate = this.resultForm.end_date || '';\n      if (startDate == '' || startDate == 'Invalid date' || endDate == '' || endDate == 'Invalid date'){\n        this.$Message.error(\"请选择就餐日期起止！\");\n        return;\n      }\n\n      let maxPageSize = pageSize ? pageSize : this.$parent.page_size;\n      let params = {\n        merchant_id: this.$store.state.user.curMerchantId,\n        page: 1,\n        page_size: maxPageSize,\n        ...this.resultForm\n      };\n\n\n      let queryArray = params.departments || '';\n      if (queryArray !== ''){\n        let stringResult = queryArray.split(',');\n        let departArray = buildChildDepartmentArray(stringResult,this.$store.state.user.departmentList);\n        let arrayResult = departArray.join(',');\n        params.departments = arrayResult;\n      }\n\n      let res = await this.$store.dispatch('orderListExport', params);\n    },\n\n    //多选select\n    handleSelect(val, name){\n      if(_.indexOf(val, '-1') != -1){\n        this.form[name] = ['-1'];\n      }\n    },\n\n  },\n  async mounted() {\n    this.queryStatistics();\n  }\n}\n</script>\n<style lang='less' scoped>\n.card{\n  padding-bottom: 0 !important;\n  // min-height: 76px;\n  // max-height: 133px;\n}\n\n</style>\n"]}]}