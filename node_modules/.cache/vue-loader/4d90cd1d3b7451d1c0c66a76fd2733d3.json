{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/trade/components/refund-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/trade/components/refund-modal.vue","mtime":1645002661730},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgY3VycmVudDogT2JqZWN0CiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGJ0bl9sb2FkaW5nOiBmYWxzZSwKICAgICAgcmVtYXJrOiAnJwogICAgfTsKICB9LAoKICBjb21wb25lbnRzOiB7fSwKCiAgY29tcHV0ZWQ6IHsKICAgIHJlZnVuZEJhdGNoTW9kYWw6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5vcmRlci5yZWZ1bmRCYXRjaE1vZGFsOwogICAgICB9LAogICAgICBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZWZ1bmRCYXRjaE1vZGFsJywgdmFsKTsKICAgICAgfQogICAgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICAKICAgIC8v56Gu6K6k5pKk6ZSACiAgICBvaygpewogICAgICB0aGlzLmJ0bl9sb2FkaW5nID0gdHJ1ZTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBtZXJjaGFudF9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkLAogICAgICAgIGJhdGNoX25vOiB0aGlzLmN1cnJlbnQuYmF0Y2hfbm8sCiAgICAgICAgcmVtYXJrOiB0aGlzLnJlbWFyaywKICAgICAgICBvcGVyYXRvcjogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJVc2VyQ29kZQoKICAgICAgfTsKICAgICAgaWYodGhpcy5jdXJyZW50LnRyYWRlX3R5cGU9PTEpeyAgICAKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncmVmdW5kQmF0Y2gnLCBwYXJhbXMpLnRoZW4ocmVzPT57CiAgICAgICAgICBpZihyZXMucmV0dXJuX2NvZGUgPT0gMCl7CiAgICAgICAgICAgIHRoaXMuYnRuX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfmkqTplIDmiJDlip/vvIEnKTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZWZ1bmRCYXRjaE1vZGFsJywgZmFsc2UpOwogICAgICAgICAgICB0aGlzLiRwYXJlbnQucXVlcnkoKTsKICAgICAgICAgICAgdGhpcy5yZW1hcmsgPSAnJwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLmJ0bl9sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH1lbHNlIGlmKHRoaXMuY3VycmVudC50cmFkZV90eXBlPT0yKXsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGVwb3NpdENhbmNlbCcsIHBhcmFtcykudGhlbihyZXM9PnsKICAgICAgICAgIGlmKHJlcy5yZXR1cm5fY29kZSA9PSAwKXsKICAgICAgICAgICAgdGhpcy5idG5fbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+aSpOmUgOaIkOWKn++8gScpOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFJlZnVuZEJhdGNoTW9kYWwnLCBmYWxzZSk7CiAgICAgICAgICAgIHRoaXMuJHBhcmVudC5xdWVyeSgpOwogICAgICAgICAgICB0aGlzLnJlbWFyayA9ICcnCiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuYnRuX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKCiAgICAgIH0KICAgIH0sCiAgICBjYW5jZWwoKXsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZWZ1bmRCYXRjaE1vZGFsJywgZmFsc2UpCiAgICB9CiAgfQp9Cgo="},{"version":3,"sources":["refund-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"refund-modal.vue","sourceRoot":"src/views/trade/components","sourcesContent":["<!--  -->\n<template>\n  <Modal v-model=\"refundBatchModal\" :title=\"`撤销批次：${current.batch_no}`\" :footer-hide=\"true\" width=\"460px\">\n    <Form inline>\n      <FormItem class=\"width-full\" label=\"备注\">\n        <Input v-model=\"remark\" type=\"textarea\" style=\"width: 300px\"/>\n      </FormItem>\n    </Form>\n    <div class=\"text-center margin-top-20 font-size16 red-color\">确认撤销该批次的<{{ current.trade_type_desc }}>操作吗？</div>\n    <div class=\"text-center margin-top-30 margin-bottom-20\">\n      <Button class=\"margin-right-20\" @click=\"cancel\">取消</Button>\n      <Button type=\"primary\" :loading=\"btn_loading\" @click=\"ok\">{{btn_loading?'撤销中':'确认'}}</Button>\n    </div>\n    \n  </Modal>\n</template>\n\n<script>\nexport default {\n  props: {\n    current: Object\n  },\n  data () {\n    return {\n      btn_loading: false,\n      remark: ''\n    };\n  },\n\n  components: {},\n\n  computed: {\n    refundBatchModal: {\n      get() {\n        return this.$store.state.order.refundBatchModal;\n      },\n      set(val) {\n        this.$store.commit('setRefundBatchModal', val);\n      }\n    },\n  },\n\n  methods: {\n    \n    //确认撤销\n    ok(){\n      this.btn_loading = true;\n      let params = {\n        merchant_id: this.$store.state.user.curMerchantId,\n        batch_no: this.current.batch_no,\n        remark: this.remark,\n        operator: this.$store.state.user.curUserCode\n\n      };\n      if(this.current.trade_type==1){    \n        this.$store.dispatch('refundBatch', params).then(res=>{\n          if(res.return_code == 0){\n            this.btn_loading = false;\n            this.$Message.success('撤销成功！');\n            this.$store.commit('setRefundBatchModal', false);\n            this.$parent.query();\n            this.remark = ''\n          }\n        }).catch(err => {\n          this.btn_loading = false;\n        });\n      }else if(this.current.trade_type==2){\n        this.$store.dispatch('depositCancel', params).then(res=>{\n          if(res.return_code == 0){\n            this.btn_loading = false;\n            this.$Message.success('撤销成功！');\n            this.$store.commit('setRefundBatchModal', false);\n            this.$parent.query();\n            this.remark = ''\n          }\n        }).catch(err => {\n          this.btn_loading = false;\n        });\n\n      }\n    },\n    cancel(){\n      this.$store.commit('setRefundBatchModal', false)\n    }\n  }\n}\n\n</script>\n<style lang='less' scoped>\n/deep/.ivu-form{\n  padding: 20px 40px 0;\n  /deep/.ivu-form-item-content{\n    display: inline-block;\n  }\n}\n\n</style>"]}]}