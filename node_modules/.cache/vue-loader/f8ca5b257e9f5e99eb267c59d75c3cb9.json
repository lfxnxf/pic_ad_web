{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/menu-management/week-menu/components/select-food-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/menu-management/week-menu/components/select-food-modal.vue","mtime":1638954837094},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGZvb2RUeXBlSW5kZXg6IE51bWJlciwKICAgIGZvb2REYXRlSW5kZXg6IE51bWJlciwKICAgIGZvb2RMaXN0RGF0YU9sZDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBidG5Mb2FkaW5nOiBmYWxzZSwKICAgICAgZm9vZFN0YXR1czogdHJ1ZSwKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICB9LAoKICAgICAgZm9vZERhdGE6IFtdLAogICAgICBzZWxlY3RlZEZvb2REYXRhOiBbXSwKICAgIH07CiAgfSwKCiAgY29tcG9uZW50czoge30sCgogIGNvbXB1dGVkOiB7CiAgICBzZWxlY3RGb29kTW9kYWw6ewogICAgICBnZXQoKXsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubWVudS5zZWxlY3RGb29kTW9kYWw7CiAgICAgIH0sCiAgICAgIHNldCh2YWwpewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0U2VsZWN0Rm9vZE1vZGFsJywgdmFsKTsKICAgICAgfQogICAgfSwKICAgIC8v6I+c5ZOB5pWw5o2uCiAgICBmb29kTGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmZvb2QuZm9vZExpc3QucmVzdWx0OwogICAgfSwKCiAgICBmb29kTGlzdERhdGFPbGRWYWwoKXsKICAgICAgcmV0dXJuIHRoaXMuZm9vZExpc3REYXRhT2xkOwogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICBmb29kTGlzdERhdGFPbGRWYWw6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgLy8gY29uc29sZS5sb2coImZvb2RMaXN0RGF0YU9sZFZhbD4+Pj4+Pj4iICsgSlNPTi5zdHJpbmdpZnkodmFsKSkKICAgICAgdGhpcy5nZXRUYXJnZXRLZXlzKCk7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgaW5pdDogYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgIGF3YWl0IHRoaXMuZ2V0Rm9vZExpc3REYXRhKCk7CiAgICAgIGF3YWl0IHRoaXMuZ2V0Rm9vZERhdGEoKTsKICAgIH0sCgogICAgLy/ojrflj5boj5zlk4HliJfooagKICAgIGdldEZvb2RMaXN0RGF0YTogYXN5bmMgZnVuY3Rpb24oKXsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBtZXJjaGFudF9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkLAogICAgICAgIGlzX2VuYWJsZTogMSwKICAgICAgICBwYWdlX3NpemU6IDEwMDAwCiAgICAgICAgLy8gdGltZV90eXBlOiB2YWwsCiAgICAgIH07CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdmb29kTGlzdCcsIHBhcmFtcyk7CiAgICB9LAoKICAgIHNlbGVjdGVkRm9vZDogZnVuY3Rpb24oKXsKICAgICAgLy8gY29uc29sZS5sb2coIj09PXNlbGVjdGVkRm9vZD09PWZvb2RMaXN0RGF0YU9sZD4+PiIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmZvb2RMaXN0RGF0YU9sZCkpOwogICAgICAvLyBjb25zb2xlLmxvZygiPT09c2VsZWN0ZWRGb29kPT09c2VsZWN0ZWRGb29kRGF0YT4+PiIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnNlbGVjdGVkRm9vZERhdGEpKTsKICAgICAgbGV0IHNlbGVjdGVkRm9vZExpc3QgPSB7CiAgICAgICAgZm9vZFR5cGVJbmRleCA6IHRoaXMuZm9vZFR5cGVJbmRleCwKICAgICAgICBmb29kRGF0ZUluZGV4IDogdGhpcy5mb29kRGF0ZUluZGV4LAogICAgICAgIGZvb2RMaXN0SW5kZXggOiB0aGlzLnNlbGVjdGVkRm9vZERhdGEsCiAgICAgIH0KICAgICAgY29uc29sZS5sb2coInNlbGVjdGVkRm9vZD09PXNlbGVjdGVkRm9vZExpc3Q+Pj4iICsgSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRGb29kTGlzdCkpOwogICAgICB0aGlzLiRlbWl0KCdzZXRTZWxlY3RlZEZvb2RMaXN0Jywgc2VsZWN0ZWRGb29kTGlzdCk7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0U2VsZWN0Rm9vZE1vZGFsJywgZmFsc2UpOwoKICAgIH0sCgogICAgZ2V0Rm9vZERhdGE6IGFzeW5jIGZ1bmN0aW9uKCl7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJnZXRGb29kRGF0YT09PWZvb2RMaXN0Pj4+IiArIEpTT04uc3RyaW5naWZ5KHRoaXMuZm9vZExpc3QpKQogICAgICBmb3IgKGxldCBmb29kSXRlbSBvZiB0aGlzLmZvb2RMaXN0KSB7CiAgICAgICAgdGhpcy5mb29kRGF0YS5wdXNoKHsKICAgICAgICAgIGtleTogZm9vZEl0ZW0uZm9vZF9pZCwKICAgICAgICAgIGxhYmVsOiBmb29kSXRlbS5mb29kX25hbWUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogZm9vZEl0ZW0uZGVzYywKICAgICAgICAgIGRpc2FibGVkOiBmb29kSXRlbS5pc19lbmFibGU/ZmFsc2U6dHJ1ZSwKICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZygiZ2V0Rm9vZERhdGE9PT1mb29kRGF0YT4+PiIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmZvb2REYXRhKSkKICAgIH0sCiAgICBnZXRUYXJnZXRLZXlzKCkgewogICAgICAvLyBjb25zb2xlLmxvZygiPT09Z2V0VGFyZ2V0S2V5cz09PWZvb2RMaXN0RGF0YU9sZD4+PiIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmZvb2RMaXN0RGF0YU9sZCkpOwogICAgICAvLyBjb25zb2xlLmxvZygiPT09Z2V0VGFyZ2V0S2V5cz09PXNlbGVjdGVkRm9vZERhdGE+Pj4iICsgSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZEZvb2REYXRhKSk7CiAgICAgIC8vIHRoaXMuc2VsZWN0ZWRGb29kRGF0YS5wdXNoKCB0aGlzLmZvb2RMaXN0RGF0YU9sZC50b1N0cmluZygpKTsKICAgICAgdGhpcy5zZWxlY3RlZEZvb2REYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSggdGhpcy5mb29kTGlzdERhdGFPbGQpKTsKICAgICAgLy8gcmV0dXJuIHRoaXMuZ2V0Rm9vZERhdGEoKQogICAgICAvLyAgICAgLmZpbHRlcigoKSA9PiBNYXRoLnJhbmRvbSgpICogMiA+IDEpCiAgICAgIC8vICAgICAubWFwKGl0ZW0gPT4gaXRlbS5rZXkpOwogICAgfSwKICAgIGhhbmRsZUNoYW5nZTIgKG5ld1RhcmdldEtleXMpIHsKICAgICAgdGhpcy5zZWxlY3RlZEZvb2REYXRhID0gbmV3VGFyZ2V0S2V5czsKICAgIH0sCiAgICBmaWx0ZXJNZXRob2QgKGRhdGEsIHF1ZXJ5KSB7CiAgICAgIHJldHVybiBkYXRhLmxhYmVsLmluZGV4T2YocXVlcnkpID4gLTE7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKfTsK"},{"version":3,"sources":["select-food-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"select-food-modal.vue","sourceRoot":"src/views/menu-management/week-menu/components","sourcesContent":["\n<!-- 选择菜品 -->\n<template>\n  <Modal\n    v-model=\"selectFoodModal\"\n    title=\"选择菜品\"\n    :footer-hide=\"true\"\n    width=\"840px\">\n      <Transfer\n          :titles=\"['菜品列表', '选中菜品']\"\n          :data=\"foodData\"\n          :target-keys=\"selectedFoodData\"\n          filterable\n          :filter-method=\"filterMethod\"\n          @on-change=\"handleChange2\"></Transfer>\n      <div class=\"text-center margin-bottom-20 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setSelectFoodModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"selectedFood\">确定</Button>\n      </div>\n\n  </Modal>\n</template>\n\n<script>\n\nexport default {\n  props: {\n    foodTypeIndex: Number,\n    foodDateIndex: Number,\n    foodListDataOld: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      btnLoading: false,\n      foodStatus: true,\n      form: {\n        name: '',\n      },\n\n      foodData: [],\n      selectedFoodData: [],\n    };\n  },\n\n  components: {},\n\n  computed: {\n    selectFoodModal:{\n      get(){\n        return this.$store.state.menu.selectFoodModal;\n      },\n      set(val){\n        this.$store.commit('setSelectFoodModal', val);\n      }\n    },\n    //菜品数据\n    foodList() {\n      return this.$store.state.food.foodList.result;\n    },\n\n    foodListDataOldVal(){\n      return this.foodListDataOld;\n    }\n  },\n\n  watch: {\n    foodListDataOldVal: function (val) {\n      // console.log(\"foodListDataOldVal>>>>>>>\" + JSON.stringify(val))\n      this.getTargetKeys();\n    }\n  },\n\n  methods: {\n    init: async function() {\n      await this.getFoodListData();\n      await this.getFoodData();\n    },\n\n    //获取菜品列表\n    getFoodListData: async function(){\n      let params = {\n        merchant_id: this.$store.state.user.curMerchantId,\n        is_enable: 1,\n        page_size: 10000\n        // time_type: val,\n      };\n      await this.$store.dispatch('foodList', params);\n    },\n\n    selectedFood: function(){\n      // console.log(\"===selectedFood===foodListDataOld>>>\" + JSON.stringify(this.foodListDataOld));\n      // console.log(\"===selectedFood===selectedFoodData>>>\" + JSON.stringify(this.selectedFoodData));\n      let selectedFoodList = {\n        foodTypeIndex : this.foodTypeIndex,\n        foodDateIndex : this.foodDateIndex,\n        foodListIndex : this.selectedFoodData,\n      }\n      console.log(\"selectedFood===selectedFoodList>>>\" + JSON.stringify(selectedFoodList));\n      this.$emit('setSelectedFoodList', selectedFoodList);\n      this.$store.commit('setSelectFoodModal', false);\n\n    },\n\n    getFoodData: async function(){\n      // console.log(\"getFoodData===foodList>>>\" + JSON.stringify(this.foodList))\n      for (let foodItem of this.foodList) {\n        this.foodData.push({\n          key: foodItem.food_id,\n          label: foodItem.food_name,\n          description: foodItem.desc,\n          disabled: foodItem.is_enable?false:true,\n        });\n      }\n      // console.log(\"getFoodData===foodData>>>\" + JSON.stringify(this.foodData))\n    },\n    getTargetKeys() {\n      // console.log(\"===getTargetKeys===foodListDataOld>>>\" + JSON.stringify(this.foodListDataOld));\n      // console.log(\"===getTargetKeys===selectedFoodData>>>\" + JSON.stringify(this.selectedFoodData));\n      // this.selectedFoodData.push( this.foodListDataOld.toString());\n      this.selectedFoodData = JSON.parse(JSON.stringify( this.foodListDataOld));\n      // return this.getFoodData()\n      //     .filter(() => Math.random() * 2 > 1)\n      //     .map(item => item.key);\n    },\n    handleChange2 (newTargetKeys) {\n      this.selectedFoodData = newTargetKeys;\n    },\n    filterMethod (data, query) {\n      return data.label.indexOf(query) > -1;\n    }\n  },\n  mounted() {\n    this.init();\n  },\n};\n</script>\n<style lang='less' scoped>\n  @import '../style';\n  /deep/.ivu-modal{\n    height: 84vh;\n    .ivu-modal-body{\n      height: calc(100% - 51px);\n    }\n    .ivu-modal-content{\n      height: 100%;\n    }\n    .ivu-transfer{\n      text-align: center;\n      padding: 10px;\n      min-height: 86%;\n      display: flex;\n      align-items: stretch;\n      .ivu-transfer-list{\n        text-align: left;\n        width: calc((100% - 62px) / 2);\n        height: auto;\n      }\n      .ivu-transfer-operation{\n        padding-top: 30%;\n      }\n    }\n  }\n\n</style>\n"]}]}