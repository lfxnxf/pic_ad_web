{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/staff-management/dining-staff/components/edit-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/staff-management/dining-staff/components/edit-modal.vue","mtime":1638761278034},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB0aXRsZTogJycsCiAgICAgIGZvcm06IHsKICAgICAgICByb2xlX2lkOiAnJywKICAgICAgICBjYXJkX25vOiAnJywKICAgICAgICBzdGF0dXM6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKCiAgY29tcG9uZW50czoge30sCgogIGNvbXB1dGVkOiB7CiAgICB1c2VyRWRpdE1vZGFsOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyRWRpdE1vZGFsOwogICAgICB9LAogICAgICBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRVc2VyRWRpdE1vZGFsJywgdmFsKTsKICAgICAgfQogICAgfSwKICAgIHJvbGVMaXN0KCl7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5yb2xlLnJvbGVMaXN0LnJlc3VsdDsKICAgIH0sCiAgICBjdXJVc2VyRWRpdERhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1clVzZXJFZGl0RGF0YTsKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBoYW5kbGVFZGl0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIHN0YWZmX2lkOiB0aGlzLmN1clVzZXJFZGl0RGF0YS5zdGFmZl9pZCwKICAgICAgICAuLi50aGlzLmZvcm0KICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlckVkaXQnLCBwYXJhbXMpLnRoZW4ocmVzPT57CiAgICAgICAgaWYocmVzLnJldHVybl9jb2RlID09IDApewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+aPkOS6pOaIkOWKn++8gScpOwogICAgICAgICAgdGhpcy4kcGFyZW50LnF1ZXJ5KCk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFVzZXJFZGl0TW9kYWwnLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB1c2VyRWRpdE1vZGFsKHZhbCl7CiAgICAgIGlmKHZhbCl7CiAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuY3VyVXNlckVkaXREYXRhLm5hbWU7CiAgICAgICAgdGhpcy5mb3JtLnJvbGVfaWQgPSB0aGlzLmN1clVzZXJFZGl0RGF0YS5yb2xlX2lkKycnOwogICAgICAgIHRoaXMuZm9ybS5jYXJkX25vID0gdGhpcy5jdXJVc2VyRWRpdERhdGEuY2FyZF9ubzsKICAgICAgICB0aGlzLmZvcm0uc3RhdHVzID0gdGhpcy5jdXJVc2VyRWRpdERhdGEuc3RhdHVzKycnCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMuJHJlZnNbJ2Zvcm1Nb2RhbEVkaXQnXS5yZXNldEZpZWxkcygpOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KfQoK"},{"version":3,"sources":["edit-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"edit-modal.vue","sourceRoot":"src/views/staff-management/dining-staff/components","sourcesContent":["<!--  -->\n<template>\n  <Modal v-model=\"userEditModal\" width=\"520px\" :footer-hide=\"true\" :title=\"title\" >\n    <Form class=\"padding-left-20\" v-model=\"form\" :label-width=\"80\" ref=\"formModalEdit\">\n      <FormItem label=\"人员类型\">\n        <Select class=\"r\" v-model=\"form.role_id\" style=\"width: 80%;\">\n          <Option v-for=\"item of roleList\" :key=\"item.role_id\" :value=\"item.role_id+''\">{{item.name}}</Option>\n        </Select>\n      </FormItem>\n     \n      <FormItem label=\"就餐卡号\">\n        <Input type=\"text\" v-model=\"form.card_no\" style=\"width: 80%;\"/>\n      </FormItem>\n      <FormItem label=\"状态\">\n        <RadioGroup v-model=\"form.status\">\n          <Radio class=\"margin-right-20\" label=\"1\">正常</Radio>\n          <Radio label=\"0\">删除</Radio>\n        </RadioGroup>\n      </FormItem>\n      <div class=\"margin-top-30 margin-bottom-20 text-center\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setUserEditModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"loading\" @click=\"handleEdit\">确认</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      loading: false,\n      title: '',\n      form: {\n        role_id: '',\n        card_no: '',\n        status: ''\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    userEditModal: {\n      get() {\n        return this.$store.state.user.userEditModal;\n      },\n      set(val) {\n        this.$store.commit('setUserEditModal', val);\n      }\n    },\n    roleList(){\n      return this.$store.state.role.roleList.result;\n    },\n    curUserEditData() {\n      return this.$store.state.user.curUserEditData;\n    }\n  },\n\n  methods: {\n    handleEdit() {\n      this.loading = true;\n      let params = {\n        staff_id: this.curUserEditData.staff_id,\n        ...this.form\n      }\n      this.$store.dispatch('userEdit', params).then(res=>{\n        if(res.return_code == 0){\n          this.loading = false;\n          this.$Message.success('提交成功！');\n          this.$parent.query();\n          this.$store.commit('setUserEditModal', false);\n        }\n      }).catch(err => {\n        this.loading = false;\n      });\n    }\n  },\n  watch: {\n    userEditModal(val){\n      if(val){\n        this.title = this.curUserEditData.name;\n        this.form.role_id = this.curUserEditData.role_id+'';\n        this.form.card_no = this.curUserEditData.card_no;\n        this.form.status = this.curUserEditData.status+''\n      }else{\n        this.$refs['formModalEdit'].resetFields();\n        this.loading = false;\n      }\n    }\n\n  }\n}\n\n</script>\n<style lang='less' scoped>\n</style>\n"]}]}