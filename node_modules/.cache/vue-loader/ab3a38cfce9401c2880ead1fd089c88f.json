{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/common/login/thirdauth.vue?vue&type=style&index=0&id=36e8945f&lang=less&scoped=true&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/common/login/thirdauth.vue","mtime":1638355006778},{"path":"/Users/zhang/canteen_manage/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50aGlyZC1hdXRoLXBhZ2UgewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGhlaWdodDogMTAwJTsKICAgIEBrZXlmcmFtZXMgYW5pLWRlbW8tc3BpbiB7CiAgICAgICAgZnJvbSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO30KICAgICAgICA1MCUgIHsgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTt9CiAgICAgICAgdG8gICB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7fQogICAgfQogICAgLmRlbW8tc3Bpbi1pY29uLWxvYWR7CiAgICAgICAgYW5pbWF0aW9uOiBhbmktZGVtby1zcGluIDFzIGxpbmVhciBpbmZpbml0ZTsKICAgIH0KICAgIC5pdnUtcm93IHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB9Cn0K"},{"version":3,"sources":["thirdauth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"thirdauth.vue","sourceRoot":"src/views/common/login","sourcesContent":["<template>\n    <div class=\"third-auth-page\">\n        <!-- <Row v-if=\"!needThirdUser\" :gutter=\"16\">\n            <Col span=\"11\">\n                <Card style=\"width: 320px\">\n                    <div slot=\"title\">\n                        <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                        云门户\n                    </div>\n                    <List v-if=\"thirdUserinfo\">\n                        <ListItem style=\"text-align:center\">\n                            {{ `账号: ${thirdUserinfo.userName}` }}\n                        </ListItem>\n                         <ListItem style=\"text-align:center\">\n                            {{ `名称: ${thirdUserinfo.name}` }}\n                        </ListItem>\n                    </List>\n                </Card>\n            </Col>\n            <Col span=\"2\">\n                <Spin size=\"large\">\n                    <Icon type=\"md-sync\" size=24 class=\"demo-spin-icon-load\"></Icon>\n                </Spin>\n            </Col>\n            <Col span=\"11\">\n                <Card style=\"width: 320px\">\n                    <div slot=\"title\">\n                        <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                        小付通行证\n                    </div>\n                    <List v-if=\"smtUserInfo\">\n                        <ListItem style=\"text-align:center\">\n                            {{ `账号: ${smtUserInfo.username}` }}\n                        </ListItem>\n                         <ListItem style=\"text-align:center\">\n                            {{ `名称: ${smtUserInfo.name}` }}\n                        </ListItem>\n                    </List>\n                    <Form ref=\"smtLoginForm\"></Form>\n                </Card>\n            </Col>\n        </Row> -->\n        <Spin v-if=\"!smtUserInfo\" size=\"large\">\n            <Icon type=\"ios-loading\" size=24 class=\"demo-spin-icon-load\"></Icon>\n            <div>{{ processText }}</div>\n        </Spin>\n        <Card  v-else style=\"width: 480px\">\n            <div slot=\"title\">\n                <Avatar :src=\"require('@/assets/images/icplogo32.png')\" />\n                小付通行证\n            </div>\n            <List>\n                <ListItem style=\"text-align:center\">\n                    {{ `账号: ${smtUserInfo.reg_username}` }}\n                </ListItem>\n                <ListItem style=\"text-align:center\">\n                    {{ `名称: ${smtUserInfo.nickname}` }}\n                </ListItem>\n                <ListItem>\n                    {{ `钱包状态:` }}\n                    <Tag v-if=\"hasWallet\" color=\"success\">已开通</Tag>\n                    <div v-else>\n                    <Tag color=\"error\">未开通</Tag>\n                    请您选择<router-link :to=\"{ name: 'RegComplete', params: { step: 'open_wallet' } }\">立即开通</router-link>\n                    {{`                  或者                  `}}\n                    <router-link to=\"/\">暂时跳过</router-link>\n                    </div>\n                </ListItem>\n            </List>\n        </Card>\n    </div>\n</template>\n<script>\n    import { mapActions, mapState, mapGetters } from 'vuex';\n\n    export default {\n        name: 'ThirdLoginModal',\n        data() {\n            return {\n                processText: '第三方授权登录中......'\n            }\n        },\n        computed: {\n            ...mapState({\n                thirdToken: state => state.auth.icpAccessToken,\n                smtUserInfo: state => state.user.userInfo\n            }),\n            ...mapGetters(['hasWallet']),\n            thirdCode() {\n                return this.$route.query.code\n            }\n        },\n        methods: {\n            ...mapActions(['fetchIcpAccessToken', 'icpAuthLogin'])\n        },\n        mounted () {\n            this.fetchIcpAccessToken(\n                {\n                    grant_type: 'authorization_code',\n                    code: this.thirdCode\n                }\n            ).then(() => {\n                this.processText = '第三方已授权，用户登录中......';\n                this.icpAuthLogin({ access_token: this.thirdToken }).then(() => {\n                    this.processText = '第三方用户登录成功';\n                }).catch(err => {\n                    this.processText = '第三方用户登录成功失败';\n                    this.$Message.error(err);\n                    });\n            }).catch(err => {\n                this.processText = '第三方授权失败';\n                this.$Message.error(err);\n            });\n        },\n    }\n</script>\n\n<style lang=\"less\" scoped>\n.third-auth-page {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    @keyframes ani-demo-spin {\n        from { transform: rotate(0deg);}\n        50%  { transform: rotate(180deg);}\n        to   { transform: rotate(360deg);}\n    }\n    .demo-spin-icon-load{\n        animation: ani-demo-spin 1s linear infinite;\n    }\n    .ivu-row {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n}\n</style>\n"]}]}