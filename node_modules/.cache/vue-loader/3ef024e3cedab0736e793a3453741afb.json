{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/common/login/components/form-computer.vue?vue&type=style&index=0&id=237a3f2b&lang=less&scoped=true&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/common/login/components/form-computer.vue","mtime":1644998572167},{"path":"/Users/zhang/canteen_manage/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICcuLi9zdHlsZSc7Cg=="},{"version":3,"sources":["form-computer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA","file":"form-computer.vue","sourceRoot":"src/views/common/login/components","sourcesContent":["<!--  -->\n<template>\n  <Form class=\"text-center\" ref=\"loginForm\" @keydown.enter.native=\"handleSubmit\">\n    <p class=\"font-blod font-size18 text-center margin-bottom-20\">食堂管理系统</p>\n    <Button class=\"icloudportal\" type='success' style=\"margin-top:26%;\" @click=\"handleIcpLogin\">云门户账号登录</Button>\n  </Form>\n</template>\n<script>\nimport config from '@/config';\nimport { setCookiesItem, getRandom } from '@/libs/util';\nimport moment from 'moment-timezone';\nimport sha1 from 'js-sha1';\nimport _ from 'underscore';\n\nexport default {\n  data() {\n    let checkCode = (rule, value, callback) => {\n      if (value == false) {\n        callback(new Error('请进行人机验证'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      hashKey: getRandom(),\n      key: '6LeOlr4ZAAAAAP6i1x-a73FO0oFl0f0uWY1xU54H',\n      validCode: '',\n    };\n  },\n\n  components: {},\n\n  computed: {},\n\n  methods: {\n\n    // 用户使用云门户账号认证\n    handleIcpLogin(e) {\n      let domain = encodeURIComponent(`${location.protocol}//${location.host}${location.pathname}`);\n      let path = this.$route.path;\n      let clientId = process.env.VUE_APP_ICLOUD_OAUTH_CLIENTID;\n      let oauthUrl = process.env.VUE_APP_ICLOUD_OAUTH_URL;\n      // let clientId = config.oauth.icloud.clientId;\n      let state = {\n        path: path,\n        type: 'icloud'\n      };\n\n      // let href = `${config.oauth.icloud.url}?client_id=${clientId}&redirect_uri=${domain}&response_type=code&scope=api_user&state=${JSON.stringify(state)}`;\n      let href = `${oauthUrl}?client_id=${clientId}&redirect_uri=${domain}&response_type=code&scope=api_user&state=${JSON.stringify(state)}`;\n      window.location.href = href;\n    },\n\n\n  },\n\n}\n</script>\n<style lang='less' scoped>\n@import '../style';\n</style>\n"]}]}