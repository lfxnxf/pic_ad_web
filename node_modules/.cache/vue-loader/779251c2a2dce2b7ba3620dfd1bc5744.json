{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/menu-management/week-menu/components/select-food-modal.vue?vue&type=style&index=0&id=462cfdc5&lang=less&scoped=true&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/menu-management/week-menu/components/select-food-modal.vue","mtime":1640674239501},{"path":"/Users/zhang/工作/pic_ad/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICcuLi9zdHlsZSc7Ci9kZWVwLy5pdnUtbW9kYWx7CiAgLml2dS1tb2RhbC1ib2R5ewogICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA1MXB4KTsKICB9CiAgLml2dS1tb2RhbC1jb250ZW50ewogICAgaGVpZ2h0OiAxMDAlOwogIH0KICAuaXZ1LXRyYW5zZmVyewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgcGFkZGluZzogMTBweDsKICAgIG1pbi1oZWlnaHQ6IDg2JTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogc3RyZXRjaDsKICAgIC5pdnUtdHJhbnNmZXItbGlzdHsKICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgd2lkdGg6IGNhbGMoKDEwMCUgLSA2MnB4KSAvIDIpOwogICAgICBoZWlnaHQ6IGF1dG87CiAgICB9CiAgICAuaXZ1LXRyYW5zZmVyLW9wZXJhdGlvbnsKICAgICAgcGFkZGluZy10b3A6IDMwJTsKICAgIH0KICB9Cn0KCg=="},{"version":3,"sources":["select-food-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"select-food-modal.vue","sourceRoot":"src/views/menu-management/week-menu/components","sourcesContent":["\n<!-- 选择菜品 -->\n<template>\n  <Modal\n    v-model=\"selectFoodModal\"\n    title=\"选择菜品\"\n    :footer-hide=\"true\"\n    width=\"840px\">\n      <Transfer\n          :titles=\"['菜品列表', '选中菜品']\"\n          :data=\"foodData\"\n          :target-keys=\"selectedFoodData\"\n          filterable\n          :filter-method=\"filterMethod\"\n          @on-change=\"handleChange2\"></Transfer>\n      <div class=\"text-center margin-bottom-20 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setSelectFoodModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"selectedFood\">确定</Button>\n      </div>\n\n  </Modal>\n</template>\n\n<script>\n\nexport default {\n  props: {\n    foodTypeIndex: Number,\n    foodDateIndex: Number,\n    foodListDataOld: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      btnLoading: false,\n      foodStatus: true,\n      form: {\n        name: '',\n      },\n\n      foodData: [],\n      selectedFoodData: [],\n    };\n  },\n\n  components: {},\n\n  computed: {\n    selectFoodModal:{\n      get(){\n        return this.$store.state.menu.selectFoodModal;\n      },\n      set(val){\n        this.$store.commit('setSelectFoodModal', val);\n      }\n    },\n    //菜品数据\n    foodList() {\n      return this.$store.state.food.foodList.result;\n    },\n\n    foodListDataOldVal(){\n      return this.foodListDataOld;\n    }\n  },\n\n  watch: {\n    foodListDataOldVal: function (val) {\n      // console.log(\"foodListDataOldVal>>>>>>>\" + JSON.stringify(val))\n      this.getTargetKeys();\n    }\n  },\n\n  methods: {\n    init: async function() {\n      await this.getFoodListData();\n      await this.getFoodData();\n    },\n\n    //获取菜品列表\n    getFoodListData: async function(){\n      let params = {\n        merchant_id: this.$store.state.user.curMerchantId,\n        is_enable: 1,\n        page_size: 10000\n        // time_type: val,\n      };\n      await this.$store.dispatch('foodList', params);\n    },\n\n    selectedFood: function(){\n      // console.log(\"===selectedFood===foodListDataOld>>>\" + JSON.stringify(this.foodListDataOld));\n      // console.log(\"===selectedFood===selectedFoodData>>>\" + JSON.stringify(this.selectedFoodData));\n      let selectedFoodList = {\n        foodTypeIndex : this.foodTypeIndex,\n        foodDateIndex : this.foodDateIndex,\n        foodListIndex : this.selectedFoodData,\n      }\n      console.log(\"selectedFood===selectedFoodList>>>\" + JSON.stringify(selectedFoodList));\n      this.$emit('setSelectedFoodList', selectedFoodList);\n      this.$store.commit('setSelectFoodModal', false);\n\n    },\n\n    getFoodData: async function(){\n      // console.log(\"getFoodData===foodList>>>\" + JSON.stringify(this.foodList))\n      for (let foodItem of this.foodList) {\n        this.foodData.push({\n          key: foodItem.food_id,\n          label: foodItem.food_name,\n          description: foodItem.desc,\n          disabled: foodItem.is_enable?false:true,\n        });\n      }\n      // console.log(\"getFoodData===foodData>>>\" + JSON.stringify(this.foodData))\n    },\n    getTargetKeys() {\n      // console.log(\"===getTargetKeys===foodListDataOld>>>\" + JSON.stringify(this.foodListDataOld));\n      // console.log(\"===getTargetKeys===selectedFoodData>>>\" + JSON.stringify(this.selectedFoodData));\n      // this.selectedFoodData.push( this.foodListDataOld.toString());\n      this.selectedFoodData = JSON.parse(JSON.stringify( this.foodListDataOld));\n      // return this.getFoodData()\n      //     .filter(() => Math.random() * 2 > 1)\n      //     .map(item => item.key);\n    },\n    handleChange2 (newTargetKeys) {\n      this.selectedFoodData = newTargetKeys;\n    },\n    filterMethod (data, query) {\n      return data.label.indexOf(query) > -1;\n    }\n  },\n  mounted() {\n    this.init();\n  },\n};\n</script>\n<style lang='less' scoped>\n  @import '../style';\n  /deep/.ivu-modal{\n    .ivu-modal-body{\n      height: calc(100% - 51px);\n    }\n    .ivu-modal-content{\n      height: 100%;\n    }\n    .ivu-transfer{\n      text-align: center;\n      padding: 10px;\n      min-height: 86%;\n      display: flex;\n      align-items: stretch;\n      .ivu-transfer-list{\n        text-align: left;\n        width: calc((100% - 62px) / 2);\n        height: auto;\n      }\n      .ivu-transfer-operation{\n        padding-top: 30%;\n      }\n    }\n  }\n\n</style>\n"]}]}