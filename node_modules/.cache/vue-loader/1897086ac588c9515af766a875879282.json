{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/components/enterprise-main/components/nav-bar/nav-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/components/enterprise-main/components/nav-bar/nav-bar.vue","mtime":1638355006725},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnOwppbXBvcnQgeyBsb2NhbFNhdmUsIGxvY2FsUmVhZCwgc2V0Q29va2llc0l0ZW0sIHJlbW92ZUNvb2tpZXMgfSBmcm9tICdAL2xpYnMvdXRpbCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTmF2QmFyJywKICBwcm9wczogewogICAgY29sbGFwc2VkOiBCb29sZWFuLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvZ291dE1vZGFsOiBmYWxzZQogICAgfTsKICB9LAoKICBjb21wb25lbnRzOiB7fSwKCiAgY29tcHV0ZWQ6IHsKICAgIGdldFRva2VuKCkgewogICAgICByZXR1cm4gbG9jYWxSZWFkKCdzZXNzaW9uSWQnKTs7CiAgICB9LAogICAgZ2V0Q3VyVXNlck5hbWUoKXsKICAgICAgcmV0dXJuIGxvY2FsUmVhZCgnY3VyVXNlck5hbWUnKTsKICAgIH0sCiAgICBnZXRDdXJPcmdOYW1lKCl7CiAgICAgIHJldHVybiBsb2NhbFJlYWQoJ2N1ck9yZ05hbWUnKTsKICAgIH0sCiAgICBnZXRDdXJNZXJjaGFudE5hbWUoKXsKICAgICAgcmV0dXJuIGxvY2FsUmVhZCgnY3VyTWVyY2hhbnROYW1lJyk7CiAgICB9LAogICAgYWRtaW5PcmdzKCkgewogICAgICBsZXQgbGlzdCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWRtaW5Sb2xlOwogICAgICBjb25zb2xlLmxvZygiYWRtaW5Sb2xlIGxpc3QgPT09PiAiLCBsaXN0KQoKICAgICAgcmV0dXJuIGxpc3Q7CiAgICB9LAogICAgY3VycmVudE9yZygpIHsKICAgICAgbGV0IGRjdCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyT3JnTmFtZTsKICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGN0IHx8ICd7fScpOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvZ291dCgpIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdhZG1pbkxvZ291dCcse3Nlc3Npb25pZDogX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXIudG9rZW4sfSkudGhlbihyZXMgPT4gewogICAgICAgIHJlbW92ZUNvb2tpZXMoKTsKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRBZG1pblJvbGUnLCAnJyk7CiAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyRGVwYXJ0bWVudCcsICcnKTsKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDdXJEZXBhcnRtZW50TmFtZScsICcnKTsKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDdXJFbXBJZCcsICcnKTsKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRMYXN0TG9naW5UaW1lJywgJycpOwogICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1clVzZXJOYW1lJywgJycpOwogICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1ck9yZ0lkJywgJycpOwogICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1ck9yZ05hbWUnLCAnJyk7CiAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyVXNlckNvZGUnLCAnJyk7CiAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0VG9rZW4nLCAnJyk7CiAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyTWVyY2hhbnRJZCcsICcnKTsKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDdXJNZXJjaGFudE5hbWUnLCAnJyk7ICAgIAogICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSgnL2xvZ2luJyk7CiAgICAgICAgX3RoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0sIGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgICAKICAgIH0sCiAgICBhc3luYyBoYW5kbGVDbGljaygpIHsKICAgICAgdGhpcy5sb2dvdXRNb2RhbCA9IHRydWU7CiAgICB9LAogICAgYXN5bmMgY29uZmlybUxvZ291dCgpIHsKICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMubG9nb3V0KCk7CiAgICAgIGNvbnNvbGUubG9nKCJjb25maXJtTG9nb3V0IHJlc3VsdCA9PT0+ICIsIHJlc3VsdCkKICAgICAgdGhpcy5sb2dvdXRNb2RhbCA9IGZhbHNlOwogICAgfSwKICAgIGNhbmNlbExvZ291dCgpIHsKICAgICAgdGhpcy5sb2dvdXRNb2RhbCA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZUNvbGxwYXNlZENoYW5nZSgpIHsKICAgICAgbGV0IHN0YXRlID0gdGhpcy5jb2xsYXBzZWQ7CiAgICAgIHRoaXMuJGVtaXQoJ29uLWNvbGwtY2hhbmdlJywgIXN0YXRlKTsKICAgIH0sCiAgICB0b0VudGVycHJpc2VIb21lKCkgewogICAgICBjb25zb2xlLmxvZygibmF2LWJhcix0b0VudGVycHJpc2VIb21lLi4uLi4uLi4uIik7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ0VudGVycHJpc2VIb21lJyB9KTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgYWRtaW5PcmdzKHZhbCkgewogICAgICBjb25zb2xlLmxvZygiYWRtaW5PcmdzIHZhbCA9PT09PiAiLCB2YWwpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["nav-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"nav-bar.vue","sourceRoot":"src/components/enterprise-main/components/nav-bar","sourcesContent":["<!--  -->\n<template>\n  <div class='nav-bar clearfix'>\n    <div class=\"l\">\n      <ul class=\"icons\">\n        <li class=\"menu\" :class=\"collapsed?'rotate':''\" @click='handleCollpasedChange'></li>\n        <!-- <li class=\"home\" @click='toEnterpriseHome'></li> -->\n      </ul>\n    </div>\n    <div class=\"r\">\n      <ul class=\"icons\">\n        <!-- <li class=\"pic\"></li> -->\n        <li class=\"account\">\n          <Dropdown transfer>\n              <a href=\"javascript:void(0)\">\n                  {{getCurMerchantName}} [{{getCurUserName}}]\n              </a>\n          </Dropdown>\n        </li>\n        <li class=\"logout\">\n          <Poptip\n            confirm\n            transfer\n            title=\"是否退出登录\"\n            trigger=\"hover\"\n            placement=\"bottom\"\n            ok-text=\"是\"\n            cancel-text=\"否\"\n            @on-ok=\"confirmLogout\">\n            <div class=\"bg\"></div>\n          </Poptip>\n        </li>\n\n      </ul>\n    </div>\n    <Modal\n        v-model=\"logoutModal\"\n        title=\"签退确认\"\n        @on-ok=\"confirmLogout\"\n        @on-cancel=\"cancelLogout\">\n        确认是否需要签退？\n    </Modal>\n  </div>\n</template>\n<script>\nimport _ from 'underscore';\nimport { localSave, localRead, setCookiesItem, removeCookies } from '@/libs/util';\nexport default {\n  name: 'NavBar',\n  props: {\n    collapsed: Boolean,\n  },\n  data() {\n    return {\n      logoutModal: false\n    };\n  },\n\n  components: {},\n\n  computed: {\n    getToken() {\n      return localRead('sessionId');;\n    },\n    getCurUserName(){\n      return localRead('curUserName');\n    },\n    getCurOrgName(){\n      return localRead('curOrgName');\n    },\n    getCurMerchantName(){\n      return localRead('curMerchantName');\n    },\n    adminOrgs() {\n      let list = this.$store.state.user.adminRole;\n      console.log(\"adminRole list ===> \", list)\n\n      return list;\n    },\n    currentOrg() {\n      let dct = this.$store.state.user.curOrgName;\n      return JSON.parse(dct || '{}');\n    }\n  },\n\n  methods: {\n    async logout() {\n      let _this = this;\n      _this.$store.dispatch('adminLogout',{sessionid: _this.$store.state.user.token,}).then(res => {\n        removeCookies();\n        _this.$store.commit('setAdminRole', '');\n        _this.$store.commit('setCurDepartment', '');\n        _this.$store.commit('setCurDepartmentName', '');\n        _this.$store.commit('setCurEmpId', '');\n        _this.$store.commit('setLastLoginTime', '');\n        _this.$store.commit('setCurUserName', '');\n        _this.$store.commit('setCurOrgId', '');\n        _this.$store.commit('setCurOrgName', '');\n        _this.$store.commit('setCurUserCode', '');\n        _this.$store.commit('setToken', '');\n        _this.$store.commit('setCurMerchantId', '');\n        _this.$store.commit('setCurMerchantName', '');    \n        _this.$router.replace('/login');\n        _this.$forceUpdate();\n      }, error => {\n        console.log(error);\n      });\n      \n    },\n    async handleClick() {\n      this.logoutModal = true;\n    },\n    async confirmLogout() {\n      let result = await this.logout();\n      console.log(\"confirmLogout result ===> \", result)\n      this.logoutModal = false;\n    },\n    cancelLogout() {\n      this.logoutModal = false;\n    },\n    handleCollpasedChange() {\n      let state = this.collapsed;\n      this.$emit('on-coll-change', !state);\n    },\n    toEnterpriseHome() {\n      console.log(\"nav-bar,toEnterpriseHome.........\");\n      this.$router.push({ name: 'EnterpriseHome' });\n    },\n  },\n  watch: {\n    adminOrgs(val) {\n      console.log(\"adminOrgs val ====> \", val)\n    }\n  }\n}\n</script>\n<style lang='less' scoped>\n@import './nav-bar';\n</style>\n"]}]}