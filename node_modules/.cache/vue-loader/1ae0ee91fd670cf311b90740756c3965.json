{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/platform/tree.vue?vue&type=style&index=0&id=c99f71e0&scoped=true&lang=css&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/platform/tree.vue","mtime":1638355006796},{"path":"/Users/zhang/canteen_manage/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIi4uLy4uL2Fzc2V0cy9sYXl1aS9jc3MvdHJlZS5jc3MiOwpAaW1wb3J0ICIuLi8uLi9hc3NldHMvbGF5dWkvY3NzL2xheXVpLmNzcyI7Cg=="},{"version":3,"sources":["tree.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA","file":"tree.vue","sourceRoot":"src/views/platform","sourcesContent":["<template>\n  <div>\n    <ul class=\"tree-box\" >\n      <li class=\"tree-item\" v-for='(v,i) in tree' :key=\"v.id\">\n        <div class=\"tree-info-box\">\n          <i  class=\"layui-icon\" :class=\"[ tree[i].open ? 'layui-icon-triangle-d' :'layui-icon-triangle-r']\" v-if=\"isFolder(v)\" @click=\"toggle(i)\"></i>\n          <i v-else  class=\"layui-icon\" style=\"padding:8px;\"></i>\n          <!-- <span :data-id=\"i\" class=\"title-name\" @click=\"changeCheck(i)\" >{{v.name}}</span> -->\n          <span @click=\"handleCheck(v)\" >\n            <Checkbox class=\"title-name\" v-model=\"v.sel\" :label=\"v.id\" @on-change=\"changeCheck\" >{{v.name}}+{{v.sel}}+{{v.id}}+{{isSel}}</Checkbox>\n          </span>\n\n        </div>\n        <treeItem v-bind:tree='v.child' :selected='v.sel' v-show=\"v.open\" style=\"margin-left: 20px;\"></treeItem>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport \"@/assets/layui/layui.js\";\nimport _ from \"underscore\";\nexport default {\n  name: \"treeItem\",\n  props: { tree: Array, selected: Boolean },\n  data: function(){\n    return {\n      form: '',\n      layer: \"\",\n      curItem: [],\n      isSel: this.selected,\n    }\n  },\n\n  watch: {\n    'selected' : function(val){\n      this.isSel = val;\n    }\n  },\n\n  mounted() {\n    if (this.tree !== undefined && this.tree) {\n      let that = this;\n      layui.use(['form', 'layer'], function () {\n        that.form = layui.form;\n        that.layer = layui.layer;\n      });\n    }\n  },\n  methods: {\n    toggle: function(i) {\n      this.tree[i].open = !this.tree[i].open;\n      this.$set(this.tree, i, this.tree[i]);\n    },\n    isFolder: function(data) {\n      return data.child && data.child.length\n    },\n    changeCheck(val) {\n      console.log(\"treeItem.changeCheck----isSel>>>>\" + this.curItem[0].sel);\n      // this.isSel = this.curItem[0].sel;\n      this.changeChild(this.curItem, this.curItem[0].sel);\n      console.log(\"treeItem.changeCheck----curitem>>>>\" + JSON.stringify(this.curItem));\n      console.log(\"treeItem.changeCheck----after tree>>>>\" + JSON.stringify(this.tree));\n      this.$forceUpdate();//强制更新\n\n    },\n    handleCheck(item){\n      this.curItem.splice(0,this.curItem.length);//清空数组\n      this.curItem.push(item);\n      console.log(\"treeItem.handleCheck----item>>>>\" + JSON.stringify(this.curItem));\n    },\n\n    changeChild(data, isSel){\n      for (let i = 0; i < data.length; i++) {\n        data[i]['sel'] = isSel;\n        if (data[i].child.length > 0) {\n          this.changeChild(data[i].child, isSel);\n        }\n      }\n\n    },\n\n  },\n\n  created: function() {\n    function _addOpen(data) {\n      for (let i = 0; i < data.length; i++) {\n        data[i]['open'] = false;\n        data[i]['sel'] = false;\n        if (data[i].child.length > 0) {\n          _addOpen(data[i].child);\n        }\n      }\n    }\n    if (this.tree !== undefined && this.tree) {\n      _addOpen(this.tree);\n    }\n  },\n\n\n}\n</script>\n<style scoped>\n@import \"../../assets/layui/css/tree.css\";\n@import \"../../assets/layui/css/layui.css\";\n</style>\n\n"]}]}