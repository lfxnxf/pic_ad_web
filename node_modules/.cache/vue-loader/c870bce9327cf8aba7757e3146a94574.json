{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/common/login/components/form-computer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/common/login/components/form-computer.vue","mtime":1638355006777},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb25maWcgZnJvbSAnQC9jb25maWcnOwppbXBvcnQgeyBzZXRDb29raWVzSXRlbSwgZ2V0UmFuZG9tIH0gZnJvbSAnQC9saWJzL3V0aWwnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudC10aW1lem9uZSc7CmltcG9ydCBzaGExIGZyb20gJ2pzLXNoYTEnOwppbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgbGV0IGNoZWNrQ29kZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09IGZhbHNlKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fov5vooYzkurrmnLrpqozor4EnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGhhc2hLZXk6IGdldFJhbmRvbSgpLAogICAgICBrZXk6ICc2TGVPbHI0WkFBQUFBUDZpMXgtYTczRk8wb0ZsMGYwdVdZMXhVNTRIJywKICAgICAgdmFsaWRDb2RlOiAnJywKICAgIH07CiAgfSwKCiAgY29tcG9uZW50czoge30sCgogIGNvbXB1dGVkOiB7fSwKCiAgbWV0aG9kczogewoKICAgIC8vIOeUqOaIt+S9v+eUqOS6kemXqOaIt+i0puWPt+iupOivgQogICAgaGFuZGxlSWNwTG9naW4oZSkgewogICAgICBsZXQgZG9tYWluID0gZW5jb2RlVVJJQ29tcG9uZW50KGAke2xvY2F0aW9uLnByb3RvY29sfS8vJHtsb2NhdGlvbi5ob3N0fSR7bG9jYXRpb24ucGF0aG5hbWV9YCk7CiAgICAgIGxldCBwYXRoID0gdGhpcy4kcm91dGUucGF0aDsKICAgICAgbGV0IGNsaWVudElkID0gY29uZmlnLm9hdXRoLmljbG91ZC5jbGllbnRJZDsKICAgICAgbGV0IHN0YXRlID0gewogICAgICAgIHBhdGg6IHBhdGgsCiAgICAgICAgdHlwZTogJ2ljbG91ZCcKICAgICAgfTsKICAgICAgLy8gZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgbGV0IGhyZWYgPSBgJHtjb25maWcub2F1dGguaWNsb3VkLnVybH0/Y2xpZW50X2lkPSR7Y2xpZW50SWR9JnJlZGlyZWN0X3VyaT0ke2RvbWFpbn0mcmVzcG9uc2VfdHlwZT1jb2RlJnNjb3BlPWFwaV91c2VyJnN0YXRlPSR7SlNPTi5zdHJpbmdpZnkoc3RhdGUpfWA7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjsKICAgIH0sCgoKICB9LAogIAp9Cg=="},{"version":3,"sources":["form-computer.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA","file":"form-computer.vue","sourceRoot":"src/views/common/login/components","sourcesContent":["<!--  -->\n<template>\n  <Form class=\"text-center\" ref=\"loginForm\" @keydown.enter.native=\"handleSubmit\">\n    <p class=\"font-blod font-size18 text-center margin-bottom-20\">食堂管理系统</p>\n    <Button class=\"icloudportal\" type='success' style=\"margin-top:26%;\" @click=\"handleIcpLogin\">云门户账号登录</Button>\n  </Form>\n</template>\n<script>\nimport config from '@/config';\nimport { setCookiesItem, getRandom } from '@/libs/util';\nimport moment from 'moment-timezone';\nimport sha1 from 'js-sha1';\nimport _ from 'underscore';\n\nexport default {\n  data() {\n    let checkCode = (rule, value, callback) => {\n      if (value == false) {\n        callback(new Error('请进行人机验证'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      hashKey: getRandom(),\n      key: '6LeOlr4ZAAAAAP6i1x-a73FO0oFl0f0uWY1xU54H',\n      validCode: '',\n    };\n  },\n\n  components: {},\n\n  computed: {},\n\n  methods: {\n\n    // 用户使用云门户账号认证\n    handleIcpLogin(e) {\n      let domain = encodeURIComponent(`${location.protocol}//${location.host}${location.pathname}`);\n      let path = this.$route.path;\n      let clientId = config.oauth.icloud.clientId;\n      let state = {\n        path: path,\n        type: 'icloud'\n      };\n      // e.stopPropagation();\n      let href = `${config.oauth.icloud.url}?client_id=${clientId}&redirect_uri=${domain}&response_type=code&scope=api_user&state=${JSON.stringify(state)}`;\n      window.location.href = href;\n    },\n\n\n  },\n  \n}\n</script>\n<style lang='less' scoped>\n@import '../style';\n</style>\n"]}]}