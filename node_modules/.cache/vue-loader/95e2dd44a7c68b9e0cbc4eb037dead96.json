{"remainingRequest":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/工作/pic_ad/src/views/setting/role-setting/components/add-role-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/工作/pic_ad/src/views/setting/role-setting/components/add-role-modal.vue","mtime":1639468524276},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/工作/pic_ad/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/工作/pic_ad/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnRuTG9hZGluZzogZmFsc2UsCiAgICAgIGZvb2RTdGF0dXM6IHRydWUsCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgfSwKICAgICAgcnVsZUZvcm06IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5Lq65ZGY57G75Z6L5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICB9CiAgICB9OwogIH0sCgogIGNvbXBvbmVudHM6IHt9LAoKICBjb21wdXRlZDogewogICAgYWRkTW9kYWw6ewogICAgICBnZXQoKXsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucm9sZS5hZGRNb2RhbDsKICAgICAgfSwKICAgICAgc2V0KHZhbCl7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRBZGRSb2xlTW9kYWwnLCB2YWwpOwogICAgICAgIAogICAgICB9CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewoKICAgIGFkZFJvbGU6IGFzeW5jIGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMuJHJlZnMuYWRkTW9kYWwudmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmJ0bkxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgLy90aGlzLmZvcm0ucHJpY2UgPSBwYXJzZUZsb2F0KHRoaXMuZm9ybS5wcmljZSkudG9GaXhlZCgyKS50b1N0cmluZygpLnJlcGxhY2UoL14tP1xkKy9nLCBtID0+IG0ucmVwbGFjZSgvKD89KD8hXGIpKFxkezN9KSskKS9nLCAiLCIpKQogICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgLi4udGhpcy5mb3JtCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncm9sZUFkZCcsIHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnJldHVybl9jb2RlID09IDApIHsKICAgICAgICAgICAgICB0aGlzLmJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOS6uuWRmOexu+Wei+aIkOWKn++8gScpOwogICAgICAgICAgICAgIGxldCBhcmcgPSB7CiAgICAgICAgICAgICAgICBtZXJjaGFudF9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJNZXJjaGFudElkLAogICAgICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgICAgIHBhZ2Vfc2l6ZTogNTAKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdyb2xlTGlzdCcsIGFyZyk7CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRBZGRSb2xlTW9kYWwnLCBmYWxzZSk7CiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hZGRNb2RhbC5yZXNldEZpZWxkcygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChlcnI9PnsKICAgICAgICAgICAgdGhpcy5idG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["add-role-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-role-modal.vue","sourceRoot":"src/views/setting/role-setting/components","sourcesContent":["<!-- -->\n<!-- 新增人员类型信息 -->\n<template>\n  <Modal\n    v-model=\"addModal\"\n    title=\"新增人员类型\"\n    :footer-hide=\"true\"\n    width=\"420px\">\n    <Form :model=\"form\" :label-width=\"90\" ref=\"addModal\" :rules=\"ruleForm\">\n      <FormItem label=\"人员类型\" prop=\"name\">\n        <Input v-model=\"form.name\" style=\"width: 200px\" placeholder=\"请输入人员类型名称\" />\n      </FormItem>\n      <div class=\"text-center margin-bottom-20 margin-top-30\">\n        <Button class=\"margin-right-20\" @click=\"$store.commit('setAddRoleModal', false)\">取消</Button>\n        <Button type=\"primary\" :loading=\"btnLoading\" @click=\"addRole\">确定</Button>\n      </div>\n    </Form>\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      btnLoading: false,\n      foodStatus: true,\n      form: {\n        name: '',\n      },\n      ruleForm: {\n        name: [\n          { required: true, message: '请输入人员类型名称', trigger: 'blur' }\n        ],\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    addModal:{\n      get(){\n        return this.$store.state.role.addModal;\n      },\n      set(val){\n        this.$store.commit('setAddRoleModal', val);\n        \n      }\n    }\n  },\n\n  methods: {\n\n    addRole: async function(){\n      this.$refs.addModal.validate((valid) => {\n        if (valid) {\n          this.btnLoading = true;\n          //this.form.price = parseFloat(this.form.price).toFixed(2).toString().replace(/^-?\\d+/g, m => m.replace(/(?=(?!\\b)(\\d{3})+$)/g, \",\"))\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            ...this.form\n          }\n          this.$store.dispatch('roleAdd', params).then(res => {\n            if (res.return_code == 0) {\n              this.btnLoading = false;\n              this.$Message.success('添加人员类型成功！');\n              let arg = {\n                merchant_id: this.$store.state.user.curMerchantId,\n                page: 1,\n                page_size: 50\n              };\n              this.$store.dispatch('roleList', arg);\n              this.$store.commit('setAddRoleModal', false);\n              this.$refs.addModal.resetFields();\n            }\n          }).catch(err=>{\n            this.btnLoading = false;\n          });\n        }\n      });\n    },\n  }\n};\n</script>\n<style lang='less' scoped>\n  @import '../style';\n</style>\n"]}]}