{"remainingRequest":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhang/canteen_manage/src/views/staff-management/dining-staff/components/personal-deposit-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhang/canteen_manage/src/views/staff-management/dining-staff/components/personal-deposit-modal.vue","mtime":1640246682242},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhang/canteen_manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhang/canteen_manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gInVuZGVyc2NvcmUiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBiYWxhbmNlOiAwLAogICAgICBhdmFpbGFibGVfYmFsYW5jZTogJzAuMDAnLAogICAgICB0YWJzOiAnZGVwb3NpdCcsCiAgICAgIGZvcm06IHsKICAgICAgICBhbW91bnQ6ICcnLAogICAgICAgIHJlbWFyazogJycKICAgICAgfSwKICAgICAgd2l0aGRyYXdGb3JtOiB7CiAgICAgICAgYW1vdW50OiAnJywKICAgICAgICByZW1hcms6ICcnCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsb2FkaW5nMjogZmFsc2UsCiAgICAgIHJ1bGVEZXBvc2l0Rm9ybTogewogICAgICAgIGFtb3VudDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSxtZXNzYWdlOiAn6K+36L6T5YWl5YWF5YC86YeR6aKdJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICB9LAogICAgICBydWxlV2l0aGRyYXdGb3JtOiB7CiAgICAgICAgYW1vdW50OiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6ICfor7fovpPlhaXmj5DnjrDph5Hpop0nLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CiAgICAgICAgXSwKICAgICAgfQogICAgfTsKICB9LAoKICBjb21wb25lbnRzOiB7fSwKCiAgY29tcHV0ZWQ6IHsKICAgIHBlcnNvbmFsRGVwb3NpdE1vZGFsOnsKICAgICAgZ2V0KCl7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIucGVyc29uYWxEZXBvc2l0TW9kYWw7CiAgICAgIH0sCiAgICAgIHNldCh2YWwpewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UGVyc29uYUxEZXBvc2l0TW9kYWwnLCB2YWwpOwogICAgICB9CiAgICB9LAogICAgY3VyVXNlckVkaXREYXRhKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jdXJVc2VyRWRpdERhdGE7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewoKICAgIC8v5YWF5YC86YeR6aKdaW5wdXQKICAgIHZlcmlmeURlYml0KGUpewogICAgICAvLyB0aGlzLmZvcm0uYW1vdW50ID0gZTsKICAgICAgLy/lj6rog73ovpPlhaXkuKTkuKrlsI/mlbAKICAgICAgLy8gdGhpcy5mb3JtLmFtb3VudCA9IHRoaXMuZm9ybS5hbW91bnQucmVwbGFjZSgvXigpKihcZCspXC4oXGRcZCkuKiQvLCAiJDEkMi4kMyIpOwogICAgICBlLnRhcmdldC52YWx1ZSA9IChlLnRhcmdldC52YWx1ZS5tYXRjaCgvXlxkKihcLj9cZHswLDF9KS9nKVswXSkgfHwgbnVsbAogICAgfSwKICAgIC8v5p+l6K+i5ZGY5bel6ZKx5YyF6LSm5oi35L2Z6aKd5L+h5oGv77yM6YCa6L+H55So5oi35Lit5b+D5p+l6K+iCiAgICBxdWVyeVVzZXJXYWxsZXRCYWxhbmNlOiBhc3luYyBmdW5jdGlvbih1c2VyY29kZSkgewoKICAgICAgdGhpcy5hdmFpbGFibGVfYmFsYW5jZSA9ICcwLjAwJzsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBzZXNzaW9uaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudG9rZW4sCiAgICAgICAgdXNlcmNvZGU6IHVzZXJjb2RlLAogICAgICAgIG1lcmNoYW50X2NvZGU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRVc2VyQ29kZSwKICAgICAgfTsKCiAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlcldhbGxldEJhbGFuY2UnLCBwYXJhbXMpLmNhdGNoKGVyciA9PiBlcnIpOwogICAgICBsZXQgd2FsbGV0SW5mbyA9IF8uZmluZChyZXMuaW5mbywgY3VyID0+IHsKICAgICAgICByZXR1cm4gY3VyLm1lcmNoYW50X2NvZGUgPT0gcGFyYW1zLm1lcmNoYW50X2NvZGU7CiAgICAgIH0pCgogICAgICBpZiAod2FsbGV0SW5mbykKICAgICAgewogICAgICAgIHRoaXMuYmFsYW5jZSA9IHdhbGxldEluZm8uYmFsYW5jZTsKICAgICAgICB0aGlzLmF2YWlsYWJsZV9iYWxhbmNlID0gKHdhbGxldEluZm8uYXZhaWxhYmxlX2JhbGFuY2UgLyAxMDApLnRvRml4ZWQoMik7CiAgICAgIH0KICAgIH0sCgogICAgLy8gLy/mn6Xor6LlkZjlt6XpkrHljIXotKbmiLfkvZnpop3kv6Hmga/vvIzpgJrov4fpo5/loILlkI7lj7Dmn6Xor6IKICAgIC8vIHF1ZXJ5VXNlcldhbGxldEJhbGFuY2UodXNlcmNvZGUpIHsKICAgIC8vICAgaWYgKHVzZXJjb2RlKXsKICAgIC8vICAgICBsZXQgcGFyYW1zID0gewogICAgLy8gICAgICAgdXNlcmNvZGU6IHVzZXJjb2RlLAogICAgLy8gICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgIC8vICAgICB9OwogICAgLy8gICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyRGV0YWlsJywgcGFyYW1zKS50aGVuKHJlcz0+ewogICAgLy8gICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdnZXRVc2VyRWRpdERhdGEnLCByZXMuZGF0YSk7CiAgICAvLyAgICAgICAvLyBsZXQgaW5kZXggPSBfLmZpbmRJbmRleCh0aGlzLnRhYmxlRGF0YSwgeyB1c2VyY29kZSA6IHVzZXJjb2RlIH0pOwogICAgLy8gICAgICAgLy8gdGhpcy5hdmFpbGFibGVfYmFsYW5jZSA9IHJlcy5kYXRhLmJhbGFuY2U7CiAgICAvLyAgICAgICAvLyBjb25zb2xlLmxvZygn6ZKx5YyF5L2Z6aKdOicrIHJlcy5kYXRhLmJhbGFuY2UgKyAiLCBpbmRleD0iICsgaW5kZXggKyAiLCB1c2VyY29kZToiICsgdGhpcy50YWJsZURhdGFbaW5kZXhdWyd1c2VyY29kZSddKTsKICAgIC8vICAgICB9KTsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIOehruiupOWFheWAvAogICAgaGFuZGxlRGVwb3NpdCgpIHsKICAgICAgdGhpcy4kcmVmcy5wZXJEZXBvc2l0Rm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZih2YWxpZCl7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgLy8gYW1vdW50OiBwYXJzZUZsb2F0KHRoaXMuZm9ybS5hbW91bnQpLnRvRml4ZWQoMikudG9TdHJpbmcoKS5yZXBsYWNlKC9eLT9cZCsvZywgbSA9PiBtLnJlcGxhY2UoLyg/PSg/IVxiKShcZHszfSkrJCkvZywgIiwiKSksCiAgICAgICAgICAgIGFtb3VudDogdGhpcy5mb3JtLmFtb3VudCwKICAgICAgICAgICAgcmVtYXJrOiB0aGlzLmZvcm0ucmVtYXJrLAogICAgICAgICAgICB1c2VyY29kZTogdGhpcy5jdXJVc2VyRWRpdERhdGEudXNlcmNvZGUsCiAgICAgICAgICAgIG9wZXJhdG9yOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1clVzZXJDb2RlLAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyRGVwb3NpdCcsIHBhcmFtcykudGhlbihyZXM9PnsKICAgICAgICAgICAgaWYocmVzLnJldHVybl9jb2RlID09IDApewogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIC8vIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygn5o+Q5Lqk5oiQ5Yqf77yB6K+35YiwPOihpeaJo+S4juWFheWAvOiusOW9lT7kuK3mn6XnnIvlhYXlgLzmmK/lkKbmiJDlip/vvIEnKTsKICAgICAgICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgICAgICBhbW91bnQ6ICcnLAogICAgICAgICAgICAgICAgcmVtYXJrOiAnJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICAgICAgdGhpcy5xdWVyeVVzZXJXYWxsZXRCYWxhbmNlKHRoaXMuY3VyVXNlckVkaXREYXRhLnVzZXJjb2RlKTsKICAgICAgICAgICAgICB9LDUwMCApOwoKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWxlY3Rpb24nLCAwLCB0aGlzLmN1clVzZXJFZGl0RGF0YS51c2VyY29kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDnoa7orqTmj5DnjrAKICAgIGhhbmRsZVdpdGhkcmF3KCl7CiAgICAgIHRoaXMuJHJlZnMud2l0aGRyYXdGb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmKHZhbGlkKXsKICAgICAgICAgIHRoaXMubG9hZGluZzIgPSB0cnVlOwogICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgbWVyY2hhbnRfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY3VyTWVyY2hhbnRJZCwKICAgICAgICAgICAgYW1vdW50OiB0aGlzLndpdGhkcmF3Rm9ybS5hbW91bnQsCiAgICAgICAgICAgIHVzZXJjb2RlOiB0aGlzLmN1clVzZXJFZGl0RGF0YS51c2VyY29kZSwKICAgICAgICAgICAgcmVtYXJrOiB0aGlzLndpdGhkcmF3Rm9ybS5yZW1hcmssCiAgICAgICAgICAgIG9wZXJhdG9yOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmN1clVzZXJDb2RlLAogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3dpdGhkcmF3JywgcGFyYW1zKS50aGVuKHJlcz0+ewogICAgICAgICAgICBpZihyZXMucmV0dXJuX2NvZGUgPT0gMCl7CiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nMiA9IGZhbHNlOwogICAgICAgICAgICAgIC8vIHRoaXMucXVlcnlVc2VyV2FsbGV0QmFsYW5jZSh0aGlzLmN1clVzZXJFZGl0RGF0YS51c2VyY29kZSkuY2F0Y2goZXJyID0+IGVycik7CgogICAgICAgICAgICAgIHRoaXMud2l0aGRyYXdGb3JtID0gewogICAgICAgICAgICAgICAgYW1vdW50OiAnJywKICAgICAgICAgICAgICAgIHJlbWFyazogJycKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICAgICAgdGhpcy5xdWVyeVVzZXJXYWxsZXRCYWxhbmNlKHRoaXMuY3VyVXNlckVkaXREYXRhLnVzZXJjb2RlKTsKICAgICAgICAgICAgICB9LDUwMCApOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbicsIDAsIHRoaXMuY3VyVXNlckVkaXREYXRhLnVzZXJjb2RlKTsKICAgICAgICAgICAgICAvLyB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFdpdGhkcmF3U3VjTW9kYWwnLCB0cnVlKTsKICAgICAgICAgICAgICAvLyB0aGlzLiRzdG9yZS5jb21taXQoJ0NVUlJFTlRfQklMTCcsIHJlcy5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nMiA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIC8v54K55Ye75YWo6YOo5o+Q546wCiAgICBoYW5kbGVBbGxBbW91bnQoKXsKICAgICAgdGhpcy53aXRoZHJhd0Zvcm0uYW1vdW50ID0gdGhpcy5jdXJVc2VyRWRpdERhdGEuYmFsYW5jZTsKICAgIH0KICB9LAoKICB3YXRjaDp7CiAgICBwZXJzb25hbERlcG9zaXRNb2RhbCh2YWwpewogICAgICBpZih2YWwpewogICAgICAgIHRoaXMucXVlcnlVc2VyV2FsbGV0QmFsYW5jZSh0aGlzLmN1clVzZXJFZGl0RGF0YS51c2VyY29kZSk7CiAgICAgIH1lbHNlewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMubG9hZGluZzIgPSBmYWxzZTsKICAgICAgICB0aGlzLnRhYnMgPSAnZGVwb3NpdCc7CgoKICAgICAgfQogICAgfQogIH0KCn0KCg=="},{"version":3,"sources":["personal-deposit-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA","file":"personal-deposit-modal.vue","sourceRoot":"src/views/staff-management/dining-staff/components","sourcesContent":["<!--  -->\n<template>\n  <Modal v-model=\"personalDepositModal\" width=\"600px\" :footer-hide=\"true\" title=\"充值提现\" >\n    <Row>\n      <Col span=\"8\" class=\"border-right\">\n        <h1 class=\"text-center\" style=\"margin-top:70px\">{{curUserEditData.name}}</h1>\n        <p class=\"text-center margin-bottom-15 margin-top-15\">余额\n        </p>\n        <p class=\"orange-color text-center font-size18\">￥{{ available_balance }}\n          <Icon class=\"margin-left-5 blue-color font-size18 pointer\" type=\"md-refresh\" @click=\"queryUserWalletBalance(curUserEditData.usercode)\"/>\n        </p>\n      </Col>\n      <Col span=\"16\" class=\"tabs-style\">\n        <Tabs v-model=\"tabs\" type=\"card\">\n          <TabPane label=\"充值\" name=\"deposit\">\n            <Form class=\"padding-20\" :model=\"form\" ref=\"perDepositForm\" :rules=\"ruleDepositForm\" :label-width=\"80\">\n              <FormItem label=\"充值金额\" prop=\"amount\">\n                <Input type=\"number\" v-model=\"form.amount\" placeholder=\"请输入充值金额\" @on-keydown=\"verifyDebit\"/>\n              </FormItem>\n              <FormItem label=\"交易备注\" >\n                <Input type=\"text\" v-model=\"form.remark\" maxlength=\"50\" placeholder=\"请输入备注（50字以内）\" />\n              </FormItem>\n              <FormItem class=\"margin-bottom-5\">\n                <Button type=\"primary\" :loading=\"loading\" @click=\"handleDeposit\">确认充值</Button>\n              </FormItem>\n            </Form>\n          </TabPane>\n          <TabPane label=\"提现\" name=\"withdraw\">\n            <Form class=\"padding-20\" :model=\"withdrawForm\" ref=\"withdrawForm\" :rules=\"ruleWithdrawForm\" :label-width=\"80\">\n              <FormItem label=\"提现金额\" prop=\"amount\" style=\"position: relative;\">\n                <Input type=\"number\" v-model=\"withdrawForm.amount\" placeholder=\"请输入提现金额\" @on-keydown=\"verifyDebit\"/>\n                <span class=\"all_amount\" @click=\"handleAllAmount\">全部提现</span>\n              </FormItem>\n              <FormItem label=\"交易备注\" >\n                <Input type=\"text\" v-model=\"withdrawForm.remark\" maxlength=\"50\" placeholder=\"请输入备注（50字以内）\" />\n              </FormItem>\n              <FormItem class=\"margin-bottom-5\">\n                <Button type=\"primary\" :loading=\"loading2\" @click=\"handleWithdraw\">确认提现</Button>\n              </FormItem>\n            </Form>\n          </TabPane>\n        </Tabs>\n\n      </Col>\n    </Row>\n  </Modal>\n</template>\n\n<script>\nimport _ from \"underscore\";\nexport default {\n  data () {\n    return {\n      balance: 0,\n      available_balance: '0.00',\n      tabs: 'deposit',\n      form: {\n        amount: '',\n        remark: ''\n      },\n      withdrawForm: {\n        amount: '',\n        remark: ''\n      },\n      loading: false,\n      loading2: false,\n      ruleDepositForm: {\n        amount: [\n          { required: true,message: '请输入充值金额', trigger: 'blur' }\n        ],\n      },\n      ruleWithdrawForm: {\n        amount: [\n          { required: true,message: '请输入提现金额', trigger: 'change' }\n        ],\n      }\n    };\n  },\n\n  components: {},\n\n  computed: {\n    personalDepositModal:{\n      get(){\n        return this.$store.state.user.personalDepositModal;\n      },\n      set(val){\n        this.$store.commit('setPersonaLDepositModal', val);\n      }\n    },\n    curUserEditData() {\n      return this.$store.state.user.curUserEditData;\n    }\n  },\n\n  methods: {\n\n    //充值金额input\n    verifyDebit(e){\n      // this.form.amount = e;\n      //只能输入两个小数\n      // this.form.amount = this.form.amount.replace(/^()*(\\d+)\\.(\\d\\d).*$/, \"$1$2.$3\");\n      e.target.value = (e.target.value.match(/^\\d*(\\.?\\d{0,1})/g)[0]) || null\n    },\n    //查询员工钱包账户余额信息，通过用户中心查询\n    queryUserWalletBalance: async function(usercode) {\n\n      this.available_balance = '0.00';\n      let params = {\n        sessionid: this.$store.state.user.token,\n        usercode: usercode,\n        merchant_code: this.$store.state.user.curMerchantUserCode,\n      };\n\n      let res = await this.$store.dispatch('userWalletBalance', params).catch(err => err);\n      let walletInfo = _.find(res.info, cur => {\n        return cur.merchant_code == params.merchant_code;\n      })\n\n      if (walletInfo)\n      {\n        this.balance = walletInfo.balance;\n        this.available_balance = (walletInfo.available_balance / 100).toFixed(2);\n      }\n    },\n\n    // //查询员工钱包账户余额信息，通过食堂后台查询\n    // queryUserWalletBalance(usercode) {\n    //   if (usercode){\n    //     let params = {\n    //       usercode: usercode,\n    //       merchant_id: this.$store.state.user.curMerchantId,\n    //     };\n    //     this.$store.dispatch('userDetail', params).then(res=>{\n    //       this.$store.commit('getUserEditData', res.data);\n    //       // let index = _.findIndex(this.tableData, { usercode : usercode });\n    //       // this.available_balance = res.data.balance;\n    //       // console.log('钱包余额:'+ res.data.balance + \", index=\" + index + \", usercode:\" + this.tableData[index]['usercode']);\n    //     });\n    //   }\n    // },\n    // 确认充值\n    handleDeposit() {\n      this.$refs.perDepositForm.validate((valid) => {\n        if(valid){\n          this.loading = true;\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            // amount: parseFloat(this.form.amount).toFixed(2).toString().replace(/^-?\\d+/g, m => m.replace(/(?=(?!\\b)(\\d{3})+$)/g, \",\")),\n            amount: this.form.amount,\n            remark: this.form.remark,\n            usercode: this.curUserEditData.usercode,\n            operator: this.$store.state.user.curUserCode,\n          };\n          this.$store.dispatch('userDeposit', params).then(res=>{\n            if(res.return_code == 0){\n              this.loading = false;\n              // this.$Message.success('提交成功！请到<补扣与充值记录>中查看充值是否成功！');\n              this.form = {\n                amount: '',\n                remark: ''\n              };\n              setTimeout(()=>{\n                this.queryUserWalletBalance(this.curUserEditData.usercode);\n              },500 );\n\n              this.$emit('selection', 0, this.curUserEditData.usercode);\n            }\n          }).catch(err => {\n            this.loading = false;\n          });\n        }\n      })\n    },\n\n    // 确认提现\n    handleWithdraw(){\n      this.$refs.withdrawForm.validate((valid) => {\n        if(valid){\n          this.loading2 = true;\n          let params = {\n            merchant_id: this.$store.state.user.curMerchantId,\n            amount: this.withdrawForm.amount,\n            usercode: this.curUserEditData.usercode,\n            remark: this.withdrawForm.remark,\n            operator: this.$store.state.user.curUserCode,\n          }\n          this.$store.dispatch('withdraw', params).then(res=>{\n            if(res.return_code == 0){\n              this.loading2 = false;\n              // this.queryUserWalletBalance(this.curUserEditData.usercode).catch(err => err);\n\n              this.withdrawForm = {\n                amount: '',\n                remark: ''\n              }\n              setTimeout(()=>{\n                this.queryUserWalletBalance(this.curUserEditData.usercode);\n              },500 );\n              this.$emit('selection', 0, this.curUserEditData.usercode);\n              // this.$store.commit('setWithdrawSucModal', true);\n              // this.$store.commit('CURRENT_BILL', res.data);\n            }\n          }).catch(err => {\n            this.loading2 = false;\n          });\n        }\n      })\n    },\n    //点击全部提现\n    handleAllAmount(){\n      this.withdrawForm.amount = this.curUserEditData.balance;\n    }\n  },\n\n  watch:{\n    personalDepositModal(val){\n      if(val){\n        this.queryUserWalletBalance(this.curUserEditData.usercode);\n      }else{\n        this.loading = false;\n        this.loading2 = false;\n        this.tabs = 'deposit';\n\n\n      }\n    }\n  }\n\n}\n\n</script>\n<style lang='less' scoped>\n\n  /deep/.ivu-modal-body{\n     padding: 0;\n     .ivu-tabs-nav-container{\n       padding-left: 16px;\n        padding-top: 16px;\n     }\n  }\n  /deep/.ivu-input-number{\n    width: 100%;\n  }\n  .tabs-style{\n    /deep/.ivu-tabs-content {\n      margin-top: -16px;\n      .ivu-tabs-tabpane {\n        background: #fff;\n        padding: 16px;\n      }\n    }\n    /deep/.ivu-tabs.ivu-tabs-card {\n      .ivu-tabs-bar{\n        .ivu-tabs-nav-container{\n          height: auto;\n        }\n        .ivu-tabs-tab{\n          border-color: transparent;\n        }\n        .ivu-tabs-tab-active{\n          border-color: #2d8cf0;\n\n        }\n      }\n    }\n    .all_amount{\n      position: absolute;\n      right: 0;\n      top: 30px;\n      font-size: 12px;\n      color: #228eca;\n      cursor: pointer;\n    }\n  }\n</style>\n"]}]}